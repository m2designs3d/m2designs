(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9252],{74180:function(e,l,t){"use strict";t.d(l,{Z:function(){return g}});var n=t(57437),o=t(53436),s=t(42715),r=t.n(s),i=t(71491),a=t.n(i),d=t(78062),c=t(51854),u=t(3916),p=t(14438);class m{constructor(){this.doCloseWindow=()=>{this.windowOpen&&!this.windowOpen.closed&&(this.windowOpen.close(),this.windowOpen=null)},this.handleCallback=(e,l)=>{if(e){let t=e.error;if(!u.Z.isNullOrEmpty(t)){t=e.error_description?e.error_description:t,p.Am.error(t||u.Z.errorDefault);return}let n=e.code,o=e.state;if(!u.Z.isNullOrEmpty(n)&&!u.Z.isNullOrEmpty(o))return l(n)}l(null)},this.openOauth=(e,l,t,n,o,s,i)=>{var p,m;this.doCloseWindow();let x=window.location.protocol+"//"+window.location.hostname,v=window.location.port;u.Z.isNullOrEmpty(v)||(x+=":"+v);let h=c.Z();this.randomS=h+"__"+x;let f="https://abacus.ai";f+="/oauth/callback";let g=s||e+"?client_id="+l+"&redirect_uri="+u.Z.encodeQueryParam(f)+"&"+(i||"scope")+"="+t.join("%20")+"&state="+u.Z.encodeQueryParam(this.randomS)+(n?"&"+n.join("&"):"");null!=this.onMessage&&window.removeEventListener("message",this.onMessage),this.onMessage=e=>{var l,t;r()(null===(l=e.data)||void 0===l?void 0:l.query)&&window.__oauthCallbackPost(null===(t=e.data)||void 0===t?void 0:t.query)},window.addEventListener("message",this.onMessage),window.__oauthCallbackPost=e=>{if(this.authQueryParam===e)return;a()(e,"?")&&(e=e.substring(1));let l=d.Z.parse(e);this.handleCallback(l,o),this.doCloseWindow(),this.authQueryParam=e};let b=void 0!=window.screenLeft?window.screenLeft:window.screenX,w=void 0!=window.screenTop?window.screenTop:window.screenY,j=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,N=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,y=j/window.screen.availWidth;this.windowOpen=window.open(g,"_blank","toolbar=0,location=0,menubar=0,height=600,width=600,top="+((N-600)/2/y+w)+",left="+((j-600)/2/y+b)),null===this||void 0===this||null===(m=this.windowOpen)||void 0===m||null===(p=m.focus)||void 0===p||p.call(m)}}}var x=t(48547),v=t(25614),h=t.n(v),f=t(2265);function g(e){let{appConnector:l,closePopover:s,refreshAppConectors:r,handleOpenGoogleDrivePicker:i,handleOpenOneDrivePicker:a,isAgentConnector:d,handleAgentConnectorSuccess:c,buttonComponent:v,agentInfo:g}=e,[b,w]=(0,f.useState)(!1),j=(e,l)=>{null!=l&&(0,o.Y$l)({endpoint:e,obj:l}).then(e=>{if(!(null==e?void 0:e.success)||(null==e?void 0:e.error))p.Am.error((null==e?void 0:e.error)||u.Z.errorDefault);else{var t,n,o,m,x,v;null==s||s(),r(),d?(null==e?void 0:null===(x=e.result)||void 0===x?void 0:x.error)?p.Am.error((null==e?void 0:null===(v=e.result)||void 0===v?void 0:v.error)||u.Z.errorDefault):null==c||c(l):(null==e?void 0:null===(n=e.result)||void 0===n?void 0:null===(t=n.service)||void 0===t?void 0:t.toUpperCase())==="GOOGLEDRIVEUSER"?null==i||i():(null==e?void 0:null===(m=e.result)||void 0===m?void 0:null===(o=m.service)||void 0===o?void 0:o.toUpperCase())==="ONEDRIVE"&&(null==a||a())}}).catch(e=>{p.Am.error(e||u.Z.errorDefault)}).finally(()=>{})},N=async()=>{var e,t,n;let s=null==g?void 0:null===(e=g.agentConfig)||void 0===e?void 0:e.AGENT_CONNECTORS;((null==s?void 0:s.hasOwnProperty("USER_LEVEL_CONNECTORS"))||(null==s?void 0:s.hasOwnProperty("ORG_LEVEL_CONNECTORS")))&&(s=null==s?void 0:s.USER_LEVEL_CONNECTORS);let r=null==s?void 0:s[(null==l?void 0:l.service)||""],i=await (0,o.S9W)({service:l.service});r=h()(r)&&(null==r?void 0:r.length)>0?r:null;let a=(null===(t=l.oauthConfig.userLevel)||void 0===t?void 0:t.scopes)||l.oauthConfig.scopes;r=(r=(r=r||a).concat((null==i?void 0:i.result)||[])).filter((e,l)=>r.indexOf(e)===l),w(!0),(0,o.pUh)({service:null===(n=l.service)||void 0===n?void 0:n.toUpperCase()}).then(e=>{if(!(null==e?void 0:e.success)||(null==e?void 0:e.error))p.Am.error((null==e?void 0:e.error)||u.Z.errorDefault);else{var t,n,o,s;let i=null==e?void 0:null===(t=e.result)||void 0===t?void 0:t.find(e=>"oAuthButton"===e.type);if(i){let e=(null===(n=l.oauthConfig.userLevel)||void 0===n?void 0:n.clientId)||l.oauthConfig.clientId;(null===(o=window.location.hostname)||void 0===o?void 0:o.toLowerCase().includes("preprod"))&&l.oauthConfig.preprodClientId&&(e=l.oauthConfig.preprodClientId);let t=(null===(s=l.oauthConfig.userLevel)||void 0===s?void 0:s.extras)||l.oauthConfig.extras;new m().openOauth(l.oauthConfig.url,e,r,t,e=>{if(e){let t={[i.value]:e,scopes:r,isUserLevel:!0};j(l.configurationEndpoint,t)}},null,l.oauthConfig.userScopesParam)}}}).catch(e=>{p.Am.error(e||u.Z.errorDefault)}).finally(()=>{w(!1)})};return(0,n.jsx)("div",{className:!v&&"p-[4px]",children:(0,n.jsxs)("div",{className:"flex justify-between items-center option gap-[12px] ".concat(v?"":"px-[8px] rounded-md hover:bg-bwleftblue/[0.2]"," text-darkcolor ").concat(d?"cursor-pointer bg-darkcolor/[0.1] hover:bg-darkcolor/[0.2] !px-[15px]":""),onClick:N,children:[v||(0,n.jsxs)("div",{className:"flex items-center gap-[10px]",children:[(0,n.jsx)("img",{alt:l.name,className:"w-[20px] h-[20px]",src:"https://abacus.ai/static/imgs/".concat(l.logo)}),(0,n.jsx)("span",{children:l.name})]}),b&&(0,n.jsx)(x.G,{spin:!0,icon:t(39847).QD,transform:{size:17}})]})})}},89475:function(e,l,t){"use strict";t.d(l,{i:function(){return b}});var n,o,s=t(57437),r=t(56210),i=t(2265),a=t(9290),d=t(86520),c=t(53436),u=t(14438),p=t(49070),m=t(48547),x=t(14301),v=t(57391),h=t(5529),f=t(3916),g=t(56095);(n=o||(o={})).STARTING="STARTING",n.RUNNING="RUNNING",n.STOPPING="STOPPING",n.STOPPED="STOPPED";let b="AGENT_CONTROLLER";function w(e){var l,n,o,r,i;let{agentInfo:a,userLevelConnectors:d,agentStatus:c,statusIcon:u,actionButton:x}=e,v=null==a?void 0:null===(l=a.agentConfig)||void 0===l?void 0:l.DESCRIPTION,h=null==a?void 0:null===(o=a.workflowGraph)||void 0===o?void 0:null===(n=o.nodes)||void 0===n?void 0:n.find(e=>{var l;return e.name==(null==a?void 0:null===(l=a.workflowGraph)||void 0===l?void 0:l.primary_start_node)});null==h||null===(r=h.template_metadata)||void 0===r||r.configs;let g=(null==h?void 0:h.trigger_config)||{},[b,w]=(0,p.PB)("appId");d=null!==(i=null==d?void 0:d.USER_LEVEL_CONNECTORS)&&void 0!==i?i:d;let[j,N]=(0,p.PB)("agentPreviewMode");return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)("div",{className:"flex flex-col gap-4 bg-white/50 dark:bg-gray-800/50 rounded-lg p-6 shadow-sm",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[b!==f.Z.testAiAgentAppId&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-darkcolor dark:text-gray-200",children:"Agent Status:"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[u,(0,s.jsx)("span",{className:"text-sm font-medium dark:text-gray-300",children:c})]})]}),(0,s.jsx)("div",{children:x}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:["RUNNING"===c&&(0,s.jsx)("span",{children:"The agent is currently active, please use the stop button to pause the agent."}),"STOPPED"===c&&b!==f.Z.testAiAgentAppId&&!j&&(0,s.jsx)("span",{children:"The agent is currently paused, please use the start button to resume the agent."}),"STOPPED"===c&&(b===f.Z.testAiAgentAppId||j)&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{children:"To run the agent once, please use the run button."}),(0,s.jsx)("div",{style:{color:"#FF5733"},children:"This is debug mode, to run the agent periodically please use a published agent."})]})]})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-6 bg-white/50 dark:bg-gray-800/50 rounded-lg p-6 shadow-sm",children:[(0,s.jsx)("div",{className:"flex flex-col gap-2",children:(0,s.jsxs)("h3",{className:"text-lg font-semibold text-darkcolor dark:text-gray-200",children:["Agent Configuration ",b===f.Z.testAiAgentAppId?"(Test Mode)":""]})}),v&&(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-darkcolor dark:text-gray-200",children:[(0,s.jsx)(m.G,{icon:t(85374).sq,className:"text-primary"}),(0,s.jsx)("h4",{className:"font-medium",children:"Description"})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"text-medium text-darkcolor dark:text-gray-300 leading-relaxed",children:v})})]}),Object.keys(d||{}).length>0&&(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-darkcolor dark:text-gray-200",children:[(0,s.jsx)(m.G,{icon:t(13306).os,className:"text-primary"}),(0,s.jsx)("h4",{className:"font-medium",children:"Configured Connectors"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-3 pl-6",children:Object.keys(d||{}).map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2 bg-white dark:bg-gray-700 rounded-md hover:bg-white/70 dark:hover:bg-gray-600 transition-colors shadow-sm",children:[e.toLowerCase().includes("gmail")&&(0,s.jsx)(m.G,{icon:t(70064).FU,className:"text-primary"}),e.toLowerCase().includes("slack")&&(0,s.jsx)(m.G,{icon:t(38489).Sr,className:"text-primary"}),e.toLowerCase().includes("teams")&&(0,s.jsx)(m.G,{icon:t(9894).hV,className:"text-primary"}),e.toLowerCase().includes("jira")&&(0,s.jsx)(m.G,{icon:t(99942).dc,className:"text-primary"}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-sm font-medium dark:text-gray-200",children:e.toLowerCase().includes("gmail")?"Gmail":e.toLowerCase().includes("slack")?"Slack":e.toLowerCase().includes("teams")?"Teams":e.toLowerCase().includes("jira")?"Jira":e}),d[e]&&(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:d[e].join(", ")})]})]},e))})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-darkcolor dark:text-gray-200",children:[(0,s.jsx)(m.G,{icon:t(48763).bp,className:"text-primary"}),(0,s.jsx)("h4",{className:"font-medium",children:"Workflow Details"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 pl-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium dark:text-gray-300",children:"Primary Node:"}),(0,s.jsx)("span",{className:"text-sm dark:text-gray-400",children:h.name})]}),b!==f.Z.testAiAgentAppId&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium dark:text-gray-300",children:"Wait time between two consecutive runs:"}),(0,s.jsxs)("span",{className:"text-sm dark:text-gray-400",children:[g.sleep_time||"N/A","s"]})]})]})]})]})]})}l.Z=i.memo(function(e){var l,n;let{isMobile:o,isAndroid:j,isIOS:N,isSelfServe:y,deploymentId:C,agentInfo:k,validAppConnectors:I,appId:_}=e||{},A=(0,i.useRef)(null),[S,E]=i.useState(!1),{listOfConversationsData:T}=(0,h.b)(e=>({listOfConversationsData:e.listOfConversationsData})),[P,O]=i.useState([]),[R,L]=(0,p.PB)("convoId"),[Z,D]=i.useState("STOPPED"),[F,z]=i.useState(!1),[U,M]=i.useState(!1),[W,G]=i.useState([]),[B,V]=i.useState([]),[H,Q]=i.useState(!1),[q,Y]=(0,p.PB)("agentPreviewMode"),J=()=>{E(!1),O([])},$=async(e,l)=>{try{E(!0);let t=await (0,c.Jqi)({deploymentId:l,deploymentConversationId:e,skipDocumentBoundingBoxes:!0,filterIntermediateConversationEvents:!1});E(!1),O(t)}catch(e){u.Am.error("Error fetching agent details")}},X=async()=>{let{unConfiguredConnectors:e,unConfiguredOrgLevelConnectors:l}=await (0,g.Bn)(k);G(e),V(l),M(!1)},K=(0,i.useCallback)(e=>{X()},[]);(0,i.useEffect)(()=>{var e;let l=(null==T?void 0:T.result)||[],t=null==l?void 0:null===(e=l.filter(e=>e.conversationType==b))||void 0===e?void 0:e[0];C&&R===(null==t?void 0:t.deploymentConversationId)&&(M(!0),X(),J(),R&&$(R,C))},[R,C]),(0,i.useEffect)(()=>{var e,l;let t=(null==P?void 0:null===(e=P.result)||void 0===e?void 0:e.history)||[],n=null===(l=t[t.length-1])||void 0===l?void 0:l.text;D(n||"STOPPED"),"STOPPING"===n?el(n):"STARTING"===n&&et()},[P]);let ee=(0,i.useMemo)(()=>F?(0,s.jsx)(m.G,{icon:t(30315).faArrowsRotate,spin:!0,transform:{size:16}}):"RUNNING"===Z?(0,s.jsx)(m.G,{icon:t(70239).di,className:"text-green-500"}):"STOPPED"===Z?(0,s.jsx)(m.G,{icon:t(70239).di,className:"text-red-500"}):null,[Z,F]),el=(0,i.useCallback)(async e=>{if(!C||!R)return;let l=e||Z;z(!0),D("STOPPING");try{let e=await (0,c.OwZ)({deploymentId:C,deploymentConversationId:R});if(null==e?void 0:e.success){var t;(null==e?void 0:null===(t=e.result)||void 0===t?void 0:t.status)!=="STOPPED"?setTimeout(()=>{el(l)},1e3):(D("STOPPED"),u.Am.success("Agent paused successfully"),z(!1))}else D(l),u.Am.error((null==e?void 0:e.error)||"Error pausing agent, please try again later!"),z(!1)}catch(e){D(l),u.Am.error("Error pausing agent, please try again later!"),z(!1)}},[C,R,Z]),et=(0,i.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(C){z(!0),D("STARTING");try{let n=await (0,c.zm1)({deploymentId:C});if(null==n?void 0:n.success){var l,t;if((null==n?void 0:null===(l=n.result)||void 0===l?void 0:l.status)!=="RUNNING"){if(e>4){u.Am.error("Agent failed to start. Please try again later."),z(!1),D(Z);return}setTimeout(()=>{et(e+1)},1e3)}else D("RUNNING"),u.Am.success("Agent started successfully"),z(!1),R||L(null==n?void 0:null===(t=n.result)||void 0===t?void 0:t.deploymentConversationId)}else u.Am.error((null==n?void 0:n.error)||"Please wait for a few mins and try again!"),z(!1),D(Z)}catch(e){u.Am.error("Please wait for a few mins and try again!"),z(!1),D(Z)}}},[C,R,Z,L]),en=(0,i.useCallback)(async function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],Q(!0);try{let e=async()=>{var e;let l=await (0,c.syY)({name:p.nS,externalApplicationId:f.Z.testAiAgentAppId,conversationType:"WORKFLOW_AGENT"});return(null==l?void 0:null===(e=l.result)||void 0===e?void 0:e.deploymentConversationId)||null},l=await e();L(l)}catch(e){u.Am.error("Please wait for a few mins and try again!")}Q(!1)},[L,Q]),eo=(0,i.useMemo)(()=>_===f.Z.testAiAgentAppId||q?(0,s.jsx)(x.Z,{isPrimary:!0,noScale:!0,onClick:en,disabled:H,children:H?(0,s.jsx)(m.G,{icon:t(35078).AX,spin:!0}):"Run"}):F?(0,s.jsx)(x.Z,{noScale:!0,isPrimary:!0,disabled:!0,children:"Processing..."}):"RUNNING"===Z?(0,s.jsx)(x.Z,{isPrimary:!0,noScale:!0,onClick:el,children:"Pause"}):"STOPPED"===Z?(0,s.jsx)(x.Z,{isPrimary:!0,noScale:!0,onClick:et,children:"Start"}):null,[Z,F,et,el,en,_,H]);if(S||U)return(0,s.jsx)("div",{className:"flex justify-center items-center h-full w-full",children:(0,s.jsx)(m.G,{icon:t(35078).AX,spin:!0,transform:{size:48}})});if(!R){let e=(null==T?void 0:T.result)||[];if(null==e?void 0:null===(n=e.filter(e=>e.conversationType==b))||void 0===n?void 0:n[0])return(0,s.jsx)("div",{className:"flex justify-center items-center h-full w-full",children:(0,s.jsx)("p",{className:"text-darkcolor text-[16px]",children:" Please select a conversation to view the agent run history or switch to controller to start/pause the autonomous execution of agent. "})})}return(0,s.jsxs)("div",{className:"flex flex-col h-full items-center",children:[(0,s.jsx)("div",{className:(0,r.cn)("flex flex-row justify-end self-end mx-[30px] text-[13px] pt-[16px]",{"pt-[16px]":o}),children:(0,s.jsx)(a.Z,{appId:_,deploymentConversationId:R,isConversationHistoryAvaialble:!1,isMobile:o,isAndroid:j,isIOS:N,isSelfServe:y,allowDownload:!1})}),(null==W?void 0:W.length)||(null==B?void 0:B.length)?(0,s.jsx)(v.Z,{onAgentConnectorSuccess:K,unConfiguredAgentConnectors:W,unConfiguredOrgLevelAgentConnectors:B,validAppConnectors:I,agentInfo:k}):(0,s.jsx)("div",{className:"flex-1 relative m-[30px] w-[640px]",children:(0,s.jsx)(d.Z,{onRef:e=>void(A.current=e),children:(0,s.jsx)(w,{agentInfo:k,userLevelConnectors:(null==k?void 0:null===(l=k.agentConfig)||void 0===l?void 0:l.AGENT_CONNECTORS)||{},agentStatus:Z,statusIcon:ee,actionButton:eo})})})]})})},65178:function(e,l,t){"use strict";t.d(l,{Z:function(){return r}});var n=t(57437);t(2265);var o=t(9270),s=t(68781);function r(e){let{value:l,onChange:t,className:r,disabled:i,children:a}=e;return(0,n.jsxs)("form",{className:" flex items-center ",children:[(0,n.jsx)(o.fC,{disabled:i,checked:l,onCheckedChange:e=>{null==t||t(!!e)},className:" dark:bg-bwleftblue/[0.4] bg-bwleftblue/[0.08] border-[1px] border-bwleftblue/[0.15] data-[state=checked]:!bg-bwleftblue data-[state=indeterminate]:!bg-bwleftblue hover:bg-bwleftblue/[0.4] dark:hover:bg-bwleftblue/[0.6] flex h-[20px] w-[20px] appearance-none items-center justify-center rounded-md bg-darkcoloro outline-none cursor-default "+(r||"")+" ",children:(0,n.jsxs)(o.z$,{className:"text-darkcoloro font-extrabold",children:["indeterminate"===l?(0,n.jsx)(s.d5,{}):null,!0===l?(0,n.jsx)(s.nQ,{}):null]})}),a&&(0,n.jsx)("label",{className:"pl-[8px] leading-none",children:a})]})}},9290:function(e,l,t){"use strict";var n=t(57437);t(2265);var o=t(86159),s=t(14301),r=t(95951),i=t(48547),a=t(14438),d=t(3916),c=t(53436),u=t(32397),p=t(99376),m=t(62514),x=t(57099),v=t(49070);let{hideAgentConversationDownload:h}=x.featureFlags||{};l.Z=e=>{let{appId:l,deploymentConversationId:x,isConversationHistoryAvaialble:f,isAndroid:g,isIOS:b,isMobile:w,isSelfServe:j,allowDownload:N}=e,[y,C]=(0,v.PB)("agentPreviewMode"),[k,I]=(0,u.Z)();(0,p.usePathname)();let _=(e,l)=>{if(!f){a.Am.error("Chat is empty!");return}(async()=>{let l=(0,c.RdB)({deploymentConversationId:x,fileType:e?"pdf":"docx"});try{let t=await (0,c.EZn)({url:l,isGet:!0,isBlob:!0}),n=document.createElement("a"),o=URL.createObjectURL(t);n.href=o,n.download="conversation."+(e?"pdf":"docx"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(o)}catch(e){console.error(e),a.Am.error(d.Z.isNullOrEmpty(e)?""+e:d.Z.errorDefault)}})()};return y?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"",children:(0,n.jsx)(o.Z,{title:(b||g)&&j?"Get App":"Share",children:(b||g)&&j?(0,n.jsx)("a",{href:b?"https://apps.apple.com/app/chatllm-ai-chat-and-agents/id6502844681":"https://play.google.com/store/apps/details?id=com.abacusai.chatllm",children:(0,n.jsxs)(s.Z,{className:"text-white !bg-bwleftblue rounded-[8px] h-[48px] w-[143px] text-[18px] font-bold !py-0 mr-[5px] flex items-center justify-center gap-[8px]",noScale:!0,children:[b&&(0,n.jsx)("img",{alt:"",width:32,height:32,src:"/chatllm/staticllm/apple_logo.webp"}),g&&(0,n.jsx)("img",{alt:"",width:32,height:32,src:"/chatllm/staticllm/android_logo.webp"}),(0,n.jsxs)("div",{className:"flex flex-col leading-[16px]",children:[(0,n.jsx)("span",{className:"text-[10px]",children:"Download on the"}),(0,n.jsx)("span",{children:b?"App Store":"Play Store"})]})]})}):(0,n.jsx)("span",{children:(0,n.jsx)(r.Z,{zIndex:"z-[13]",title:"Share 'Chat'",content:(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:" text-darkcolor py-[10px] px-[15px] border-[1px] border-darkcolor/[0.1] rounded mt-[10px] bg-darkcolor/[0.05] ",children:[(0,n.jsx)("div",{className:" text-[12px] font-[500] ",children:"General Access"}),(0,n.jsxs)("div",{className:" flex gap-[5px] pt-[8px] ",children:[(0,n.jsx)("div",{className:" flex items-center justify-center ",children:(0,n.jsx)("div",{className:" rounded-full px-[9px] py-[5px] bg-darkcolor/[0.15] ",children:(0,n.jsx)(i.G,{icon:t(2095).HI,transform:{size:16}})})}),(0,n.jsxs)("div",{className:" text-[12px] flex flex-col gap-[2px] ",children:[(0,n.jsx)("div",{className:" font-[500] ",children:"Restricted"}),(0,n.jsx)("div",{className:" text-[11px] ",children:"Only users with authorized access to this chatbot will be able to view this page"})]})]}),(0,n.jsx)("div",{className:" mt-[12px] flex items-center justify-center ",children:(0,n.jsx)(s.Z,{onClick:l=>{I("".concat(window.location.origin,"/chatllm/?convoId=").concat(null!=x?x:"","&appId=").concat(e.appId)),a.Am.success("Copied to Clipboard!",{icon:(0,n.jsx)(i.G,{icon:t(66522).Yj,transform:{size:16}})})},className:" !bg-blue-400 ",children:"Copy Link"})})]})}),cancelText:"Done",hideOkButton:!0,children:(0,n.jsx)(s.Z,{className:"text-bwleftblue !bg-bwleftblue/[0.18] rounded-[8px] w-[32px] h-[32px] !px-0 !py-0 dark:!border-darkcolor/[0.1] dark:!text-darkcolor/[0.6] dark:!bg-darkcolor/[0.05] dark:hover:!bg-darkcolor/[0.1]",children:(0,n.jsx)("span",{className:" amr-[5px] ",children:(0,n.jsx)(i.G,{icon:t(34129).M6,transform:{size:16}})})})})})})}),!h&&N?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:" mx-[3px] md:block hidden "}),(0,n.jsx)("div",{className:" hidden md:flex items-center",children:(0,n.jsx)(m.Z,{align:"end",width:180,content:(0,n.jsxs)("div",{className:" -m-[8px] text-[13px] text-darkcolor",children:[(0,n.jsx)("div",{onClick:_.bind(null,!0),className:" !cursor-pointer w-full hover:bg-darkcolor/[0.05] rounded px-[10px] py-[3px]",children:"Download PDF"}),(0,n.jsx)("div",{onClick:_.bind(null,!1),className:" !cursor-pointer w-full hover:bg-darkcolor/[0.05] rounded px-[10px] py-[3px] ",children:"Download Word"})]}),children:(0,n.jsx)("span",{children:(0,n.jsx)(s.Z,{className:"text-bwleftblue !bg-bwleftblue/[0.18] rounded-[8px] w-[32px] h-[32px] !px-0 !py-0 dark:!border-darkcolor/[0.1] dark:!text-darkcolor/[0.6] dark:!bg-darkcolor/[0.05] dark:hover:!bg-darkcolor/[0.1]",children:(0,n.jsx)("span",{className:" amr-[5px] ",children:(0,n.jsx)(i.G,{icon:t(48812).q7,transform:{size:16}})})})})})})]}):null]})}},21576:function(e,l,t){"use strict";t.d(l,{O:function(){return n}});let n=t(13237).Z()},49467:function(e,l,t){"use strict";t.d(l,{Z:function(){return c}});var n=t(57437),o=t(49070),s=t(2265),r=t(53436),i=t(66888),a=t(3916),d=t(14438);function c(e){let{isApp:l}=e,t=(0,o.br)(),{forceRefreshIFrame:c,isProcessingFirstTime:u,isProcessingMessage:p,waitForName:m,setWaitForName:x,hostedAppDescription:v,ignoreRefreshDescription:h,setHostedAppDescription:f,setHostedAppDescriptionProd:g,setHostedAppConversationId:b}=(0,i.W)(),[w,j]=(0,o.PB)("convoId"),[N,y]=(0,o.PB)("hostedAppId"),[C,k]=(0,o.PB)("hostedAppContainerId");(0,s.useEffect)(()=>{if(m&&N&&!l){let e=setInterval(()=>{(0,r.J4l)({hostedAppId:N}).then(l=>{if(null==l?void 0:l.success){var t,n,o;(null==l?void 0:null===(n=l.result)||void 0===n?void 0:null===(t=n.find(e=>!!e.isDev))||void 0===t?void 0:t.name)&&(null!=e&&(clearInterval(e),e=null),x(null),f((null==l?void 0:null===(o=l.result)||void 0===o?void 0:o.find(e=>!!e.isDev))||null))}}).catch(e=>{})},3e3);return()=>{null!=e&&(clearInterval(e),e=null)}}},[m,N,l]);let I=(0,s.useCallback)((e,l)=>{let t=5,n=()=>{(0,r.J4l)({hostedAppId:e}).then(e=>{var o,s;let r=null==e?void 0:e.result,i=null==r?void 0:null===(s=r.find(e=>!!(null==e?void 0:e.isDev)))||void 0===s?void 0:null===(o=s.status)||void 0===o?void 0:o.toLowerCase();if((null==e?void 0:e.success)&&"active"===i)l(!0);else{if(null==e?void 0:e.success);else if(--t<=0){d.Am.error("Error starting app"),l(!1);return}setTimeout(()=>{n()},3e3)}}).catch(e=>{if(--t<=0){d.Am.error("Error starting app"),l(!1);return}setTimeout(()=>{n()},300)})};n()},[]),_=(0,s.useRef)(c);return(0,s.useEffect)(()=>{_.current=c},[c]),(0,s.useEffect)(()=>{l||(f(null),g(null),N&&!u&&(0,r.J4l)({hostedAppId:N}).then(e=>{var l,t,n;let o=null==e?void 0:null===(l=e.result)||void 0===l?void 0:l.find(e=>!!e.isDev);if(null==o)return;f(o||null),g((null==e?void 0:null===(t=e.result)||void 0===t?void 0:t.find(e=>!e.isDev))||null);let s=(null==o?void 0:o.deploymentConversationId)||null;b(s),j(s),(null==o?void 0:null===(n=o.status)||void 0===n?void 0:n.toUpperCase())==="STOPPED"&&(0,r.Adj)({hostedAppId:N}).then(e=>{if(null==e?void 0:e.success){var l;null===(l=_.current)||void 0===l||l.call(_),null==I||I(N,()=>{var e;null===(e=_.current)||void 0===e||e.call(_)})}}).catch(e=>{})}).catch(e=>{f(null),g(null),b(null),j(null)}))},[N,I,h,l,u]),(0,n.jsxs)("div",{onClick:l?null:e=>{null==e||e.preventDefault(),null==e||e.stopPropagation();let l=new URLSearchParams;l.append("appId",a.Z.appLlmEndAppId),window.history.pushState(null,"","/chatllm/?".concat(l.toString()))},className:" flex items-center gap-[5px] aamr-[63px] "+(l?" ":" cursor-pointer [&_*]:cursor-pointer "),children:[t&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{className:" flex items-center ",children:(0,n.jsxs)("span",{className:" relative ",children:[(0,n.jsx)("span",{className:" opacity-70 !cursor-default ",children:"AppLLM"}),(0,n.jsx)("div",{className:" absolute left-full ml-[3px] -top-[2px] text-[10px] text-bwleftblue brightness-150 ",children:"BETA"})]})})}),!t&&(0,n.jsxs)("span",{className:" ",children:[(0,n.jsx)("span",{className:" opacity-70 ",children:"AppLLM:\xa0"}),(0,n.jsx)("span",{className:" ",children:(null==v?void 0:v.name)||"-"})]})]})}},19252:function(e,l,t){"use strict";t.d(l,{Z:function(){return ei}});var n=t(57437),o=t(93810),s=t.n(o),r=t(2265),i=t(55037),a=t.n(i),d=t(49070),c=t(3916),u=t(14301),p=t(48547),m=t(53436),x=t(54083),v=t(99376),h=t(62514),f=t(90216),g=t(56210),b=t(48958),w=t(13590),j=t(29501),N=t(31229),y=t(31486),C=t(69997),k=t(65178),I=t(14438),_=t(16593),A=t(21770),S=t(23749),E=t(5529);let T=N.z.object({externalApplicationId:N.z.string().optional(),userInformationInstructions:N.z.string().max(1500),responseInstructions:N.z.string().max(1500),enableWebSearch:N.z.boolean(),enableImageGeneration:N.z.boolean(),enableCodeExecution:N.z.boolean(),enablePlayground:N.z.boolean(),experimentalFeatures:N.z.object({enableChatLLMTeamsV2:N.z.boolean()}).optional()}),P=T.parse({externalApplicationId:"DEFAULT",userInformationInstructions:"",responseInstructions:"",enableWebSearch:!0,enableImageGeneration:!0,enableCodeExecution:!0,enablePlayground:!0,experimentalFeatures:{enableChatLLMTeamsV2:!1}});function O(e){var l;let{selectedExternalApplicationId:t="DEFAULT",open:o,onClose:s,isMobile:i,isHostTeams:a}=e,{data:c}=(0,d.Pc)({ignoreNeedLogin:!0}),[p,x]=(0,r.useState)(!1),{setShowWebSearch:v,setIsWebSearchSelected:h,selectedToolbar:f,setSelectedToolbar:N}=(0,E.b)(e=>({setShowWebSearch:e.setShowWebSearch,setIsWebSearchSelected:e.setIsWebSearchSelected,selectedToolbar:e.selectedToolbar,setSelectedToolbar:e.setSelectedToolbar})),{data:O}=(0,_.a)({queryKey:["externalApplications"],queryFn:()=>(0,m.kMp)({includeSearchLLM:!i&&a,isDesktop:!i}),enabled:o,select:e=>((null==e?void 0:e.result)||[]).filter(e=>null==e?void 0:e.isCustomizable).filter(e=>!(null==e?void 0:e.isDeprecated)||(null==e?void 0:e.externalApplicationId)===t).map(e=>({label:null==e?void 0:e.name,value:null==e?void 0:e.externalApplicationId}))}),[R,L]=(0,r.useState)({}),Z=(0,j.cI)({resolver:(0,w.F)(T),defaultValues:P}),D=async function(e){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e;if(!l){let l=null==O?void 0:O.find(l=>l.value===e);t=(null==l?void 0:l.value)||"DEFAULT"}Z.reset({...P,externalApplicationId:t,...R[t]}),l&&x(!0);try{let l="DEFAULT"===t?void 0:e,n=await (0,m.xI2)({params:{externalApplicationId:l}});if(!(null==n?void 0:n.success))throw Error("Failed to fetch custom instructions.");L(e=>({...e,[t]:n.result})),Z.reset({...P,externalApplicationId:t,...R[e],...n.result})}catch(e){Z.reset({...P,...R.DEFAULT}),x(!1)}x(!1)};(0,r.useEffect)(()=>{o&&D(t)},[t,o]);let F=(0,A.D)({mutationFn:async e=>{var l,t;let n="DEFAULT"===e.externalApplicationId?void 0:e.externalApplicationId;return await (0,m.Mwi)({payload:{...e,userInformationInstructions:null===(l=e.userInformationInstructions)||void 0===l?void 0:l.trim(),responseInstructions:null===(t=e.responseInstructions)||void 0===t?void 0:t.trim(),externalApplicationId:n}}),v(e.enableWebSearch),e.enableWebSearch||(h(!1),"WEB_SEARCH"===f&&N(null)),{...P,...e}},onSuccess:e=>{I.Am.success("Custom instructions saved."),s(),L(l=>({...l,[e.externalApplicationId]:e}))},onError:()=>{I.Am.error("Failed to save custom instructions.")}}),z=(0,A.D)({mutationFn:async e=>(await (0,m.E3X)({params:{externalApplicationId:"DEFAULT"===e?void 0:e}}),e),onSuccess:e=>{I.Am.success("Custom instructions removed."),s(),L(l=>({...l,[e]:void 0})),Z.reset({...P,externalApplicationId:e})},onError:()=>{I.Am.error("Failed to remove custom instructions.")}});return(0,n.jsx)(b.Vq,{open:o,children:(0,n.jsxs)(b.cZ,{className:"max-w-lg",children:[(0,n.jsxs)(b.fK,{children:[(0,n.jsx)(b.$N,{children:"Custom Instructions"}),(0,n.jsx)(b.Be,{children:"Customize ChatLLM to provide better responses"})]}),(0,n.jsxs)("div",{className:"grid gap-6",children:[(0,n.jsx)(j.Qr,{name:"externalApplicationId",control:Z.control,render:e=>{let{field:l}=e;return(0,n.jsxs)("div",{className:"space-y-1.5 w-56",children:[(0,n.jsx)(C.Z,{htmlFor:"externalApplicationId",children:"ChatLLM Deployment"}),(0,n.jsxs)(S.Ph,{disabled:p,value:l.value,onValueChange:e=>{l.onChange(e),D(e,!0)},children:[(0,n.jsx)(S.i4,{className:"w-56",children:(0,n.jsx)(S.ki,{placeholder:"Select a Deployment"})}),(0,n.jsx)(S.Bw,{children:(0,n.jsx)(S.DI,{children:[{label:"Default",value:"DEFAULT"},...O||[]].map(e=>(0,n.jsx)(S.Ql,{value:e.value,children:e.label},e.value))})})]})]})}}),(0,n.jsx)(j.Qr,{name:"userInformationInstructions",control:Z.control,render:e=>{let{field:l}=e;return(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)(C.Z,{className:"flex items-center gap-2",children:"What would you like ChatLLM to know about you to provide better responses?"}),(0,n.jsx)("p",{className:"text-[11px] opacity-50",children:"Note: these instructions will be passed to the LLM on every prompt"})]}),(0,n.jsx)(y.Z,{disabled:p,id:"userInformationInstructions",...l,className:"resize-none",rows:3,placeholder:"e.g., I am a software developer located in Atlanta, Georgia",dir:"auto"}),Z.formState.errors.userInformationInstructions?(0,n.jsxs)("p",{className:"text-sm text-red-600",children:[Z.watch("userInformationInstructions").length,"/1500 characters"]}):null]})}}),(0,n.jsx)(j.Qr,{name:"responseInstructions",control:Z.control,render:e=>{let{field:l}=e;return(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsx)(C.Z,{className:"flex items-center gap-2",children:"How would you like ChatLLM to respond?"}),(0,n.jsx)(y.Z,{disabled:p,id:"responseInstructions",...l,className:"resize-none",rows:3,placeholder:"e.g. Please respond in a clever and witty manner.",dir:"auto"}),Z.formState.errors.responseInstructions?(0,n.jsxs)("p",{className:"text-sm text-red-600",children:[Z.watch("responseInstructions").length,"/1500 characters"]}):null]})}}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)(C.Z,{className:"flex items-center gap-2",children:"ChatLLM Capabilities"}),(0,n.jsx)("p",{className:"text-[11px] opacity-50",children:"Please specify the tools ChatLLM should have access to"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[(0,n.jsx)(j.Qr,{name:"enableWebSearch",control:Z.control,render:e=>{let{field:l}=e;return(0,n.jsx)(k.Z,{value:l.value,onChange:l.onChange,children:"Web Search"})}}),(0,n.jsx)(j.Qr,{name:"enableImageGeneration",control:Z.control,render:e=>{let{field:l}=e;return(0,n.jsx)(k.Z,{value:l.value,onChange:l.onChange,children:"Image Generation"})}}),(0,n.jsx)(j.Qr,{name:"enableCodeExecution",control:Z.control,render:e=>{let{field:l}=e;return(0,n.jsx)(k.Z,{value:l.value,onChange:l.onChange,children:"Code Execution"})}}),(0,n.jsx)(j.Qr,{name:"enablePlayground",control:Z.control,render:e=>{let{field:l}=e;return(0,n.jsx)(k.Z,{value:l.value,onChange:l.onChange,children:"Playground"})}})]})]}),(null==c?void 0:null===(l=c.result)||void 0===l?void 0:l.internal)&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("div",{className:"space-y-0.5",children:(0,n.jsx)(C.Z,{className:"flex items-center gap-2",children:"Experimental Features"})}),(0,n.jsx)("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:(0,n.jsx)(j.Qr,{name:"experimentalFeatures.enableChatLLMTeamsV2",control:Z.control,render:e=>{let{field:l}=e;return(0,n.jsx)(k.Z,{value:l.value,onChange:l.onChange,children:"ChatLLM Teams V2 \uD83E\uDE84"})}})})]})]}),(0,n.jsxs)(b.cN,{className:"mt-4 flex-row justify-between sm:justify-between w-full",children:[R[Z.watch("externalApplicationId")]?(0,n.jsx)(u.Z,{onClick:()=>z.mutate(Z.watch("externalApplicationId")),disabled:z.isPending,className:(0,g.cn)("relative rounded-full bg-red-600 hover:bg-red-600 text-darkcoloro dark:text-darkwhite/[0.7]"),children:"Reset All"}):(0,n.jsx)("span",{}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(u.Z,{noBack:!0,className:"text-darkcolor/[0.7] rounded-full",moreSpace:!0,disabled:!1,onClick:s,children:"Cancel"}),(0,n.jsx)(u.Z,{onClick:Z.handleSubmit(e=>F.mutate(e)),disabled:p||F.isPending||!Z.formState.isDirty,className:(0,g.cn)("rounded-full !bg-bwleftblue !text-darkcoloro dark:text-darkwhite/[0.7]",{"grayscale !opacity-50":!Z.formState.isDirty}),children:"Save"})]})]})]})})}var R=t(86262),L=t(22345),Z=t.n(L);function D(e){var l,o,s,i,b,w,j,N,y,C;let{dataInitUserInfo:k,isAdmin:I,isAdminPath:_,isAppsPath:A,isProfilePath:S,hideCustomizeTheme:T,hideThemes:P,appId:L,botIconUrl:D,listExtApps:F,botName:z,forceThemeLogo:U,customModeForced:M,defaultDarkMode:W,onlyIcon:G,isLinkUsedDeployUsed:B,itemsExtApps:V,isLinkUsedDeployId:H,isSelfService:Q,isMobile:q,themeObj:Y,forceDarkmode:J,darkMode:$}=e,{isDark:X,isDarkS:K,setIsDark:ee,setIsDarkS:el}=(0,f.J)(),et=(0,d.z0)(),{setIsComputerAgent:en,isComputerAgent:eo,showRightSidePanel:es,setShowRightSidePanel:er}=(0,E.b)(e=>({setIsComputerAgent:e.setIsComputerAgent,isComputerAgent:e.isComputerAgent,showRightSidePanel:e.showRightSidePanel,setShowRightSidePanel:e.setShowRightSidePanel})),ei=(0,r.useMemo)(()=>{var e,l;return!et&&Q&&(null==F?void 0:null===(l=F.result)||void 0===l?void 0:null===(e=l.filter(e=>{var l;return(null==e?void 0:e.isSystemCreated)===1&&!(null==e?void 0:null===(l=e.predictionOverrides)||void 0===l?void 0:l.forComputerUse)}))||void 0===e?void 0:e.some(e=>e.externalApplicationId===L))},[Q,et,F,L]),{data:ea,error:ed,isLoading:ec}=(0,d.Pc)({dataInit:k,ignoreNeedLogin:!0}),eu=(0,R.q)(null==ea?void 0:ea.result),ep=(0,r.useRef)(null),[em,ex]=r.useState(!1),ev=(0,v.useRouter)(),eh=(0,r.useMemo)(()=>{var e;return c.Z.initials(null==ea?void 0:null===(e=ea.result)||void 0===e?void 0:e.name)||null},[ea]),ef=(0,r.useMemo)(()=>{var e;return c.Z.stringToColorHex(null==ea?void 0:null===(e=ea.result)||void 0===e?void 0:e.name)||"#173e7d"},[ea]),eg=(0,r.useMemo)(()=>{var e,l,t,o,s,r,i,a,d,u,p,m;return(0,n.jsxs)("div",{onDoubleClick:e=>{},className:(0,g.cn)("overflow-hidden !cursor-pointer text-darktoptext hover:bg-darktoptext/10 rounded px-[8px] py-[7px] flex -mr-[4px] sm:mr-[0px]",{"text-white hover:bg-white/10":J,"justify-end px-0":es&&!et," px-[4px] ":et}),children:[(0,n.jsxs)("div",{className:"flex-shrink-0 ".concat(es?"":"sm:mr-[7px]"," mr-[0px] relative"),children:[(0,n.jsx)("img",{referrerPolicy:"no-referrer",alt:"",src:(null==ea?void 0:null===(e=ea.result)||void 0===e?void 0:e.picture)||c.Z.transparentPixelBase64,className:" rounded-full w-[26px] h-[26px] sm:w-[36px] sm:h-[36px] "}),!(null==ea?void 0:null===(l=ea.result)||void 0===l?void 0:l.picture)&&(0,n.jsx)("div",{style:{background:ef},className:"text-darkwhite w-[26px] h-[26px] sm:w-[36px] sm:h-[36px] absolute top-0 left-0 right-0 bottom-0 rounded-full flex items-center justify-center text-[14px] sm:text-[18px] ",children:eh})]}),!G&&!es&&(0,n.jsxs)("div",{className:"sm:min-w-[130px] w-auto hidden flex-col items-start ml-[4px] justify-center gap-[1px] sm:flex text-[12px] ",children:[!c.Z.isNullOrEmpty(null==ea?void 0:null===(o=ea.result)||void 0===o?void 0:null===(t=o.organization)||void 0===t?void 0:t.name)&&(0,n.jsxs)("div",{className:" flex items-center w-full ",children:[(0,n.jsx)("span",{className:" opacity-60 mr-[5px] ",children:"Team:"}),(0,n.jsx)("span",{className:" line-clamp-1 ",children:null!==(p=null==k?void 0:null===(r=k.result)||void 0===r?void 0:null===(s=r.organization)||void 0===s?void 0:s.name)&&void 0!==p?p:null==ea?void 0:null===(a=ea.result)||void 0===a?void 0:null===(i=a.organization)||void 0===i?void 0:i.name})]}),(0,n.jsxs)("div",{className:" flex items-center w-full ",children:[(0,n.jsx)("span",{className:" opacity-60 mr-[5px]",children:"Name:"}),(0,n.jsx)("span",{className:" line-clamp-1 ",children:null!==(m=null==k?void 0:null===(d=k.result)||void 0===d?void 0:d.name)&&void 0!==m?m:null==ea?void 0:null===(u=ea.result)||void 0===u?void 0:u.name})]})]})]})},[ea,eh,ef,k,J,es]),eb=(0,r.useCallback)(()=>{eo&&setTimeout(()=>{en(!1),er(!1)},1880)},[eo]);(0,r.useEffect)(()=>{var e;let l=null===(e=a().get(null,{path:"/"}))||void 0===e?void 0:e.isDark;el(null!=l?l:$),ee(l?"1"===l:"1"===$)},[$]);let ew=(0,r.useCallback)(async(e,l)=>{var t,n,o;let s=!0===e?"1":"0";"AI"===e&&(s="AI"),a().set(null,"isDark",s,{maxAge:31536e3,path:"/"});let r=(null===(o=document.documentElement.className)||void 0===o?void 0:null===(n=o.replace(/\bdark\b/," "))||void 0===n?void 0:null===(t=n.replace(/\bdarkai\b/," "))||void 0===t?void 0:t.trim())||"";"1"===s?r+=" dark ":"AI"===s&&(r+=" darkai "),document.documentElement.className=r,el(s),ee("1"===s);let i=document.querySelector(":root"),d=Object.keys(null!==x.R9&&void 0!==x.R9?x.R9:{});"AI"===s?(0,x.sr)({forceData:null!=Y?Y:null}):d.some(e=>{i.style.removeProperty(e)})},[Y]),ej=" w-full h-[34px] ",eN=null==k||null===(o=k.result)||void 0===o||null===(l=o.organization)||void 0===l||!l.isSelfServe||!((null==k?void 0:null===(i=k.result)||void 0===i?void 0:null===(s=i.organization)||void 0===s?void 0:s.isSelfServe)&&Z()(null==k?void 0:null===(j=k.result)||void 0===j?void 0:null===(w=j.organization)||void 0===w?void 0:null===(b=w.computePointInfo)||void 0===b?void 0:b.currMonthAvailPoints))||(null==k?void 0:null===(C=k.result)||void 0===C?void 0:null===(y=C.organization)||void 0===y?void 0:null===(N=y.computePointInfo)||void 0===N?void 0:N.currMonthAvailPoints)>0,ey=(0,r.useCallback)(e=>{var l,o,s;return(0,n.jsxs)("div",{className:" flex flex-col gap-[5px] text-darkcolor ",children:[(0,n.jsx)("svg",{style:{width:"0",height:"0",position:"absolute"},children:(0,n.jsxs)("linearGradient",{id:"grandientIcon",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,n.jsx)("stop",{offset:"100%",style:{stopColor:"#8D00FF",stopOpacity:1}}),(0,n.jsx)("stop",{offset:"0%",style:{stopColor:"#B692FF",stopOpacity:1}})]})}),(0,n.jsxs)("div",{className:" overflow-hidden !cursor-pointer flex -mr-[4px] sm:mr-[0px] ",children:[(0,n.jsxs)("div",{className:"".concat(es?"":"sm:mr-[7px] "," flex-shrink-0 mr-[0px] relative "),children:[(0,n.jsx)("img",{referrerPolicy:"no-referrer",alt:"",src:(null==ea?void 0:null===(l=ea.result)||void 0===l?void 0:l.picture)||c.Z.transparentPixelBase64,className:" rounded-full w-[26px] h-[26px] sm:w-[36px] sm:h-[36px] "}),!(null==ea?void 0:null===(o=ea.result)||void 0===o?void 0:o.picture)&&(0,n.jsx)("div",{style:{background:ef},className:"text-darkwhite w-[26px] h-[26px] sm:w-[36px] sm:h-[36px] absolute top-0 left-0 right-0 bottom-0 rounded-full flex items-center justify-center text-[14px] sm:text-[18px] ",children:eh})]}),(0,n.jsx)("div",{className:"sm:min-w-[130px] w-auto flex-col items-start ml-[4px] justify-center gap-[1px] sm:flex text-[12px] text-darkcolor ",children:(0,n.jsx)("div",{className:" flex items-center w-full ",children:(0,n.jsx)("span",{className:" line-clamp-1 text-[14px]",children:null==ea?void 0:null===(s=ea.result)||void 0===s?void 0:s.name})})})]}),(0,n.jsx)("div",{className:" border-t-[1px] border-t-bwleftblue/[0.1] my-[10px] "}),!P&&!M&&(0,n.jsxs)("div",{className:" flex items-center ",children:[(0,n.jsxs)(u.Z,{className:" flex gap-[5px] items-center justify-center w-full rounded-r-none rounded-l-lg"+("1"===K||"AI"===K?"":" !bg-bwleftblue !text-darkcoloro "),onClick:ew.bind(null,!1),children:[(0,n.jsx)("span",{children:(0,n.jsx)(p.G,{icon:t(73689).en,transform:{size:16}})}),(0,n.jsx)("span",{children:"Light"})]}),(0,n.jsxs)(u.Z,{className:"flex gap-[5px] items-center justify-center w-full rounded-none ".concat(Q?"rounded-r-lg":""," ")+("1"===K?" !bg-bwleftblue !text-darkcoloro ":""),onClick:ew.bind(null,!0),children:[(0,n.jsx)("span",{children:(0,n.jsx)(p.G,{icon:t(78860).DB,transform:{size:16}})}),(0,n.jsx)("span",{children:"Dark"})]}),Q?null:(0,n.jsxs)(u.Z,{className:" flex gap-[5px] items-center justify-center rounded-l-none rounded-r-lg"+("AI"===K?" !bg-bwleftblue !text-darkcoloro ":""),onClick:ew.bind(null,"AI"),children:[(0,n.jsx)("span",{className:"AI"===K?"":" [&_*]:!fill-[url(#grandientIcon)] ",children:(0,n.jsx)(p.G,{icon:t(64102).Jy,transform:{size:16}})}),(0,n.jsx)("span",{children:"Custom"})]})]}),eN?(0,n.jsx)("div",{className:" border-t-[1px] border-t-bwleftblue/[0.1] my-[10px] "}):null,(0,n.jsxs)("div",{className:" flex flex-col gap-[10px] text-[14px] ",children:[I&&!Q&&(0,n.jsxs)(u.Z,{onClick:e=>{ev.push("/admin/theme"),eb()},className:" flex gap-[16px] items-center !bg-darkcoloro dark:!bg-bwbackvia !p-0"+ej,children:[(0,n.jsx)("span",{className:"w-6 text-bwleftblue",children:(0,n.jsx)(p.G,{icon:t(64102).Jy,transform:{size:26}})}),(0,n.jsx)("span",{className:" leading-[1.3] ",children:"Customize Theme"})]}),ei&&eN&&(0,n.jsxs)(u.Z,{className:" flex gap-[16px] items-center !bg-darkcoloro dark:!bg-bwbackvia !p-0"+ej,onClick:()=>{ex(!0),e()},children:[(0,n.jsx)("span",{className:"w-6 text-bwleftblue",children:(0,n.jsx)(p.G,{icon:t(98882).kl,transform:{size:26}})}),(0,n.jsx)("span",{children:"Customize ChatLLM"})]}),!eu&&I&&!q&&eN&&(0,n.jsxs)(u.Z,{onClick:e=>{ev.push("/admin/bots"),eb()},className:"flex gap-[16px] items-center !bg-darkcoloro dark:!bg-bwbackvia !p-0"+ej,children:[(0,n.jsx)("span",{className:"w-6 text-bwleftblue",children:(0,n.jsx)(p.G,{icon:t(87953).gr,transform:{size:26}})}),(0,n.jsx)("span",{children:Q?"Settings":"Admin"})]}),eN?(0,n.jsxs)(u.Z,{onClick:e=>{ev.push(I?"/admin/profile":"/profile"),eo&&(en(!1),er(!1))},className:"flex gap-[16px] items-center !bg-darkcoloro dark:!bg-bwbackvia !p-0"+ej,children:[(0,n.jsx)("span",{className:"w-6 text-bwleftblue",children:(0,n.jsx)(p.G,{icon:t(17794).m0,transform:{size:26}})}),(0,n.jsx)("span",{children:"Profile"})]}):null,!eu&&!et&&eN&&(0,n.jsxs)(u.Z,{onClick:e=>{ev.push(I?"/admin/connectors-list":"/connectors-list"),eo&&(en(!1),er(!1))},className:"flex gap-[16px] items-center !bg-darkcoloro dark:!bg-bwbackvia !p-0"+ej,children:[(0,n.jsx)("span",{className:"w-6 text-bwleftblue",children:(0,n.jsx)(p.G,{icon:t(2979).os,transform:{size:26}})}),(0,n.jsx)("span",{children:"Connectors"})]}),eu&&!q&&eN&&(0,n.jsxs)(u.Z,{onClick:e=>{ev.push("/admin/referrals"),eb()},className:" flex gap-[16px] items-center !bg-darkcoloro dark:!bg-bwbackvia !p-0"+ej,children:[(0,n.jsx)("span",{className:"w-6 text-bwleftblue",children:(0,n.jsx)(p.G,{icon:t(59752).Nd,transform:{size:24}})}),(0,n.jsx)("span",{children:"Referrals"})]}),eN?(0,n.jsxs)(u.Z,{onClick:e=>{window.open("https://abacus.ai/help/howTo/chatllm","_blank")},className:"flex gap-[16px] items-center !bg-darkcoloro dark:!bg-bwbackvia !p-0"+ej,children:[(0,n.jsx)("span",{className:"w-6 text-bwleftblue",children:(0,n.jsx)(p.G,{icon:t(90191).Ps,transform:{size:26}})}),(0,n.jsx)("span",{children:"Help"})]}):null,Q?null:(0,n.jsxs)(u.Z,{onClick:e=>{ev.push(I?"/admin/reports":"/reports"),eb()},className:"flex gap-[16px] items-center !bg-darkcoloro dark:!bg-bwbackvia !p-0"+ej,children:[(0,n.jsx)("span",{className:"w-6 text-bwleftblue",children:(0,n.jsx)(p.G,{icon:t(28395).rW,transform:{size:26}})}),(0,n.jsx)("span",{children:"Reports"})]})]}),(I&&L&&!_||!A)&&(0,n.jsx)("div",{className:" border-t-[1px] border-t-bwleftblue/[0.1] my-[10px] "}),(0,n.jsxs)(u.Z,{onClick:e=>{(0,m.YpH)({method:"_signOut",ignoreNeedLogin:!0}).then(e=>{(0,m.vOe)(!0),window.location.href="/chatllm/"})},className:" flex gap-[5px] items-center w-full ",children:[(0,n.jsx)("span",{className:"text-gray-500",children:(0,n.jsx)(p.G,{icon:t(85203).SJ,transform:{size:16}})}),(0,n.jsx)("span",{className:"flex-1",children:"Sign Out"})]})]})},[ea,ew,K,F,X,Q,P,M,eh,ef,ei,eo,eN,es]);return(0,n.jsxs)("span",{children:[(null==k?void 0:k.success)&&!G?(0,n.jsx)(O,{open:em,onClose:()=>ex(!1),selectedExternalApplicationId:L,isMobile:q,isHostTeams:Q}):null,(0,n.jsx)(h.Z,{ref:ep,isNeedCloseFromContent:!0,content:e=>ey(e),width:354,className:"!rounded-xl",align:"end",children:eg})]})}var F=t(13894),z=t(56383),U=t(86520),M=t(51854),W=t(42715),G=t.n(W),B=t(83038),V=t.n(B),H=t(7310),Q=t.n(H);let q={};var Y={escapeRegex:e=>null==e?e:e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),highlightIsTextInside(e,l){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#86bcff";if(!G()(e)||""===V()(e||"")||""===V()(l||""))return e;if(G()(l)){let e=q[l];e||(e=l.toLowerCase().split(" ").filter(e=>""!==V()(e||"")),q[l]=e),l=e}let s={},r="###$$###";l.some(l=>{c.Z.isNullOrEmpty(l)||(e=e.replace(RegExp("("+this.escapeRegex(l)+")","gi"),(l,n,o,i)=>{if(t&&o>0)return l;for(let t=0;t<100;t++){var a;if(!/[#$0-9a-zA-Z\-]/.test(null!==(a=e[o-t])&&void 0!==a?a:" ")){if((null==e?void 0:e.substring(o-t+1,o-t+1+r.length))===r)return l;break}}if(null==n?void 0:n.startsWith(r))return l;if(null==s[n]){let e=r+M.Z();s[n]=e}return s[n]}))});let i=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;if(!e||l<=0)return e;e=[e];let t=1;return Object.keys(s).some(r=>{e=Q()(e.map(e=>{if(!G()(e))return e;let a=e.indexOf(s[r]);return -1===a?e:[e.substring(0,a),(0,n.jsx)("b",{style:{color:o,fontWeight:600},children:r},"b"+t++),i(e.substring(a+s[r].length),l-1)]}))}),(0,n.jsx)("span",{children:null==e?void 0:e.map((e,l)=>(0,n.jsx)("span",{children:e},"s"+l))})};return Object.keys(s).length>0?(0,n.jsx)("span",{children:i(e)}):e}},J=t(86159),$=t(64349),X=t(84979);t(21005);var K=t(95951),ee=t(40703),el=t(77598),et=(0,r.forwardRef)((e,l)=>{let[o,s]=(0,r.useState)("null"),[i,a]=(0,r.useState)(""),[x,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)(null),[b,w]=(0,r.useState)(!1),[j,N]=(0,r.useState)("chooseExistingDatasets"),[y,C]=(0,r.useState)([]),[_,A]=(0,r.useState)(0),[S,E]=(0,r.useState)(null),[T,P]=(0,r.useState)([]),O=(0,r.useRef)(null),R=(0,r.useRef)(null),[L,Z,D]=(0,d.Pr)(),[F,z,U]=(0,d._R)(),{isEditNameAny:M,onDeploymentConversationIdChanged:W}=(0,X.h)(),G=(0,v.useSearchParams)();(0,r.useEffect)(()=>{1===_&&(0,m.kqr)({datasetIds:null==L?void 0:L.map(e=>null==e?void 0:e.datasetId)}).then(e=>{var l,t;let n=null==e?void 0:null===(t=e.result)||void 0===t?void 0:null===(l=t.filter(e=>{var l,t;return["PENDING","UPLOADING","IMPORTING","CONVERTING","INSPECTING"].includes(null==e?void 0:null===(t=e.lastVersion)||void 0===t?void 0:null===(l=t.status)||void 0===l?void 0:l.toUpperCase())}))||void 0===l?void 0:l.map(e=>null==e?void 0:e.datasetId);(null==e?void 0:e.success)&&P(null!=n?n:[])})},[L,_]),(0,r.useEffect)(()=>{let e=()=>{document.hidden||(D(),1===_&&"useConnector"===j&&setTimeout(()=>{A(2)},1e3))};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[j,_,D]);let B=(0,r.useCallback)(async()=>{try{var e,l;let t=await (0,m.l8r)({});return(0,m.YpH)({method:"".concat(null==t?void 0:null===(e=t.result)||void 0===e?void 0:e.endpoint,"/ensurePykernelserver"),isMethodFull:!0,data:{assignSession:!0},extraHeaders:{Authorization:"Bearer ".concat((null==t?void 0:null===(l=t.result)||void 0===l?void 0:l.token)||"")},ignoreNeedLogin:!0})}catch(e){}},[]);(0,r.useImperativeHandle)(l,()=>({open:()=>{var e;B().then(e=>{}).catch(e=>{}),s(null),g(null),w(!1),N("chooseExistingDatasets"),C([]),P([]),A(0),E(null),null===(e=O.current)||void 0===e||e.open()},close:()=>{var e;null===(e=O.current)||void 0===e||e.close()}}),[]);let V=(0,r.useCallback)(()=>{var e;null===(e=O.current)||void 0===e||e.close()},[]),H=(0,r.useCallback)(()=>{x?(g("I want a chatbot which looks at the relevant snippets from my document and responds to my questions."),A(1),D()):(g("I want a chatbot which acts like a Quantum Computing teacher and uses web search to get the latest information."),A(2))},[x,i]),Q=(0,r.useMemo)(()=>[{label:"Yes",value:!0},{label:"No",value:!1}],[]),q=(0,r.useMemo)(()=>(0,n.jsxs)("div",{className:"w-[500px]",children:[(0,n.jsxs)("div",{className:" my-[20px] ",children:[(0,n.jsxs)("div",{className:" mx-[20px] mb-[40px] text-center text-[15px] opacity-60 ",children:["Build your own bot which can be aware of your custom data while responding, follow specific instructions, enable/disable features like code generation",(0,n.jsx)("br",{}),"Let's get started!"]}),(0,n.jsx)("div",{className:" my-[7px] text-center font-bold text-[15px] ",children:"Please give a name for your new Bot:"}),(0,n.jsx)("input",{className:" w-full bg-darkcoloro px-[6px] py-[4px] text-base text-darkcolor !text-[14px] rounded !outline-none border-[1px] border-darkcolor/[0.3] ",value:o,onChange:e=>{s(e.target.value||"")},placeholder:"Enter name here..."}),(0,n.jsx)("div",{className:" mt-[20px] mb-[7px] text-center font-bold text-[15px] ",children:"Description (optional):"}),(0,n.jsx)("textarea",{className:" min-h-[40px] w-full bg-darkcoloro px-[6px] py-[4px] text-base text-darkcolor !text-[14px] rounded !outline-none border-[1px] border-darkcolor/[0.3] ",value:i,onChange:e=>{a(e.target.value||"")},placeholder:"Description"}),(0,n.jsx)("div",{className:" text-center mb-[10px] text-[11px] text-darkcolor/[0.6] ",children:"This is the message displayed on the welcome page of your bot"}),(0,n.jsx)("div",{className:" mt-[20px] mb-[10px] text-center font-bold text-[15px] ",children:"Do you want the bot to search on your custom data? Examples - textbooks, manuals, papers, etc."}),(0,n.jsx)("div",{className:" flex items-center justify-center ",children:(0,n.jsx)(ee.Z,{isHorizontal:!0,value:x,onChange:e=>{h(e)},options:Q})})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-[0] mt-[20px] text-darkcolor",children:[(0,n.jsx)("span",{className:" flex-1 "}),(0,n.jsxs)("div",{className:"flex gap-[0]",children:[(0,n.jsx)("span",{children:(0,n.jsx)(u.Z,{noBack:!0,className:" text-darkcolor/[0.7] rounded-full !py-[7px] !px-[24px] ",moreSpace:!0,disabled:b,onClick:V,children:"Cancel"})}),(0,n.jsx)("span",{children:(0,n.jsx)(u.Z,{disabled:b||!o,onClick:H,moreSpace:!0,className:" !px-[24px] rounded-full !bg-bwleftblue text-darkcoloro dark:!text-darkwhite/[0.7] !py-[7px] ",children:b?(0,n.jsx)(p.G,{icon:t(39847).QD,transform:{size:16},spin:!0}):"Next"})})]})]})]}),[b,Q,x,o,i,V,H]),Y=(0,r.useCallback)(e=>{(null==e?void 0:e.length)>0&&E(e[0])},[E]),J=e=>{let l=Array.from(e.target.files||[]);(null==l?void 0:l.length)>0&&(R.current&&(R.current.value=""),Y(l))},{getRootProps:$,isDragActive:et}=(0,el.uI)({multiple:!1,onDrop:Y,disabled:"useUploadFile"!==j}),en=(0,r.useCallback)(async()=>{if("chooseExistingDatasets"===j||"useUploadFile"===j)A(2);else if("useConnector"===j){w(!0);let t=await (0,m.yg9)({name:o+" Project",useCase:"chat_llm"});try{var e,l;if(null==t?void 0:t.success){let l=c.Z.calcRealHost(window.location.hostname),n="".concat(null==o?void 0:o.replace(/[^a-zA-Z0-9_]/g,""),"_dataset_").concat(new Date().getTime());window.open("".concat(window.location.protocol+"//"+l,"/app/dataset_upload_step2/").concat(n,"/DOCUMENTS/").concat(null==t?void 0:null===(e=t.result)||void 0===e?void 0:e.projectId,"?datasetType=DOCUMENTS&docStoreExtractBoundingBoxes=false&docStoreIsDocument=b&isDash=true&returnToUseCase=true&tablename=").concat(n,"&useCase=CHAT_LLM&useCaseTag=true"),"_self")}else I.Am.error(null!==(l=null==t?void 0:t.error)&&void 0!==l?l:c.Z.errorDefault)}catch(e){I.Am.error(c.Z.isNullOrEmpty(e)?""+e:c.Z.errorDefault)}w(!1)}},[o,j,i,x]),eo=(0,r.useMemo)(()=>[...(null==L?void 0:L.length)>0?[{label:"Choose existing datasets",value:"chooseExistingDatasets",element:(0,n.jsx)("div",{className:"flex flex-col gap-[10px] max-h-[200px] overflow-y-scroll",children:null==L?void 0:L.map((e,l)=>(0,n.jsxs)("div",{className:"flex justify-between items-center gap-[10px]",children:[(0,n.jsx)(k.Z,{className:" !border-bwleftblue/[0.5] ",value:null==y?void 0:y.includes(null==e?void 0:e.datasetId),onChange:l=>{C(t=>l?[...t,null==e?void 0:e.datasetId]:t.filter(l=>l!==(null==e?void 0:e.datasetId)))},children:(0,n.jsx)("span",{className:" text-darkblack ",children:null==e?void 0:e.featureGroupTableName})}),!!(null==T?void 0:T.find(l=>l===(null==e?void 0:e.datasetId)))&&(0,n.jsx)(p.G,{icon:t(39847).QD,transform:{size:16},spin:!0})]},l))})}]:[],{label:"Drag and drop or upload a file/zip",value:"useUploadFile",element:(0,n.jsxs)("div",{...$({onClick:e=>e.stopPropagation()}),className:"",children:[(0,n.jsx)("input",{className:"cursor-pointer absolute block py-4 px-8 opacity-0 pin-r pin-t",type:"file",onChange:J,ref:R,disabled:"useUploadFile"!==j}),(0,n.jsx)("div",{className:"text-darkblack text-center ".concat(et?"border-orange-500":"border-gray-500"," border-2 p-[20px] ").concat(et?"bg-orange-200":"bg-gray-200"),children:"Drag here or click here to upload"}),S&&(0,n.jsx)("div",{children:null==S?void 0:S.name})]})},{label:"Connect gdrive, sharepoint / use my existing connector",value:"useConnector"}],[L,T,y,$,et,S]),es=(0,r.useMemo)(()=>(0,n.jsxs)("div",{className:"w-[500px]",children:[(0,n.jsx)("div",{className:" my-[20px] ",children:(0,n.jsx)(ee.Z,{value:j,options:eo,onChange:e=>{"useUploadFile"!==e&&(E(null),R.current&&(R.current.value=null)),N(e)}})}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-[0] mt-[20px] text-darkcolor",children:[(0,n.jsx)("span",{className:"text-bwleftblue flex-1"}),(0,n.jsxs)("div",{className:"flex gap-[0]",children:[(0,n.jsx)("span",{children:(0,n.jsx)(u.Z,{noBack:!0,className:" text-darkcolor/[0.7] rounded-full !py-[7px] !px-[24px] ",moreSpace:!0,disabled:b,onClick:V,children:"Cancel"})}),(0,n.jsx)("span",{children:(0,n.jsx)(u.Z,{disabled:b,onClick:en,moreSpace:!0,className:" !px-[24px] rounded-full !bg-bwleftblue text-darkcoloro dark:!text-darkwhite/[0.7] !py-[7px] ",children:b?(0,n.jsx)(p.G,{icon:t(39847).QD,transform:{size:16},spin:!0}):"Next"})})]})]})]}),[b,o,j,eo,en,V]),er=e=>new Promise((l,t)=>{let n=new FileReader;n.onload=e=>{l(new Blob([e.target.result]))},n.onerror=()=>{t(Error("Error reading file"))},n.readAsArrayBuffer(e)}),ei=(0,r.useCallback)(async l=>{var t,n,s,r,a;if(l&&(null==F?void 0:F.name)){let t=await (0,m.syY)({deploymentId:null,name:'AI Engineer - Chatbot "'.concat(o,'"')});if((null==t?void 0:t.success)&&(null==t?void 0:null===(n=t.result)||void 0===n?void 0:n.deploymentConversationId)){W((null==t?void 0:null===(s=t.result)||void 0===s?void 0:s.deploymentConversationId)||"");let n=new URLSearchParams(G.toString());n.set("convoId",null==t?void 0:null===(r=t.result)||void 0===r?void 0:r.deploymentConversationId);let a="\n\n$CHATLLM_BOT_NAME=".concat(o),d="\n\n$CHATLLM_BOT_DESCRIPTION=".concat(encodeURIComponent(null!=i?i:""));sessionStorage.setItem("whiteboard","".concat(f).concat(a).concat(d)),sessionStorage.setItem("hotkeyMessage",f),sessionStorage.setItem("whiteboardNoData",x?"0":"1"),sessionStorage.setItem("projectId",l),n.set("appId",e.appId),n.has("assistedAgentProjectId")&&n.delete("assistedAgentProjectId"),window.history.pushState(null,"","/chatllm/?".concat(n.toString()))}else I.Am.error((null==t?void 0:null===(a=t.result)||void 0===a?void 0:a.error)||c.Z.errorDefault)}null===(t=O.current)||void 0===t||t.close()},[o,F,f,e.appId,x,i]),ea=(0,r.useCallback)(async()=>{w(!0);try{let r=await (0,m.yg9)({name:o+" Project",useCase:"chat_llm"}),i=null;if(null==r?void 0:r.success){var e,l,t,n,s;if(i=null==r?void 0:null===(e=r.result)||void 0===e?void 0:e.projectId,"chooseExistingDatasets"===j&&(null==y?void 0:y.length)>0){let e=await Promise.all(null==L?void 0:null===(l=L.filter(e=>null==y?void 0:y.includes(null==e?void 0:e.datasetId)))||void 0===l?void 0:l.map(e=>(0,m.WhL)({projectId:i,tableName:null==e?void 0:e.featureGroupTableName})));await Promise.all(null==e?void 0:e.map(e=>{var l;return(0,m.uW9)({projectId:i,featureGroupId:null==e?void 0:null===(l=e.result)||void 0===l?void 0:l.featureGroupId})}))}else if("useUploadFile"===j&&S){let e=null,l=(null==S?void 0:S.type)||"",r=(null==S?void 0:null===(t=S.name)||void 0===t?void 0:t.toLowerCase())||"";r.endsWith(".xls")||r.endsWith(".xlsx")||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==l?e="XLS":r.endsWith(".csv")||"text/csv"==l?e="CSV":r.endsWith(".ods")||"application/vnd.oasis.opendocument.spreadsheet"==l?e="ODS":r.endsWith(".json")||r.endsWith(".jsonl")||r.endsWith(".ndjson")||r.endsWith(".ldjson")||"application/json"==l?e="JSON":r.endsWith(".tsv")?e="TSV":r.endsWith(".orc")?e="ORC":r.endsWith(".parquet")?e="PARQUET":r.endsWith(".avro")?e="AVRO":r.endsWith(".zip")?e="ZIP":r.endsWith(".tar")||r.endsWith(".tgz")||r.endsWith(".tar.gz")?e="TAR":r.endsWith(".docx")||r.endsWith(".doc")||r.endsWith(".dotx")?e="DOCX":r.endsWith(".pptx")||r.endsWith(".ppt")?e="PPTX":r.endsWith(".pdf")&&(e="PDF");let a="".concat(null==o?void 0:o.replace(/[^a-zA-Z0-9_]/g,""),"_dataset_").concat(new Date().getTime()),d=await (0,m.c9r)({projectId:i,name:a,fileFormat:e});if(null==d?void 0:d.success){let e=await er(S);if(e){let l=null==d?void 0:null===(n=d.result)||void 0===n?void 0:n.datasetUploadId,t=async e=>{console.log("Upload progress",e)},o=await (0,m.ydz)({datasetUploadId:l,partData:e,cbProgressUpload:t});if(null==o?void 0:o.success){await (0,m.Z_R)({datasetUploadId:l});let e=await (0,m.WhL)({tableName:a});await (0,m.uW9)({projectId:i,featureGroupId:null==e?void 0:null===(s=e.result)||void 0===s?void 0:s.featureGroupId})}}}}await ei(i)}}catch(e){I.Am.error(c.Z.isNullOrEmpty(e)?""+e:c.Z.errorDefault)}w(!1)},[L,o,y,j,S,F,f,e.appId]),ed=(0,r.useMemo)(()=>(0,n.jsxs)("div",{className:"w-[500px]",children:[(0,n.jsxs)("div",{className:" my-[20px] ",children:[(0,n.jsx)("div",{className:" my-[10px] text-center font-bold text-base ",children:"Write Bot Specification"}),(0,n.jsxs)("div",{className:"mx-[20px] my-[10px] text-center text-base",children:["In natural language, write your expectations for the new Bot.",i?"":" A sample prompt is filled out for you below."]}),(0,n.jsx)("textarea",{wrap:"soft",rows:5,className:" w-full bg-darkcoloro px-[6px] py-[4px] text-base text-darkcolor text-[13px] rounded !outline-none border-[1px] border-darkcolor/[0.15] ",value:f,onChange:e=>{g(e.target.value||"")},placeholder:"Enter prompt here..."})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-[0] mt-[20px] text-darkcolor",children:[(0,n.jsx)("span",{className:"text-bwleftblue flex-1"}),(0,n.jsxs)("div",{className:"flex gap-[0]",children:[(0,n.jsx)("span",{children:(0,n.jsx)(u.Z,{noBack:!0,className:" text-darkcolor/[0.7] rounded-full !py-[7px] !px-[24px] ",moreSpace:!0,disabled:b,onClick:V,children:"Cancel"})}),(0,n.jsx)("span",{children:(0,n.jsx)(u.Z,{disabled:b||!f,onClick:ea,moreSpace:!0,className:" !px-[24px] rounded-full !bg-bwleftblue text-darkcoloro dark:!text-darkwhite/[0.7] !py-[7px] ",children:b?(0,n.jsx)(p.G,{icon:t(39847).QD,transform:{size:16},spin:!0}):"Finish"})})]})]})]}),[b,o,f,ea,V]);return(0,n.jsx)(K.Z,{okText:"Next",zIndex:"z-[20]",ref:O,hideOkButton:!0,hideCancelButton:!0,disableClickOutside:!0,onChangeOpen:e.onChangeOpen,title:"AI Engineer - Create Custom Bot",centerTitle:!0,className:" border-4 border-darkcolor/[0.15] ",content:0===_?q:1===_?es:2===_?ed:null,triggerClassName:"w-full"})}),en=t(91528),eo=t(49467),es=t(57099),er=t(66888);function ei(e){var l,o,i,a,x,b,w,j,N,y,C,k,_,A,S;let{leftWidth:T,botName:P,isAdmin:O,isAdminPath:L,isProfilePath:Z,isAppsPath:M,bots:W,appId:G,logoBase64:B,themeObj:V,forceDarkmode:H,darkMode:Q,hideCustomizeTheme:q,hideThemes:K,forceThemeLogo:ee,paddingLeftHide:el,dataInitUserInfo:ei,backToProjDashUrl:ed,forceHideBotsList:ec,showBurger:eu,customModeForced:ep,defaultDarkMode:em,listExtApps:ex,botIconUrl:ev,showWarningAdmin:eh,forceBotsList:ef,appDeployId:eg,isHideTopBar:eb,isMobile:ew,isLinkUsedDeployUsed:ej,itemsExtApps:eN,isHostTeams:ey,isLinkUsedDeployId:eC,isShowInviteTeam:ek=!0,isShowUserCard:eI=!0,showCustomChatbot:e_=!1,showDesktopSidebar:eA=!1,showGotoConvoPage:eS=!1,isBotNotFound:eE=!1,renderOnlyBotSelection:eT=!1,isAgent:eP=!1,backToAgentWorkflowUrl:eO}=e,eR=(0,r.useRef)(null),eL=(0,r.useRef)(null),{data:eZ}=(0,d.Pc)({ignoreNeedLogin:!0}),eD=(0,d.z0)(),eF=(0,d.br)(),[ez,eU]=(0,d.PB)("sideBySide"),[eM,eW]=(0,d.PB)("sideBySideTimestamp"),[eG,eB]=(0,d.PB)("convoId"),[eV,eH]=(0,d.PB)("sidebar"),{isAIEngOldFlow:eQ,setIsSearchLLM:eq,isAIEngineer:eY,isComputerAgent:eJ,isAutonomousAgent:e$,setIsComputerAgent:eX,dashboardEndpoint:eK,setDashboardEndpoint:e0,showRightSidePanel:e1,setShowRightSidePanel:e2}=(0,E.b)(e=>({isAIEngOldFlow:e.isAIEngOldFlow,setIsSearchLLM:e.setIsSearchLLM,isAIEngineer:e.isAIEngineer,isComputerAgent:e.isComputerAgent,isAutonomousAgent:e.isAutonomousAgent,setIsComputerAgent:e.setIsComputerAgent,dashboardEndpoint:e.dashboardEndpoint,setDashboardEndpoint:e.setDashboardEndpoint,showRightSidePanel:e.showRightSidePanel,setShowRightSidePanel:e.setShowRightSidePanel})),e5=(0,r.useMemo)(()=>eY||G===c.Z.aiEngAppId,[eY,G]),[e3,e6]=(0,r.useState)(null),[e4,e8]=(0,r.useState)(!1),[e9,e7]=(0,r.useState)(!1),le=(0,r.useRef)(null),{onDeploymentConversationIdChanged:ll}=(0,X.h)(),{setHostingDomain:lt}=(0,er.W)(e=>({setHostingDomain:e.setHostingDomain})),[ln,lo]=(0,d.PB)("appId"),ls=ln||G,lr=(0,r.useMemo)(()=>{var e;return ls?null==ex?void 0:null===(e=ex.result)||void 0===e?void 0:e.find(e=>(null==e?void 0:e.externalApplicationId)===ls):null},[ls,ex]),li=(0,r.useMemo)(()=>{var e;return null==lr?void 0:null===(e=lr.predictionOverrides)||void 0===e?void 0:e.forTaskRuns},[lr]),la=(0,r.useMemo)(()=>{if(e5)return"/chatllm/staticllm/ds_chatbot.webp";if(ln||G){var e,l,t;let n=null==ex?void 0:null===(t=ex.result)||void 0===t?void 0:null===(l=t.find(e=>(null==e?void 0:e.externalApplicationId)===(ln||G)))||void 0===l?void 0:null===(e=l.theme)||void 0===e?void 0:e[m.my0];if(n)return n}return ev},[ex,ln,ev,e5,G]),[ld,{width:lc}]=(0,z.Z)(),lu=(0,v.useRouter)(),lp=(0,v.useSearchParams)(),lm=(0,r.useMemo)(()=>{var e;return(null==eZ?void 0:null===(e=eZ.result)||void 0===e?void 0:e.sessionToken)||null},[eZ]);(0,r.useEffect)(()=>{c.Z.sessionToken=lm},[lm]);let{data:lx}=(0,d.Yi)({deploymentId:eg,deploymentConversationId:eG}),lv=(G===c.Z.aiEngAppId||G===c.Z.appLlmEndAppId||eg)&&eG?lx:null,lh=(0,r.useMemo)(()=>{var e;return(null==lv?void 0:null===(e=lv.result)||void 0===e?void 0:e.conversationType)==="CHAT_LLM_TASK"},[null==lv?void 0:lv.result]),{data:lf}=(0,d.FG)({deploymentId:eg,isEnabled:eb&&!!eg}),lg=(0,r.useMemo)(()=>{var e,l,t;return null!==(t=null==lf?void 0:null===(l=lf.result)||void 0===l?void 0:null===(e=l.find(e=>(null==e?void 0:e.deploymentConversationId)===eG))||void 0===e?void 0:e.name)&&void 0!==t?t:null},[lf,eG]),lb=(0,r.useMemo)(()=>{if(e5)return"AI Engineer";let e=P;if(ln){var l,t;let n=null==ex?void 0:null===(t=ex.result)||void 0===t?void 0:null===(l=t.find(e=>(null==e?void 0:e.externalApplicationId)===ln))||void 0===l?void 0:l.name;n&&(e=n)}return eb?(lg&&(e=lg),(0,n.jsx)("span",{className:" text-[17px] line-clamp-1 ",children:(0,n.jsx)("span",{className:" ",children:e})})):e},[ex,lg,eb,ln,P,e5]),[lw,lj]=(0,r.useState)("");(0,r.useEffect)(()=>{(0,m._jm)({}).then(e=>{var l,t;lt(null==e?void 0:null===(l=e.result)||void 0===l?void 0:l.hostingDomain),e0(null==e?void 0:null===(t=e.result)||void 0===t?void 0:t.dashboardEndpoint)}).catch(s())},[e0,lt]),(0,r.useEffect)(()=>{var e;eq(!!(null==lr?void 0:null===(e=lr.predictionOverrides)||void 0===e?void 0:e.isSearchLlm))},[lr]);let[lN,ly]=(0,r.useState)(null),{theme:lC,isDarkS:lk}=(0,f.J)();(0,r.useEffect)(()=>{if(eD){let e=document.querySelector(":root");(null==e?void 0:e.style)!=null&&e.style.setProperty("--color-bw-left-blue",c.Z.appllmColorNumbers)}},[lk,eD]);let lI=(null==eZ?void 0:null===(l=eZ.result)||void 0===l?void 0:l.isChatOnly)===!1;null==eZ||null===(o=eZ.result)||void 0===o||o.internal;let l_=(0,r.useMemo)(()=>{var e,l;return!!(null==eZ?void 0:null===(l=eZ.result)||void 0===l?void 0:null===(e=l.organization)||void 0===e?void 0:e.isSelfServe)},[eZ]),lA=(0,r.useCallback)(async()=>{var e,l,t,n;if(G===c.Z.appLlmEndAppId)return;let o=await (0,m.syY)({deploymentId:null,name:"AI Engineer - New Chat"});if((null==o?void 0:o.success)&&(null==o?void 0:null===(e=o.result)||void 0===e?void 0:e.deploymentConversationId)){ll((null==o?void 0:null===(l=o.result)||void 0===l?void 0:l.deploymentConversationId)||"");let e=new URLSearchParams(lp.toString());e.set("convoId",null==o?void 0:null===(t=o.result)||void 0===t?void 0:t.deploymentConversationId),sessionStorage.setItem("aiEngInitialPrompt","Create a custom chatbot"),e.set("appId",c.Z.aiEngAppId),e.has("aiAssistedEditAgentAppId")&&e.delete("aiAssistedEditAgentAppId"),e.has("assistedAgentProjectId")&&e.delete("assistedAgentProjectId"),e.has("assistedChatbotProjectId")&&e.delete("assistedChatbotProjectId"),window.history.pushState(null,"","/chatllm/?".concat(e.toString()))}else I.Am.error((null==o?void 0:null===(n=o.result)||void 0===n?void 0:n.error)||c.Z.errorDefault)},[G]),lS=(0,d.ZC)({llmName:es.T}),[lE,lT]=(0,r.useState)("all"),lP=(0,r.useMemo)(()=>{var e;let l=ew?null==W?void 0:W.filter(e=>"GPT-4"!==e.name&&"Abacus.AI Smaug"!==e.name&&e.isVisible):null==W?void 0:W.filter(e=>e.isVisible),o=ew?(null==l?void 0:l.length)>5:(null==l?void 0:l.length)>=10,s=null==l?void 0:l.some(e=>!(null==e?void 0:e.isLLm));if(!c.Z.isNullOrEmpty(lw)){let e=null==lw?void 0:lw.toLowerCase();l=null==W?void 0:W.filter(l=>{var t;return c.Z.searchIsTextInside(null==l?void 0:null===(t=l.name)||void 0===t?void 0:t.toLowerCase(),e)&&(null==l?void 0:l.isVisible)})}let r=null==(l=(l=[...null!=l?l:[]]).filter(e=>(!(null==e?void 0:e.isDeprecated)||(null==e?void 0:e.appId)===G)&&(!eG||(null==e?void 0:e.appId)!==(null==lS?void 0:lS.externalApplicationId))))?void 0:l.filter(e=>null==e?void 0:e.isLLm),i=null==l?void 0:l.filter(e=>!(null==e?void 0:e.isLLm)),a=null==l?void 0:l.find(e=>e.isSystemCreated),d=async e=>{var l,t,n,o,s,r,i,a;if((null==e?void 0:e.appId)==="add")null===(t=eR.current)||void 0===t||null===(l=t.close)||void 0===l||l.call(t),eQ?null===(o=le.current)||void 0===o||null===(n=o.open)||void 0===n||n.call(o):await lA();else if("true"===sessionStorage.getItem("isCopilotProcessing")&&(sessionStorage.removeItem("projectId"),sessionStorage.removeItem("whiteboard"),sessionStorage.removeItem("hotkeyMessage")),!eJ||(null==e?void 0:e.forComputerUse)||(eX(!1),e2(!1)),eg!==(null==e?void 0:e.deploymentId)||ef){null===(a=eR.current)||void 0===a||null===(i=a.close)||void 0===i||i.call(a);let l=new URLSearchParams(lp.toString());l.set("appId",(null==e?void 0:e.appId)||""),l.has("convoId")&&l.delete("convoId"),l.has("aiAssistedEditAgentAppId")&&l.delete("aiAssistedEditAgentAppId"),l.has("assistedAgentProjectId")&&l.delete("assistedAgentProjectId"),l.has("assistedChatbotProjectId")&&l.delete("assistedChatbotProjectId"),l.has("sideBySide")&&l.delete("sideBySide"),l.has("sideBySideTimestamp")&&l.delete("sideBySideTimestamp"),l.set("appId",null==e?void 0:e.appId),(null==e?void 0:e.isSystemCreated)&&(null==e?void 0:e.appId)!==c.Z.aiEngAppId&&(null==e?void 0:e.appId)!==c.Z.appLlmEndAppId||(l.has("showArtifact")&&l.delete("showArtifact"),l.has("playgroundType")&&l.delete("playgroundType")),(null==e?void 0:e.appId)===c.Z.aiEngAppId&&((0,m.lIh)(),l.has("projectId")&&l.delete("projectId")),window.history.pushState(null,"","/chatllm/?".concat(l.toString()))}else{null===(r=eR.current)||void 0===r||null===(s=r.close)||void 0===s||s.call(r);let l=new URLSearchParams(lp.toString());l.has("aiAssistedEditAgentAppId")&&l.delete("aiAssistedEditAgentAppId"),l.has("assistedAgentProjectId")&&l.delete("assistedAgentProjectId"),l.has("assistedChatbotProjectId")&&l.delete("assistedChatbotProjectId"),l.set("appId",(null==e?void 0:e.appId)||""),!l_&&l.has("convoId")&&l.delete("convoId"),e5&&l.delete("convoId"),l.set("appId",null==e?void 0:e.appId),window.history.pushState(null,"","/chatllm/?".concat(l.toString()))}},x=!l_,v=[{id:"all",label:"All",count:null==l?void 0:l.length,items:l},{id:"llm",label:"LLMs",count:null==r?void 0:r.length,items:r},...s?[{id:"custom",label:ew?"Custom":"Custom Bots",count:null==i?void 0:i.length,items:i}]:[]],h=v.find(e=>e.id===lE),f=null==h?void 0:null===(e=h.items)||void 0===e?void 0:e.map((e,l)=>{var o,s;return(0,n.jsx)("div",{className:"mx-3 my-2",children:(0,n.jsx)(J.Z,{enabled:!!(null==e?void 0:e.description),title:null==e?void 0:e.description,children:(0,n.jsx)("span",{children:(0,n.jsxs)(u.Z,{noScale:!0,onHover:l=>{ly((l?null==e?void 0:e.name:null)||null)},onClick:()=>d(e),className:(0,g.cn)("w-full font-medium !px-2 min-h-12 hover:!bg-bwleftblue/20 transition-all flex items-center text-sm gap-2.5 rounded-md",!e5&&ls===(null==e?void 0:e.appId)||e5&&c.Z.aiEngAppId===(null==e?void 0:e.appId)?"!bg-bwleftblue/50 hover:!bg-bwleftblue/50":"bg-darkcoloro ".concat(ef?"":"dark:bg-bwbackvia"),(null==e?void 0:e.appId)==="add"?"border-bwleftblue border text-bwleftblue":"text-darkcolor"),children:[(0,n.jsx)("img",{src:(null==e?void 0:e.appId)==="add"||(null==e?void 0:e.appId)===c.Z.aiEngAppId?"/chatllm/staticllm/ds_chatbot.webp":(null==e?void 0:null===(o=e.theme)||void 0===o?void 0:o[m.my0])||(0,F.B)("hp_chat_llm.webp"),alt:"",sizes:"24",width:24,height:24,className:"rounded-full size-6 object-cover border border-darkcolor/20 shrink-0"}),(0,n.jsx)("div",{className:"grow line-clamp-1 text-left break-all",children:Y.highlightIsTextInside(null!==(s=null==e?void 0:e.name)&&void 0!==s?s:"",lw)}),!(null==e?void 0:e.isAdd)&&!(null==e?void 0:e.isCopilot)&&!e.isLLm&&l_&&(0,n.jsxs)("span",{className:" my-[3px] flex items-center gap-[4px] ",children:[(0,n.jsx)(J.Z,{title:"Edit",children:(0,n.jsx)("span",{children:(0,n.jsx)(u.Z,{onClickPromise:l=>new Promise(l=>{(0,m.vHz)({deploymentId:null==e?void 0:e.deploymentId}).then(e=>{var t,n;(null==e?void 0:e.success)&&(null==e?void 0:null===(t=e.result)||void 0===t?void 0:t.projectId)?(window.open("https://abacus.ai/app/projects/".concat((null==e?void 0:null===(n=e.result)||void 0===n?void 0:n.projectId)||""),"_blank"),l(!0)):(I.Am.error((null==e?void 0:e.error)||c.Z.errorDefault),l(!1))}).catch(e=>{I.Am.error(c.Z.errorDefault),l(!1)})}),className:" !text-[13px] !px-[8px] ",children:(0,n.jsx)(p.G,{icon:t(89229).Xc,transform:{size:16}})})})}),(0,n.jsx)(J.Z,{title:"Delete",children:(0,n.jsx)("span",{onClick:e=>{null==e||e.stopPropagation()},children:(0,n.jsx)($.Z,{title:"Are you sure?",className:" w-auto ",isDanger:!0,okText:"Delete",onClickOk:l=>new Promise(l=>{(0,m.ZYY)({externalApplicationId:null==e?void 0:e.appId}).then(t=>{if(null==t?void 0:t.success){var n,o;I.Am.success("Done!"),null===(o=eR.current)||void 0===o||null===(n=o.close)||void 0===n||n.call(o);let t=new URLSearchParams(lp.toString());G===(null==e?void 0:e.appId)?(t.set("appId",a.appId),t.has("assistedAgentProjectId")&&t.delete("assistedAgentProjectId"),t.has("assistedChatbotProjectId")&&t.delete("assistedChatbotProjectId"),(0,m.vOe)(!0),window.location.href="/chatllm/?".concat(t.toString())):lu.refresh(),l(!0)}else I.Am.error((null==t?void 0:t.error)||c.Z.errorDefault),l(!1)}).catch(e=>{I.Am.error(c.Z.errorDefault),l(!1)})}),children:(0,n.jsx)(u.Z,{className:" !text-[13px] !px-[8px] text-red-700 ",children:(0,n.jsx)(p.G,{icon:t(82435).$,transform:{size:16}})})})})})]})]})})})},"bot"+(null==e?void 0:e.appId)+l)});return f=(0,n.jsx)("div",{className:"min-h-[200px] h-[200px] md:min-h-[360px] md:h-[360px] relative my-1",children:(0,n.jsx)(U.Z,{onlyVertical:!0,children:f})}),(0,n.jsxs)("div",{className:"",children:[o&&(0,n.jsx)("div",{className:"px-3 pt-2 pb-3",children:(0,n.jsxs)("div",{className:" text-sm h-9 md:h-10 px-3 py-2 border-[1px] rounded-md border-darkcolor/[0.15] flex items-center ",children:[(0,n.jsx)("span",{className:"opacity-50 mr-[5px] text-darkcolor",children:(0,n.jsx)(p.G,{icon:t(79100).wn,transform:{size:14}})}),(0,n.jsx)("input",{autoFocus:!0,placeholder:"Search Bot...",className:"bg-transparent !outline-none text-darkcolor",value:lw,onChange:e=>{lj(e.target.value||"")},dir:"auto"})]})}),x?null:(0,n.jsx)("div",{className:"h-9 flex border-b dark:border-darkcolor/20 justify-center gap-3 md:gap-5",children:v.map(e=>(0,n.jsxs)("div",{className:(0,g.cn)("flex items-center gap-2 h-9 border-b-2 border-transparent px-1.5 cursor-pointer select-none",{"border-bwleftblue":lE===e.id}),onClick:()=>lT(e.id),children:[(0,n.jsx)("div",{className:"text-darkcolor",children:e.label}),(0,n.jsx)("div",{className:"h-5 flex items-center px-1.5 border border-gray-300 dark:border-gray-600 rounded-full text-xs text-gray-500",children:e.count||0})]},e.id))}),(0,n.jsx)("div",{children:f}),l_&&(0,n.jsx)("div",{className:"inset-x-0 bottom-0 border-t h-16 shadow-lg px-4 flex items-center dark:border-darkcolor/20",children:(0,n.jsxs)("div",{onClick:()=>d({name:"AI Engineer",appId:c.Z.aiEngAppId,theme:{},isCopilot:!0}),className:(0,g.cn)("cursor-pointer w-full h-10 flex items-center text-sm text-bwleftblue rounded-full gap-3 px-3 border hover:bg-bwleftblue/50 hover:border-bwleftblue/50 transition-all dark:border-darkcolor/20",{"bg-bwleftblue/50 border-bwleftblue/50":!e5&&ls===c.Z.aiEngAppId||e5}),children:[(0,n.jsx)("img",{src:"/chatllm/staticllm/ds_chatbot.webp",alt:"",sizes:"24",width:24,height:24,className:"rounded-full size-6 object-cover border border-darkcolor/20 shrink-0"}),(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("div",{className:"font-medium",children:"AI Engineer"}),(0,n.jsx)("div",{className:"text-[11px] text-darkcolor/60 -mt-1",children:"Create custom chatbots and AI agents"})]})]})})]})},[lS,W,lc,ls,lN,l_,lw,ew,lp,l_,lw,eG,e5,lE,lT,l_,eT]),lO=e=>{eU(null),eW(null),eV?eH(null):eH("1")},[lR,lL]=(0,r.useState)(null);(0,r.useEffect)(()=>{lL(window.location.host)},[]);let lZ=(0,r.useMemo)(()=>{if(!lI||!ed||l_)return null;{let e=eK;return e+=ed,(0,n.jsx)("a",{href:e,target:"_blank",children:(0,n.jsx)(J.Z,{title:"Go to deployment detail",children:(0,n.jsx)(p.G,{icon:t(39907)._u,transform:{size:20}})})})}},[lI,l_,lR,ed,eK]),lD=(0,r.useMemo)(()=>{if(!lI||!eO||l_)return null;{let e=eK;return e+=eO,(0,n.jsx)("a",{href:e,target:"_blank",children:(0,n.jsx)(J.Z,{title:"Go to workflow",children:(0,n.jsx)(p.G,{icon:t(32342).Bk,transform:{size:17}})})})}},[lI,l_,eO,eK]),lF=(0,v.usePathname)().includes("/admin/referrals"),lz=null!=eZ&&!!eZ.result&&(0,R.q)(null==eZ?void 0:eZ.result),lU=(0,r.useMemo)(()=>{if((null==eZ?void 0:eZ.result)&&!ew&&ek&&!eD){var e,l;return!lz&&(null==eZ?void 0:null===(l=eZ.result)||void 0===l?void 0:null===(e=l.organization)||void 0===e?void 0:e.isSelfServe)}return!1},[eD,eZ,ew,ek,lz]),lM=(0,r.useMemo)(()=>{if(eD)return!1;if(ew)return(null==eZ?void 0:eZ.result)&&!lF&&lz;if((null==eZ?void 0:eZ.result)&&!lF&&(lz||ek)){var e;return null==eZ?void 0:null===(e=eZ.result)||void 0===e?void 0:e.canReferUser}return!1},[eD,eZ,ew,ek,lz]),lW=(0,r.useMemo)(()=>lF&&lz,[lF,lz]);if(ef)return(0,n.jsx)("div",{className:" sm:w-[480px] w-[80vw] ",children:lP});let lG="AI"===lk,lB=(0,n.jsx)(J.Z,{title:"Edit with AI Engineer",children:(0,n.jsx)("a",{href:"/chatllm/?appId=".concat(c.Z.aiEngAppId,"&aiAssistedEditAgentAppId=").concat(ls),target:"_blank",children:(0,n.jsx)("span",{className:"cursor-pointer hover:rotate-180 pl-[20px] ",children:(0,n.jsx)(p.G,{icon:t(28344).vq,transform:{size:16}})})})}),lV=(0,n.jsx)(h.Z,{ref:eR,width:ew?280:354,className:(0,g.cn)("dark:!bg-bwbackvia pt-[4px] px-0 pb-0",ew?"mr-[56px]":"",{hidden:null===lb}),disabled:lh||eb,content:lP,childrenOpen:(0,n.jsxs)("span",{className:(0,g.cn)("relative flex items-center !cursor-default px-[10px] py-[6px] rounded justify-center","lg:absolute lg:-translate-x-1/2","transition-all duration-300",eb?"lg:left-[50%]":"lg:left-[calc(50%+130px)]",{"lg:left-1/2":!!eV&&!eJ||e1,"lg:left-[42%]":eT,hidden:!lb,"w-[300px]":e1,"custom-md:min-w-[400px]":!e1}),"data-render-only-bot-selection":eT,children:[(0,n.jsx)("span",{className:"mr-[12px]",children:li?(0,n.jsx)("div",{className:"size-[25px] rounded-full bg-bwleftblue/15 flex items-center justify-center text-bwleftblue",children:(0,n.jsx)(p.G,{icon:t(45533).E9,transform:{size:16}})}):(0,n.jsx)("img",{src:la||(0,F.B)("hp_chat_llm.webp"),alt:"",sizes:"40",width:25,height:25,className:"rounded-full"})}),(0,n.jsx)("span",{className:" text-[13px] leading-[1.3] sm:leading-[1.4] sm:text-[16px] line-clamp-2",children:null!=lb?lb:"ChatLLM"}),(0,n.jsx)("span",{className:" ml-[4px] sm:ml-[9px] ",children:(0,n.jsx)(p.G,{icon:t(73839).on,transform:{size:16}})}),eP&&lB]}),children:(0,n.jsxs)("span",{className:(0,g.cn)("relative flex items-center !cursor-default px-[10px] py-[6px] rounded custom-md:min-w-[400px] justify-center","transition-all duration-300",eb?"left-[50%] absolute -translate-x-1/2 w-[70%]":"lg:left-[calc(50%+130px)] lg:absolute lg:-translate-x-1/2",{"lg:left-1/2":!!eV&&!eJ||e1,"lg:left-[42%]":eT,hidden:!lb,"w-[300px]":e1,"custom-md:min-w-[400px]":!e1}),children:[eh&&!eb&&(0,n.jsx)("div",{onClick:e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),lu.push("/admin/bots/?id=".concat(ls)),lu.refresh()},className:" !cursor-pointer text-[17px] py-[2px] px-[2px] mr-[10px] mt-[1px] text-yellow-500 flex ",children:(0,n.jsx)(J.Z,{title:"Warning: Bot available for admins only: Modify Permissions",children:(0,n.jsx)(p.G,{icon:t(89653).faTriangleExclamation,transform:{size:20}})})}),(0,n.jsx)("span",{className:" flex-1 "}),(!ec||li)&&(lr||G===c.Z.aiEngAppId||G===c.Z.appLlmEndAppId||eE)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"mr-[12px]",children:li?(0,n.jsx)("div",{className:"size-[25px] rounded-full bg-bwleftblue/15 flex items-center justify-center text-bwleftblue",children:(0,n.jsx)(p.G,{icon:t(45533).E9,transform:{size:16}})}):eb?null:(0,n.jsx)("img",{src:la||(0,F.B)("hp_chat_llm.webp"),alt:"",sizes:"40",width:25,height:25,className:"rounded-full"})}),(0,n.jsx)("span",{style:eb?{color:"white"}:{},className:" text-[13px] leading-[1.3] sm:leading-[1.4] sm:text-[16px] line-clamp-2",children:li?null!==(C=null==lr?void 0:lr.name)&&void 0!==C?C:"Tasks":!la&&((null==lr?void 0:lr.isSystemCreated)==null||(null==lr?void 0:lr.isSystemCreated))?"-":null!=lb?lb:"ChatLLM"}),!eb&&!lh&&(0,n.jsx)("span",{className:" ml-[4px] sm:ml-[9px] ",children:(0,n.jsx)(p.G,{icon:t(92301).gc,transform:{size:16}})})]}):null,eP&&lB,(0,n.jsx)("span",{className:" flex-1 "})]})});return eT?lV:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:eb?{background:c.Z.redColor}:{},ref:ld,className:"  text-darktoptext p-[15px] absolute bottom-0 left-0 right-0 top-0 flex items-center justify-between gap-[4px] bg-transparent "+(e1?"pr-[12px]":""),children:[eu&&(0,n.jsx)(ea,{onClickBurger:lO,sideBarClasses:" md:hidden block "+(eb?" !text-white ":" ")}),(0,n.jsxs)("div",{className:"relative self-stretch flex items-center ".concat(ew||e1?e1?"":"justify-center sm:w-[245px]":"justify-start [@media(min-width:980px)]:w-[257px] [@media(min-width:980px)]:max-w-[257px] [@media(min-width:980px)]:min-w-[257px]"),children:[!eb&&!e1&&(0,n.jsxs)("a",{href:"/chatllm/",children:[(0,n.jsx)("img",{alt:"",src:null!==(_=null!==(k=null!=B?B:ee)&&void 0!==k?k:e3)&&void 0!==_?_:(0,F.B)("logo_text80.png"),className:(0,g.cn)("object-contain lg:max-w-[200px] hidden dark:block h-[28px] max-w-[130px]",{"h-[44px] max-w-[100px]":!!e3,block:!!H||lG})}),(0,n.jsx)("img",{alt:"",src:null!==(S=null!==(A=null!=B?B:ee)&&void 0!==A?A:e3)&&void 0!==S?S:(0,F.B)("logo_text80Dark.png"),className:(0,g.cn)("object-contain lg:max-w-[200px] block dark:hidden h-[28px] max-w-[130px]",{"h-[44px] max-w-[100px]":!!e3,hidden:!!H||lG})})]}),ew||!eA||G===c.Z.testAiAgentAppId||eD?null:(0,n.jsx)(ea,{onClickBurger:lO,sideBarClasses:"md:block hidden absolute  ".concat(eb||e1?"left-0":"-right-4"," ")+(eb?" !text-white ":" ")})]}),eF&&(0,n.jsx)("div",{className:" absolute z-[1] left-[10px] opacity-50 aa[200px] top-[80px] text-darkcolor top-0 bottom-0 flex items-center gap-[4px] ",children:(0,n.jsx)("div",{children:(0,n.jsx)("span",{className:" text-[14px] ml-[10px] flex items-center ",children:(0,n.jsxs)("span",{onClick:e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),window.location.href="/chatllm/"},className:" opacity-80 hover:!opacity-100 !cursor-pointer hover:!underline hover:!text-blue-500 ",children:[(0,n.jsx)(p.G,{className:" opacity-70 ",icon:t(74605).A3,transform:{size:16}}),(0,n.jsx)("span",{className:" ml-[5px] ",children:"Back to ChatLLM"})]})})})}),ew||!eA||e$||eb||eD?null:(0,n.jsx)(en.Z,{appId:G,deploymentId:null==lr?void 0:lr.deploymentId,sideBySidePdf:!1,isSidebar:!0,isMobile:ew,showTextAsNew:!1,className:" ".concat(e1?"left-[48px]":"left-[306px]"," !top-[17px] [@media(max-width:980px)]:!hidden"),isSelfServe:l_}),eS&&!e1?(0,n.jsx)("a",{href:"/profile",children:(0,n.jsx)("span",{className:" items-center justify-start text-[13px] cursor-pointer px-[6px] py-[6px] [@media(min-width:1150px)]:flex ",children:(0,n.jsx)("span",{className:" text-center ",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:" mr-[7px] ",children:(0,n.jsx)(p.G,{icon:t(23610).A3,transform:{size:16}})}),"Go to Profile"]})})})}):null,!eD&&lV,eD&&(0,n.jsx)(eo.Z,{}),!ew&&!eS&&lZ&&!eb&&!e1&&(0,n.jsxs)("div",{className:" lg:absolute sm-screen:absolute sm-screen:right-[232px] hidden [@media(min-width:1024px)]:flex",children:[(0,n.jsx)("span",{className:" pr-[20px] ",children:eP&&lD}),lZ]}),!lU||lM||e1?null:(0,n.jsx)("div",{className:"mr-[12px] custom-md:absolute custom-md:right-[208px]",children:(0,n.jsxs)(u.Z,{className:" !px-[26px] !py-[8px] !border-[2px] border-white/[.5] rounded-full text-[14px] min-w-[160px]",onClick:()=>{lu.push("/admin/team/")},children:[(0,n.jsx)("span",{className:"mr-[12px]",children:(0,n.jsx)(p.G,{icon:t(27845).FV,transform:{size:16}})}),(0,n.jsx)("span",{children:"Invite Team"})]})}),!lU&&lM&&(null==eZ?void 0:null===(a=eZ.result)||void 0===a?void 0:null===(i=a.organization)||void 0===i?void 0:i.isSelfServe)&&!e1?(0,n.jsx)("div",{className:"mr-[12px] absolute right-[208px]",children:(0,n.jsxs)(u.Z,{className:" !px-[26px] !py-[8px] !border-[2px] border-white/[.5] rounded-full text-white text-[14px] min-w-[160px] whitespace-nowrap",onClick:()=>{lu.push("/admin/referrals/")},children:[(0,n.jsx)("span",{className:"mr-[12px]",children:(0,n.jsx)(p.G,{icon:t(6673).Cl,transform:{size:16}})}),(0,n.jsx)("span",{children:"Refer Friends ($)"})]})}):null,lW&&(null==eZ?void 0:null===(b=eZ.result)||void 0===b?void 0:null===(x=b.organization)||void 0===x?void 0:x.isSelfServe)&&!e1?(0,n.jsx)("div",{className:"custom-md:absolute custom-md:right-[360px]",children:(0,n.jsx)(u.Z,{className:" !px-[26px] !py-[8px] !border-[2px] border-white/[.5] rounded-full text-white text-[14px] min-w-[100px] whitespace-nowrap",onClick:()=>{lu.push("/joinorg/")},children:(0,n.jsx)("span",{children:"Upgrade"})})}):null,lU&&lM&&(null==eZ?void 0:null===(j=eZ.result)||void 0===j?void 0:null===(w=j.organization)||void 0===w?void 0:w.isSelfServe)&&!e1?(0,n.jsx)(h.Z,{ref:eL,isNeedCloseFromContent:!0,noContentPadding:!0,width:140,content:e=>(0,n.jsxs)("div",{children:[(0,n.jsx)(J.Z,{title:"Refer friends, make money",children:(0,n.jsx)("span",{children:(0,n.jsxs)("div",{className:"cursor-pointer w-full p-2.5 flex gap-2 items-center whitespace-nowrap text-darkcolor hover:bg-darkcolor/10",onClick:()=>lu.push("/admin/referrals/"),children:[(0,n.jsx)(p.G,{icon:t(6673).Cl,transform:{size:16}}),(0,n.jsx)("span",{className:"text-sm",children:"Refer Friends"})]})})}),(0,n.jsx)(J.Z,{title:"Invite team members ",children:(0,n.jsx)("span",{children:(0,n.jsxs)("div",{className:"cursor-pointer w-full p-2.5 flex gap-2 items-center whitespace-nowrap text-darkcolor hover:bg-darkcolor/10",onClick:()=>lu.push("/admin/team/"),children:[(0,n.jsx)(p.G,{icon:t(27845).FV,transform:{size:16}}),(0,n.jsx)("span",{className:"text-sm",children:"Invite Team"})]})})})]}),children:(0,n.jsxs)("div",{className:"hover:bg-darkcolor/10 cursor-pointer text-sm mr-3 py-2 px-1.5 rounded-md sm-screen:absolute sm-screen:right-[200px]",children:[(0,n.jsxs)("div",{className:"whitespace-nowrap flex items-center gap-2 md-screen:hidden",children:[(0,n.jsx)("span",{children:"Refer ($) / Invite"}),(0,n.jsx)(p.G,{icon:t(33812).pt,transform:{size:10}})]}),(0,n.jsxs)("div",{className:"whitespace-nowrap flex items-center gap-2 hidden md-screen:block",children:[(0,n.jsx)(p.G,{icon:t(27845).FV,transform:{size:16}}),(0,n.jsx)(p.G,{icon:t(33812).pt,transform:{size:10}})]})]})}):null,!eI||eb||e1?null:(0,n.jsx)("div",{className:"".concat(e1?"w-[36px]":"sm:w-[200px] w-[64px]"," "),children:(0,n.jsx)(D,{isAdmin:O,appId:ls,themeObj:V,hideThemes:K,hideCustomizeTheme:q,botName:lb,botIconUrl:la,forceThemeLogo:ee,listExtApps:ex,isLinkUsedDeployUsed:ej,isLinkUsedDeployId:eC,itemsExtApps:eN,customModeForced:ep,defaultDarkMode:em,isAdminPath:L,isProfilePath:Z,isAppsPath:M,isSelfService:null==eZ?void 0:null===(y=eZ.result)||void 0===y?void 0:null===(N=y.organization)||void 0===N?void 0:N.isSelfServe,dataInitUserInfo:ei,isMobile:ew,darkMode:Q,forceDarkmode:H})})]}),e_&&eQ&&(e4||e9)&&!e1?(0,n.jsx)(et,{ref:le,appId:ls,onChangeOpen:e=>e7(e)}):null]})}let ea=e=>{let{onClickBurger:l,sideBarClasses:o}=e;return(0,n.jsx)(J.Z,{title:"Toggle SideNav",children:(0,n.jsx)("div",{onClick:l,className:"cursor-pointer flex-shrink-0 pr-[11px] -ml-[10px] pl-[8px] ".concat(o),children:(0,n.jsx)(p.G,{icon:t(89339).Y5,transform:{size:18}})})})}},91528:function(e,l,t){"use strict";var n=t(57437),o=t(53436),s=t(49070),r=t(3916),i=t(29827),a=t(14438),d=t(14301),c=t(48547),u=t(84979),p=t(99376),m=t(46314),x=t.n(m),v=t(5529),h=t(89475),f=t(86159);l.Z=e=>{let{deploymentId:l,appId:m,showTextAsNew:g,sideBySidePdf:b,isMobile:w,isLink:j,isSidebar:N,className:y,codeLLM:C,isSelfServe:k}=e,{isEditNameAny:I,onDeploymentConversationIdChanged:_}=(0,u.h)(),{listOfConversationsData:A,isComputerAgent:S,setIsNewChatClicked:E,isNewChatProcessing:T,setIsNewChatProcessing:P,isSearchLLM:O,isCentredChatInfo:R,isMatrixAgent:L,isAutonomousAgent:Z,isAssistedAgentCreation:D,isWebSearchSelected:F,setIsWebSearchSelected:z,isThinkSelected:U,setIsThinkSelected:M,prependMessage:W,setPrependMessage:G}=(0,v.b)(e=>({listOfConversationsData:e.listOfConversationsData,isComputerAgent:e.isComputerAgent,setIsNewChatClicked:e.setIsNewChatClicked,isNewChatProcessing:e.isNewChatProcessing,setIsNewChatProcessing:e.setIsNewChatProcessing,isSearchLLM:e.isSearchLLM,isCentredChatInfo:e.isCentredChatInfo,isMatrixAgent:e.isMatrixAgent,isAutonomousAgent:e.isAutonomousAgent,isAssistedAgentCreation:e.isAssistedAgentCreation,isWebSearchSelected:e.isWebSearchSelected,setIsWebSearchSelected:e.setIsWebSearchSelected,isThinkSelected:e.isThinkSelected,setIsThinkSelected:e.setIsThinkSelected,prependMessage:e.prependMessage,setPrependMessage:e.setPrependMessage})),B=(0,p.useSearchParams)(),V=(0,i.NL)(),H=(0,p.useRouter)(),[Q,q]=(0,s.PB)("sidebar"),Y=(0,s.T5)(),J=e=>{if(m!==r.Z.appLlmEndAppId&&!R){if(m!==r.Z.aiEngAppId&&!l){a.Am.error("Something went wrong. Please refresh.");return}if("true"===sessionStorage.getItem("isCopilotProcessing")&&(sessionStorage.removeItem("projectId"),sessionStorage.removeItem("whiteboard"),sessionStorage.removeItem("whiteboardNoData"),sessionStorage.removeItem("hotkeyMessage")),k){F&&z(!1),(null==W?void 0:W.id)==="pptgen"&&G(null),U&&M(!1);let e=new URLSearchParams(B.toString()),l="ai_engineer"===m?"ai_engineer":e.has("projectId")&&(null==Y?void 0:Y.externalApplicationId)?null==Y?void 0:Y.externalApplicationId:m,t="/?appId=".concat(l);Q&&(t+="&sidebar=1"),e.has("ide")&&(t+="&ide=".concat(e.get("ide"))),e.has("projectId")&&(t+="&projectId=".concat(e.get("projectId"))),H.push(t)}else{E(!0),P(!0);let e=()=>{(0,o.syY)(m===r.Z.aiEngAppId?{deploymentId:null,name:"AI Engineer - New Chat"}:{deploymentId:l,name:S?s.be:Z?s.h6:s.nS,externalApplicationId:m}).then(e=>{var t,n,o,s;if((null==e?void 0:e.success)&&(null==e?void 0:null===(t=e.result)||void 0===t?void 0:t.deploymentConversationId)){if(null==V||V.invalidateQueries({queryKey:["listConvos",l]}),_((null==e?void 0:null===(n=e.result)||void 0===n?void 0:n.deploymentConversationId)||""),w&&j||N){let l=new URLSearchParams(B.toString());l.set("convoId",null==e?void 0:null===(o=e.result)||void 0===o?void 0:o.deploymentConversationId),l.set("appId",m),l.has("aiAssistedEditAgentAppId")&&l.delete("aiAssistedEditAgentAppId"),l.has("assistedAgentProjectId")&&l.delete("assistedAgentProjectId"),l.has("assistedChatbotProjectId")&&l.delete("assistedChatbotProjectId"),l.has("showArtifact")&&l.delete("showArtifact"),l.has("playgroundType")&&l.delete("playgroundType"),window.history.pushState(null,"","/chatllm/?".concat(l.toString()))}}else a.Am.error((null==e?void 0:null===(s=e.result)||void 0===s?void 0:s.error)||r.Z.errorDefault)}).catch(e=>{a.Am.error(r.Z.isNullOrEmpty(e)?""+e:r.Z.errorDefault)}).finally(()=>{P(!1)})};S?setTimeout(()=>{e()},500):e()}}},$=e=>{var l;let t=(null==A?void 0:A.result)||[],n=null==t?void 0:null===(l=t.filter(e=>e.conversationType==h.i))||void 0===l?void 0:l[0];if(n){if(_(n.deploymentConversationId),w&&j||N){let e=new URLSearchParams(B.toString());e.set("convoId",n.deploymentConversationId),e.set("appId",m),window.history.pushState(null,"","/chatllm/?".concat(e.toString()))}}else{let e=new URLSearchParams(B.toString());e.delete("convoId"),window.history.pushState(null,"","/chatllm/?".concat(e.toString()))}};if(j)return(0,n.jsx)("div",{className:"flex text-white bg-bwleftblue items-center justify-center cursor-pointer border-[1px] border-bwleftblue px-[8px] py-[2px] rounded-[12px] ".concat(I?"pointer-events-none":""),onClick:J,children:(0,n.jsx)(c.G,{icon:t(74751).r8,transform:{size:12}})});if(D)return null;let X=()=>w||Z?(0,n.jsx)("div",{className:"transition-all duration-300 ".concat(x().newChatWithSearch," ").concat(L||Z?"!w-[130px] ":""," ").concat(S||O?"!w-[135px]":""," ").concat(w?"relative mt-[8px] flex items-center justify-center":"absolute z-[12] top-[16px] flex items-center justify-center"+(N?" left-[16px]":"1"!==b?" left-[276px] ":" hidden")," ").concat(y),children:(0,n.jsxs)(d.Z,{disabled:I||T,onClick:Z?$:J,className:" !px-[16px] !py-[8px] !border-[0px] font-semibold !bg-bwleftblue rounded-full text-white text-[14px] w-[120px]"+(L?"!w-[130px]":"")+(I?" !bg-gray-500 ":" ")+(S||O?"!w-[135px]":""),children:[!Z&&(0,n.jsx)("span",{className:"mr-[7px]",children:(0,n.jsx)(c.G,{icon:t(74751).r8,transform:{size:12}})}),(0,n.jsx)("span",{children:O?"New Search":S?"New Session":Z?"Control Panel":"New ".concat(L?"Matrix":g?"":"Chat")})]})}):(0,n.jsx)("div",{className:"transition-all duration-300 ".concat("absolute z-[12] top-[16px] flex items-center justify-center"+(N?" left-[16px]":"1"!==b?" left-[16px] ":" hidden")," ").concat(y),children:(0,n.jsx)(d.Z,{disabled:I||T,onClick:Z?$:J,className:"!border-[0px] !p-0",noBack:!0,children:(0,n.jsx)("span",{className:"mr-[7px] text-bwleftblue cursor-pointer",children:(0,n.jsx)(f.Z,{title:O?"New Search":S?"New Session":Z?"Control Panel":"New ".concat(L?"Matrix":g?"":"Chat"),children:(0,n.jsx)(c.G,{icon:t(82028).faPenToSquare,transform:{size:20}})})})})});return"1"===C||"2"===C?(0,n.jsx)("div",{className:" relative ",style:{marginTop:"50px"},children:X()}):(0,n.jsx)(n.Fragment,{children:X()})}},62514:function(e,l,t){"use strict";var n=t(57437),o=t(2265),s=t(27312);l.Z=(0,o.forwardRef)((e,l)=>{var t,r,i,a;let[d,c]=(0,o.useState)(!1),u=(0,o.useRef)(!0);return(0,o.useEffect)(()=>{var l;if(u.current){u.current=!1;return}null===(l=e.onChangeOpen)||void 0===l||l.call(e,d)},[d]),(0,o.useImperativeHandle)(l,()=>({open:()=>{c(!0)},close:()=>{c(!1)}}),[]),(0,n.jsxs)(s.fC,{open:d,onOpenChange:l=>{e.disabled||c(l)},children:[(0,n.jsx)(s.xz,{disabled:e.disabled,asChild:!0,onClick:l=>{e.disabled||c(e=>!e)},children:d&&e.childrenOpen?e.childrenOpen:e.children}),(0,n.jsx)(s.h_,{children:(0,n.jsxs)(s.VY,{onOpenAutoFocus:e=>{null==e||e.preventDefault()},onFocusOutside:()=>{c(!1)},side:e.side,align:null!==(t=e.align)&&void 0!==t?t:"center",style:{width:(null!==(r=e.width)&&void 0!==r?r:300)+"px",borderRadius:e.borderRadius?"".concat(e.borderRadius,"px"):void 0},className:"z-[13] data-[side=bottom]:animate-slideUpAndFade data-[side=right]:animate-slideLeftAndFade data-[side=left]:animate-slideRightAndFade data-[side=top]:animate-slideDownAndFade rounded-md overflow-hidden bg-darkcoloro dark:bg-bwbackvia p-5 shadow-[0_0_20px_rgba(0,0,0,0.7)] aashadow-[hsl(206_22%_7%_/_35%)_0px_10px_38px_-10px,hsl(206_22%_7%_/_20%)_0px_10px_20px_-15px] data-[state=open]:transition-all "+(e.noContentPadding?"!p-0 ":"")+(null!==(i=e.className)&&void 0!==i?i:" "),sideOffset:null!==(a=e.sideOffset)&&void 0!==a?a:5,children:[e.isNeedCloseFromContent?e.content(()=>{c(!1)}):e.content,(0,n.jsx)(s.Eh,{className:"fill-darkcoloro dark:fill-bwbackvia"})]})})]})})},40703:function(e,l,t){"use strict";t.d(l,{Z:function(){return s}});var n=t(57437);t(2265);var o=t(42325);function s(e){let{value:l,onChange:t,options:s,isHorizontal:r,className:i}=e;return(0,n.jsx)("form",{children:(0,n.jsx)(o.fC,{className:"flex gap-2.5 "+(r?" ":" flex-col "),value:l,onValueChange:e=>{null==t||t(e)},children:null==s?void 0:s.map((e,l)=>(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(o.ck,{className:"bg-darkcolor/[0.1] w-[18px] h-[18px] flex-shrink-0 rounded-full shadow-[0_2px_10px] shadow-darkcoloro/[0.2] hover:bg-darkcolor/[0.3] focus:shadow-[0_0_0_2px] focus:shadow-black/[0.13] outline-none cursor-default",value:null==e?void 0:e.value,id:"r"+l+"-"+(null==e?void 0:e.value),children:(0,n.jsx)(o.z$,{className:"flex items-center justify-center w-full h-full relative after:content-[''] after:block after:w-[11px] after:h-[11px] after:rounded-[50%] after:bg-darkcolor/[0.6] "+(i||" ")})}),(0,n.jsx)("label",{className:"text-darkcolor leading-[1.4] text-[13px] "+(r?" pl-[8px] ":" pl-[15px] "),htmlFor:"r"+l+"-"+(null==e?void 0:e.value),children:null==e?void 0:e.label})]}),e.element&&(0,n.jsx)("div",{className:"ml-[32px] my-[10px] text-darkcolor",children:e.element})]},"o"+l))})})}},86520:function(e,l,t){"use strict";t.d(l,{Z:function(){return r}});var n=t(57437),o=t(2265),s=t(43643);function r(e){let{children:l,onRef:t,hideBars:r,onlyVertical:i,onScrollVertical:a,onIsAtBottom:d,className:c,styles:u}=e,p=(0,o.useRef)(null),m=(0,o.useRef)(null);return(0,n.jsx)("div",{style:u||{bottom:"0px",top:"0px"},className:"absolute left-0 right-0 ".concat(c),children:(0,n.jsxs)(s.fC,{className:" overflow-hidden absolute top-0 left-0 w-full h-full ",children:[(0,n.jsx)(s.l_,{onScroll:e=>{if(null==a||a(e),p.current){let{scrollTop:e,scrollHeight:l,clientHeight:t}=p.current,n=e+t>=l-30;m.current!==n&&(m.current=n,null==d||d(n))}},ref:e=>{p.current=e,null==t||t(e)},className:"w-full h-full [&>div]:!block",children:l}),(0,n.jsx)(s.LW,{className:"flex select-none touch-none p-0.5 bg-transparent transition-colors duration-[160ms] ease-out hover:bg-transparent data-[orientation=vertical]:w-2.5 data-[orientation=horizontal]:flex-col data-[orientation=horizontal]:h-2.5",orientation:"vertical",children:(0,n.jsx)(s.bU,{className:"z-[5] flex-1 bg-mauve10/[0.6] rounded-[10px] relative before:content-[''] before:absolute before:top-1/2 before:left-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:w-full before:h-full before:min-w-[44px] before:min-h-[44px] "+(r?" invisible ":"")})}),!i&&(0,n.jsx)(s.LW,{className:"flex select-none touch-none p-0.5 bg-transparent transition-colors duration-[160ms] ease-out hover:bg-transparent data-[orientation=vertical]:w-2.5 data-[orientation=horizontal]:flex-col data-[orientation=horizontal]:h-2.5",orientation:"horizontal",children:(0,n.jsx)(s.bU,{className:"flex-1 bg-mauve10/[0.6] rounded-[10px] relative before:content-[''] before:absolute before:top-1/2 before:left-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:w-full before:h-full before:min-w-[44px] before:min-h-[44px] "+(r?" invisible ":"")})}),(0,n.jsx)(s.Ns,{className:"bg-blackA8"})]})})}},54083:function(e,l,t){"use strict";t.d(l,{Ay:function(){return s},E1:function(){return r},R9:function(){return o},YZ:function(){return i},sr:function(){return a}});var n=t(3916);let o={"--color-bw":"__dark_color","--color-bwo":"__light_color","--color-bw-top":"__header_top_color","--color-bw-toptext":"__header_top_text_color","--color-bw-new-chat-button":"__new_color_border_text_new_item","--color-darkblue":"__button_background_color_primary","--color-bw-writer-background":"__write_post_background_color_box","--color-bw-writer-text":"__write_post_text_color_box","--color-bw-bot-back":"__color_bw_bot_back","--color-bw-center":"__center_panel_background_color","--color-bw-left-navigator":"__navigator_left_background_color","--color-bw-left-navigator-text":"__navigator_left_background_color_text","--color-bw-left-blue":"__item_selected_color","--color-bw-left-blue-text":"__item_selected_color_text","--color-bw-newchat-text":"__newchat_color_text","--color-bw-left-date":"__color_left_date","--color-bw-back-from":"__color_back_from","--color-bw-back-via":"__color_back_via","--color-bw-back-to":"__color_back_to"},s=["--color-bw","--color-bwo","--color-bw-top","--color-bw-toptext","--color-bw-new-chat-button","--color-darkblue","--color-bw-writer-background","--color-bw-writer-text","--color-bw-bot-back","--color-bw-center","--color-bw-left-navigator","--color-bw-left-navigator-text","--color-bw-left-blue","--color-bw-left-blue-text","--color-bw-newchat-text","--color-bw-left-date","--color-bw-back-from","--color-bw-back-via","--color-bw-back-to"],r={"--color-bw":"Dark","--color-bwo":"Light","--color-bw-top":"Header Top","--color-bw-toptext":"Header Top Text","--color-darkblue":"Primary Color Background Button","--color-bw-new-chat-button":"New Chat Button Text and Border","--color-bw-writer-background":"Write New Message - Background","--color-bw-writer-text":"Write New Message - Text","--color-bw-bot-back":"Bot Background Color","--color-bw-center":"Center Background","--color-bw-left-navigator":"Left Navigator - Background","--color-bw-left-navigator-text":"Left Navigator - Text","--color-bw-left-blue":"Left Chat - Selected","--color-bw-left-blue-text":"Left Chat - Selected Text","--color-bw-newchat-text":"New Chat - Border Color","--color-bw-left-date":"Left Navigator - Date","--color-bw-back-from":"Background From Color","--color-bw-back-via":"Background Mid Color","--color-bw-back-to":"Background To Color"},i={"--color-bw":"#ffffff","--color-bwo":"#000000","--color-bw-top":"#000000","--color-bw-toptext":"#ffffff","--color-bw-new-chat-button":"#0061f8","--color-darkblue":"#4882f1","--color-bw-writer-background":"#20282e","--color-bw-writer-text":"#ffffff","--color-bw-bot-back":"#ffffff","--color-bw-center":"#313c44","--color-bw-left-navigator":"#131b26","--color-bw-left-navigator-text":"#ffffff","--color-bw-left-blue":"#1E40AFFF","--color-bw-left-blue-text":"#00f8c5","--color-bw-newchat-text":"#1E40AFFF","--color-bw-left-date":"#a87eff","--color-bw-back-from":"#0a2538","--color-bw-back-via":"#2d0f6e","--color-bw-back-to":"#3d1492"};function a(e){let{forceData:l,forceRootElem:t}=e,s=null!=t?t:document.querySelector(":root"),r=Object.keys(null!=o?o:{});return null!=l&&(r.some(e=>{let t=null==l?void 0:l[e];if(null!=t&&(null==t?void 0:t.startsWith("#"))){let e=n.Z.hexToRgb(t);null!=e&&(t=(null==e?void 0:e.r)+", "+(null==e?void 0:e.g)+", "+(null==e?void 0:e.b)+", ")}t?s.style.setProperty(e,t):s.style.removeProperty(e)}),!0)}},86159:function(e,l,t){"use strict";t.d(l,{Z:function(){return i}});var n=t(57437),o=t(2265),s=t(61312),r=t(56210);function i(e){let{title:l,children:t,enabled:i,side:a,content:d,delayDuration:c=700,contentClass:u}=e,[p,m]=o.useState(!1);return!1===i?t:(0,n.jsx)(s.zt,{delayDuration:c,children:(0,n.jsxs)(s.fC,{open:p,onOpenChange:e=>{m(e)},children:[(0,n.jsx)(s.xz,{asChild:!0,onClick:e=>{m(!0)},children:t}),(0,n.jsx)(s.h_,{children:(0,n.jsxs)(s.VY,{className:(0,r.cn)("z-[10000] max-w-lg break-words data-[state=delayed-open]:data-[side=top]:animate-slideDownAndFade data-[state=delayed-open]:data-[side=right]:animate-slideLeftAndFade data-[state=delayed-open]:data-[side=left]:animate-slideRightAndFade data-[state=delayed-open]:data-[side=bottom]:animate-slideUpAndFade text-black dark:text-white select-none rounded-[4px] bg-white dark:bg-neutral-700 px-[15px] py-[10px] text-[14px] leading-none shadow-[hsl(206_22%_7%_/_35%)_0px_10px_38px_-10px,_hsl(206_22%_7%_/_20%)_0px_10px_20px_-15px] will-change-[transform,opacity]",u),sideOffset:5,side:a,children:[d||l,(0,n.jsx)(s.Eh,{className:"fill-white dark:fill-neutral-700"})]})})]})})}},57391:function(e,l,t){"use strict";var n=t(57437),o=t(2265),s=t(74180),r=t(56210),i=t(56577),a=t.n(i);l.Z=e=>{let{validAppConnectors:l,unConfiguredAgentConnectors:t,unConfiguredOrgLevelAgentConnectors:i,onAgentConnectorSuccess:d,agentInfo:c}=e,[u,p]=(0,o.useState)(!1),m=(0,o.useMemo)(()=>{p(!1);let e=[];return t.forEach(t=>{e.push({...l[t.toLowerCase()]||{},service:t})}),e},[t,l]),x=(0,o.useCallback)(()=>{p(!0),d()},[]);return(0,n.jsxs)("div",{className:(0,r.cn)(a().chatContent,"px-[60px] max-w-[700px] h-[600px]  flex justify-center align-middle mx-auto flex-col gap-[20px] text-center"),children:[m.length>0&&(0,n.jsx)("p",{className:" leading-[25px] font-medium text-lg",children:"This agent requires following integration to proceed, please take a moment to sign in to your account"}),m.length>0&&(0,n.jsx)("div",{className:"flex flex-row gap-[20px] justify-center align-middle",children:m.map(e=>(0,n.jsx)(s.Z,{appConnector:e,refreshAppConectors:()=>{},isAgentConnector:!0,handleAgentConnectorSuccess:x,agentInfo:c},null==e?void 0:e.service))}),m.length>0&&u?(0,n.jsx)("p",{className:"text-darkcolor opacity-70 text-sm",children:"Updating, You will be able continue in few secs."}):null,(null==i?void 0:i.length)>0&&(0,n.jsxs)("p",{className:" leading-[25px] font-medium text-lg",children:["This agent requires the following enterprise connections to be ACTIVE: ",i.join(", "),". Please update the agent or visit connectors page to fix."]})]})}},56095:function(e,l,t){"use strict";t.d(l,{Bn:function(){return v},Lw:function(){return h},Pw:function(){return y},Z6:function(){return N},lQ:function(){return m},ri:function(){return I},xV:function(){return x}});var n,o,s=t(3916),r=t(25614),i=t.n(r),a=t(60015),d=t.n(a);t(59128);var c=t(13237);t(21576);var u=t(53436),p=t(14438);(n=o||(o={})).WORKFLOW_RUN_COMPLETE="WORKFLOW_RUN_COMPLETE",n.CURRENT_NODE_EXECUTION_INPROGRESS="CURRENT_NODE_EXECUTION_INPROGRESS",n.CURRENT_NODE_EXECUTION_COMPLETE="CURRENT_NODE_EXECUTION_COMPLETE";let m="CLIENT_SIDE_FORM";function x(e){return null==e?"":"object"==typeof e?JSON.stringify(e):String(e)}async function v(e){try{var l,t;let n=null==e?void 0:null===(l=e.agentConfig)||void 0===l?void 0:l.AGENT_CONNECTORS,o=[];((null==n?void 0:n.hasOwnProperty("USER_LEVEL_CONNECTORS"))||(null==n?void 0:n.hasOwnProperty("ORG_LEVEL_CONNECTORS")))&&(o=null==n?void 0:n.ORG_LEVEL_CONNECTORS,n=null==n?void 0:n.USER_LEVEL_CONNECTORS);let s=Object.keys(n||{}),r=[],i=[];null==s||s.forEach(e=>{if(e){let l=null==n?void 0:n[e];i.push((0,u.v07)({service:e,scopes:l}))}});let a=await (0,u.foW)({}),d=null==a?void 0:null===(t=a.result)||void 0===t?void 0:t.map(e=>e.applicationConnectorId),c=await Promise.allSettled(i);null==c||c.forEach(e=>{var l,t,n,o;"fulfilled"===e.status&&(null===(t=e.value)||void 0===t?void 0:null===(l=t.result)||void 0===l?void 0:l.status)==="ACTIVE"&&r.push(null==e?void 0:null===(o=e.value)||void 0===o?void 0:null===(n=o.result)||void 0===n?void 0:n.service)});let p=null==s?void 0:s.filter(e=>!r.includes(e)),m=null==o?void 0:o.filter(e=>!d.includes(e));return{unConfiguredConnectors:p,unConfiguredOrgLevelConnectors:m}}catch(e){p.Am.error("Error verifying connections needed for agent functionality. Please reload the page.")}}function h(e,l){return(null==e?void 0:e.find(e=>e.name===l))||null}let f=(e,l)=>{if(Array.isArray(e)||!e||"object"!=typeof e)return[];{let t=Object.keys(e),n=[];return null==t||t.forEach(t=>{let o=e[t];o&&n.push({id:t,type:"text",segment:x(o),mime_type:"",agentWorkflowNodeId:l})}),n}},g=(e,l,t)=>{var n;if(!e||"object"!=typeof e||Array.isArray(e))return!1;let o=h(null==l?void 0:l.nodes,t),s=(null==o?void 0:null===(n=o.output_mappings)||void 0===n?void 0:n.map(e=>null==e?void 0:e.name))||[],r=Object.keys(e||{});return(null==r?void 0:r.length)===(null==s?void 0:s.length)&&r.every(e=>s.includes(e))},b=(e,l,t)=>{var n,o,s;let r=[],a=[],d=[],c=[],u=null==e?void 0:e.agentWorkflowNodeId;if(null==e?void 0:e.isAgentResponseObject){if(i()(null==e?void 0:e.segments)){let l=(null==e?void 0:e.segments)||[];null==l||l.forEach(e=>{if((null==e?void 0:e.type)==="text"){let l=(null==e?void 0:e.segment)===void 0?null==e?void 0:e.contents:null==e?void 0:e.segment;e.segment=x(l)}e.agentWorkflowNodeId=u}),r=l}}else(null==e?void 0:null===(n=e.agentResponse)||void 0===n?void 0:n.response)&&g(null==e?void 0:null===(o=e.agentResponse)||void 0===o?void 0:o.response,t,u)?r=f(null==e?void 0:null===(s=e.agentResponse)||void 0===s?void 0:s.response,u):(null==e?void 0:e.text)&&!(null==e?void 0:e.error)&&(r=[{type:"text",segment:x(null==e?void 0:e.text),agentWorkflowNodeId:u}]);(null==e?void 0:e.error)&&(a=[{error:x(null==e?void 0:e.error),agentWorkflowNodeId:u}]);let p=(null==e?void 0:e.streamed_data)||(null==e?void 0:e.streamedData);p&&(d=[{type:"text",segment:x(p),agentWorkflowNodeId:u}]);let m=(null==e?void 0:e.streamed_section_data)||(null==e?void 0:e.streamedSectionData)||[];return i()(m)&&(null==m||m.forEach(e=>{if((null==e?void 0:e.type)==="text"){let l=(null==e?void 0:e.segment)===void 0?null==e?void 0:e.contents:null==e?void 0:e.segment;e.segment=x(l)}e.is_streamed_segment=!0,e.agentWorkflowNodeId=u}),c=m),[...d||[],...c||[],...r||[],...a]},w=e=>{let l={...e};return Object.keys(l).forEach(e=>{var t;let n=l[e];Array.isArray(n)&&n.length&&(null===(t=n[0])||void 0===t?void 0:t.isMultiFile)?l[e]=n.map(e=>JSON.stringify(e)):(null==n?void 0:n.isFile)&&(l[e]=JSON.stringify(n))}),l},j=(e,l,t)=>{var n;let o=null==e?void 0:e.find(e=>(null==e?void 0:e.keywordArguments)&&(null==e?void 0:e.role)==="USER"),s=null==e?void 0:e.filter(e=>!(null==e?void 0:e.keywordArguments)&&(null==e?void 0:e.role)==="BOT");return{userQuery:w(null==o?void 0:o.keywordArguments),botResponse:null==s?void 0:s.flatMap(e=>b(e,t,l)||[]),isNodeWithoutInputs:(null==o?void 0:o.keywordArguments)!==void 0&&0===Object.keys(null==o?void 0:o.keywordArguments).length,searchResults:null==s?void 0:null===(n=s.findLast(e=>null==e?void 0:e.searchResults))||void 0===n?void 0:n.searchResults}};function N(e,l,t){var n;if(!e||0===e.length||!(null==l?void 0:null===(n=l.nodes)||void 0===n?void 0:n.length))return{};let{nodes:o}=l,s=d()(e,"agentWorkflowNodeId"),r={};return Object.keys(s).forEach(e=>{let{userQuery:n,botResponse:i,isNodeWithoutInputs:a,searchResults:d}=j(s[e],l,t);r[e]={userQuery:n,botResponse:i,stepInfo:{node:h(o,e),edge:function(e,l){var t;let{edges:n=[]}=e;return(null===(t=n.filter(e=>e.source===l))||void 0===t?void 0:t[0])||null}(l,e),agentWorkflowNodeId:e},isNodeWithoutInputs:a,searchResults:d}}),r}function y(e,l){var t,n;if(0===Object.keys(l).length)return{};let o=(null==e?void 0:null===(n=e.input_schema)||void 0===n?void 0:null===(t=n.json_schema)||void 0===t?void 0:t.properties)||{},r={};return Object.keys(o).forEach(t=>{var n,o;let{variable_source:i,source_prop:a,variable_type:d,default_value:c}=(null===(n=((null==e?void 0:e.input_mappings)||[]).filter(e=>e.name===t))||void 0===n?void 0:n[0])||{};if("USER_INPUT"===d){let e=l[i],n=a||t,d=null==e?void 0:null===(o=e.botResponse)||void 0===o?void 0:o.find(e=>e.id===n);if((null==d?void 0:d.type)==="text"){let e=s.Z.tryJsonParse(null==d?void 0:d.segment),l=null===e?null==d?void 0:d.segment:e;r[t]=l||void 0}c&&(r[t]=c)}}),r}function C(e,l,t){var n;if(!e||0===e.length)return null;let o=[],s=h(null==l?void 0:l.nodes,t),r=Object.keys((null==s?void 0:null===(n=s.output_schema)||void 0===n?void 0:n.json_schema.properties)||{});return e.forEach(e=>{if(!(null==e?void 0:e.id)||r.includes(null==e?void 0:e.id)||(null==e?void 0:e.is_streamed_segment)){var l,t;let n={...e},r=null==s?void 0:null===(t=s.output_schema)||void 0===t?void 0:null===(l=t.json_schema.properties)||void 0===l?void 0:l[null==e?void 0:e.id];(null==r?void 0:r.title)&&(n.sectionTitle=r.title),o.push(n)}}),o.length>0?o:null}function k(e,l){return(null==l?void 0:l.type)==="text"&&(null==e?void 0:e.type)==="text"&&(null==e?void 0:e.agentWorkflowNodeId)===(null==l?void 0:l.agentWorkflowNodeId)&&(null==e?void 0:e.id)===(null==l?void 0:l.id)}let I={convertWSMessagesToConversationHistoryObject:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0,t=[];return null==e||e.forEach(e=>{if(!e)return;let n=C(function(e,l){let t=e.isAgentReturnToken,n=[],o=null==e?void 0:e.agentWorkflowNodeId;if(e.error)n=[{error:x(e.error),agentWorkflowNodeId:o}];else if(t){if(null==e?void 0:e.isAgentResponseObject){let l=null==e?void 0:e.token;i()(l)&&(null==l||l.forEach(e=>{if((null==e?void 0:e.type)==="text"){let l=(null==e?void 0:e.segment)===void 0?null==e?void 0:e.contents:null==e?void 0:e.segment;e.segment=x(l)}e.agentWorkflowNodeId=o}),n=l)}else(null==e?void 0:e.token)&&g(null==e?void 0:e.token,l,o)?n=f(null==e?void 0:e.token,o):(null==e?void 0:e.token)&&(n=[{type:"text",segment:x(null==e?void 0:e.token),isIntermediateStatusMessage:!1,agentWorkflowNodeId:o}])}else if((null==e?void 0:e.streamType)==="section_output"){let l=null==e?void 0:e.token;if(!Array.isArray(l)&&"object"==typeof l){if((null==l?void 0:l.type)==="text"){var s;let e=null!==(s=null==l?void 0:l.segment)&&void 0!==s?s:null==l?void 0:l.contents;l.segment=x(e)}l.agentWorkflowNodeId=o,n=[l]}}else(null==e?void 0:e.streamType)==="message"&&(n=[{type:"text",segment:x(null==e?void 0:e.token),isIntermediateStatusMessage:null==e?void 0:e.isTransient,agentWorkflowNodeId:o}]);return n}(e,l),l,null==e?void 0:e.agentWorkflowNodeId);for(let e=0;e<(null==n?void 0:n.length);e++){let l=n[e],o=t[t.length-1];k(o,l)&&t.length>0?o.segment+=x(null==l?void 0:l.segment):t.push(l)}}),{role:"BOT",segments:t}},convoHistoryObjectToConversationObject:(e,l,t)=>{let n=[],o=C(b(e,t,l),l,null==e?void 0:e.agentWorkflowNodeId);return(null==o||o.forEach(e=>{let l=n[n.length-1];k(l,e)&&n.length>0?l.segment+=x(e.segment):n.push(e)}),n.length>0)?{role:"BOT",segments:n}:null},segregateBotResponsesByUserQuery:(e,l,t)=>{let n=[],o=[],s=null,r=null,i=null,a=null;if(null==e||e.forEach((d,c)=>{if((null==d?void 0:d.role)==="USER"){if(n.length>0&&(null==o?void 0:o.length)>0&&(n.push({role:"BOT",segments:o,searchResults:s,timestamp:r,messageIndex:i,debugInfo:a,feedback:null==d?void 0:d.feedback,runContextId:null==d?void 0:d.runContextId}),i=null,o=[]),0!==Object.keys((null==d?void 0:d.keywordArguments)||{}).length){let o=I.convertKeywordArgsToUserInputs(d,l,t);(null==e?void 0:e[c+1])&&(o.isAlreadyExecuted=!0),n.push(o)}}else if((null==d?void 0:d.role)==="BOT"){i=null==d?void 0:d.messageIndex,s=null==d?void 0:d.searchResults,r=null==d?void 0:d.timestamp,a=null==d?void 0:d.debugInfo;let e=I.convoHistoryObjectToConversationObject(d,l,t);e&&o.push(...e.segments)}else(null==d?void 0:d.type)==="agent_form"&&n.push(d);c===e.length-1&&o.length>0&&(n.push({role:"BOT",segments:o,searchResults:s,timestamp:r,messageIndex:i,debugInfo:a,feedback:null==d?void 0:d.feedback,runContextId:null==d?void 0:d.runContextId}),o=[],i=null)}),!t&&(null==e?void 0:e.length)===0){let e=I.getFormConfigObjectFromNodeName(l,null==l?void 0:l.primary_start_node,null);(null==e?void 0:e.hasFrom)&&n.push(null==e?void 0:e.formConfig)}return n},convertKeywordArgsToUserInputs:(e,l,t)=>{let n={...e},o=null==n?void 0:n.keywordArguments,s=null==n?void 0:n.agentWorkflowNodeId,r=h(null==l?void 0:l.nodes,s),i=(null==r?void 0:r.input_mappings)||{};if(o){var a,d,c,u,p,m;if(t&&(s===(null==l?void 0:l.primary_start_node)||(null==l?void 0:l.primary_start_node)===null)){if((null===(a=i[0])||void 0===a?void 0:a.name)&&(n.text=o[null===(c=i[0])||void 0===c?void 0:c.name]),null===(d=i[1])||void 0===d?void 0:d.name){let e=o[null===(u=i[1])||void 0===u?void 0:u.name];if((null==e?void 0:e.length)>0&&Array.isArray(e)){let l=null==e?void 0:e.map(e=>({docId:e.doc_id,filename:e.filename,mimeType:e.mime_type}));(null==l?void 0:l.length)>0&&(n.docInfos=l)}}}else n.ui_schema=null==r?void 0:null===(p=r.input_schema)||void 0===p?void 0:p.ui_schema,n.json_schema=null==r?void 0:null===(m=r.input_schema)||void 0===m?void 0:m.json_schema,n.readOnly=!0}return n},getKeywordArgsFromUserInput:(e,l)=>{var t,n,o,s;let{text:r,docInfos:i,nodeName:a}=l,d={},c=a||(null===(t=function(e){let{edges:l=[],nodes:t=[],primary_start_node:n}=e;if(n)return h(t,n);{let t=l.map(e=>e.target);return e.nodes.find(e=>!t.includes(e.name))}}(e))||void 0===t?void 0:t.name),u=h(null==e?void 0:e.nodes,c);if(!u)return{keywordArgs:d,agentWorkflowNodeId:c};let p=null==u?void 0:u.input_mappings;return(null==p?void 0:p.length)>0&&(d[null===(n=p[0])||void 0===n?void 0:n.name]=r,(null===(o=p[1])||void 0===o?void 0:o.name)&&(d[null===(s=p[1])||void 0===s?void 0:s.name]=i)),{keywordArgs:d,agentWorkflowNodeId:c}},getLastWorkflowRunFromConversationHistory:(e,l)=>{let t=null==l?void 0:l.primary_start_node;if(!e||0===e.length||!t)return[];let n=e.findLastIndex(e=>e.agentWorkflowNodeId===t);return n>-1?e.slice(n-1):[]},getFormConfigObjectFromNodeName:(e,l,t)=>{var n,o;let s=h(null==e?void 0:e.nodes,l),r={hasFrom:!1,formConfig:{}},{json_schema:i,ui_schema:a,runtime_schema:d}=(null==s?void 0:s.input_schema)||{};return(Object.keys(null!==(o=null===(n=null!=i?i:{})||void 0===n?void 0:n.properties)&&void 0!==o?o:{}).length>0||d)&&(r.formConfig={type:"agent_form",agentWorkflowNodeId:l,runContextId:t,json_schema:i||{},ui_schema:a||{},nodeInfo:s,role:"USER",messageId:l+"_"+m},r.hasFrom=!0),r},addRunContextId:(e,l)=>{if(!e||0===e.length)return[];let t=null==l?void 0:l.primary_start_node,n=[],o=null;return null==e||e.forEach((s,r)=>{let{agentWorkflowNodeId:i,role:a}=s;if(i===t&&"USER"===a){let t=e[r-1];if((null==t?void 0:t.role)==="BOT"&&(null==t?void 0:t.nextAgentWorkflowNodeId)&&(null==t?void 0:t.nextAgentWorkflowNodeId)!==i){var d,u,p,x;let e=h(null==l?void 0:l.nodes,null==t?void 0:t.nextAgentWorkflowNodeId);Object.keys((null==e?void 0:null===(u=e.input_schema)||void 0===u?void 0:null===(d=u.json_schema)||void 0===d?void 0:d.properties)||{}).length&&n.push({type:"agent_form",agentWorkflowNodeId:null==t?void 0:t.nextAgentWorkflowNodeId,runContextId:null==t?void 0:t.runContextId,nodeInfo:e,json_schema:(null==e?void 0:null===(p=e.input_schema)||void 0===p?void 0:p.json_schema)||{},ui_schema:(null==e?void 0:null===(x=e.input_schema)||void 0===x?void 0:x.ui_schema)||{},readOnly:!0,isUnsubmittedForm:!0,messageId:(null==t?void 0:t.nextAgentWorkflowNodeId)+"_"+m})}o=c.Z()}h(null==l?void 0:l.nodes,i)&&(s.runContextId=o,n.push(s))}),n},getNodeSchemaAlongWithRuntimeSchema:(e,l,t)=>{if(!i()(e))return{};let{runContextId:n,agentWorkflowNodeId:o}=l||{},s={};if(function(e,l){let t=h(null==l?void 0:l.nodes,e),{runtime_schema:n,schema_prop:o,schema_source:s}=(null==t?void 0:t.input_schema)||{};return!!(n&&o&&s)}(o,t)){let l=null==e?void 0:e.filter(e=>e.runContextId===n);null==l||l.forEach(e=>{if((null==e?void 0:e.role)==="BOT"){let l=function(e){let l=e.hasOwnProperty("segments"),t={hasRuntimeSchema:!1,schemas:{},fromAgentWorkflowNodeId:null};if(l){let l=[...(null==e?void 0:e.segments)||[],...(null==e?void 0:e.streamed_section_data)||[],...(null==e?void 0:e.streamedSectionData)||[]].filter(e=>"runtime_schema"===e.type);(null==l?void 0:l.length)>0&&(t.hasRuntimeSchema=!0,t.schemas=l,t.fromAgentWorkflowNodeId=e.agentWorkflowNodeId)}else{let l=e.token;if(e.isAgentResponseObject&&i()(l)){let n=l.filter(e=>"runtime_schema"===e.type);(null==n?void 0:n.length)>0&&(t.hasRuntimeSchema=!0,t.schemas=n,t.fromAgentWorkflowNodeId=e.agentWorkflowNodeId)}}return t}(e);l.fromAgentWorkflowNodeId&&l.hasRuntimeSchema&&(s[l.fromAgentWorkflowNodeId]=l)}})}return function(e,l,t){var n,o,s,r;let i=h(null==t?void 0:t.nodes,l),{runtime_schema:a,schema_prop:d,schema_source:c}=(null==i?void 0:i.input_schema)||{},u={json_schema:{},ui_schema:{}};if(a&&d&&c){let l=e[c];if(l){let e=null==l?void 0:null===(o=l.schemas)||void 0===o?void 0:null===(n=o.filter(e=>e.id===d))||void 0===n?void 0:n[0];((null==e?void 0:e.json_schema)||(null==e?void 0:e.jsonSchema))&&(u.json_schema=(null==e?void 0:e.json_schema)||(null==e?void 0:e.jsonSchema)||{},u.ui_schema=(null==e?void 0:e.ui_schema)||(null==e?void 0:e.uiSchema)||{})}}else u.json_schema=(null==i?void 0:null===(s=i.input_schema)||void 0===s?void 0:s.json_schema)||{},u.ui_schema=(null==i?void 0:null===(r=i.input_schema)||void 0===r?void 0:r.ui_schema)||{};return u}(s,o,t)},handleConversationBasedOnWorkflowStatus:(e,l)=>{let{status:t,nextAgentWorkflowNodeId:n,hasUserInput:o}=function(e){var l,t,n;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=null==o?void 0:null===(t=o.slice())||void 0===t?void 0:null===(l=t.reverse())||void 0===l?void 0:l.find(e=>e.hasOwnProperty("isAgentResponseObject")||e.hasOwnProperty("error")),r=null===(n=o[o.length-1])||void 0===n?void 0:n.hasOwnProperty("keywordArguments"),{nextAgentWorkflowNodeId:i}=s||{};if(!i||(null==s?void 0:s.error))return{status:"WORKFLOW_RUN_COMPLETE",nextAgentWorkflowNodeId:null,hasUserInput:r};let a=h(null==e?void 0:e.nodes,i);return{status:a&&a.input_mappings.some(e=>"USER_INPUT"===e.variable_type)?"CURRENT_NODE_EXECUTION_COMPLETE":"CURRENT_NODE_EXECUTION_INPROGRESS",nextAgentWorkflowNodeId:i,hasUserInput:r}}(e,l),s=!1;return"CURRENT_NODE_EXECUTION_INPROGRESS"===t||o?s=!0:"CURRENT_NODE_EXECUTION_COMPLETE"===t&&n?s=!1:"WORKFLOW_RUN_COMPLETE"===t&&(s=!1),{shouldRefreshConversation:s}}}},90216:function(e,l,t){"use strict";t.d(l,{J:function(){return n}});let n=(0,t(59625).Ue)()(e=>({retentionDays:null,setRetentionDays:l=>{e(e=>({retentionDays:l}))},ignoreRefreshTheme:1,forceRefreshTheme:()=>{e(e=>({ignoreRefreshTheme:e.ignoreRefreshTheme+1}))},theme:null,setTheme:l=>{e({theme:l})},ignoreRefreshThemeApp:1,forceRefreshThemeApp:()=>{e(e=>({ignoreRefreshThemeApp:e.ignoreRefreshThemeApp+1}))},themeApp:null,setThemeApp:l=>{e({themeApp:l})},themeAppId:null,setThemeAppId:l=>{e({themeAppId:l})},isDarkS:null,setIsDarkS:l=>{e({isDarkS:l})},isDark:!0,setIsDark:l=>{e({isDark:l})},ignoreDeploymentUpdate:1,forceDeploymentUpdate:()=>{e(e=>({ignoreDeploymentUpdate:e.ignoreDeploymentUpdate+1}))}}))},84979:function(e,l,t){"use strict";t.d(l,{h:function(){return n}});let n=(0,t(59625).Ue)()(e=>({isEditNameAny:!1,setIsEditNameAny:l=>{e({isEditNameAny:l})},tempDeploymentConversationId:null,onDeploymentConversationIdChanged:l=>{e({tempDeploymentConversationId:l})}}))},66888:function(e,l,t){"use strict";t.d(l,{W:function(){return i}});var n=t(21652),o=t.n(n),s=t(59625);let r=null,i=(0,s.Ue)()(e=>({hostingDomain:null,setHostingDomain:l=>{e(e=>e.hostingDomain!==l?{hostingDomain:l}:e)},ignoreRefreshDescription:1,forceUpdateDescription:()=>{e(e=>{var l;return{ignoreRefreshDescription:(null!==(l=null==e?void 0:e.ignoreRefreshDescription)&&void 0!==l?l:1)+1}})},tryChangeToViewType:null,setTryChangeToViewType:l=>{e(e=>e.tryChangeToViewType!==l?{tryChangeToViewType:l}:e)},segmentCmdTerminalToShow:null,setSegmentCmdTerminalToShow:l=>{e(e=>e.segmentCmdTerminalToShow!==l?{segmentCmdTerminalToShow:l}:e)},convoHistory:null,setConvoHistory:l=>{e(e=>e.convoHistory!==l?{convoHistory:l}:e)},isPreviewExpanded:!1,setIsPreviewExpanded:l=>{e(e=>e.isPreviewExpanded!==l?{isPreviewExpanded:l}:e)},isProcessingMessage:!1,setIsProcessingMessage:l=>{e(e=>e.isProcessingMessage!==l?{isProcessingMessage:l}:e)},waitForName:null,setWaitForName:l=>{e(e=>e.waitForName!==l?{waitForName:l}:e)},isProcessingFirstTime:!1,setIsProcessingFirstTime:l=>{e(e=>e.isProcessingFirstTime!==l?{isProcessingFirstTime:l}:e)},segmentsToPreview:null,setSegmentsToPreview:l=>{e(e=>o()(e.segmentsToPreview,l)?e:{segmentsToPreview:l})},ignoreRefreshIFrame:1,forceRefreshIFrame:()=>{e(e=>{var l;return{ignoreRefreshIFrame:(null!==(l=null==e?void 0:e.ignoreRefreshIFrame)&&void 0!==l?l:1)+1}})},forceUpdateConvo:null,setForceUpdateConvo:l=>{e(e=>e.forceUpdateConvo!==l?{forceUpdateConvo:l}:e)},hostedAppConversationId:null,setHostedAppConversationId:l=>{e(e=>e.hostedAppConversationId!==l?{hostedAppConversationId:l}:e)},hostedAppDescriptionProd:null,setHostedAppDescriptionProd:l=>{e(e=>e.hostedAppDescriptionProd!==l?{hostedAppDescriptionProd:l}:e)},hostedAppDescription:null,setHostedAppDescription:l=>{e(e=>e.hostedAppDescription!==l?{hostedAppDescription:l}:e)},files:null,setFiles:l=>{e(e=>e.files!==l?{files:l}:e)},hostingAppId:null,setHostingAppId:l=>{e(e=>e.hostingAppId!==l?{hostingAppId:l}:e)},forceUpdateFiles:null,setForceUpdateFiles:l=>{null!=r&&(clearTimeout(r),r=null),e(e=>o()(e.forceUpdateFiles,l)?e:{forceUpdateFiles:l}),r=setTimeout(()=>{r=null,e(e=>o()(e.forceUpdateFiles,null)?e:{forceUpdateFiles:null})},50)},fileToCut:null,setIsFileToCut:l=>{e(e=>e.isFileToCut!==l?{isFileToCut:l}:e)},fileToCopy:null,setFileToCopy:l=>{e(e=>e.fileToCopy!==l?{fileToCopy:l}:e)},showConfirmForFileCreateFile:null,setShowConfirmForFileCreateFile:l=>{e(e=>e.showConfirmForFileCreateFile!==l?{showConfirmForFileCreateFile:l}:e)},showConfirmForFileCreateFolder:null,setShowConfirmForFileCreateFolder:l=>{e(e=>e.showConfirmForFileCreateFolder!==l?{showConfirmForFileCreateFolder:l}:e)},fileUsedInMenu:null,setFileUsedInMenu:l=>{e(e=>e.fileUsedInMenu!==l?{fileUsedInMenu:l}:e)},calcParentFolder:null,setCalcParentFolder:l=>{e(e=>e.calcParentFolder!==l?{calcParentFolder:l}:e)},hostedAppContainerId:null,setHostedAppContainerId:l=>{e(e=>e.hostedAppContainerId!==l?{hostedAppContainerId:l}:e)},fileSelected:null,setFileSelected:l=>{e(e=>e.fileSelected!==l?{fileSelected:l}:e)}}))},68781:function(e,l,t){"use strict";t.d(l,{d5:function(){return x},g8:function(){return p},jn:function(){return r},nL:function(){return h},nQ:function(){return a},v4:function(){return c}});var n=t(2265);function o(e,l){if(null==e)return{};var t,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],l.indexOf(t)>=0||(o[t]=e[t]);return o}var s=["color"];let r=n.forwardRef(function(e,l){var t=e.color,r=o(e,s);return n.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:l}),n.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:void 0===t?"currentColor":t,fillRule:"evenodd",clipRule:"evenodd"}))});var i=["color"];let a=n.forwardRef(function(e,l){var t=e.color,s=o(e,i);return n.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:l}),n.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:void 0===t?"currentColor":t,fillRule:"evenodd",clipRule:"evenodd"}))});var d=["color"];let c=n.forwardRef(function(e,l){var t=e.color,s=o(e,d);return n.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:l}),n.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:void 0===t?"currentColor":t,fillRule:"evenodd",clipRule:"evenodd"}))});var u=["color"];let p=n.forwardRef(function(e,l){var t=e.color,s=o(e,u);return n.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:l}),n.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:void 0===t?"currentColor":t,fillRule:"evenodd",clipRule:"evenodd"}))});var m=["color"];let x=n.forwardRef(function(e,l){var t=e.color,s=o(e,m);return n.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:l}),n.createElement("path",{d:"M2 7.5C2 7.22386 2.22386 7 2.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H2.5C2.22386 8 2 7.77614 2 7.5Z",fill:void 0===t?"currentColor":t,fillRule:"evenodd",clipRule:"evenodd"}))});var v=["color"];let h=n.forwardRef(function(e,l){var t=e.color,s=o(e,v);return n.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 256 256",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:l}),n.createElement("path",{d:"M149.66,149.66,131.31,168l18.35,18.34a8,8,0,0,1-11.32,11.32L132,191.31l-23.31,23.32a32.06,32.06,0,0,1-45.26,0l-5.37-5.38-28.4,28.41a8,8,0,0,1-11.32-11.32l28.41-28.4-5.38-5.37a32,32,0,0,1,0-45.26L64.69,124l-6.35-6.34a8,8,0,0,1,11.32-11.32L88,124.69l18.34-18.35a8,8,0,0,1,11.32,11.32L99.31,136,120,156.69l18.34-18.35a8,8,0,0,1,11.32,11.32Zm88-131.32a8,8,0,0,0-11.32,0l-28.4,28.41-5.37-5.38a32.05,32.05,0,0,0-45.26,0L124,64.69l-6.34-6.35a8,8,0,0,0-11.32,11.32l80,80a8,8,0,0,0,11.32-11.32L191.31,132l23.32-23.31a32,32,0,0,0,0-45.26l-5.38-5.37,28.41-28.4A8,8,0,0,0,237.66,18.34Z",fill:void 0===t?"currentColor":t,fillRule:"evenodd",clipRule:"evenodd"}))})},48958:function(e,l,t){"use strict";t.d(l,{$N:function(){return m},Be:function(){return x},Vq:function(){return i},cN:function(){return p},cZ:function(){return c},fK:function(){return u}});var n=t(57437),o=t(2265),s=t(49027),r=t(56210);let i=s.fC;s.xz;let a=s.h_;s.x8;let d=o.forwardRef((e,l)=>{let{className:t,...o}=e;return(0,n.jsx)(s.aV,{ref:l,className:(0,r.cn)("fixed inset-0 z-50 bg-black/30  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...o})});d.displayName=s.aV.displayName;let c=o.forwardRef((e,l)=>{let{className:t,children:o,dialogOverlayClassName:i,...c}=e;return(0,n.jsxs)(a,{children:[(0,n.jsx)(d,{className:i}),(0,n.jsx)(s.VY,{ref:l,className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]","fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 bg-darkcoloro p-6 duration-200 rounded-md","dark:shadow-[0_0_20px_rgba(0,0,0,0.7)] shadow-[hsl(206_22%_7%_/_35%)_0px_10px_38px_-10px,_hsl(206_22%_7%_/_20%)_0px_10px_20px_-15px]","text-darkcolor",t),...c,children:o})]})});c.displayName=s.VY.displayName;let u=e=>{let{className:l,...t}=e;return(0,n.jsx)("div",{className:(0,r.cn)("flex flex-col",l),...t})};u.displayName="DialogHeader";let p=e=>{let{className:l,...t}=e;return(0,n.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",l),...t})};p.displayName="DialogFooter";let m=o.forwardRef((e,l)=>{let{className:t,...o}=e;return(0,n.jsx)(s.Dx,{ref:l,className:(0,r.cn)("font-medium text-[#34235E] dark:text-white brightness-[0.9] text-xl",t),...o})});m.displayName=s.Dx.displayName;let x=o.forwardRef((e,l)=>{let{className:t,...o}=e;return(0,n.jsx)(s.dk,{ref:l,className:(0,r.cn)("text-sm text-darkcolor",t),...o})});x.displayName=s.dk.displayName},69997:function(e,l,t){"use strict";var n=t(57437),o=t(2265),s=t(6394),r=t(77712),i=t(56210);let a=(0,r.j)("text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=o.forwardRef((e,l)=>{let{className:t,...o}=e;return(0,n.jsx)(s.f,{ref:l,className:(0,i.cn)(a(),t),...o})});d.displayName=s.f.displayName,l.Z=d},23749:function(e,l,t){"use strict";t.d(l,{Bw:function(){return x},DI:function(){return d},Ph:function(){return a},Ql:function(){return v},i4:function(){return u},ki:function(){return c}});var n=t(57437),o=t(2265),s=t(68781),r=t(56873),i=t(56210);let a=r.fC,d=r.ZA,c=r.B4,u=o.forwardRef((e,l)=>{let{className:t,children:o,...a}=e;return(0,n.jsxs)(r.xz,{ref:l,className:(0,i.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-darkcolor/20 bg-darkcoloro px-3 py-2 text-sm placeholder:text-darkcolor/20 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[(0,n.jsx)("div",{className:"truncate",children:o}),(0,n.jsx)(r.JO,{asChild:!0,children:(0,n.jsx)(s.jn,{className:"shrink-0 size-4 opacity-50"})})]})});u.displayName=r.xz.displayName;let p=o.forwardRef((e,l)=>{let{className:t,...o}=e;return(0,n.jsx)(r.u_,{ref:l,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...o,children:(0,n.jsx)(s.g8,{})})});p.displayName=r.u_.displayName;let m=o.forwardRef((e,l)=>{let{className:t,...o}=e;return(0,n.jsx)(r.$G,{ref:l,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...o,children:(0,n.jsx)(s.v4,{})})});m.displayName=r.$G.displayName;let x=o.forwardRef((e,l)=>{let{className:t,children:o,position:s="popper",...a}=e;return(0,n.jsx)(r.h_,{children:(0,n.jsxs)(r.VY,{ref:l,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md bg-darkcoloro text-darkcolor shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...a,children:[(0,n.jsx)(p,{}),(0,n.jsx)(r.l_,{className:(0,i.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:o}),(0,n.jsx)(m,{})]})})});x.displayName=r.VY.displayName,o.forwardRef((e,l)=>{let{className:t,...o}=e;return(0,n.jsx)(r.__,{ref:l,className:(0,i.cn)("px-2 py-1.5 text-sm font-medium",t),...o})}).displayName=r.__.displayName;let v=o.forwardRef((e,l)=>{let{className:t,children:o,...a}=e;return(0,n.jsxs)(r.ck,{ref:l,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded py-1.5 pl-8 pr-2 text-sm text-darkcolor outline-none focus:bg-darkcolor focus:text-darkcoloro data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(r.wU,{children:(0,n.jsx)(s.nQ,{className:"size-4"})})}),(0,n.jsx)(r.eT,{children:o})]})});v.displayName=r.ck.displayName,o.forwardRef((e,l)=>{let{className:t,...o}=e;return(0,n.jsx)(r.Z0,{ref:l,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",t),...o})}).displayName=r.Z0.displayName},31486:function(e,l,t){"use strict";var n=t(57437),o=t(2265),s=t(56210);let r=o.forwardRef((e,l)=>{let{className:t,...o}=e;return(0,n.jsx)("textarea",{className:(0,s.cn)("transition-colors duration-200","realtive flex min-h-24 w-full rounded-md border border-darkcolor/20 bg-darkcoloro px-3 py-2 text-sm placeholder:text-darkcolor/20","disabled:pointer-events-none disabled:opacity-50",t),ref:l,...o})});r.displayName="Textarea",l.Z=r},56210:function(e,l,t){"use strict";t.d(l,{cn:function(){return s}});var n=t(61994),o=t(53335);function s(){for(var e=arguments.length,l=Array(e),t=0;t<e;t++)l[t]=arguments[t];return(0,o.m6)((0,n.W)(l))}},86262:function(e,l,t){"use strict";t.d(l,{q:function(){return n}});let n=e=>{var l;return(null==e?void 0:e.isReferralOnly)&&(null==e?void 0:null===(l=e.organization)||void 0===l?void 0:l.paymentDone)===!1}},46314:function(e){e.exports={searchInputTemp:"ConversationSearchInput_searchInputTemp__gDCLC",magnifyingGlassIcon:"ConversationSearchInput_magnifyingGlassIcon__uWOn8",clearIcon:"ConversationSearchInput_clearIcon__ON6Jd",hasFilterText:"ConversationSearchInput_hasFilterText__P2vcQ",newChatWithSearch:"ConversationSearchInput_newChatWithSearch__McfQU"}},56577:function(e){e.exports={chatContent:"ConvoChatOne_chatContent__Sm5jB",shimmerTextWrapper:"ConvoChatOne_shimmerTextWrapper__pUo6s",chatContentInfo:"ConvoChatOne_chatContentInfo__or5E_"}}}]);