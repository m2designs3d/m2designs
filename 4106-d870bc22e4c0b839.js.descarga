(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4106],{51517:function(e,l,t){"use strict";t.d(l,{SU:function(){return ex},Qs:function(){return em},hj:function(){return ep}});var n=t(57437),a=t(42715),r=t.n(a),s=t(90175),i=t(48547),o=t(2265),d=t(63020),c=t(49070),u=t(53436),m=t(64798),p=t.n(m),x=t(29827),v=t(32397),h=t(14438),f=t(3916),g=t(86159),b=t(84772),j=t.n(b),w=t(40718),y=t.n(w);let N=o.createContext({scrollTo:()=>0,scrollToBottom:()=>0,scrollToEnd:()=>0,scrollToStart:()=>0,scrollToTop:()=>0});N.displayName="ScrollToBottomFunctionContext";let k=o.createContext({atBottom:!0,atEnd:!0,atStart:!1,atTop:!0,mode:"bottom"});k.displayName="ScrollToBottomState1Context";let C=o.createContext({animating:!1,animatingToEnd:!1,sticky:!0});C.displayName="ScrollToBottomState2Context";let I=o.createContext({animating:!1,animatingToEnd:!1,atBottom:!0,atEnd:!0,atStart:!1,atTop:!0,mode:"bottom",sticky:!0});I.displayName="ScrollToBottomStateContext";let S=[I,k,C],A=o.createContext({offsetHeight:0,scrollHeight:0,setTarget:()=>0,styleToClassName:()=>""});function _(){let{styleToClassName:e}=(0,o.useContext)(A);return e}A.displayName="ScrollToBottomInternalContext";let P={backgroundColor:"rgba(0, 0, 0, .2)",borderRadius:10,borderWidth:0,bottom:5,cursor:"pointer",height:20,outline:0,position:"absolute",right:20,width:20,"&:hover":{backgroundColor:"rgba(0, 0, 0, .4)"},"&:active":{backgroundColor:"rgba(0, 0, 0, .6)"}},E=e=>{let{children:l,className:a=""}=e,[r]=function(){let{sticky:e}=(0,o.useContext)(S[2]||S[0]);return[e]}(),s=_()(P),d=function(){let{scrollToEnd:e}=(0,o.useContext)(N);return e}();return!r&&(0,n.jsxs)("button",{className:j()(s,(a||"")+""),onClick:d,type:"button",children:[(0,n.jsx)(i.G,{icon:t(87087).r5,transform:{size:17}}),l]})};function z(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",t="background-color: ".concat(e,"; border-radius: 4px; padding: 2px 4px;");return l&&(t+=" color: ".concat(l,";")),[t,""]}function T(e,l){for(var t=arguments.length,n=Array(t>2?t-2:0),a=2;a<t;a++)n[a-2]=arguments[a];return["%c".concat(e,"%c ").concat(l),...z("green","white"),...n]}E.propTypes={children:y().any,className:y().string};var D=e=>{let{debounce:l=200,name:t,onEvent:n,target:a}=e,r=(0,o.useRef)();r.current=n;let s=(0,o.useMemo)(()=>(function(e,l){if(!l)return e;let t=0,n=null;return function(){for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];let i=Date.now();i-t>l?(e(...r),t=i):(clearTimeout(n),n=setTimeout(()=>{e(...r),t=Date.now()},Math.max(0,l-i+t)))}})(e=>{let{current:l}=r;l&&l(e)},l),[l,r]),i=(0,o.useCallback)(e=>{e.timeStampLow=Date.now(),s(e)},[s]);return(0,o.useLayoutEffect)(()=>(a.addEventListener(t,i,{passive:!0}),i({target:a,type:t}),()=>a.removeEventListener(t,i)),[t,i,a]),!1};function M(e,l){let t=Math.sign(l-e),n=e+Math.sqrt(Math.abs(l-e))*t;return t>0?Math.min(l,n):Math.max(l,n)}let F=e=>{let{name:l,onEnd:t,target:n,value:a}=e,r=(0,o.useRef)(),s=(0,o.useCallback)(function(e,l,a,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Date.now();("100%"===a||"number"==typeof a)&&(cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{if(n){let r="100%"===a?n.scrollHeight-n.offsetHeight:a,d=function(e,l,t,n){let a=e;for(let e=0;e<n;e++)a=t(a,l);return a}(l,r,M,(Date.now()-o)/5);1.5>Math.abs(r-d)&&(d=r),n[e]=d,r===d?t&&t(!0):s(e,l,a,i+1,o)}}))},[r,t,n]),i=(0,o.useCallback)(()=>{cancelAnimationFrame(r.current),t&&t(!1)},[t]);return(0,o.useLayoutEffect)(()=>(s(l,n[l],a,1),n)?(n.addEventListener("pointerdown",i,{passive:!0}),n.addEventListener("wheel",i,{passive:!0}),()=>{n.removeEventListener("pointerdown",i),n.removeEventListener("wheel",i),cancelAnimationFrame(r.current)}):()=>cancelAnimationFrame(r.current),[s,r,i,l,n,a]),!1};F.propTypes={name:y().string.isRequired,onEnd:y().func,target:y().any.isRequired,value:y().oneOfType([y().number,y().oneOf(["100%"])]).isRequired};var L=t(63378);t(19569);let Z=[];function G(e){let[l,t]=(0,o.useState)(e),n=(0,o.useRef)(),a=(0,o.useCallback)(e=>{"function"==typeof e?a(l=>(e=e(l),n.current=e,e)):(n.current=e,a(e))},[n]);return n.current=l,[l,t,n]}let R=()=>1/0;function O(e){let{mode:l,target:{offsetHeight:t,scrollHeight:n,scrollTop:a}}=e,r=n-a-t<1,s=a<1;return{atBottom:r,atEnd:"top"===l?s:r,atStart:"top"!==l?s:r,atTop:s}}function U(e,l){return e===("top"===l?0:"100%")}let B=e=>{let{checkInterval:l=100,children:t,debounce:a=17,debug:r,initialScrollBehavior:s="smooth",mode:i,nonce:d,scroller:c=R,styleOptions:u}=e,m=(0,o.useMemo)(()=>(function(e){let{force:l=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l?function(){for(var l=arguments.length,t=Array(l),n=0;n<l;n++)t[n]=arguments[n];if(!t.length)return;let[a]=t;"function"==typeof a&&(t=a());let r=Array.isArray(t[0])?t:[t],s=1===r.length;r.forEach((l,t)=>{s?console.log(...T(e,...l)):t?console.log(...Array.isArray(l)?l:[l]):console.groupCollapsed(...T(e,...l))}),s||console.groupEnd()}:()=>0})("<ScrollToBottom>",{force:r}),[r]);i="top"===i?"top":"bottom";let p=(0,o.useRef)(0),x=(0,o.useRef)(s),[v,h,f]=G("top"===i?0:"100%"),[g,b,j]=G(null),w=(0,o.useRef)(0),y=(0,o.useRef)(0),S=(0,o.useRef)(0),[_,P]=(0,o.useState)(!0),[E,M]=(0,o.useState)(!0),[B,H]=(0,o.useState)(!0),[V,W]=(0,o.useState)(!1),[q,Q,K]=G(!0),Y=(0,o.useRef)([]),$=(0,o.useCallback)(e=>{let{current:l}=j;return Y.current.push(e),l&&e({scrollTop:l.scrollTop}),()=>{let{current:l}=Y,t=l.indexOf(e);~t&&l.splice(t,1)}},[Y,j]),X=(0,o.useCallback)(()=>{let{current:e}=f;m(()=>["%cSpineTo%c: %conEnd%c is fired.",...z("magenta"),...z("orange"),{animateTo:e}]),p.current=Date.now(),U(e,i)||Q(!1),h(null)},[f,m,p,i,h,Q]),J=(0,o.useCallback)(function(e){let{behavior:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{current:t}=j;if("number"!=typeof e&&"100%"!==e)return console.warn('react-scroll-to-bottom: Arguments passed to scrollTo() must be either number or "100%".');m(()=>[["%cscrollTo%c: Will scroll to %c".concat("number"==typeof e?e+"px":e.replace(/%/gu,"%%"),"%c"),...z("lime",""),...z("purple")],{behavior:l,nextAnimateTo:e,target:t}]),"auto"===l?(X(),t&&(t.scrollTop="100%"===e?t.scrollHeight-t.offsetHeight:e)):("smooth"!==l&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollTo". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),h(e)),U(e,i)&&(m(()=>[["%cscrollTo%c: Scrolling to end, will set sticky to %ctrue%c.",...z("lime",""),...z("purple")],[{mode:i,nextAnimateTo:e}]]),Q(!0))},[m,X,i,h,Q,j]),ee=(0,o.useCallback)(function(){let{behavior:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(()=>["%cscrollToBottom%c: Called",...z("yellow","")]),"smooth"!==e&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToBottom". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),J("100%",{behavior:e||"smooth"})},[m,J]),el=(0,o.useCallback)(function(){let{behavior:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(()=>["%cscrollToTop%c: Called",...z("yellow","")]),"smooth"!==e&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToTop". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),J(0,{behavior:e||"smooth"})},[m,J]),et=(0,o.useCallback)(function(){let{behavior:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(()=>["%cscrollToEnd%c: Called",...z("yellow","")]),"smooth"!==e&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToEnd". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.');let l={behavior:e||"smooth"};"top"===i?el(l):ee(l)},[m,i,ee,el]),en=(0,o.useCallback)(function(){let{behavior:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(()=>["%cscrollToStart%c: Called",...z("yellow","")]),"smooth"!==e&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToStart". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.');let l={behavior:e||"smooth"};"top"===i?ee(l):el(l)},[m,i,ee,el]),ea=(0,o.useCallback)(()=>{let{current:e}=j;if(e){let l;if("auto"===x.current){m(()=>["%ctarget changed%c: Initial scroll",...z("blue")]),e.scrollTop="top"===i?0:e.scrollHeight-e.offsetHeight,x.current=!1;return}let{current:t}=w,{offsetHeight:n,scrollHeight:a,scrollTop:r}=e,s="top"===i?0:Math.max(0,a-n-r),o=Math.max(0,t-r),d=c({maxValue:s,minValue:o,offsetHeight:n,scrollHeight:a,scrollTop:r}),u=Math.max(0,Math.min(s,d));l="top"===i||u!==s?r+u:"100%",m(()=>[["%cscrollToSticky%c: Will animate from %c".concat(t,"px%c to %c").concat("number"==typeof l?l+"px":l.replace(/%/gu,"%%"),"%c (%c").concat(("100%"===l?s:l)+t,"px%c)"),...z("orange"),...z("purple"),...z("purple"),...z("purple")],{animateFrom:t,maxValue:s,minValue:o,nextAnimateTo:l,nextValue:u,offsetHeight:n,rawNextValue:d,scrollHeight:a,scrollTop:r}]),J(l,{behavior:"smooth"})}},[w,m,i,c,J,j]),er=(0,o.useCallback)(e=>{let{timeStampLow:l}=e,{current:t}=f,{current:n}=j,a=null!==t;if(l<=p.current||!n)return;let{atBottom:r,atEnd:s,atStart:o,atTop:d}=O({mode:i,target:n});P(r),M(s),W(o),H(d);let{offsetHeight:c,scrollHeight:u}=n,{current:x}=y,{current:v}=S,h=c!==x,g=u!==v;if(h&&(y.current=c),g&&(S.current=u),h||g)K.current&&(m(()=>[["%conScroll%c: Size changed while sticky, calling %cscrollToSticky()%c",...z("red"),...z("orange"),{offsetHeightChanged:h,scrollHeightChanged:g}],{nextOffsetHeight:c,prevOffsetHeight:x,nextScrollHeight:u,prevScrollHeight:v}]),ea());else{let e=a&&U(t,i)||s;K.current!==e&&(m(()=>[["%conScroll%c: %csetSticky%c(%c".concat(e,"%c)"),...z("red"),...z("red"),...z("purple")],["(animating = %c".concat(a,"%c && isEnd = %c").concat(U(t,i),"%c) || atEnd = %c").concat(s,"%c"),...z("purple"),...z("purple"),...z("purple"),{animating:a,animateTo:t,atEnd:s,mode:i,offsetHeight:n.offsetHeight,scrollHeight:n.scrollHeight,sticky:K.current,nextSticky:e}]]),Q(e))}let{scrollTop:b}=n;Y.current.forEach(e=>e({scrollTop:b}))},[f,m,p,i,y,S,Y,ea,P,M,W,H,Q,K,j]);(0,o.useEffect)(()=>{if(g){var e,t;let n=!1,a=(e=()=>{let{current:e}=j,l=null!==f.current;K.current?O({mode:i,target:e}).atEnd?n=!1:n?Date.now()-n>34&&(l||(w.current=e.scrollTop,m(()=>["%cInterval check%c: Should sticky but not at end, calling %cscrollToSticky()%c to scroll",...z("navy"),...z("orange")]),ea()),n=!1):n=Date.now():e.scrollHeight<=e.offsetHeight&&!K.current&&(m(()=>[["%cInterval check%c: Container is emptied, setting sticky back to %ctrue%c",...z("navy"),...z("purple")],[{offsetHeight:e.offsetHeight,scrollHeight:e.scrollHeight,sticky:K.current}]]),Q(!0))},t=Math.max(17,l)||17,e(),setInterval(e,t));return()=>clearInterval(a)}},[f,l,m,i,ea,Q,K,g,j]);let es=function(e,l){let t=(0,o.useMemo)(()=>{let t=Z.find(t=>{let{sheet:n}=t;return n.nonce===e&&n.container===l}),n=null!=t?t:(0,L.Z)({container:l,key:"react-scroll-to-bottom--css-abacus",nonce:e});return Z.push(n),n},[l,e]);return(0,o.useEffect)(()=>(null==t?void 0:t.sheet)&&(()=>{let e=Z.lastIndexOf(t);if(~e&&Z.splice(e,1),!Z.includes(t))for(let e of t.sheet.tags)e.remove()}),[t]),t}(d,null==u?void 0:u.stylesRoot),ei=(0,o.useCallback)(e=>es.css(e)+"",[es]),eo=(0,o.useMemo)(()=>({observeScrollPosition:$,setTarget:b,styleToClassName:ei}),[$,b,ei]),ed=(0,o.useMemo)(()=>({atBottom:_,atEnd:E,atStart:V,atTop:B,mode:i}),[_,E,V,B,i]),ec=(0,o.useMemo)(()=>{let e=null!==v;return{animating:e,animatingToEnd:e&&U(v,i),sticky:q}},[v,i,q]),eu=(0,o.useMemo)(()=>({...ed,...ec}),[ed,ec]),em=(0,o.useMemo)(()=>({scrollTo:J,scrollToBottom:ee,scrollToEnd:et,scrollToStart:en,scrollToTop:el}),[J,ee,et,en,el]);return(0,o.useEffect)(()=>{if(g){let e=()=>{S.current=g.scrollHeight};return g.addEventListener("focus",e,{capture:!0,passive:!0}),()=>g.removeEventListener("focus",e)}},[g]),m(()=>[["%cRender%c: Render",...z("cyan","")],{animateTo:v,animating:null!==v,sticky:q,target:g}]),(0,n.jsx)(A.Provider,{value:eo,children:(0,n.jsx)(N.Provider,{value:em,children:(0,n.jsx)(I.Provider,{value:eu,children:(0,n.jsx)(k.Provider,{value:ed,children:(0,n.jsxs)(C.Provider,{value:ec,children:[t,g&&(0,n.jsx)(D,{debounce:a,name:"scroll",onEvent:er,target:g}),g&&null!==v&&(0,n.jsx)(F,{name:"scrollTop",onEnd:X,target:g,value:v})]})})})})})};B.propTypes={checkInterval:y().number,children:y().any,debounce:y().number,debug:y().bool,initialScrollBehavior:y().oneOf(["auto","smooth"]),mode:y().oneOf(["bottom","top"]),nonce:y().string,scroller:y().func,styleOptions:y().any};let H={height:"100%",overflowY:"auto",width:"100%"},V=e=>{let{children:l,className:t}=e,{setTarget:a}=(0,o.useContext)(A),r=_()(H);return(0,n.jsx)("div",{className:j()(r,(t||"")+""),ref:a,children:l})};V.propTypes={children:y().any,className:y().string};let W={position:"relative"},q=e=>{let{children:l,className:t,followButtonClassName:a,scrollViewClassName:r}=e,s=_()(W);return(0,n.jsxs)("div",{className:j()(s,(t||"")+""),children:[(0,n.jsx)(V,{className:(r||"")+"",children:l}),(0,n.jsx)(E,{className:(a||"")+""})]})};q.propTypes={children:y().any,className:y().string,followButtonClassName:y().string,scrollViewClassName:y().string};let Q=e=>{let{checkInterval:l,children:t,className:a,debounce:r,debug:s,followButtonClassName:i,initialScrollBehavior:o="smooth",mode:d,nonce:c,scroller:u,scrollViewClassName:m,styleOptions:p}=e;return(0,n.jsx)(B,{checkInterval:l,debounce:r,debug:s,initialScrollBehavior:o,mode:d,nonce:c,scroller:u,styleOptions:p,children:(0,n.jsx)(q,{className:a,followButtonClassName:i,scrollViewClassName:m,children:t})})};Q.propTypes={checkInterval:y().number,children:y().any,className:y().string,debounce:y().number,debug:y().bool,followButtonClassName:y().string,initialScrollBehavior:y().oneOf(["auto","smooth"]),mode:y().oneOf(["bottom","top"]),nonce:y().string,scroller:y().func,scrollViewClassName:y().string,styleOptions:y().any};var K=t(14301),Y=t(76630),$=t(88308),X=t(34743),J=t(81785),ee=t(28414),el=t(57934),et=t(2377),en=t(81315),ea=t(45492),er=t(30166),es=t(5529),ei=t(59625),eo=t(23749);let ed=(0,er.default)(()=>Promise.all([t.e(6401),t.e(6663),t.e(7599)]).then(t.bind(t,77599)),{loadableGenerated:{webpack:()=>[77599]},ssr:!1}),ec=(0,er.default)(()=>Promise.all([t.e(3572),t.e(5062),t.e(8515)]).then(t.bind(t,28515)),{loadableGenerated:{webpack:()=>[28515]},ssr:!1}),eu=e=>{var l,t,a,s,i,d,u,m,v;let{artifactContent:h,isDark:f,showPreview:g,onChange:b,isProcessing:j,deploymentId:w,deploymentConversationId:y,isPlaygroundUpdated:N,setIsPlaygroundUpdated:k,selectedArtifactMsgId:C}=e,[I,S]=(0,c.PB)("playgroundType"),A=(0,x.NL)(),[_,P]=(0,o.useState)("top");(0,o.useEffect)(()=>()=>{w&&y&&N&&(k(!1),null==A||A.invalidateQueries({queryKey:["listConvoOne",w,y]}))},[w,y,N]);let{updatedArtifactContent:E,updatedArtifactSegment:z}=(0,o.useMemo)(()=>{var e,l,t,n,a,r,s;let i=null==h?void 0:h.renderingCode,o=null==h?void 0:null===(e=h.segment)||void 0===e?void 0:e.replace(/```markdown?|```/g,"");if(g)switch(null==h?void 0:null===(l=h.artifactMetadata)||void 0===l?void 0:l.type){case"react":let d=(null==h?void 0:null===(n=h.renderingCode)||void 0===n?void 0:null===(t=n.split('<script type="text/babel">\n        try {\n'))||void 0===t?void 0:t.length)>1,c=d?null==h?void 0:null===(a=h.renderingCode)||void 0===a?void 0:a.split('<script type="text/babel">\n        try {\n'):null==h?void 0:null===(r=h.renderingCode)||void 0===r?void 0:r.split('<script type="text/babel">'),u=null==c?void 0:null===(s=c[1])||void 0===s?void 0:s.split("ReactDOM.render(<App />, document.getElementById('artifact_react'))");i="".concat(null==c?void 0:c[0]).concat(d?'<script type="text/babel">\n        try {\n':'<script type="text/babel">').concat(o,"ReactDOM.render(<App />, document.getElementById('artifact_react'))").concat(null==u?void 0:u[1]);break;case"html":case"svg":case"markdown":i=o}return{updatedArtifactContent:i,updatedArtifactSegment:o}},[h,g]),T=function(e){let l=(0,o.useRef)();return(0,o.useEffect)(()=>{l.current=e}),l.current}(z);(0,o.useEffect)(()=>{T!==z&&j&&P("bottom"),g&&P("top")},[j,T,z,g]);let D=(0,o.useCallback)(p()(e=>{z==="".concat(e)||j||b(e)},1e3),[g,z,E,j]),M="markdown"===I,F=j?null!==(u=null==h?void 0:null===(l=h.artifactMetadata)||void 0===l?void 0:l.language)&&void 0!==u?u:null==h?void 0:null===(t=h.artifactMetadata)||void 0===t?void 0:t.type:(null==h?void 0:h.language)!=="unknown"?null!==(m=null==h?void 0:h.language)&&void 0!==m?m:null==h?void 0:null===(a=h.artifactMetadata)||void 0===a?void 0:a.type:null==h?void 0:null===(s=h.artifactMetadata)||void 0===s?void 0:s.language;return(0,n.jsx)("div",{className:"h-[calc(100%-60px)] w-full overflow-auto",children:(0,n.jsxs)(Q,{checkInterval:100,debounce:17,className:"h-full",followButtonClassName:"hidden",mode:_,initialScrollBehavior:"auto",scrollViewClassName:"flex flex-col",children:[(0,n.jsx)("div",{className:M?" h-[calc(100%-48px)] ":" hidden ",children:r()(z)&&M&&(0,n.jsx)("div",{className:"p-[8px]",children:(0,n.jsx)(ec,{content:z,onChange:M?D:null,isStreaming:j,isUseCustomWidth:!0,selectedArtifactMsgId:C})})}),(0,n.jsxs)("div",{className:M?" hidden ":"h-[calc(100%-48px)]",children:[r()(E)&&(null==E?void 0:E.length)>0&&!M&&g&&["svg","html","react","ppt"].includes(null!==(v=null==h?void 0:null===(i=h.artifactMetadata)||void 0===i?void 0:i.type)&&void 0!==v?v:"")&&(0,n.jsx)("iframe",{className:"h-full w-full bg-[#ffffff]",sandbox:"allow-scripts",allow:"modal",srcDoc:E}),r()(z)&&r()(F)&&!M&&!g&&(null==h?void 0:null===(d=h.artifactMetadata)||void 0===d?void 0:d.type)!=="ppt"&&(0,n.jsx)("div",{className:"p-[8px]",children:(0,n.jsx)(ed,{markdownInfo:!M&&r()(F)&&r()(z)?z:null,isDark:f,readOnly:M?null:j,language:!M&&r()(F)?F:null,onChangeValue:M?null:D})})]})]})})},em=e=>{var l,a,r,m,p,x,b,j,w;let{isDark:y,deploymentId:N,isProcessing:k}=e,{setIsDownloadPptProcessing:C,setDownloadPptCompleted:I}=ep(e=>({setIsDownloadPptProcessing:e.setIsDownloadPptProcessing,setDownloadPptCompleted:e.setDownloadPptCompleted})),{selectedArtifactMsgId:S,setSelectedArtifactMsgId:A,streamingArtifactInfo:_,listOfArtifacts:P,setListOfArtifacts:E}=(0,d.P)(e=>({selectedArtifactMsgId:e.selectedArtifactMsgId,setSelectedArtifactMsgId:e.setSelectedArtifactMsgId,streamingArtifactInfo:e.streamingArtifactInfo,listOfArtifacts:e.listOfArtifacts,setListOfArtifacts:e.setListOfArtifacts})),[z,T]=(0,o.useState)("code"),[D,M]=(0,c.PB)("playgroundType"),[F,L]=(0,c.PB)("convoId"),[Z,G]=(0,o.useState)(!1),[R,O]=(0,o.useState)(!1),[U,B]=(0,v.Z)(),[H,V]=(0,c.PB)("sidebar"),{setShowRightSidePanel:W,setShowArtifactInfo:q}=(0,es.b)(e=>({setShowRightSidePanel:e.setShowRightSidePanel,setShowArtifactInfo:e.setShowArtifactInfo})),[Q,K]=(0,o.useState)(!1),[er,ei]=(0,o.useState)("PPTX");(0,o.useEffect)(()=>()=>{q(""),M("")},[]);let ed=(0,o.useMemo)(()=>{if(S)return P.find(e=>e.messageId===S||e.message_id===S)},[S,P]),ec=(0,o.useMemo)(()=>{var e;return(null==ed?void 0:null===(e=ed.artifactMetadata)||void 0===e?void 0:e.type)==="ppt"},[ed]);(0,o.useEffect)(()=>{T("code")},[S]),(0,o.useEffect)(()=>{(!k||ec)&&setTimeout(()=>{T("preview")},300)},[k,ec,S]);let em=(0,o.useCallback)(async e=>{G(!0),O(!0);let l=[...P],t=l.findIndex(e=>e.messageId===S||e.message_id===S);t>-1&&(l[t].segment=e,E(l)),await (0,u.qZH)({deploymentConversationId:F,messageId:S,playgroundText:e}),G(!1)},[P,S]),ex=(0,o.useCallback)(async e=>{try{let l=(0,Y.i)(e),t=await (0,$.l)().use(X.Z).use(et.Z).use(en.Z).use(J.Z).use(ea.Z,{output:"html"}).use(el.Z).use(ee.Z).process(l),n=document.createElement("html"),a=document.createElement("head"),r=document.createElement("body"),s=document.createElement("link");s.rel="stylesheet",s.href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css",a.append(s);let i=document.createElement("div");i.innerHTML=String(t),r.append(i),n.append(a),n.append(r);let o=n.cloneNode(!0),d=e=>{let l=window.getComputedStyle(e),t=Array.from(l).map(e=>"".concat(e,": ").concat(l.getPropertyValue(e),";")).join(" ");e.setAttribute("style",t),Array.from(e.children).forEach(d)};d(o);let c=document.createElement("div");c.appendChild(o),document.body.appendChild(c),await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([c.innerHTML],{type:"text/html"}),"text/plain":new Blob([c.innerText],{type:"text/plain"})})]),document.body.removeChild(c),h.Am.success("Copied!")}catch(e){console.error("Error rendering Markdown to HTML:",e)}},[]),ev=(0,o.useCallback)((e,l)=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=l,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)},[]),eh=(0,o.useCallback)(async()=>{var e,l;if(!(null==ed?void 0:ed.segment)){console.error("No content available for download");return}let t=ed.segment.trim();if(ec){K(!0),C(!0);try{let e=await (0,u.YVH)({params:{codeId:null==ed?void 0:ed.codeId,deploymentId:N,deploymentConversationId:F,exportType:er,messageId:S}}),t="".concat((null==ed?void 0:null===(l=ed.artifactMetadata)||void 0===l?void 0:l.title)||"download",".").concat("PPTX"===er?"pptx":"pdf");ev(e,t),I(!0)}finally{K(!1),C(!1)}return}let n="",a="";if(t.startsWith("<svg"))n="image/svg+xml;charset=utf-8",a="svg";else if(t.startsWith("<!DOCTYPE html>")||t.startsWith("<html"))n="text/html;charset=utf-8",a="html";else{if(!(/^function\s+\w+\s*\(/.test(t)||/^const\s+\w+\s*=\s*\(/.test(t)))return;n="application/javascript;charset=utf-8",a="jsx"}ev(new Blob([ed.segment],{type:n}),"".concat((null==ed?void 0:null===(e=ed.artifactMetadata)||void 0===e?void 0:e.title)||"download",".").concat(a))},[ed,ec,er,Q]),ef=(0,o.useCallback)(()=>{let e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);if("markdown"!==D||e){var l;let e=null!==(l=null==ed?void 0:ed.segment)&&void 0!==l?l:"";(null==e?void 0:e.endsWith("```"))&&(e=e.substring(0,e.length-3)),(null==e?void 0:e.startsWith("```sql"))&&(e=null==e?void 0:e.substring(6)),B(e=f.Z.removeEnters(e)),h.Am.success("Copied!")}else ex(null==ed?void 0:ed.segment)},[ed,D]);return(0,n.jsxs)("div",{className:"bg-darkcoloro text-darkcolor text-[14px] flex flex-col absolute top-[0px] bottom-0 right-0 left-0 rounded-tr-[8px] rounded-br-[8px] border-darkcolor/[0.1] shadow-lg",children:[(0,n.jsxs)("div",{className:"h-[60px] p-4 flex justify-between items-center gap-[16px] border-b-[1px] border-b-neutral-200 dark:border-b-neutral-800",children:[(0,n.jsxs)("div",{className:"flex items-center gap-[8px] flex-1",children:[(0,n.jsx)("div",{className:"text-[1.125rem]",children:(null===(a=(null==_?void 0:_.artifactMetadata)?_:ed)||void 0===a?void 0:null===(l=a.artifactMetadata)||void 0===l?void 0:l.title)?null===(m=(null==_?void 0:_.artifactMetadata)?_:ed)||void 0===m?void 0:null===(r=m.artifactMetadata)||void 0===r?void 0:r.title:"markdown"===D?"Editor":"Playground"}),Z?(0,n.jsx)(i.G,{spin:!0,className:"cursor-pointer",icon:t(55600).AX}):null]}),null===S||k||(null==ed?void 0:null===(p=ed.artifactMetadata)||void 0===p?void 0:p.type)==="ppt"?null:(0,n.jsx)("div",{className:"h-[48px] flex justify-end items-center gap-[12px]",children:(0,n.jsx)(g.Z,{title:"Copy",children:(0,n.jsx)(i.G,{className:"cursor-pointer",icon:t(71133).Yj,transform:{size:20},onClick:ef})})}),null!==S&&(!k||ec&&k)&&"markdown"!==D&&(0,n.jsx)("div",{className:"h-[48px] flex justify-end items-center gap-[12px]",children:(0,n.jsx)(g.Z,{title:"".concat(ec?"Export":"".concat(Q?"Downloading...":"Download")),children:Q?(0,n.jsx)(i.G,{spin:!0,className:"cursor-pointer",icon:t(55600).AX}):ec?(0,n.jsx)(i.G,{className:"cursor-pointer",icon:t(40985).q7,transform:{size:20},onClick:eh}):(0,n.jsx)(i.G,{className:"cursor-pointer",icon:t(96951).E0,transform:{size:20},onClick:eh})})}),ec&&(0,n.jsx)("div",{children:(0,n.jsxs)(eo.Ph,{onValueChange:e=>ei(e),value:er,children:[(0,n.jsx)(eo.i4,{className:"w-[80px]",children:(0,n.jsx)(eo.ki,{placeholder:"Select export type"})}),(0,n.jsx)(eo.Bw,{children:(0,n.jsxs)(eo.DI,{children:[(0,n.jsx)(eo.Ql,{value:"PPTX",children:"PPTX"}),(0,n.jsx)(eo.Ql,{value:"PDF",children:"PDF"})]})})]})}),(0,n.jsxs)("div",{className:"flex gap-[16px] items-center",children:[(null==ed?void 0:null===(x=ed.artifactMetadata)||void 0===x?void 0:x.type)!=="ppt"&&null!==S&&["svg","html","react"].includes(null!==(w=null===(j=_||ed)||void 0===j?void 0:null===(b=j.artifactMetadata)||void 0===b?void 0:b.type)&&void 0!==w?w:"")?(0,n.jsx)(g.Z,{title:"Preview is not available until playground streaming is done",enabled:!!_,contentClass:"w-[200px]",children:(0,n.jsxs)(s.fC,{className:"inline-flex rounded-full border-[1px]  border-darkcolor",type:"single",value:z,disabled:!!_,onValueChange:e=>{e&&T(e)},children:[(0,n.jsx)(s.ck,{className:' w-[64px] data-[state="on"]:text-darkwhite dark:data-[state="on"]:text-darkcoloro border-0.5 data-[state="on"]:bg-darkcolor dark:data-[state="on"]:bg-darkwhite flex items-center rounded-full border-transparent font-medium gap-1 py-1 px-2.5 text-xs justify-center',value:"code",children:"Code"}),(0,n.jsx)(s.ck,{className:' w-[64px] data-[state="on"]:text-darkwhite dark:data-[state="on"]:text-darkcoloro data-[state="on"]:bg-darkcolor dark:data-[state="on"]:bg-darkwhite flex items-center rounded-full border-transparent font-medium gap-1 py-1 px-2.5 text-xs justify-center',value:"preview",children:"Preview"})]})}):null,(0,n.jsx)("div",{className:"cursor-pointer ".concat(k?"pointer-events-none":""),onClick:()=>{k?h.Am.error("".concat("markdown"===D?"Editor":"Playground"," is still in progress.")):(A(null),q(""),M(null),V(null),W(!1))},children:(0,n.jsx)(i.G,{icon:t(19173).EO,transform:{size:14}})})]})]}),null!==S&&(ed||_)?(0,n.jsx)(eu,{isDark:y,artifactContent:(null==_?void 0:_.artifactMetadata)?_:ed,showPreview:"preview"===z,onChange:em,isProcessing:k,deploymentId:N,deploymentConversationId:F,isPlaygroundUpdated:R,setIsPlaygroundUpdated:O,selectedArtifactMsgId:S}):null]})},ep=(0,ei.Ue)(e=>({isDownloadPptProcessing:!1,setIsDownloadPptProcessing:l=>{e(e=>({isDownloadPptProcessing:l}))},downloadPptCompleted:!1,setDownloadPptCompleted:l=>{e(e=>({downloadPptCompleted:l}))}})),ex=e=>{var l,a,r,s;let{segmentInfo:o,isDark:d,artifactMetadata:c}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center py-3 px-4 w-full bg-darkcoloro cursor-pointer",children:[(0,n.jsxs)("div",{className:"flex gap-2 items-center w-[82%]",children:[(0,n.jsx)(i.G,{icon:(null==c?void 0:c.type)==="markdown"?t(29444).nf:t(28531).dT,className:"text-neutral-500/[0.5] text-[0.8rem]"}),(0,n.jsx)("span",{className:"text-ellipsis overflow-hidden whitespace-nowrap",children:null!==(r=null==o?void 0:null===(l=o.artifactMetadata)||void 0===l?void 0:l.title)&&void 0!==r?r:null==c?void 0:c.title})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,n.jsxs)(K.Z,{noScale:!0,children:[(0,n.jsx)(i.G,{icon:t(13619).Iw,transform:{size:10}}),(0,n.jsx)("span",{className:"ml-sm",children:"Edit"})]}),(0,n.jsx)(i.G,{icon:t(64711).Wd})]})]}),(0,n.jsxs)("div",{className:"relative flex min-h-0 w-full flex-1 flex-col self-end pointer-events-none",children:[(0,n.jsx)("div",{className:"relative flex min-h-0 flex-auto flex-col overflow-hidden border-t transition-colors border-transparent text-[14px]",children:(null==c?void 0:c.type)==="markdown"?(0,n.jsx)(ec,{content:null===(a=o.segment)||void 0===a?void 0:a.replace(/```markdown?|```/g,""),isUseCustomWidth:!1}):(0,n.jsx)(ed,{markdownInfo:o.segment,isDark:d,language:null!==(s=null==c?void 0:c.language)&&void 0!==s?s:null==o?void 0:o.language,readOnly:!0})}),(0,n.jsx)("div",{className:"absolute bottom-0 h-24 w-full transition-colors h-[4em] bg-gradient-to-b from-darkcoloro/0 to-darkcoloro"})]})]})}},70742:function(e,l,t){"use strict";t.d(l,{Z:function(){return u}});var n=t(57437),a=t(3916),r=t(14301),s=t(2265),i=t(36853),o=t(99376),d=t(53436),c=t(14438);function u(e){let{userInfo:l,onReturn:t,showCancel:u,options:m}=e,p=(0,o.useRouter)(),[x,v]=(0,s.useState)(null),[h,f]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),[j,w]=(0,s.useState)(!1),[y,N]=(0,s.useState)(null),[k,C]=(0,s.useState)(!1),[I,S]=(0,s.useState)(null),A=(0,i.useStripe)(),_=(0,i.useElements)(),P=(0,s.useRef)(!1),E=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",l=_.getElement(i.CardElement);l&&l.clear(),(e||y)&&(await (0,d.q2L)({paymentMethodId:e||y}),N(null),w(!1),await (0,d.DeS)({}).then(e=>{var l,t;(null==e?void 0:e.error)&&c.Am.error(null==e?void 0:e.error),(null==e?void 0:null===(l=e.result)||void 0===l?void 0:l.client_secret)?S(null==e?void 0:null===(t=e.result)||void 0===t?void 0:t.client_secret):v((null==e?void 0:e.error)||a.Z.errorDefault)}))};(0,s.useEffect)(()=>{(0,d.DeS)({}).then(e=>{var l,t;(null==e?void 0:e.error)&&c.Am.error(null==e?void 0:e.error),(null==e?void 0:null===(l=e.result)||void 0===l?void 0:l.client_secret)?S(null==e?void 0:null===(t=e.result)||void 0===t?void 0:t.client_secret):v((null==e?void 0:e.error)||a.Z.errorDefault)})},[]);let z=async e=>{if(e.preventDefault(),k||v("Card information is incomplete"),g||!I||!A||!k||x&&!j)return;b(!0);let n=y;if(!j||!y){var r,s;let e=await A.confirmCardSetup(I,{payment_method:{card:_.getElement(i.CardElement)}});if(null==e?void 0:e.error){v("Card validation failed: ".concat(e.error.message)),E().then(()=>b(!1));return}N(null==e?void 0:null===(r=e.setupIntent)||void 0===r?void 0:r.payment_method),n=null==e?void 0:null===(s=e.setupIntent)||void 0===s?void 0:s.payment_method}n&&(v(null),(0,d.w4c)({paymentMethodId:n,skipFreeTrial:j}).then(e=>{let r=null==e?void 0:e.error;if(r)r.includes("cancelled before")?(v("You won't be receiving the 1st month discount as you have already tried our service and cancelled before."),w(!0),b(!1)):(v(r||a.Z.errorDefault),E(n).then(()=>b(!1)));else{if((0,d.OJJ)(l,null)){var s,i;(null==l?void 0:null===(i=l.result)||void 0===i?void 0:null===(s=i.organization)||void 0===s?void 0:s.isSelfServe)!==!0&&(0,d.L3z)({isSelfServe:!0})}(0,d.SNt)({paymentMethodId:n}).then(e=>{if((null==e?void 0:e.error)&&c.Am.error(""+(null==e?void 0:e.error)),f(!0),u)t();else{var l,n,a,r,s,i,o,d;let e="/preparing_teams/";((null===(l=window.location.href)||void 0===l?void 0:l.includes("CodeLLM=1"))||(null===(n=window.location.href)||void 0===n?void 0:n.includes("CodeLLM=2")))&&(e.includes("?")?e+="&":e+="?",e+=(null===(s=window.location.href)||void 0===s?void 0:s.includes("CodeLLM=1"))?"CodeLLM=1":"CodeLLM=2",(null===(i=window.location.href)||void 0===i?void 0:i.includes("isSignUp=1"))&&(e+="&isSignUp=1")),((null===(a=window.location.href)||void 0===a?void 0:a.includes("AppLLM=1"))||(null===(r=window.location.href)||void 0===r?void 0:r.includes("AppLLM=2")))&&(e.includes("?")?e+="&":e+="?",e+=(null===(o=window.location.href)||void 0===o?void 0:o.includes("AppLLM=1"))?"AppLLM=1":"AppLLM=2",(null===(d=window.location.href)||void 0===d?void 0:d.includes("isSignUp=1"))&&(e+="&isSignUp=1")),p.push(e)}})}}))};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"sr-combo-inputs",children:(0,n.jsx)("div",{className:"sr-combo-inputs-row",children:(0,n.jsxs)("form",{onSubmit:z,style:{width:"100%",minWidth:"30px"},children:[(0,n.jsx)("div",{className:" border-[1px] rounded border-dark-grey/[0.5] py-[9px] px-[9px] ",children:(0,n.jsx)(i.CardElement,{className:"sr-input sr-card-element",onChange:e=>{if(!e.empty){var l;P.current=e.complete,v(null===(l=e.error)||void 0===l?void 0:l.message),C(P.current)}},options:m})}),x&&(0,n.jsx)("div",{className:" whitespace-normal lg:w-[300px] message sr-field-error mb-[20px] mt-[15px] pt-[0] text-red-500 leading-none",children:x}),(0,n.jsxs)("div",{className:"mt-[20px] flex justify-end items-center space-x-4",children:[(0,n.jsx)(r.Z,{className:" cursor-pointer bg-[#8c54ff] hover:bg-[#6F35E8] rounded-[20px] px-[46px] py-[10px] text-[14px] font-[500]  dark:!text-[#ffffff]",isPrimary:!0,disabled:g,children:g?"Processing...":"Confirm"}),(u||j)&&(0,n.jsx)(r.Z,{className:"cursor-pointer bg-[#8c54ff] hover:bg-[#6F35E8] rounded-[20px] px-[46px] py-[10px] text-[14px] font-[500] dark:!text-[#ffffff]",disabled:g,onClick:()=>{event.preventDefault(),v(null),j?E():t()},children:"Cancel"})]})]})})})})}},41237:function(e,l,t){"use strict";t.d(l,{Z:function(){return o}});var n=t(57437),a=t(3916);t(2265);var r=t(86159),s=t(56210),i=t(68781);function o(e){let{position:l="absolute",isAdimConnector:t=!1,isBorder:o=!0,marginLeft:d="0px",paddingRight:c="24px",paddingLeft:u="24px",className:m=""}=e,p=a.Z.calcRealHost(window.location.hostname);return(0,n.jsx)(r.Z,{title:"Connect external services",children:(0,n.jsxs)("div",{style:t?{paddingLeft:u,marginLeft:d,paddingRight:c,position:l}:{},className:(0,s.cn)("".concat("relative"===l?"":"w-full bottom-[30px]"," text-xs flex items-center ").concat(t?"gap-3 font-medium pl-1":"size-7 justify-center relative border border-darkcolor rounded-full text-darktoptext hover:bg-darkcolor/[0.1]"," cursor-pointer"),m),onClick:()=>{window.open("".concat(window.location.protocol+"//"+p,"/app/profile/connected_services"))},children:[o&&(0,n.jsx)("div",{className:"border-t-[1px] ".concat(t?"border-darkcolor/[0.05]":"border-white/[.2]")}),(0,n.jsx)(i.nL,{}),t?(0,n.jsx)("div",{children:"PLATFORM CONNECTORS"}):null]})})}},52626:function(e,l,t){"use strict";t.d(l,{Z:function(){return x}});var n=t(57437),a=t(2265),r=t(53436),s=t(48958),i=t(48547),o=t(5529),d=t(14301),c=e=>{var l;let{fileDirectory:r,isDirectoryLoading:s,endpointInfo:o,computerAgentInfo:c,userInfo:u}=e,[m,p]=(0,a.useState)(null),[x,v]=(0,a.useState)("main"),[h,f]=(0,a.useState)([]);return(0,a.useEffect)(()=>{p({[x]:r})},[r]),(0,n.jsx)("div",{className:"bg-darkcoloro text-[14px] mx-6 text-neutral-600/[0.9] dark:text-darkcolor/[0.8]",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"pr-[10px] cursor-pointer ".concat(h.length<1?"invisible":""),children:(0,n.jsx)(i.G,{icon:t(39688).ac,onClick:()=>{if(h.length>0){var e,l;h.pop(),f(h),v(null!==(e=h[h.length-1])&&void 0!==e?e:"main");let t=r;for(let e=0;e<h.length;e++)t=t[h[e]];p({[null!==(l=h[h.length-1])&&void 0!==l?l:"main"]:t})}},transform:{size:16}})}),(0,n.jsx)("div",{className:"mx-[-24px]",children:(0,n.jsx)("div",{className:"flex justify-between h-[64px] items-center dark:bg-neutral-300/[0.2] px-6",children:(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsx)("div",{className:"max-w-[340px] text-[16px]",children:"File Browser"})})})})]}),(0,n.jsx)("div",{className:"mx-[-24px]",children:(0,n.jsx)("div",{className:"flex justify-between h-[42px] items-center bg-neutral-300/[0.3] dark:bg-neutral-300/[0.2] px-6",children:(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsx)("div",{className:"max-w-[340px]",children:h.length>0?"/".concat(h.join("/")):null})})})}),(0,n.jsxs)("div",{className:" h-[300px] overflow-auto",children:[s?(0,n.jsx)("div",{className:"flex items-center justify-center h-full text-bwleftblue",children:(0,n.jsx)(i.G,{spin:!0,icon:t(39847).QD})}):null,null===(l=Object.entries((null==m?void 0:m[x])||{}))||void 0===l?void 0:l.map((e,l)=>{let[a,r]=e;if(""!==a)return(0,n.jsxs)("div",{className:"flex items-center gap-2 h-[40px] cursor-pointer border-b-[1px] border-neutral-600/[0.2] hover:bg-bwleftblue/[0.2] text-[13px]",children:[(0,n.jsxs)("div",{onClick:()=>{"object"==typeof r&&(f([...h,a]),v(a),p({[a]:m[x][a]}))},className:"flex gap-2 items-center flex-[2_2_0%]",children:[(0,n.jsx)(i.G,{icon:"object"==typeof r?t(19688).Pk:t(93802).gM}),(0,n.jsx)("div",{className:"max-w-[282px] overflow-hidden text-ellipsis whitespace-nowrap",children:a})]}),"object"!=typeof r?(0,n.jsx)("div",{children:(0,n.jsx)(d.Z,{onClick:()=>{var e,l;window.open("".concat(o.endpoint,"/","downloadComputerFile","?organizationId=").concat(null==u?void 0:null===(l=u.result)||void 0===l?void 0:null===(e=l.organization)||void 0===e?void 0:e.organizationId,"&computerId=").concat(c.computerId,"&filePath=").concat(h.join("/"),"/").concat(a))},className:"!border-[0px] !p-0",noBack:!0,noScale:!0,children:(0,n.jsx)("span",{className:"mr-[7px] text-bwleftblue cursor-pointer",children:(0,n.jsx)(i.G,{icon:t(48812).q7,transform:{size:20}})})})}):null]},l)}),s||(null==m?void 0:m[x])?null:(0,n.jsx)("div",{className:"flex items-center justify-center h-full",children:"No files available."})]})]})})},u=t(86159),m=t(14438),p=t(3916),x=e=>{let{userInfo:l,insideFileSegment:x}=e,[v,h]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1),[b,j]=(0,a.useState)(null),[w,y]=(0,a.useState)(null),{computerAgentInfo:N,isComputerAgent:k}=(0,o.b)(e=>({computerAgentInfo:e.computerAgentInfo,isComputerAgent:e.isComputerAgent}));return(0,a.useEffect)(()=>{if((null==N?void 0:N.computerId)&&v&&k)return setInterval(()=>{(0,r.Th3)({computerId:N.computerId}).then(async e=>{})},27e4),()=>{j(null)}},[v,N,k]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:(0,n.jsx)(d.Z,{onClick:()=>{(null==N?void 0:N.computerId)&&k&&(g(!0),h(!0),(0,r.Th3)({computerId:N.computerId}).then(async e=>{var l,t,n;if(e.success)try{let l=await fetch("".concat(e.result.endpoint,"/getComputerDirectoryTree?computerId=").concat(N.computerId),{headers:{Authorization:"Bearer ".concat(null==e?void 0:null===(n=e.result)||void 0===n?void 0:n.token)}}),t=await l.json();(null==e?void 0:e.success)?(y(e.result),j(t.result)):(m.Am.error(p.Z.errorDefault),h(!1)),g(!1)}catch(e){m.Am.error(e?"".concat(e):p.Z.errorDefault),h(!1),g(!1)}else h(!1),m.Am.error(null!==(t=null==e?void 0:null===(l=e.result)||void 0===l?void 0:l.error)&&void 0!==t?t:p.Z.errorDefault)}).catch(e=>{m.Am.error(e?"".concat(e):p.Z.errorDefault),h(!1),g(!1)}))},className:"!border-[0px] !p-0",noBack:!0,noScale:!0,children:(0,n.jsx)("span",{className:"mr-[7px] cursor-pointer",children:(0,n.jsx)(u.Z,{title:"Download Files",children:x?(0,n.jsx)(i.G,{icon:t(48812).q7,transform:{size:16}}):(0,n.jsx)(i.G,{icon:t(6535).IS,transform:{size:20}})})})})}),(0,n.jsx)(s.Vq,{open:v,children:(0,n.jsxs)(s.cZ,{className:"max-w-[530px] p-0 z-[99999]",dialogOverlayClassName:"z-[99999]",children:[(0,n.jsx)(c,{fileDirectory:b,isDirectoryLoading:f,endpointInfo:w,computerAgentInfo:N,userInfo:l}),(0,n.jsx)("div",{className:"absolute right-[18px] top-[18px] cursor-pointer",onClick:()=>{h(!1)},children:(0,n.jsx)(i.G,{icon:t(68770).g8})})]})})]})}},3377:function(e,l,t){"use strict";t.d(l,{uO:function(){return tm},ZP:function(){return tp},qZ:function(){return ta},gY:function(){return tn}});var n=t(57437),a=t(42715),r=t.n(a),s=t(25614),i=t.n(s),o=t(2265),d=t(99376),c=t(49070),u=t(27315),m=t(77598),p=t(14301),x=t(48547),v=t(30278),h=t(56383),f=t(14438),g=t(86159),b=t(19072),j=t(62514),w=t(10854),y=t(10013);t(67307);var N=t(3916),k=t(1346),C=t(96377),I=t(91528),S=t(16593),A=t(23749),_=t(96436),P=t.n(_),E=t(74180),z=t(53436);function T(e){let{applicationConnectorId:l,pickFiles:a,closePopover:r,refreshAppConectors:s}=e,[i,d]=(0,o.useState)(!1);return(0,n.jsx)("div",{className:"px-2 pt-2",children:(0,n.jsxs)("div",{className:"flex justify-between option gap-[12px] px-[8px] rounded-md hover:bg-bwleftblue/[0.2] text-darkcolor",children:[(0,n.jsxs)("div",{className:"flex items-center gap-[10px]",onClick:()=>a(),children:[(0,n.jsx)("img",{alt:"GoogleDrive",className:"w-[20px] h-[20px]",src:"https://abacus.ai/static/imgs/connectors/google_drive.webp"}),(0,n.jsx)("span",{children:"Add from Google Drive"})]}),(0,n.jsx)(x.G,{spin:i,color:i?void 0:"red",icon:i?t(39847).QD:t(38659).Vu,transform:{size:17},onClick:()=>{d(!0),(0,z.xGB)({applicationConnectorId:l}).then(e=>{!(null==e?void 0:e.success)||(null==e?void 0:e.error)?f.Am.error((null==e?void 0:e.error)||N.Z.errorDefault):s()}).catch(e=>{f.Am.error(e||N.Z.errorDefault)}).finally(()=>{d(!1)})}})]})})}function D(e){let{applicationConnectorId:l,pickFiles:a,closePopover:r,refreshAppConectors:s}=e,[i,d]=(0,o.useState)(!1);return(0,n.jsx)("div",{className:"px-2 pt-2",children:(0,n.jsxs)("div",{className:"flex justify-between option gap-[12px] px-[8px] rounded-md hover:bg-bwleftblue/[0.2] text-darkcolor",children:[(0,n.jsxs)("div",{className:"flex items-center gap-[10px]",onClick:()=>{a(),r()},children:[(0,n.jsx)("img",{alt:"OneDrive",className:"w-[20px] h-[20px]",src:"https://abacus.ai/static/imgs/connectors/onedrive.webp"}),(0,n.jsx)("span",{children:"Add from OneDrive"})]}),(0,n.jsx)(x.G,{spin:i,color:i?void 0:"red",icon:i?t(39847).QD:t(38659).Vu,transform:{size:17},onClick:()=>{d(!0),(0,z.xGB)({applicationConnectorId:l}).then(e=>{!(null==e?void 0:e.success)||(null==e?void 0:e.error)?f.Am.error((null==e?void 0:e.error)||N.Z.errorDefault):s()}).catch(e=>{f.Am.error(e||N.Z.errorDefault)}).finally(()=>{d(!1)})}})]})})}var M=t(5529);t(46651);var F=t(591),L=t(56210),Z=t(70978),G=t(40703),R=t(48958),O=t(13590),U=t(29501),B=t(31229),H=t(31486),V=t(69997),W=t(70764),q=t.n(W),Q=t(30166);let K=(0,Q.default)(()=>Promise.all([t.e(6051),t.e(9075)]).then(t.bind(t,22744)).then(e=>e.MdFaceRetouchingNatural),{loadableGenerated:{webpack:()=>[null]}}),Y=["Automatic","AI Detector Proof","Professional and Clear","Funny and Clever","Caring and Empathic","Concrete, To the Point And Helpful"],$=B.z.object({humanizeInstructions:B.z.object({tone:B.z.string().min(1).max(50),additionalInstructions:B.z.string().max(1500)}),saveHumanizeInstructionsToConversation:B.z.boolean()}),X=$.parse({humanizeInstructions:{tone:"Automatic",additionalInstructions:""},saveHumanizeInstructionsToConversation:!0});function J(e){var l;let{humanizeInstructions:t,onHumanize:a,toolbarProps:r=null}=e,[s,i]=(0,o.useState)(!1),d=!q()(t),c=(0,U.cI)({resolver:(0,O.F)($),defaultValues:{...X,...q()(t)?X:{humanizeInstructions:{...t,tone:t.tone||"Other"}}}});(0,o.useEffect)(()=>{c.reset({...q()(t)?X:{humanizeInstructions:{...t,tone:t.tone||"Other"}},saveHumanizeInstructionsToConversation:!0})},[t]),(0,o.useEffect)(()=>{r&&i(!!(null==r?void 0:r.isSelected))},[r]);let u="Other"===c.watch("humanizeInstructions.tone")&&!(null===(l=c.watch("humanizeInstructions.additionalInstructions"))||void 0===l?void 0:l.trim());return(0,n.jsxs)(n.Fragment,{children:[r?null:(0,n.jsx)(g.Z,{title:d?"Humanized response":"Humanize",children:(0,n.jsxs)("div",{className:"relative",children:[d&&(0,n.jsx)("div",{className:"bg-green-600 size-2 rounded-full absolute -right-1 -top-1"}),(0,n.jsx)("div",{onClick:()=>i(!0),className:(0,L.cn)("px-1.5 rounded cursor-pointer transition-all h-[26px] flex items-center","text-bwleftblue dark:text-darkcolor/60","border border-transparent hover:border-bwleftblue/25 hover:dark:border-darkcolor/10","hover:bg-bwleftblue/20 dark:hover:bg-darkcolor/[0.1]"),children:(0,n.jsx)(K,{className:"size-4"})})]})}),(0,n.jsx)(R.Vq,{open:s,children:(0,n.jsxs)(R.cZ,{className:"max-w-lg",children:[(0,n.jsx)(R.fK,{children:(0,n.jsx)(R.$N,{children:r?"Humanize Response":"Humanize and Regenerate Response"})}),(0,n.jsxs)("div",{className:"grid gap-6",children:[(0,n.jsx)(U.Qr,{name:"humanizeInstructions.tone",control:c.control,render:e=>{let{field:l}=e;return(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsx)(V.Z,{htmlFor:"tone",children:"Tone"}),(0,n.jsx)(G.Z,{value:l.value,onChange:l.onChange,options:[...Y,"Other"].map(e=>({label:e,value:e})),isHorizontal:!1,className:"text-sm"})]})}}),c.watch("humanizeInstructions.tone")!==Y[1]?(0,n.jsx)(U.Qr,{name:"humanizeInstructions.additionalInstructions",control:c.control,render:e=>{var l;let{field:t}=e;return(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsx)(V.Z,{className:"flex items-center gap-2",children:"Additional instructions to the LLM"}),(0,n.jsx)(H.Z,{...t,className:"resize-none min-h-[80px]",rows:2,placeholder:"e.g., Reply in a humorous and casual tone."}),(null===(l=c.formState.errors)||void 0===l?void 0:l["humanizeInstructions.additionalInstructions"])?(0,n.jsxs)("p",{className:"text-sm text-red-600",children:[c.watch("humanizeInstructions.additionalInstructions").length,"/1500 characters"]}):null]})}}):(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsx)(V.Z,{className:"flex items-center gap-2",children:"Note:"}),(0,n.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:"We humanize the response so it does not get detected by an AI detector. Please note, you may need to re-try your prompt 2-3 times for this feature to work. Plus, this feature only works for english language prompts."})]}),(0,n.jsx)(U.Qr,{name:"saveHumanizeInstructionsToConversation",control:c.control,render:e=>{let{field:l}=e;return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(Z.Z,{className:" mt-[3px] bg-darkcolor/[0.2] ",value:l.value,onChange:l.onChange}),(0,n.jsx)("span",{className:"text-sm mb-0.5",children:"Apply to all the new messages in this conversation"})]})}})]}),(0,n.jsxs)(R.cN,{className:"mt-4 flex-row justify-between sm:justify-between w-full",children:[d&&!r?(0,n.jsx)(g.Z,{title:"Reset and regenerate",children:(0,n.jsx)("span",{children:(0,n.jsx)(p.Z,{onClick:()=>{a({humanizeInstructions:{},saveHumanizeInstructionsToConversation:!0}),i(!1),null==r||r.onClose(!1),c.reset(X)},className:"rounded-full bg-red-600 hover:bg-red-600 text-darkcoloro dark:text-darkwhite/[0.7]",children:"Reset"})})}):(0,n.jsx)("span",{}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(p.Z,{noBack:!0,className:"text-darkcolor/[0.7] rounded-full",moreSpace:!0,onClick:()=>{i(!1),null==r||r.onClose(!0),c.reset(q()(t)?X:{humanizeInstructions:{...t,tone:t.tone||"Other"}})},children:"Cancel"}),(0,n.jsx)(p.Z,{onClick:c.handleSubmit(e=>{let l={tone:"Other"===e.humanizeInstructions.tone?null:e.humanizeInstructions.tone,additionalInstructions:e.humanizeInstructions.additionalInstructions.trim()};a({humanizeInstructions:l=l.tone||l.additionalInstructions?l:{},saveHumanizeInstructionsToConversation:e.saveHumanizeInstructionsToConversation}),i(!1),null==r||r.onClose(!1),c.reset({humanizeInstructions:l,saveHumanizeInstructionsToConversation:e.saveHumanizeInstructionsToConversation})}),disabled:u,className:(0,L.cn)("rounded-full !bg-bwleftblue !text-darkcoloro dark:text-darkwhite/[0.7]",{"grayscale !opacity-50":u}),children:r?"Apply":"Regenerate"})]})]})]})})]})}var ee=t(57099),el=t(3426);let et=(0,Q.default)(()=>Promise.all([t.e(7240),t.e(9866)]).then(t.bind(t,61273)).then(e=>e.FaFilm),{loadableGenerated:{webpack:()=>[null]}}),en=(0,Q.default)(()=>Promise.all([t.e(7240),t.e(9866)]).then(t.bind(t,61273)).then(e=>e.FaTerminal),{loadableGenerated:{webpack:()=>[null]}}),ea=(0,Q.default)(()=>Promise.all([t.e(7240),t.e(9866)]).then(t.bind(t,61273)).then(e=>e.FaVideo),{loadableGenerated:{webpack:()=>[null]}}),er=(0,Q.default)(()=>Promise.all([t.e(6051),t.e(9075)]).then(t.bind(t,22744)).then(e=>e.MdOutlinePhotoCamera),{loadableGenerated:{webpack:()=>[null]}}),es=(0,Q.default)(()=>Promise.all([t.e(6051),t.e(9075)]).then(t.bind(t,22744)).then(e=>e.MdFaceRetouchingNatural),{loadableGenerated:{webpack:()=>[null]}}),ei=(0,Q.default)(()=>Promise.all([t.e(7699),t.e(6231)]).then(t.bind(t,49089)).then(e=>e.FaRegImage),{loadableGenerated:{webpack:()=>[null]}}),eo=(0,Q.default)(()=>Promise.all([t.e(7699),t.e(6231)]).then(t.bind(t,49089)).then(e=>e.FaCode),{loadableGenerated:{webpack:()=>[null]}}),ed=(0,Q.default)(()=>Promise.all([t.e(7699),t.e(6231)]).then(t.bind(t,49089)).then(e=>e.FaRegFileWord),{loadableGenerated:{webpack:()=>[null]}}),ec=(0,Q.default)(()=>Promise.all([t.e(7699),t.e(6231)]).then(t.bind(t,49089)).then(e=>e.FaRegFilePowerpoint),{loadableGenerated:{webpack:()=>[null]}}),eu=(0,Q.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuChevronDownCircle),{loadableGenerated:{webpack:()=>[null]}}),em=(0,Q.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuClipboardCheck),{loadableGenerated:{webpack:()=>[null]}});function ep(e){let{lastBotMessageImageId:l,externalApplicationId:a,showTools:r,showScreenshot:s,onCaptureScreenshot:i,minimal:d=!1,className:u="",disabledTools:m,isSearchLLM:p,toggleSearchLLM:v,defaultHumanizeInstructions:h}=e,[f,g]=(0,c.PB)("preselectedTool"),[b,j]=(0,o.useState)([]),[w]=(0,el.H)(e=>[e.selectedImage]),[y,N]=(0,o.useState)([]),[k,C]=(0,o.useState)(null),[I,S,A,_]=(0,el.H)(e=>[e.editedImageMode,e.setEditedImageMode,e.isPaintingMode,e.setIsPaintingMode]),{prependMessage:P,setPrependMessage:E,showHumanize:T,updatedHumanizeInstructions:D,enterpriseToolBar:Z,setUpdatedHumanizeInstructions:G,setSelectedToolbar:R,setShowHumanize:O,setIsWebSearchSelected:U,metadataUpdate:B,csvMsgInfo:H,showArtifactInfo:V}=(0,M.b)(e=>({prependMessage:e.prependMessage,setPrependMessage:e.setPrependMessage,showHumanize:e.showHumanize,updatedHumanizeInstructions:e.updatedHumanizeInstructions,enterpriseToolBar:e.enterpriseToolBar,setUpdatedHumanizeInstructions:e.setUpdatedHumanizeInstructions,setSelectedToolbar:e.setSelectedToolbar,setShowHumanize:e.setShowHumanize,setIsWebSearchSelected:e.setIsWebSearchSelected,metadataUpdate:e.metadataUpdate,csvMsgInfo:e.csvMsgInfo,showArtifactInfo:e.showArtifactInfo})),W=e=>{E(k[e]),U(!1),"task"!==e&&g(null)},q=(0,o.useCallback)(e=>{let l={};e.forEach(e=>{l[e.id]={id:e.id,title:e.title||null,prompt:e.prompt||null,placeholder:e.placeholder||null,value:e.value||null}}),C(l)},[]);return(0,o.useEffect)(()=>{R(null==P?void 0:P.value)},[P]),(0,o.useEffect)(()=>{f&&k&&W(f)},[f,k]),(0,o.useEffect)(()=>{(s||r)&&(0,z.u3s)({enterpriseToolBar:Z,externalApplicationId:a}).then(e=>{let l=[],t=[];if(null==e?void 0:e.success){var n;let a=!1,i=null===(n=e.result)||void 0===n?void 0:n.filter(e=>("deep_research"===e.id&&(a=!0),!0));if(q(i),a||(null==P?void 0:P.id)!=="deep_research"||E(null),r){for(let e of i)("task"!==e.id||ee.featureFlags.showTasks)&&(e.isLarge&&e.isMedium?t.push(e):e.isLarge||e.isMedium?(l.push(e),t.push(e)):l.push(e));j(d?t.filter(e=>"playground"!==e.id&&"pptgen"!==e.id):t),N(s?l:l.filter(e=>"screenshot"!==e.id))}else s&&j(i.filter(e=>"screenshot"===e.id))}}).catch(()=>{N([]),j([])})},[d,s,r,a,B]),(0,n.jsxs)("div",{className:(0,L.cn)("flex items-center absolute top-full inset-x-0 z-[1] justify-center gap-2.5 pt-3.5",u),children:[w&&!I&&(null==w?void 0:w.messageId)===l&&(0,n.jsxs)("div",{onClick:()=>{_(!1),S(!0)},className:"flex cursor-pointer items-center gap-2.5",children:[(0,n.jsx)(x.G,{icon:t(25785).Iw,transform:{size:16}}),(0,n.jsx)("div",{className:"text-xs",children:"Edit Image"})]}),!w&&b.map((e,l)=>(0,n.jsxs)("div",{className:(0,L.cn)("flex items-center gap-2.5",{hidden:("screenshot"===e.id||"pptgen"===e.id)&&r,"xl:flex":("screenshot"===e.id||"pptgen"===e.id)&&!V&&!(null==H?void 0:H.content)&&!(null==w?void 0:w.segment)&&r,flex:!r&&s}),children:[l>0&&r?(0,n.jsx)("div",{className:"h-3.5 w-[1px] bg-darkcolor/20"}):null,(0,n.jsxs)("div",{className:(0,L.cn)("text-darkcolor/70 py-0.5 px-1.5 rounded-md hover:bg-bwleftblue/15 hover:text-bwleftblue transition flex items-center gap-1.5 cursor-pointer",{"bg-bwleftblue/15 text-bwleftblue":(null==P?void 0:P.id)===e.id||"search_llm"===e.id&&p}),onClick:()=>{"screenshot"===e.id?i():"search_llm"===e.id?v():W(e.id)},children:[ex(e.id),(0,n.jsx)("div",{className:"text-xs whitespace-nowrap",children:e.displayName})]})]},e.id)),!w&&!d&&r&&(null==y?void 0:y.length)>0?(0,n.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,n.jsx)("div",{className:"h-3.5 w-[1px] bg-darkcolor/20 pl-[1px]"}),(0,n.jsxs)(F.h_,{children:[(0,n.jsx)(F.$F,{asChild:!0,children:(0,n.jsxs)("div",{className:"text-darkcolor/70 py-0.5 px-1.5 rounded-md hover:bg-bwleftblue/15 hover:text-bwleftblue transition flex items-center gap-1.5 cursor-pointer",onClick:()=>null,children:[(0,n.jsx)(eu,{className:"size-4"}),(0,n.jsx)("div",{className:"text-xs",children:"More"})]})}),(0,n.jsx)(F.AW,{children:y.map(e=>(0,n.jsxs)(F.Xi,{className:(0,L.cn)("flex items-center gap-1.5 cursor-pointer",{"text-bwleftblue":(null==P?void 0:P.id)===e.id,"xl:hidden":e.isLarge&&!e.isMedium&&(!V||!(null==H?void 0:H.content))}),onClick:()=>{"screenshot"===e.id?i():"search_llm"===e.id?v():W(e.id),"humanize"===e.id&&O(!0)},disabled:"videoGen"===e.id&&m.videoGen||"humanize"===e.id&&m.humanize||"image"===e.id&&m.image||"search_llm"===e.id&&m.searchLlm,children:[ex(e.id),(0,n.jsx)("div",{className:"text-xs",children:e.displayName})]},e.id))})]})]}):null,(0,n.jsx)(J,{humanizeInstructions:null==D?void 0:D.humanizeInstructions,onHumanize:e=>{G({humanizeInstructions:e.humanizeInstructions,saveHumanizeInstructionsToConversation:e.saveHumanizeInstructionsToConversation})},toolbarProps:{isSelected:T,onClose:e=>{O(!1),e&&(W(null),G({humanizeInstructions:h,saveHumanizeInstructionsToConversation:null}))}}})]})}let ex=e=>{switch(e){case"image":return(0,n.jsx)(ei,{className:"size-4"});case"code":return(0,n.jsx)(eo,{className:"size-4"});case"playground":return(0,n.jsx)(en,{className:"size-4"});case"screenshot":return(0,n.jsx)(er,{className:"size-4"});case"pptgen":return(0,n.jsx)(ec,{className:"size-4"});case"docgen":return(0,n.jsx)(ed,{className:"size-4"});case"videoGen":return(0,n.jsx)(ea,{className:"size-4"});case"editor":return(0,n.jsx)(x.G,{icon:t(10932).E8,transform:{size:16}});case"search_llm":return(0,n.jsx)(x.G,{icon:t(28910).g4,transform:{size:14}});case"task":return(0,n.jsx)(em,{className:"size-4"});case"scrape":return(0,n.jsx)(x.G,{icon:t(37419).ov,transform:{size:16}});case"video":return(0,n.jsx)(et,{className:"size-4"});case"humanize":return(0,n.jsx)(es,{className:"size-4"});case"deep_research":case"deep_research_v2":return(0,n.jsx)(x.G,{icon:t(58170).YZ,transform:{size:14}});default:return null}};var ev=t(16512),eh=t(96535),ef=t(25415),eg=t(27795),eb=t.n(eg),ej=t(17693),ew=t.n(ej);let ey=e=>new Promise(l=>setTimeout(l,e)),eN={videoGenerationForm:{}};function ek(e){let{deploymentId:l,onSend:a,onClose:r}=e,[s,i]=(0,ef.Z)("preselected-video-model",""),[d,c]=(0,o.useState)(!1),[u,m]=(0,o.useState)({}),[v,h]=(0,o.useState)({}),[g,b]=(0,o.useState)({}),{control:j,handleSubmit:w,formState:{errors:y},reset:N,watch:k}=(0,U.cI)({defaultValues:{...eN}}),C=k("videoGenerationForm.model"),I=k("videoGenerationForm.prompt"),_=k("videoGenerationForm.startFrame"),P=k("videoGenerationForm.endFrame"),E=e=>{var l,t,n;let a={},r={model:C||s};(null==e?void 0:e.model)&&(a.model=e.model,r.model||(r.model=e.model.default));let i=eb()(r.model);if(i&&(null==e?void 0:null===(l=e.settings)||void 0===l?void 0:l[i])||(r.model=e.model.default,i=eb()(r.model)),i&&(null==e?void 0:null===(t=e.settings)||void 0===t?void 0:t[i])){let l=null==e?void 0:null===(n=e.settings)||void 0===n?void 0:n[i];a={...a,...l},Object.keys(l).forEach(e=>{r[e]=l[e].default})}I&&(r.prompt=I),_&&ew()(r,"startFrame")?r.startFrame=_:g.startFrame&&(delete g.startFrame,b({...g})),P&&ew()(r,"endFrame")?r.endFrame=P:g.endFrame&&(delete g.endFrame,b({...g})),m(a),N({videoGenerationForm:r})},{data:T,isLoading:D}=(0,S.a)({queryKey:["videoGenSettings"],queryFn:()=>(0,z.z7O)({}),select:e=>null==e?void 0:e.result});(0,o.useEffect)(()=>(c(!0),()=>{c(!1)}),[]),(0,o.useEffect)(()=>{T&&E(T),C&&i(C)},[T,C]);let M=async(e,t)=>{let n=null;h(e=>({...e,[t]:1}));let a=await (0,z.saE)({deploymentId:l,selectedFiles:[e]});if(null==a?void 0:a.request_id){let e=999;do{var r,s;if((null==(n=await (0,z.LsV)({request_id:null==a?void 0:a.request_id}))?void 0:n.error)||null==n||(null==n?void 0:null===(r=n.result)||void 0===r?void 0:r.error)){null==n||null===(s=n.result)||void 0===s||s.error,n=null;break}await ey(1e3),e--}while(e>0&&(null==n?void 0:n.status)!=="COMPLETED"&&(null==n?void 0:n.status)!=="CANCELED"&&(null==n?void 0:n.status)!=="SUCCESS"&&(null==n?void 0:n.status)!=="FAILED")}return h(e=>({...e,[t]:n?"SUCCESS":"FAILED"})),n},F=async(e,l,t)=>{var n;let a=e.target.files,r=null==e?void 0:null===(n=e.dataTransfer)||void 0===n?void 0:n.files;if(r&&[...r].length>0){let e=[...r];if(e.length>1){f.Am.error("Please drag and drop only a single file.");return}a=e}let s=(a=Array.from(a||[]))[0];if(s.size>20971520){f.Am.error("Please upload an image with a maximum size of 20MB.");return}let i=new FileReader;i.onload=n=>{var a;let r=new Image;r.onload=()=>{var n,a;let i=Math.min(r.width,r.height),o=Math.max(r.width,r.height);if((null==C?void 0:null===(a=C.toString())||void 0===a?void 0:null===(n=a.toLowerCase())||void 0===n?void 0:n.startsWith("runway"))&&(o/i>=2||o<300||i<300)){f.Am.error("Runway image must have a minimum resolution of 300x300 and a maximum aspect ratio of 2:1");return}if(o/i>2.5||i<300){f.Am.error("Please upload an image with a minimum resolution of 300x300 and a maximum aspect ratio of 5:2");return}M(s,t).then(e=>{var t,n,a;if(null==e?void 0:null===(t=e.result)||void 0===t?void 0:t.success){let t=null==e?void 0:null===(a=e.result)||void 0===a?void 0:null===(n=a.result)||void 0===n?void 0:n.docInfos;l.onChange(null==t?void 0:t[0].doc_id)}else b({...g})}),b({...g,[t]:{docId:null,filename:null==s?void 0:s.name,mimeType:null==s?void 0:s.type,pageCount:null,size:null==s?void 0:s.size,uniqueFileId:t}}),(null==e?void 0:e.target)&&(e.target.value="")},r.src=null===(a=n.target)||void 0===a?void 0:a.result},i.readAsDataURL(s)},G=(e,l)=>{let t=g[l];return l===(null==t?void 0:t.uniqueFileId)?(0,n.jsx)(ev.Z,{file:t,removeFile:()=>{delete g[l],e.onChange(void 0),b({...g})},progressUpload:v[null==t?void 0:t.uniqueFileId]}):null},O=(e,l)=>{let t=e.target.value;t&&(!/^\d+$/.test(t)||parseInt(t)>2147483647||0>parseInt(t))||l.onChange(t)},B=e=>["kling","veo","wan"].some(l=>e.toString().toLowerCase().startsWith(l)),W=e=>e.toString().toLowerCase().startsWith("kling")?"Kling 1.6 can use up a lot of compute points!":e.toString().toLowerCase().startsWith("veo")?"Veo 2 can use up to 25% of your compute points!":e.toString().toLowerCase().startsWith("wan")?"Wan 2.1 at 720p can use up to 25% of your compute points!":"";return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(R.Vq,{open:d,children:(0,n.jsxs)(R.cZ,{className:"max-w-lg p-0",children:[(0,n.jsx)(R.fK,{className:"pt-6 px-6",children:(0,n.jsx)(R.$N,{children:"Video Generation"})}),(0,n.jsx)("div",{className:(0,L.cn)("grid gap-6 min-h-40 max-h-96 overflow-y-auto px-6 items-center",{"justify-center":D}),children:D?(0,n.jsx)(x.G,{spin:!0,icon:t(39847).QD,transform:{size:17},className:"text-bwleftblue"}):(0,n.jsx)(n.Fragment,{children:Object.keys(u||{}).map(e=>{let l=u[e];return(0,n.jsxs)("div",{children:["dropdown"===l.type&&(0,n.jsx)(U.Qr,{name:"videoGenerationForm.".concat(e),control:j,defaultValue:l.default,render:t=>{var a,r,s,i,o,d;let{field:c}=t;return(0,n.jsxs)("div",{className:"space-y-2.5 w-full leading-[16px]",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(V.Z,{htmlFor:"videoGenerationForm.".concat(e),children:l.displayName}),(0,n.jsx)("p",{className:"text-[11px] opacity-50",children:l.helptext})]}),(0,n.jsxs)(A.Ph,{value:c.value,onValueChange:c.onChange,children:[(0,n.jsx)(A.i4,{className:"w-56",children:(0,n.jsx)(A.ki,{placeholder:"Select ".concat(l.displayName)})}),(0,n.jsx)(A.Bw,{children:(0,n.jsx)(A.DI,{children:l.options.keys.map((e,t)=>(0,n.jsx)(A.Ql,{value:e,children:l.options.values[t]},e))})})]}),"model"===e&&B(null==c?void 0:null===(r=c.value)||void 0===r?void 0:null===(a=r.toString())||void 0===a?void 0:a.toLowerCase())?(0,n.jsxs)("div",{className:"text-[11px]",children:[(0,n.jsxs)("span",{className:"font-bold "+((null==c?void 0:null===(i=c.value)||void 0===i?void 0:null===(s=i.toString())||void 0===s?void 0:s.toLowerCase().startsWith("kling"))?"opacity-70":"text-red-500 opacity-100"),children:["Please note: ",W(null==c?void 0:null===(d=c.value)||void 0===d?void 0:null===(o=d.toString())||void 0===o?void 0:o.toLowerCase())," "]}),(0,n.jsx)("a",{className:"text-bwleftblue underline",href:"/chatllm/admin/profile/",rel:"noopener noreferrer",target:"_blank",children:"Learn More"})]}):null]})}}),"number"===l.type&&(0,n.jsx)(U.Qr,{name:"videoGenerationForm.".concat(e),control:j,render:t=>{var a;let{field:r}=t;return(0,n.jsxs)("div",{className:"space-y-2.5 leading-[16px]",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(V.Z,{className:"flex items-center gap-2",children:l.displayName}),(0,n.jsx)("p",{className:"text-[11px] opacity-50",children:l.helptext})]}),(0,n.jsx)(H.Z,{value:r.value?String(r.value):"",onChange:e=>O(e,r),className:"min-h-0 w-1/3 resize-none outline-none ".concat((null===(a=y.videoGenerationForm)||void 0===a?void 0:a[e])?"border-red-500":""),rows:1,placeholder:"Random",dir:"auto"})]})}}),"text"===l.type&&(0,n.jsx)(U.Qr,{name:"videoGenerationForm.".concat(e),control:j,rules:{required:l.optional?null:"Prompt is mandatory"},render:t=>{var a,r,s,i;let{field:o}=t;return(0,n.jsxs)("div",{className:"space-y-2.5 leading-[16px]",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(V.Z,{className:"flex items-center gap-2",children:l.displayName}),(0,n.jsx)("p",{className:"text-[11px] opacity-50",children:l.helptext})]}),(0,n.jsx)(H.Z,{...o,className:"resize-none outline-none ".concat((null===(a=y.videoGenerationForm)||void 0===a?void 0:a[e])?"border-red-500":""),rows:3,placeholder:"e.g., Generate a video",dir:"auto"}),(null===(r=y.videoGenerationForm)||void 0===r?void 0:r[e])&&(0,n.jsx)("p",{className:"text-[11px] text-red-500 !m-0",children:null===(i=y.videoGenerationForm)||void 0===i?void 0:null===(s=i[e])||void 0===s?void 0:s.message})]})}}),"file"===l.type&&(0,n.jsx)(U.Qr,{name:"videoGenerationForm.".concat(e),control:j,rules:{required:l.optional?null:"File is mandatory"},render:a=>{var r,s,i;let{field:o}=a;return(0,n.jsxs)("div",{className:"space-y-2.5 w-full leading-[16px]",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(V.Z,{htmlFor:"videoGenerationForm.".concat(e),children:l.displayName}),(0,n.jsx)("p",{className:"text-[11px] opacity-50 m-0",children:l.helptext})]}),(0,n.jsxs)("div",{className:"border border-neutral-500 border-dashed rounded-lg ",children:[(0,n.jsxs)("div",{className:"relative h-[40px] rounded-lg text-[14px] hover:border-bwleftdate/[0.5] focus:outline-none w-full bg-background border-muted-foreground",children:[(0,n.jsxs)("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center ",children:[(0,n.jsx)(x.G,{className:"pr-[5px]",icon:t(18059).cf}),(0,n.jsx)("span",{children:"Upload / Drag and drop files here"})]}),(0,n.jsx)("input",{title:"",type:"file",onChange:l=>{F(l,o,e)},onDrop:l=>{F(l,o,e)},className:"opacity-0 w-full h-full  cursor-pointer",accept:"image/png, image/jpeg, image/jpg"})]}),(0,n.jsx)("div",{className:"flex flex-wrap w-full gap-[10px] px-[10px] py-[10px] border-t-[1px] rounded-b-lg border-dashed border-[#8798ad] empty:py-0 empty:border-t-0",children:G(o,e)})]}),(null===(r=y.videoGenerationForm)||void 0===r?void 0:r[e])&&(0,n.jsx)("p",{className:"text-[11px] text-red-500 !m-0",children:null===(i=y.videoGenerationForm)||void 0===i?void 0:null===(s=i[e])||void 0===s?void 0:s.message})]})}}),"switch"===l.type&&(0,n.jsx)(U.Qr,{name:"videoGenerationForm.".concat(e),control:j,defaultValue:l.default,render:e=>{let{field:t}=e;return(0,n.jsx)("div",{className:"space-y-2.5 w-full leading-[16px]",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(Z.Z,{className:" mt-[3px] bg-darkcolor/[0.2] ",value:t.value,onChange:t.onChange}),(0,n.jsx)("span",{className:"text-sm mb-0.5",children:l.helptext})]})})}}),"slider"===l.type&&(0,n.jsx)(U.Qr,{name:"videoGenerationForm.".concat(e),control:j,defaultValue:l.default,render:e=>{let{field:t}=e;return(0,n.jsxs)("div",{className:"space-y-2.5 leading-[16px]",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(V.Z,{className:"flex items-center gap-2",children:l.displayName}),(0,n.jsx)("p",{className:"text-[11px] opacity-50",children:l.helptext})]}),(0,n.jsxs)("div",{className:"flex flex-row",children:[(0,n.jsxs)(eh.fC,{className:"relative flex h-5 w-[200px] touch-none select-none items-center ml-[5px]",defaultValue:[l.default],max:l.max,min:l.min,step:l.step,value:[t.value],onValueChange:e=>{(null==e?void 0:e.length)>0&&t.onChange(e[0])},children:[(0,n.jsx)(eh.fQ,{className:"relative h-[3px] grow rounded-full bg-neutral-300",children:(0,n.jsx)(eh.e6,{className:"absolute h-full rounded-full bg-bwleftblue"})}),(0,n.jsx)(eh.bU,{className:"block size-4 rounded-[10px] bg-bwleftblue shadow-[0_2px_10px] shadow-blackA4 hover:bg-bwleftblue focus:shadow-[0_0_0_5px] focus:shadow-blackA5 focus:outline-none","aria-label":"Volume"})]}),(0,n.jsx)(V.Z,{className:"text-sm ml-4",children:Number(t.value).toFixed(2)})]})]})}})]},e)})})}),(0,n.jsx)(R.cN,{className:"mt-4 flex-row justify-end w-full pb-6 px-6",children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(p.Z,{noBack:!0,className:"text-darkcolor/[0.7] rounded-full",moreSpace:!0,onClick:()=>{r(),c(!1)},children:"Cancel"}),(0,n.jsx)(p.Z,{onClick:w(e=>{let l=!1;Object.keys(v||{}).length>0&&(l=Object.values(v).some(e=>1===e)),l?f.Am.error("Uploading file..."):(r(),a(e.videoGenerationForm))}),className:(0,L.cn)("rounded-full !bg-bwleftblue !text-darkcoloro dark:text-darkwhite/[0.7]"),children:"Generate"})]})})]})})})}var eC=t(97742),eI=t(13894);let eS=(0,t(59625).Ue)(e=>({isCreatingPR:!1,setIsCreatingPR:l=>e({isCreatingPR:l}),prMessageIndex:"",setPrMessageIndex:l=>e({prMessageIndex:l}),reset:()=>e({isCreatingPR:!1,prMessageIndex:""})})),eA=(0,Q.default)(()=>Promise.all([t.e(6051),t.e(9075)]).then(t.bind(t,22744)).then(e=>e.MdFaceRetouchingNatural),{loadableGenerated:{webpack:()=>[null]}});function e_(e){var l,a,r,s,i;let{lastBotMessageImageId:_,isAgent:F,isBinaryEnable:Z,supportsBinaryUpload:G,isProcessing:R,isProcessingUpload:O,forceHideAttachFile:U,setIsRegenerateProcessing:B,setIsProcessing:H,setIsProcessingUpload:V,onSend:W,onStop:q,warningMsgS:Q,onUploadDoc:K,onChangeHeight:Y,disabled:$,inputQuestion:X,onRemoveFileByID:J,deploymentConversationId:et,isMobile:en,appId:ea,deploymentId:er,dataChat:es,conversationWarning:ei,isMatrixAgent:eo,value:ed,isSelfServe:ec,presetFileList:eu,disableLLMSwitch:em,isCentredChat:ev,humanizeInstructions:eh,isTaskConversation:ef,textareaRef:eg,hasThinkingOption:eb}=e,ej=(0,c.z0)(),ew=(0,c.br)(),[ey,eN]=(0,o.useState)(ed||""),[e_,eP]=(0,o.useState)([]),eE=(0,o.useRef)(null),[ez,eT]=(0,o.useState)(!1),[eD,eM]=(0,o.useState)(!1),[eF,eL]=(0,o.useState)(null),eZ=e=>new Promise(l=>setTimeout(l,e)),{selectedFilesFromPersistence:eG,selectedGithubPersistenceFiles:eR,setSelectedGithubPersistenceFiles:eO}=(0,w.G)(),[eU,eB,eH]=(0,c.b2)(),[eV,eW,eq]=(0,c.Mi)(),[eQ,eK,eY]=(0,c.LE)(),[e$,eX,eJ]=(0,c.jZ)(),[e0,e1]=P()(),{selectedImage:e2,isPaintingMode:e5,setIsPaintingMode:e4,mask64:e6,image64:e3,editedImageMode:e8,setEditedImageMode:e7,currentImage:e9,setCurrentImage:le}=(0,el.H)(e=>({selectedImage:e.selectedImage,isPaintingMode:e.isPaintingMode,setIsPaintingMode:e.setIsPaintingMode,mask64:e.mask64,setMask64:e.setMask64,image64:e.image64,setImage64:e.setImage64,editedImageMode:e.editedImageMode,setEditedImageMode:e.setEditedImageMode,currentImage:e.currentImage,setCurrentImage:e.setCurrentImage})),{sharedDocInfos:ll}=(0,k.F)(),lt=(0,o.useRef)(null),{metadataUpdate:ln,isSearchLLM:la,prependMessage:lr,enterpriseToolBar:ls,setPrependMessage:li,setShowHumanize:lo,setUpdatedHumanizeInstructions:ld,selectedToolbar:lc,setSelectedToolbar:lu,isComputerAgent:lm,isComputerAgentInfoProcessing:lp,isWebSearchSelected:lx,setIsWebSearchSelected:lv,showWebSearch:lh,isComputerAgentOldConvo:lf,isThinkSelected:lg,setIsThinkSelected:lb,csvMsgInfo:lj,showRightSidePanel:lw,showArtifactInfo:ly}=(0,M.b)(e=>({metadataUpdate:e.metadataUpdate,isSearchLLM:e.isSearchLLM,prependMessage:e.prependMessage,enterpriseToolBar:e.enterpriseToolBar,setPrependMessage:e.setPrependMessage,setShowHumanize:e.setShowHumanize,setUpdatedHumanizeInstructions:e.setUpdatedHumanizeInstructions,selectedToolbar:e.selectedToolbar,setSelectedToolbar:e.setSelectedToolbar,isComputerAgent:e.isComputerAgent,isComputerAgentInfoProcessing:e.isComputerAgentInfoProcessing,isWebSearchSelected:e.isWebSearchSelected,setIsWebSearchSelected:e.setIsWebSearchSelected,showWebSearch:e.showWebSearch,isComputerAgentOldConvo:e.isComputerAgentOldConvo,isThinkSelected:e.isThinkSelected,setIsThinkSelected:e.setIsThinkSelected,csvMsgInfo:e.csvMsgInfo,showRightSidePanel:e.showRightSidePanel,showArtifactInfo:e.showArtifactInfo})),{isCreatingPR:lN}=eS(e=>e),[lk,lC]=(0,o.useState)("flux_pro_ultra"),[lI,lS]=(0,o.useState)(null),lA=(0,o.useMemo)(()=>null==eV?void 0:eV.find(e=>{var l;return(null===(l=e.service)||void 0===l?void 0:l.toUpperCase())==="GOOGLEDRIVEUSER"}),[eV]),l_=(0,o.useMemo)(()=>null==eV?void 0:eV.find(e=>{var l;return(null===(l=e.service)||void 0===l?void 0:l.toUpperCase())==="GOOGLEWORKSPACEUSER"}),[eV]),lP=(0,o.useMemo)(()=>null==eV?void 0:eV.find(e=>{var l,t;return(null===(l=e.service)||void 0===l?void 0:l.toUpperCase())==="ONEDRIVE"&&(null===(t=e.auth)||void 0===t?void 0:t.userLevel)}),[eV]);(0,o.useEffect)(()=>{lr&&e4(!1)},[lr]),(0,o.useEffect)(()=>{_!==(null==e2?void 0:e2.messageId)&&e7(!1)},[_,null==e2?void 0:e2.messageId]);let lE=(0,o.useMemo)(()=>{let e=[];return eU&&Object.keys(eU).forEach(l=>{!eU[l].isUserLevelConnector||lA&&(null==lA?void 0:lA.status)==="ACTIVE"&&"GOOGLEDRIVEUSER"===l.toUpperCase()||lP&&(null==lP?void 0:lP.status)==="ACTIVE"&&"ONEDRIVE"===l.toUpperCase()||l_&&"GOOGLEWORKSPACEUSER"===l.toUpperCase()||["GITHUBUSER","JIRAAUTH","GMAILUSER"].includes(l.toUpperCase())||e.push({...eU[l],service:l})}),e},[eU,lA,lP,l_]),[lz,lT]=(0,o.useState)(null),[lD,lM]=(0,o.useState)([]),[lF,{height:lL}]=(0,h.Z)(),lZ=(0,o.useMemo)(()=>sessionStorage.getItem("projectId"),[]),{data:lG}=(0,c.by)({projectId:(null==ln?void 0:ln.projectId)||(null==es?void 0:null===(a=es.result)||void 0===a?void 0:null===(l=a.metadata)||void 0===l?void 0:l.projectId)||lZ});(0,o.useEffect)(()=>{if((null==eu?void 0:eu.length)>0){let e=eu.map(e=>(null==e?void 0:e.file_id)||(null==e?void 0:e.doc_id)||(null==e?void 0:e.docId));eP(eu),lM(e)}},[eu]);let lR=(0,o.useCallback)(e=>{!((null==e?void 0:e.length)>0)||U||la||(e.filter(e=>e.size>104857600).length>0&&(f.Am.error("Files must be smaller than 100MB"),e=e.filter(e=>e.size<=104857600)),e=e.slice(0,5),eP(l=>{let t=(l=[...null!=l?l:[]]).length;l=l.concat(e);let n=[];return e.some((e,l)=>{n.push(new Promise(n=>{null==K||K([e],null,e=>{lT(n=>((n=[...null!=n?n:[]])[t+l]=e,n))},e=>{lM(n=>((n=[...null!=n?n:[]])[t+l]=null==e?void 0:e[0],n))},e=>{setTimeout(()=>{f.Am.error(e||"Error occurred while uploading files")},0),l9(t+l)}).then(e=>{lT(e=>((e=[...null!=e?e:[]])[t+l]=null,e)),n(!0)}).catch(e=>{lT(e=>((e=[...null!=e?e:[]])[t+l]=null,e)),lM(e=>((e=[...null!=e?e:[]])[t+l]=null,e)),n(!1)}).finally(()=>{})}))}),Promise.all(n).then(e=>{}),l}))},[K,U,la]),lO=(0,o.useCallback)((e,l)=>{(null==l?void 0:l.length)>0&&!U&&(l=l.slice(0,5),eP(t=>{let n=(t=[...null!=t?t:[]]).length;t=t.concat(l);let a=[];return l.some((l,t)=>{a.push(new Promise(a=>{null==K||K(null,{service:e,file_id:l.id,mime_type:l.mimeType,file_name:l.name,...l.drive_id&&{drive_id:l.drive_id}},e=>{lT(l=>((l=[...null!=l?l:[]])[n+t]=e,l))},e=>{lM(l=>((l=[...null!=l?l:[]])[n+t]=null==e?void 0:e[0],l))},e=>{setTimeout(()=>{f.Am.error(e||"Error occurred while uploading files")},0),l9(n+t)}).then(e=>{lT(e=>((e=[...null!=e?e:[]])[n+t]=null,e)),a(!0)}).catch(e=>{lT(e=>((e=[...null!=e?e:[]])[n+t]=null,e)),lM(e=>((e=[...null!=e?e:[]])[n+t]=null,e)),a(!1)}).finally(()=>{})}))}),Promise.all(a).then(e=>{}),t}))},[K,U]),lU=(0,o.useCallback)((e,l)=>{U||eP(t=>{let n=(t=[...null!=t?t:[]]).length;t=t.concat([l]);let a=[];return[l].some((l,t)=>{a.push(new Promise(a=>{null==K||K(null,"githubuser"===e?l:{service:e,file_id:l.id,mime_type:l.mimeType,file_name:l.name,...l.drive_id&&{drive_id:l.drive_id}},e=>{lT(l=>((l=[...null!=l?l:[]])[n+t]=e,l))},e=>{lM(l=>((l=[...null!=l?l:[]])[n+t]=null==e?void 0:e[0],l))},e=>{setTimeout(()=>{f.Am.error(e||"Error occurred while uploading files")},0),l9(n+t)}).then(e=>{lT(e=>((e=[...null!=e?e:[]])[n+t]=null,e)),a(!0)}).catch(e=>{lT(e=>((e=[...null!=e?e:[]])[n+t]=null,e)),lM(e=>((e=[...null!=e?e:[]])[n+t]=null,e)),a(!1)}).finally(()=>{})}))}),Promise.all(a).then(e=>{}),t})},[K,U]),{getRootProps:lB,isDragActive:lH}=(0,m.uI)({onDrop:lR}),{data:lV}=(0,S.a)({queryKey:["editImageModels"],queryFn:()=>(0,z.XS7)({}),select:e=>{var l;return null==e?void 0:null===(l=e.result)||void 0===l?void 0:l.models}});(0,o.useEffect)(()=>{if(e2){var e;let l=null==e2?void 0:null===(e=e2.generationParams)||void 0===e?void 0:e.model;(null==lV?void 0:lV.includes(l))?lC(l):lC("flux_pro_ultra")}},[e2,lV]);let{data:lW,isLoading:lq}=(0,S.a)({queryKey:["imageGenSettings"],queryFn:()=>(0,z.pF7)({}),select:e=>null==e?void 0:e.result}),lQ=(0,o.useMemo)(()=>{var e,l,t;return lW?null===(t=lW.model)||void 0===t?void 0:null===(l=t.options)||void 0===l?void 0:null===(e=l.keys)||void 0===e?void 0:e.reduce((e,l,t)=>((null==lV?void 0:lV.includes(l))&&e.push(t),e),[]):[]},[lW,lV]),lK=(0,o.useCallback)(async(e,l)=>{let t=null,n=await (0,z.saE)({deploymentId:er,selectedFiles:[e]});if(null==n?void 0:n.request_id){let e=999;do{var a,r;if((null==(t=await (0,z.LsV)({request_id:null==n?void 0:n.request_id}))?void 0:t.error)||null==t||(null==t?void 0:null===(a=t.result)||void 0===a?void 0:a.error)){null==t||null===(r=t.result)||void 0===r||r.error,t=null;break}await eZ(1e3),e--}while(e>0&&(null==t?void 0:t.status)!=="COMPLETED"&&(null==t?void 0:t.status)!=="CANCELED"&&(null==t?void 0:t.status)!=="SUCCESS"&&(null==t?void 0:t.status)!=="FAILED")}return t},[er]),lY=(0,o.useCallback)(async(e,l)=>{try{let t=await fetch(e),n=await t.blob(),a=new File([n],"image.png",{type:n.type});return await lK(a,l)}catch(e){return console.error("Error uploading file from URL:",e),null}},[lK]);(0,o.useEffect)(()=>{(e8||e5)&&lY(null==e2?void 0:e2.segment,"image").then(e=>{var l,t,n,a;lS(null==e?void 0:null===(a=e.result)||void 0===a?void 0:null===(n=a.result)||void 0===n?void 0:null===(t=n.docInfos)||void 0===t?void 0:null===(l=t[0])||void 0===l?void 0:l.doc_id)})},[e8,e5]);let l$=e=>{var l;null==e||null===(l=e.stopPropagation)||void 0===l||l.call(e),null==q||q()},lX=(e,l)=>{var t,n,a,r,s,i,o,d;if(lf)return;if(lp){f.Am.error("Loading Operator...");return}if(ea!==N.Z.aiEngAppId&&ea!==N.Z.appLlmEndAppId&&ea!==N.Z.testAiAgentAppId&&!er){f.Am.error("Something went wrong. Please refresh.");return}if(null==W)return;if(O){f.Am.error("Uploading...");return}let c=[...e_];if(e5&&e2){e6?null==W||W((null===(t=eg.current)||void 0===t?void 0:t.value)||"",null,null,()=>{H(!0)},null,null,{prompt:(null===(n=eg.current)||void 0===n?void 0:n.value)||"",mask:e6,image:e3,aspectRatio:"16:9",imageId:null==e2?void 0:e2.messageId,model:"flux_pro_fill"}).then(()=>{H(!1),le(null)}).catch(e=>{console.error("Error sending:",e),f.Am.error("Failed to process image")}):null==W||W((null===(a=eg.current)||void 0===a?void 0:a.value)||"",null,null,()=>{H(!0)},null,null,{prompt:(null===(r=eg.current)||void 0===r?void 0:r.value)||"",["flux_pro_ultra"===lk||"gemini_native"===lk?"imagePrompt":"controlImage"]:lI,isEditRequest:!0,aspectRatio:"16:9",imageId:null==e2?void 0:e2.messageId,model:(null==e2?void 0:null===(s=e2.generationParams)||void 0===s?void 0:s.model)==="flux_pro_fill"?"flux_pro_ultra":null==e2?void 0:null===(i=e2.generationParams)||void 0===i?void 0:i.model,rewritePrompt:!0}).then(()=>{H(!1),le(null)}).catch(e=>{console.error("Error sending:",e),f.Am.error("Failed to process image")}),eN(""),le(e2);return}if(e8&&e2){null==W||W((null===(o=eg.current)||void 0===o?void 0:o.value)||"",null,null,()=>{H(!0)},null,null,{prompt:(null===(d=eg.current)||void 0===d?void 0:d.value)||"",["flux_pro_ultra"===lk||"gemini_native"===lk?"imagePrompt":"controlImage"]:lI,isEditRequest:!0,aspectRatio:"16:9",imageId:null==e2?void 0:e2.messageId,model:lk,rewritePrompt:!0}).then(()=>{H(!1),le(null)}).catch(e=>{console.error("Error sending:",e),f.Am.error("Failed to process image")}),eN(""),le(e2);return}let u=(null==e?void 0:e.prompt)||(null==l?void 0:l.prompt)?((null==e?void 0:e.prompt)||(null==l?void 0:l.prompt)).trim():((null==lr?void 0:lr.prompt)||"")+(null==ey?void 0:ey.trim());if(!(null==l?void 0:l.prompt)&&!(null==e?void 0:e.prompt)&&!(null==ey?void 0:ey.trim())){f.Am.error("Text can't be empty!");return}eo||(eN(""),(null==lr?void 0:lr.id)==="pptgen"?(lr.prompt="",li(lr)):li(null),eP([])),td(null),null==W||W(u,null,null,()=>{H(!0)},null,(null==e?void 0:e.prompt)?e:null,(null==l?void 0:l.prompt)?l:null).then(e=>{H(!1),e?(setTimeout(()=>{var e,l;null==eg||null===(l=eg.current)||void 0===l||null===(e=l.focus)||void 0===e||e.call(l)},100),ld({humanizeInstructions:{},saveHumanizeInstructionsToConversation:!0})):(eN(ey),li(lr),eP(c))}).catch(e=>{H(!1),eN(ey),li(lr),eP(c)})},lJ=e=>{let l=Array.from(e.target.files||[]);(null==l?void 0:l.length)>0&&(eE.current&&(eE.current.value=""),lR(l))},l0=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),R||lX())},l1=(0,o.useMemo)(()=>[...null==e_?void 0:e_.filter(e=>null!=e)],[e_]),l2=(0,o.useRef)(0),l5=e=>{var l;null==Y||Y(e+116+(Q?28:0)+(ei?32:0)+(lm||(e2?e8:lw)?-33:0)+(ea===N.Z.aiEngAppId&&(null==lG?void 0:null===(l=lG.result)||void 0===l?void 0:l.name)&&!en?36:0))};(0,o.useEffect)(()=>{ez&&eQ&&(te(),eT(!1))},[eQ,ez]),(0,o.useEffect)(()=>{eD&&e$&&(tl(),eM(!1))},[e$,eD]);let l4=(0,o.useRef)(!1);(0,o.useEffect)(()=>{eN(""),null==B||B(!1),V(!1),eP([]),lT(null),lM([]),l4.current&&H(!1),l4.current=!0},[et]),(0,o.useEffect)(()=>{eP([]),lT(null),lM([])},[ea]),(0,o.useEffect)(()=>{(ea===N.Z.aiEngAppId||ea===N.Z.appLlmEndAppId||la)&&(eP([]),eO(null))},[ea,la]),(0,o.useEffect)(()=>{ed&&eN(ed)},[ed]);let l6=(0,o.useMemo)(()=>(null==lz?void 0:lz.some(e=>{if(null!=e)return!0}))===!0,[lz]);(0,o.useEffect)(()=>{V(l6)},[l6]),(0,o.useEffect)(()=>{if((null==eG?void 0:eG.length)>0){eP([...e_,...eG]);let e=eG.map(e=>e.document_upload_id);e&&lM([...lD,...e])}},[eG]),(0,o.useEffect)(()=>{if(ea!==N.Z.aiEngAppId&&ea!==N.Z.appLlmEndAppId&&!la){let e=Object.values(eR||{}),l=e.map(e=>e.github_path);l.length>0&&(lU("githubuser",{service:"githubuser",github_repo:e[0].github_repo,github_paths:l}),eO(null))}},[eR]);let[l3,{width:l8}]=(0,h.Z)(),l7=(0,o.useMemo)(()=>{var e;return null===(e=lt.current)||void 0===e?void 0:e.offsetWidth},[lt.current,l8]),l9=e=>{eP(l=>((l=[...null!=l?l:[]])[e]=null,l)),lT(l=>((l=[...null!=l?l:[]])[e]=null,l)),lM(l=>{let t=(l=[...null!=l?l:[]])[e];return t&&setTimeout(()=>{J(t)}),l[e]=null,l})};(0,o.useEffect)(()=>{if(la)return;let e=e=>{let l=e.clipboardData||window.clipboardData,t=null==l?void 0:l.items,n=!1;for(let e=0;e<(null==t?void 0:t.length);e++)if("string"===t[e].kind){n=!0;break}if(n){let e=null==eg?void 0:eg.current,l=()=>{eN(e.value),e.removeEventListener("input",l)};e.addEventListener("input",l)}else{var a;let l=e.clipboardData.files,t=[];for(let n of((null==l?void 0:l.length)>0&&e.preventDefault(),l))t.push(n);let n=(null===(a="".split(", "))||void 0===a?void 0:a.length)>1?"Unable to process uploaded documents ".concat(""):"Unable to process uploaded document ".concat("");N.Z.isNullOrEmpty("")||f.Am.error(n),t.length>0&&lR(t)}},l=null==eg?void 0:eg.current;return null==l||l.addEventListener("paste",e),()=>{null==l||l.removeEventListener("paste",e)}},[eg,K,la]);let te=(0,o.useCallback)(()=>{if(eQ){var e,l,t,n,a;e0({clientId:null===(l=eQ.auth)||void 0===l?void 0:null===(e=l.clientId)||void 0===e?void 0:e[0],developerKey:null===(n=eQ.auth)||void 0===n?void 0:null===(t=n.developerKey)||void 0===t?void 0:t[0],viewId:"DOCS",showUploadView:!1,showUploadFolders:!0,token:null===(a=eQ.auth)||void 0===a?void 0:a.accessToken,supportDrives:!0,multiselect:!0,setIncludeFolders:!0,views:[{viewId:"FOLDERS",label:"Folders"},{viewId:"DOCS",label:"Files"}],callbackFunction:e=>{lO("googledriveuser",null==e?void 0:e.docs)}})}else eY(),eT(!0)},[eQ,e0,lO,eY]),tl=(0,o.useCallback)(()=>{if(e$){var e,l,t;let n={clientId:null===(e=e$.auth)||void 0===e?void 0:e.clientId,action:"query",multiSelect:!0,advanced:{accessToken:null===(l=e$.auth)||void 0===l?void 0:l.accessToken,endpointHint:null===(t=e$.auth)||void 0===t?void 0:t.endpointHint},success:async function(e){var l,t;let n=[];e.value.forEach(e=>{var l,t;n.push(fetch("https://graph.microsoft.com/v1.0/me/drives/".concat(null===(l=e.parentReference)||void 0===l?void 0:l.driveId,"/items/").concat(e.id),{headers:{Authorization:"Bearer ".concat(null===(t=e$.auth)||void 0===t?void 0:t.accessToken)}}).then(e=>e.json()))});let a=await Promise.all(n);lO("onedrive",null==(t=(null==a?void 0:null===(l=a[0])||void 0===l?void 0:l.error)?e.value:a)?void 0:t.map(e=>{var l,t;return{id:e.id,mimeType:null===(l=e.file)||void 0===l?void 0:l.mimeType,drive_id:null===(t=e.parentReference)||void 0===t?void 0:t.driveId,name:e.name}}))},cancel:function(){console.log("File picking cancelled.")},error:function(e){(null==e?void 0:e.errorCode)==="popupOpen"?f.Am.error("Please allow popup"):f.Am.error(N.Z.isNullOrEmpty(e)?N.Z.errorDefault:""+e),console.log((N.Z.isNullOrEmpty(e),""+e))}};window.OneDrive.open(n)}else eJ(),eM(!0)},[e$,lO,eJ]),tt=(0,o.useCallback)(async()=>{let e=document.createElement("video");try{let l=window.CaptureController?new CaptureController:null;l&&l.setFocusBehavior("no-focus-change");let t=await navigator.mediaDevices.getDisplayMedia({controller:l||null,video:!0});e.srcObject=t,await new Promise((l,t)=>{e.onloadedmetadata=()=>{e.play().then(l,t)}});let n=document.createElement("canvas"),a=n.getContext("2d"),r=Math.min(1568/Math.min(e.videoWidth,1568),1568/Math.min(e.videoHeight,1568));n.width=e.videoWidth*r,n.height=e.videoHeight*r,a.drawImage(e,0,0,n.width,n.height);let s=n.toDataURL("image/png");t.getTracks().forEach(e=>e.stop());let i=await fetch(s).then(e=>e.blob()),o=new File([i],"screenshot.png",{type:"image/png"});lR([o])}catch(e){console.error("Error: "+e)}},[et,er]),{data:tn}=(0,c.KS)({}),ta=(0,o.useMemo)(()=>{var e;let l=null==tn?void 0:null===(e=tn.result)||void 0===e?void 0:e.find(e=>e.externalApplicationId===ea);return null==l?void 0:l.isSystemCreated},[tn]),tr=(0,o.useMemo)(()=>{var e,l;let t=null==tn?void 0:null===(e=tn.result)||void 0===e?void 0:e.find(e=>e.externalApplicationId===ea);return(null===ee.featureFlags||void 0===ee.featureFlags||!ee.featureFlags.chatLLMTeamsV2)&&(null==t?void 0:null===(l=t.name)||void 0===l?void 0:l.toLowerCase())==="o1 mini"},[tn]),ts=(0,o.useMemo)(()=>!1,[tn]),ti=(0,d.useSearchParams)(),[to,td]=(0,c.PB)("preselectedTool"),tc=(0,o.useCallback)(()=>{var e,l;let t=null==tn?void 0:null===(e=tn.result)||void 0===e?void 0:e.find(e=>{var l,t;return null===(t=e.name)||void 0===t?void 0:null===(l=t.toLowerCase())||void 0===l?void 0:l.includes("search")}),n=null==tn?void 0:null===(l=tn.result)||void 0===l?void 0:l.find(e=>{var l,t;return!(null===(t=e.name)||void 0===t?void 0:null===(l=t.toLowerCase())||void 0===l?void 0:l.includes("search"))}),a=la?null==n?void 0:n.externalApplicationId:null==t?void 0:t.externalApplicationId,r=new URLSearchParams(ti.toString());r.set("appId",a||""),ea===a?!ec&&r.has("convoId")&&r.delete("convoId"):(r.has("convoId")&&r.delete("convoId"),r.has("aiAssistedEditAgentAppId")&&r.delete("aiAssistedEditAgentAppId"),r.has("assistedAgentProjectId")&&r.delete("assistedAgentProjectId"),r.has("assistedChatbotProjectId")&&r.delete("assistedChatbotProjectId"),r.has("sideBySide")&&r.delete("sideBySide"),r.has("sideBySideTimestamp")&&r.delete("sideBySideTimestamp"),r.has("showArtifact")&&r.delete("showArtifact"),r.has("playgroundType")&&r.delete("playgroundType")),window.history.pushState(null,"","/chatllm/?".concat(r.toString()))},[tn,ea,la,ec]),tu=null===ee.featureFlags||void 0===ee.featureFlags?void 0:ee.featureFlags.showTools,tm=(0,c.ZC)({llmName:ee.T}),tp=(0,o.useMemo)(()=>ea===(null==tm?void 0:tm.externalApplicationId),[ea,tm]),tx=(0,o.useMemo)(()=>!lm&&!la&&!en&&(F&&Z||G)&&!U&&(ta||ls)&&!tp,[en,F,Z,G,U,la,ta,ls,lm,tp]),tv=(0,o.useMemo)(()=>!lm&&(null===ee.featureFlags||void 0===ee.featureFlags?void 0:ee.featureFlags.showTools)&&(ta||ls)&&!la&&!F&&!eo&&ea!==N.Z.aiEngAppId&&!tp&&ea!==N.Z.appLlmEndAppId,[F,eo,la,ta,ea,tu,ls,lm,tp]);(0,o.useEffect)(()=>{var e;l5(null!==(e=l2.current)&&void 0!==e?e:0)},[e_,lL,Q,tx,tv,tt,lG,lw,e8,e2]),(0,o.useEffect)(()=>{(la||ea===N.Z.aiEngAppId||ea===N.Z.appLlmEndAppId)&&(li(null),lo(!1),lu(null),ld({humanizeInstructions:{},saveHumanizeInstructionsToConversation:!0}),lv(!1),lb(!1))},[la,ea]);let th=(0,o.useCallback)(e=>{(null==eg?void 0:eg.current)&&!lf&&!ef&&setTimeout(()=>{var e;null==eg||null===(e=eg.current)||void 0===e||e.focus()},e),ef&&(null==eg?void 0:eg.current)&&eg.current.blur()},[ea,et,lf,ef]);(0,o.useEffect)(()=>{th(500)},[]),(0,o.useEffect)(()=>{th(100)},[ea,et,lf]),(0,o.useEffect)(()=>{lx&&lu("WEB_SEARCH")},[lx]),(0,o.useEffect)(()=>{lg&&!eb&&lb(!1)},[lg,eb]),(0,o.useEffect)(()=>{ta&&lh||!lx||(lv(!1),lu(null))},[ta,lx,lh]);let tf=(0,o.useMemo)(()=>(null==lr?void 0:lr.id)==="video"&&!O&&(null==e_?void 0:e_.length)>0,[O,lr,e_]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(v.E.div,{...tp?{}:lB({onClick:e=>e.stopPropagation()}),className:(0,L.cn)("flex flex-col items-start overflow-hidden border-2 border-[#F1EFEF] bg-[#F1EFEF] dark:border-neutral-800 dark:bg-[rgb(46,46,46)] rounded-3xl",!lH||tp||la?"":" border-orange-400 ",{" !w-[600px] ":eo," w-full mt-0":!et,"mt-3":ev,"mt-[36px]":ei||(null==lG?void 0:null===(r=lG.result)||void 0===r?void 0:r.name)&&!en&&ea===N.Z.aiEngAppId,"border-bwleftblue dark:border-bwleftblue bg-transparent dark:bg-transparent":!ec,"pointer-events-none opacity-40":ef}),children:[lm?(0,n.jsxs)("div",{className:(0,L.cn)(" flex items-start gap-[1px] w-full "),children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)(u.Z,{disabled:ef,maxRows:6,minRows:1,rows:1,onKeyDown:l0,ref:eg,placeholder:lf?"Conversation is closed":X||(null==lr?void 0:lr.placeholder)||"Write something...",className:(0,L.cn)(" text-[16px] !outline-none px-[19px] pt-[16px] pb-[10px] w-full bg-transparent resize-none ",{"pointer-events-none":lf}),onHeightChange:(e,l)=>{l2.current=e,null==l5||l5(e)},value:ey||"",onChange:e=>{eN(e.target.value||"")},dir:"auto"})}),(0,n.jsx)(v.E.div,{animate:{position:R&&!O&&null!=eF?"absolute":void 0,left:R&&!O?Math.max(19,Math.min((null!=eF?eF:l7)-19,(null!=l7?l7:200)-9-38))+"px":void 0},className:(0,L.cn)("self-end pb-[10px] pr-[10px] flex gap-[5px] ",{"pointer-events-none":lf}),children:(0,n.jsx)(g.Z,{title:"Stop",enabled:R&&!O,children:(0,n.jsx)("span",{children:(0,n.jsx)(p.Z,{moreSpace:!0,noBack:!0,onClick:$||O||lN?null:R||O?R&&!O?l$:null:lX,className:(0,L.cn)("!w-[38px] !h-[38px] rounded-full text-white flex items-center justify-center group",{"cursor-not-allowed":O||lN,"!bg-darkcoloro":R&&!O,"!bg-darkcolor/[0.4] dark:!bg-darkcolor/[0.2]":!(R&&!O)&&((null==ey||(null==ey?void 0:ey.trim())==="")&&!tf||O),"!bg-bwleftblue/[0.9]":!(R&&!O)&&!((null==ey||(null==ey?void 0:ey.trim())==="")&&!tf||O),"!grayscale":lN,"pointer-events-none":lf}),children:R&&!O?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:" absolute top-0 left-0 right-0 bottom-0 rounded-full border-dashed animate-spin-slow group-hover:animate-none group-hover:border-solid border-[2.5px] border-red-500 "}),(0,n.jsx)(x.G,{icon:t(61450).Bg,transform:{size:19},className:" "+(R&&!O?" !text-red-500 ":"")})]}):(0,n.jsx)(x.G,{spin:R,icon:R?t(39847).QD:t(96172).XC,transform:{size:17}})})})})})]}):null,lm?null:(0,n.jsxs)("div",{className:(0,L.cn)("flex w-full min-h-[56px]"),children:[lr&&!["videoGen","image","humanize"].includes(null==lr?void 0:lr.id)?(0,n.jsx)("div",{className:"pl-2 my-2 self-start hidden lg:block lg:border-r dark:border-darkcolor/20",children:(0,n.jsxs)("div",{className:"h-10 flex items-center gap-1.5 px-2.5",children:[(0,n.jsx)("div",{className:"text-bwleftblue",children:ex(lr.id)}),(0,n.jsx)("div",{className:"text-darkcolor/40 cursor-pointer transition duration-200 hover:text-red-500",onClick:()=>{li(null),td(null)},children:(0,n.jsx)(x.G,{icon:t(71269).faCircleXmark,transform:{size:16}})})]})}):null,(null==lr?void 0:lr.id)==="humanize"?(0,n.jsx)(j.Z,{width:200,borderRadius:6,className:"p-[0px]",side:"top",sideOffset:0,isNeedCloseFromContent:!0,content:e=>(0,n.jsxs)("div",{className:"flex flex-col p-[20px] h-[100px] justify-between",children:[(0,n.jsxs)("div",{className:"flex gap-2 items-center cursor-pointer font-normal text-[14px]",onClick:()=>{lo(!0)},children:[(0,n.jsx)(x.G,{icon:t(25785).Iw}),(0,n.jsx)("div",{children:"Edit"})]}),(0,n.jsxs)("div",{className:"flex gap-2 items-center cursor-pointer text-red-600 font-normal text-[14px]",onClick:()=>{lo(!1),li(null),ld({humanizeInstructions:{},saveHumanizeInstructionsToConversation:null}),e()},children:[(0,n.jsx)(x.G,{icon:t(68770).g8}),(0,n.jsx)("div",{children:"Remove Humanize"})]})]}),children:(0,n.jsx)("div",{className:"pb-[9px] self-end hidden lg:block text-bwleftblue",children:(0,n.jsx)("div",{className:"h-10 flex items-center gap-1.5 px-2.5",children:(0,n.jsx)(eA,{className:"size-6"})})})}):null,(null==lr?void 0:lr.id)==="videoGen"?(0,n.jsx)(ek,{onSend:lX,onClose:()=>{li(null)},deploymentId:er}):null,(null==lr?void 0:lr.id)==="image"?(0,n.jsx)(eC.Z,{onSend:e=>lX(null,e),onClose:()=>li(null),deploymentId:er}):null,e5&&(0,n.jsxs)("div",{className:"absolute top-[18px] ".concat(ei?"top-[52px]":""," flex items-center gap-2 left-5"),children:[(0,n.jsx)("img",{className:"w-[24px] h-[24px] object-cover rounded-lg",src:null==e2?void 0:e2.segment,alt:"Edited image"}),(0,n.jsxs)("div",{className:"text-darkcolor/40 cursor-pointer transition duration-200 hover:text-red-500",onClick:()=>{e4(!1)},children:["    ",(0,n.jsx)(x.G,{icon:t(71269).faCircleXmark,transform:{size:16}})]})]}),e8&&(0,n.jsxs)("div",{className:"absolute top-[12px] ".concat(ei?"top-[46px]":""," flex items-center gap-2 pr-[10px] left-5 border-r-2 border-darkcolor/20"),children:[(0,n.jsx)("div",{className:"space-y-2.5 w-full leading-[16px]",children:lq?(0,n.jsx)(x.G,{spin:!0,icon:t(39847).QD,transform:{size:17},className:"text-bwleftblue"}):(0,n.jsxs)(A.Ph,{value:lk,onValueChange:lC,children:[" ",(0,n.jsx)(g.Z,{title:"Generate image using Flux 1.1 model",children:(0,n.jsx)(A.i4,{className:"w-[135px] !bg-bwleftblue/[0.2] text-[12px] font-bold text-bwleftblue",children:(0,n.jsx)(A.ki,{placeholder:"Select model"})})}),(0,n.jsx)(A.Bw,{children:(0,n.jsx)(A.DI,{className:"w-[224px]",children:null==lQ?void 0:lQ.map(e=>{var l,t,a,r,s,i;return(0,n.jsx)(A.Ql,{value:null==lW?void 0:null===(t=lW.model)||void 0===t?void 0:null===(l=t.options)||void 0===l?void 0:l.keys[e],children:null==lW?void 0:null===(r=lW.model)||void 0===r?void 0:null===(a=r.options)||void 0===a?void 0:a.values[e]},null==lW?void 0:null===(i=lW.model)||void 0===i?void 0:null===(s=i.options)||void 0===s?void 0:s.keys[e])})})})]})}),(0,n.jsx)("div",{className:"text-darkcolor/40 cursor-pointer transition duration-200 hover:text-red-500",onClick:()=>{e7(!1)},children:(0,n.jsx)(x.G,{icon:t(71269).faCircleXmark,transform:{size:16}})})]}),(0,n.jsx)(u.Z,{maxRows:ew?2:6,minRows:1,rows:1,onKeyDown:l0,ref:eg,placeholder:ef?"This conversation is reserved for task runs.":e5?"Edit selection...":e8?"Enter prompt to edit image...":X||(null==lr?void 0:lr.placeholder)||"Write something...",className:" text-[16px] !outline-none px-[19px] pt-[16px] pb-[10px] w-full bg-transparent resize-none ".concat(e5?"!pl-[80px]":""," ").concat(e8?"!pl-[200px]":""),onHeightChange:(e,l)=>{let t=lm?e-60:e;l2.current=t,null==l5||l5(t)},value:ey||"",onChange:e=>{eN(e.target.value||"")},dir:"auto"})]}),lm?null:(0,n.jsx)("div",{className:" invisible h-[1px] w-full ",ref:l3}),(null==lG?void 0:lG.result)&&!en&&(0,n.jsx)("div",{className:"flex font-semibold top-[-2px] absolute left-0 right-0 items-center justify-center h-[32px] ".concat(en?"text-[10px]":"text-[12px]"," font-[400] mt-[3px]"),children:(0,n.jsx)("div",{className:"flex gap-[5px] mr-[10px]",children:(0,n.jsxs)("div",{className:" !px-[0px] !py-[0px] !border-[0px] text-darkcolor text-[14px] ",children:["Current Project - ",(0,n.jsx)("a",{href:"https://abacus.ai/app/projects/".concat(null==lG?void 0:null===(s=lG.result)||void 0===s?void 0:s.projectId),target:"_blank",children:(0,n.jsx)("span",{className:" !px-[0px] !py-[0px] !border-[0px] font-semibold text-bwleftblue text-[14px] ",children:null==lG?void 0:null===(i=lG.result)||void 0===i?void 0:i.name})})]})})}),ei?(0,n.jsxs)("div",{className:"flex font-semibold top-[-2px] absolute left-0 right-0 items-center justify-center h-[32px] ".concat(en?"text-[10px]":"text-[12px]"," font-[400] mt-[3px]"),children:[(0,n.jsx)("div",{className:"opacity-60",children:ei}),"\xa0",(0,n.jsx)(I.Z,{appId:ea,deploymentId:er,isMobile:en,showTextAsNew:!1,sideBySidePdf:"",isLink:!0,isSidebar:!!ly||!!(null==lj?void 0:lj.content),isSelfServe:ec})]}):null,(0,n.jsxs)("div",{ref:lt,className:(0,L.cn)("h-12 flex items-start gap-px w-full",{hidden:lm}),onClick:e=>{var l;null==eg||null===(l=eg.current)||void 0===l||l.focus()},children:[(0,n.jsxs)("div",{className:(0,L.cn)("pb-3 pl-3.5 flex self-end gap-2",{"pb-2.5":en||F},{hidden:lm}),children:[(F&&Z||G)&&!ej&&!U&&!la&&(0,n.jsx)(n.Fragment,{children:en||F?(0,n.jsxs)(p.Z,{className:"!h-[28px] !w-[28px] !bg-transparent rounded-md flex items-center justify-center !text-darkcolor hover:!bg-bwleftblue/[0.2]  border-[1px] border-neutral-300 !rounded-full !p-0",children:[(0,n.jsx)(x.G,{icon:t(86917).ML,transform:{size:17}}),!R&&(0,n.jsx)("input",{className:"cursor-pointer absolute block py-2 px-4 w-full opacity-0 pin-r pin-t",type:"file",multiple:!0,onChange:lJ,ref:eE})]}):(0,n.jsxs)(n.Fragment,{children:[!tp&&(0,n.jsx)(j.Z,{width:300,borderRadius:15,className:"p-[0px]",align:"start",isNeedCloseFromContent:!0,content:e=>(0,n.jsxs)("div",{className:"flex flex-col",onClick:e=>{e.stopPropagation()},children:[!!lE.length&&(0,n.jsx)(j.Z,{width:250,borderRadius:15,className:"p-[0px]",side:"right",sideOffset:0,isNeedCloseFromContent:!0,content:e=>(0,n.jsx)("div",{className:"flex flex-col p-[4px]",children:lE.map(l=>(0,n.jsx)(E.Z,{handleOpenGoogleDrivePicker:te,handleOpenOneDrivePicker:tl,appConnector:l,closePopover:e,refreshAppConectors:()=>{eq()}},l.service))}),children:(0,n.jsx)("div",{className:"p-2 border-solid border-b-2 border-gray-300",children:(0,n.jsxs)("div",{className:"flex justify-between option gap-[12px] px-[8px] rounded-md hover:bg-bwleftblue/[0.2] text-darkcolor",children:[(0,n.jsxs)("div",{className:"flex items-center gap-[10px]",children:[(0,n.jsx)(x.G,{icon:t(97683).bz,transform:{size:16},width:"18px",className:"text-darkcolor/[0.7]"}),(0,n.jsx)("span",{children:"Connect Apps"})]}),(0,n.jsx)(x.G,{icon:t(19592)._t,transform:{size:16},width:"18px",className:"text-darkcolor/[0.7]"})]})})}),!!lA&&(null==lA?void 0:lA.status)==="ACTIVE"&&(0,n.jsx)(T,{pickFiles:te,applicationConnectorId:lA.applicationConnectorId,closePopover:e,refreshAppConectors:()=>{eq()}}),!!lP&&(null==lP?void 0:lP.status)==="ACTIVE"&&(0,n.jsx)(D,{pickFiles:tl,applicationConnectorId:lP.applicationConnectorId,closePopover:e,refreshAppConectors:()=>{eq()}}),(0,n.jsx)("div",{className:"p-2",children:(0,n.jsx)(y.Z,{position:"static",isLarge:!1,onFilesSelected:()=>{e()}})}),(0,n.jsx)("div",{className:"px-2 pb-2",children:(0,n.jsxs)("div",{className:"option gap-[12px] px-[8px] rounded-md hover:bg-bwleftblue/[0.2] text-darkcolor",children:[(0,n.jsx)(x.G,{icon:t(55066).PQ,transform:{size:16},width:"18px",className:"text-darkcolor/[0.7]"}),(0,n.jsx)("span",{children:"Upload from computer"}),(0,n.jsx)("input",{className:"cursor-pointer absolute block py-2 px-4 w-full opacity-0 pin-r pin-t",type:"file",multiple:!0,onChange:l=>{lJ(l),e()},ref:eE})]})})]}),children:(0,n.jsx)("div",{className:"!h-[28px] !w-[28px] !bg-transparent rounded-md flex items-center justify-center !text-darkcolor hover:!text-bwleftblue hover:!bg-bwleftblue/[0.2] cursor-pointer transition duration-200 ".concat(lx?"pointer-events-none !text-neutral-400 dark:border-neutral-400":""," border-[1px] border-neutral-300 !rounded-full"),onClick:e=>{e.stopPropagation()},children:(0,n.jsx)(x.G,{icon:t(63325).ML,transform:{size:18}})})}),lh&&!ej&&ec&&ta?(0,n.jsxs)(p.Z,{disabled:(null==l1?void 0:l1.length)>0,className:"flex items-center justify-center ".concat(lx?"!text-bwleftblue !bg-bwleftblue/[0.2] border-[1px] !border-bwleftblue/[0.3] dark:!border-bwleftblue/[0.3]":"!bg-transparent"," gap-1.5 !px-[6px] !h-[28px] border-[1px] border-neutral-300 !rounded-full ").concat((null==l1?void 0:l1.length)>0?" !text-neutral-400":"hover:!text-bwleftblue hover:!bg-bwleftblue/[0.2]"),onClick:()=>{lv(!lx),lx?lu(null):(lu("WEB_SEARCH"),li(null))},noScale:!0,children:[(0,n.jsx)(x.G,{icon:t(28910).g4,transform:{size:17}}),lx?(0,n.jsx)("div",{children:"Search web"}):null]}):null,!ej&&eb?(0,n.jsxs)(p.Z,{className:"flex items-center justify-center ".concat(lg?"!text-bwleftblue !bg-bwleftblue/[0.2] !border-bwleftblue/[0.3] dark:!border-bwleftblue/[0.3]":"!bg-transparent"," gap-1.5 !px-[6px] !h-[28px] border-[1px] border-neutral-300 !rounded-full hover:!text-bwleftblue hover:!bg-bwleftblue/[0.2]"),onClick:()=>{lb(!lg)},noScale:!0,children:[(0,n.jsx)(x.G,{icon:lg?t(66655).cH:t(66823).X8,transform:{size:17}}),(0,n.jsx)("div",{children:"Think"})]}):null]})}),ts?(0,n.jsx)("div",{className:(0,L.cn)("rounded-md h-7 px-1.5 flex items-center gap-1 text-bwleftblue  hover:bg-bwleftblue/[0.2] cursor-pointer transition duration-200",{"bg-bwleftblue/[0.2] hover:bg-bwleftblue/[0.25]":la}),onClick:()=>em?null:tc(),children:(0,n.jsx)(x.G,{icon:t(28910).g4,transform:{size:16}})}):null]}),(null==l1?void 0:l1.length)>0?(0,n.jsx)("div",{className:"pt-1 h-12 flex flex-wrap gap-0.5 w-full px-[10px] overflow-y-auto",ref:lF,children:e_.map((e,l)=>{var a,r,s,i,o,d,c,u,m,p,v,h,f,g,j;if(null==e)return null;let w=window.location.host,y=w?"&orgHost=".concat(encodeURIComponent(eI.Z.calcHostOnly(w))):"",N=null==ll?void 0:ll.find(l=>{var t,n;return(null==l?void 0:null===(t=l.mime_type)||void 0===t?void 0:t.includes("image/"))&&(null==l?void 0:l.filename)===(null!==(n=null==e?void 0:e.name)&&void 0!==n?n:null==e?void 0:e.filename)});return(0,n.jsxs)("div",{className:" h-10 group cursor-default flex items-center border-gray-300 border-[1px] rounded-lg px-[5px] py-1 min-w-24 dark:bg-gray-800 dark:border-gray-700 relative ",children:[(0,n.jsx)("div",{onClick:e=>{l9(l)},className:"-translate-y-1/3 translate-x-1/3 invisible group-hover:visible absolute right-0 top-0 size-3.5 rounded bg-darkcoloro border border-darkcolor/[0.4] cursor-pointer",children:(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-darkcolor/[0.07] rounded hover:bg-darkcolor/[0.4]",children:(0,n.jsx)(x.G,{icon:t(68770).g8,transform:{size:13}})})}),(0,n.jsxs)("div",{className:"flex !size-8 bg-gray-500 rounded-lg items-center justify-center text-white",children:[(null==lz?void 0:lz[l])==null?(null===(a=(null==e?void 0:e.metadata)||e)||void 0===a?void 0:a.service)==="githubuser"||(null==e?void 0:null===(r=e.metadata)||void 0===r?void 0:r.service)==="githubuser"?(0,n.jsx)(x.G,{icon:t(65885).zh,transform:{size:24}}):N?(0,n.jsx)(C.Z,{size:30,alt:"Image",src:"/api/v0/getDocstoreImage?docId=".concat(encodeURIComponent("".concat(N.doc_id)),"&maxWidth=100","&maxHeight=100").concat(y)}):(0,n.jsx)(x.G,{icon:null!==(g=null===(s=(0,b.O)((null==e?void 0:e.type)||(null==e?void 0:e.mime_type)))||void 0===s?void 0:s.res)&&void 0!==g?g:t(23130).faFileLines,transform:{size:24}}):null,(null==lz?void 0:null===(i=lz[l])||void 0===i?void 0:i.progress)===1&&(0,n.jsx)(x.G,{spin:!0,icon:t(39847).QD,transform:{size:17}}),(null==lz?void 0:lz[l])!=null&&(null==lz?void 0:null===(o=lz[l])||void 0===o?void 0:o.progress)<1&&(0,n.jsxs)("div",{className:" text-[13px] ",children:[Math.round((null==lz?void 0:null===(d=lz[l])||void 0===d?void 0:d.progress)*100),"%"]})]}),(null===(c=(null==e?void 0:e.metadata)||e)||void 0===c?void 0:c.service)==="githubuser"?(0,n.jsxs)("div",{className:"flex-1 min-w-0 ms-[6px] ml-[8px] ",children:[(0,n.jsxs)("p",{className:"text-xs font-medium text-gray-900 truncate dark:text-white max-w-[190px] text-ellipsis",children:["Git Files - ",null===(m=(null==e?void 0:e.metadata)||e)||void 0===m?void 0:null===(u=m.github_paths)||void 0===u?void 0:u.length," File",(null===(v=(null==e?void 0:e.metadata)||e)||void 0===v?void 0:null===(p=v.github_paths)||void 0===p?void 0:p.length)>1?"s":""]}),(0,n.jsx)("p",{className:"text-xs text-gray-400 truncate dark:text-gray-300",children:null===(h=(null==e?void 0:e.metadata)||e)||void 0===h?void 0:h.github_repo})]}):(0,n.jsxs)("div",{className:"flex-1 min-w-0 ms-[6px] ml-[8px] ",children:[(0,n.jsx)("p",{className:"text-xs font-medium text-gray-900 truncate dark:text-white max-w-[190px] text-ellipsis",children:null!==(j=e.name)&&void 0!==j?j:null==e?void 0:e.filename}),(0,n.jsx)("p",{className:"text-xs text-gray-400 truncate dark:text-gray-300",children:(null===(f=(0,b.O)((null==e?void 0:e.mimeType)||(null==e?void 0:e.type)||(null==e?void 0:e.mime_type)))||void 0===f?void 0:f.name)||"PDF"})]})]},"".concat(e.name,"-").concat(l))})}):(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)(v.E.div,{animate:{position:R&&!O&&null!=eF?"absolute":void 0,left:R&&!O?Math.max(19,Math.min((null!=eF?eF:l7)-19,(null!=l7?l7:200)-9-38))+"px":void 0},className:" self-end pb-[10px] pr-[10px] flex gap-[5px] ".concat(lf?"pointer-events-none":""),children:(0,n.jsx)(g.Z,{title:"Stop",enabled:R&&!O,children:(0,n.jsx)("span",{children:(0,n.jsx)(p.Z,{moreSpace:!0,noBack:!0,onClick:$||O||lN?null:R||O?R&&!O?l$:null:e=>{e.stopPropagation(),null==lX||lX()},className:(0,L.cn)("!w-[38px] !h-[38px] rounded-full text-white flex items-center justify-center group",{"cursor-not-allowed":O||lN,"!bg-darkcoloro":R&&!O,"!bg-darkcolor/[0.4] dark:!bg-darkcolor/[0.2]":!(R&&!O)&&((null==ey||(null==ey?void 0:ey.trim())==="")&&!tf||O),"!bg-bwleftblue/[0.9]":!(R&&!O)&&!((null==ey||(null==ey?void 0:ey.trim())==="")&&!tf||O),"!grayscale":lN,"pointer-events-none":lf}),children:R&&!O?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:" absolute top-0 left-0 right-0 bottom-0 rounded-full border-dashed animate-spin-slow group-hover:animate-none group-hover:border-solid border-[2.5px] border-red-500 "}),(0,n.jsx)(x.G,{icon:t(61450).Bg,transform:{size:19},className:" "+(R&&!O?" !text-red-500 ":"")})]}):(0,n.jsx)(x.G,{spin:R,icon:R?t(39847).QD:t(96172).XC,transform:{size:17}})})})})})]}),ef?null:(0,n.jsx)(ep,{lastBotMessageImageId:_,externalApplicationId:ea,className:(0,L.cn)({hidden:!tv&&!tx||ej||(e2?e8:lw)}),onCaptureScreenshot:tt,showTools:tv,showScreenshot:tx,minimal:tr,disabledTools:{videoGen:R,humanize:R,image:R,searchLlm:R},defaultHumanizeInstructions:eh,isSearchLLM:la,toggleSearchLLM:tc}),Q&&(0,n.jsx)("div",{className:" absolute top-full left-0 right-0 flex items-center justify-center text-[14px] leading-none opacity-75 mt-3 ".concat((tv||tx)&&!ev?" !pt-10":""," ").concat((tv||tx)&&ev?"mt-8 !pt-6":""),children:Q}),ev?null:(0,n.jsxs)(n.Fragment,{children:[la&&!ev&&(0,n.jsx)("p",{className:"absolute top-full left-0 right-0 flex items-center justify-center leading-none text-[11px] opacity-50 mt-3",children:"Use the pull-down on top to navigate to other LLMs."}),lm?(0,n.jsxs)("div",{className:" absolute top-full left-0 right-0 text-[13px] leading-none opacity-60 mt-2",children:[(0,n.jsx)("span",{children:"You can click on Chrome and other apps to navigate the web or sign in to your accounts directly from your computer."}),(0,n.jsx)("span",{className:"ml-[3px]",children:"Read"}),(0,n.jsxs)("span",{className:"text-bwleftblue gap-1 cursor-pointer ml-[3px]",onClick:()=>window.open("https://abacus.ai/help/howTo/chatllm/prompting","_blank"),children:[(0,n.jsx)(x.G,{icon:t(18049).t3,transform:{size:14}})," ",(0,n.jsx)("span",{className:"ml-[3px]",children:"Prompting Tips and Tricks"})]}),(0,n.jsx)("span",{className:"ml-[3px]",children:" and "}),(0,n.jsxs)("span",{className:"text-bwleftblue gap-1 cursor-pointer ml-[3px]",onClick:()=>window.open("https://abacus.ai/help/howTo/chatllm/faqs/computer_agent ","_blank"),children:[(0,n.jsx)(x.G,{icon:t(18049).t3,transform:{size:14}})," ",(0,n.jsx)("span",{className:"ml-[3px]",children:"FAQs."})]})]}):null,eo&&R&&(0,n.jsx)("div",{className:" absolute top-full left-0 right-0 items-center justify-center text-[14px] leading-none shimmer dark:shimmerDark !flex !mx-0 !px-0 mt-3  ".concat(tv||tx?"!pt-5":""),children:"Generating Matrix..."})]})]})})}var eP=t(72360),eE=t(75372),ez=t(95951),eT=t(32397),eD=t(10088),eM=t(56120),eF=t(44635),eL=t(86520),eZ=t(56577),eG=t.n(eZ);let eR=e=>{var l;let t=e.trim().split("\n").map(e=>e.split("|").slice(1,-1)),n=null===(l=t.shift())||void 0===l?void 0:l.map(e=>e.trim());return n?(t.shift(),{data:t.map(e=>{let l=e.map(e=>e.trim());return n.reduce((e,t,n)=>(e[t]=l[n],e),{})}),columns:n.map(e=>({headerName:e,field:e}))}):{}};var eO=t(69440),eU=t(63020),eB=t(21770),eH=t(51779),eV=t.n(eH),eW=t(90175),eq=t(9987);let eQ=(0,t(77712).j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-bwleftblue/20 data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent"},size:{default:"h-9 px-3",sm:"h-8 px-2",lg:"h-10 px-3"}},defaultVariants:{variant:"default",size:"default"}});o.forwardRef((e,l)=>{let{className:t,variant:a,size:r,...s}=e;return(0,n.jsx)(eq.f,{ref:l,className:(0,L.cn)(eQ({variant:a,size:r,className:t})),...s})}).displayName=eq.f.displayName;let eK=o.createContext({size:"default",variant:"default"}),eY=o.forwardRef((e,l)=>{let{className:t,variant:a,size:r,children:s,...i}=e;return(0,n.jsx)(eW.fC,{ref:l,className:(0,L.cn)("flex items-center justify-center gap-1",t),...i,children:(0,n.jsx)(eK.Provider,{value:{variant:a,size:r},children:s})})});eY.displayName=eW.fC.displayName;let e$=o.forwardRef((e,l)=>{let{className:t,children:a,variant:r,size:s,...i}=e,d=o.useContext(eK);return(0,n.jsx)(eW.ck,{ref:l,className:(0,L.cn)(eQ({variant:d.variant||r,size:d.size||s}),t),...i,children:a})});e$.displayName=eW.ck.displayName;let eX=(0,Q.default)(()=>Promise.all([t.e(5706),t.e(6278)]).then(t.bind(t,32768)).then(e=>e.IoArrowBack),{loadableGenerated:{webpack:()=>[null]}}),eJ=(0,Q.default)(()=>Promise.all([t.e(5452),t.e(4141)]).then(t.bind(t,94295)).then(e=>e.IoMdFemale),{loadableGenerated:{webpack:()=>[null]}}),e0=(0,Q.default)(()=>Promise.all([t.e(5452),t.e(4141)]).then(t.bind(t,94295)).then(e=>e.IoMdMale),{loadableGenerated:{webpack:()=>[null]}}),e1=(0,Q.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuRefreshCw),{loadableGenerated:{webpack:()=>[null]}}),e2=(0,Q.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuPlusCircle),{loadableGenerated:{webpack:()=>[null]}}),e5=(0,Q.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuVolume2),{loadableGenerated:{webpack:()=>[null]}}),e4=(0,Q.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuDownload),{loadableGenerated:{webpack:()=>[null]}});function e6(e){let{onBack:l,onSave:t,refetchCurrentTone:a}=e,[r,s]=(0,o.useState)(null),[i,d]=(0,o.useState)(null),[c,u]=(0,o.useState)([]),[m,x]=(0,o.useState)(""),[v,h]=(0,o.useState)(null),[g,b]=(0,o.useState)(null),[j,w]=(0,o.useState)(null),[y,N]=(0,o.useState)(null),[k,C]=(0,o.useState)(null),{data:I,isLoading:_}=(0,S.a)({queryKey:["availableTones"],queryFn:()=>(0,z.HNu)({}),select:e=>null==e?void 0:e.result}),P=(0,o.useMemo)(()=>{let e=(I||[]).map(e=>{var l;return null===(l=e.useCase)||void 0===l?void 0:l.toLowerCase()});return eV()(e)},[I]),E=(0,o.useMemo)(()=>{let e=(I||[]).map(e=>{var l;return null===(l=e.age)||void 0===l?void 0:l.toLowerCase()});return eV()(e)},[I]),T=(0,o.useMemo)(()=>{let e=(I||[]).map(e=>{var l;return null===(l=e.language)||void 0===l?void 0:l.toLowerCase()});return eV()(e)},[I]),D=(0,o.useMemo)(()=>{let e=(I||[]).map(e=>{var l;return null===(l=e.accent)||void 0===l?void 0:l.toLowerCase()});return eV()(e)},[I]),M=(0,o.useMemo)(()=>{let e=I;return(null==m?void 0:m.trim())&&(e=null==e?void 0:e.filter(e=>e.name.toLowerCase().includes(m.toLowerCase()))),v&&(e=null==e?void 0:e.filter(e=>{var l;return(null===(l=e.useCase)||void 0===l?void 0:l.toLowerCase())===(null==v?void 0:v.toLowerCase())})),g&&(e=null==e?void 0:e.filter(e=>{var l;return(null===(l=e.age)||void 0===l?void 0:l.toLowerCase())===(null==g?void 0:g.toLowerCase())})),j&&(e=null==e?void 0:e.filter(e=>{var l;return(null===(l=e.language)||void 0===l?void 0:l.toLowerCase())===(null==j?void 0:j.toLowerCase())})),y&&(e=null==e?void 0:e.filter(e=>{var l;return(null===(l=e.accent)||void 0===l?void 0:l.toLowerCase())===(null==y?void 0:y.toLowerCase())})),k&&(e=null==e?void 0:e.filter(e=>{var l;return(null===(l=e.gender)||void 0===l?void 0:l.toLowerCase())===(null==k?void 0:k.toLowerCase())})),e},[m,v,g,j,y,k,I]),F=e=>{let l=document.createElement("a");l.href=e,l.download="tts-"+Date.now()+".mp3",l.id="tts-download"+Date.now(),document.body.appendChild(l),l.click()},Z=async e=>{try{u([]),d(e);let l=await (0,z.Txv)({model:"elevenlabs",voiceId:e,description:""});if(l){let e=URL.createObjectURL(l);u([e])}else f.Am.error("Failed to generate audio");d(null)}catch(e){d(null),f.Am.error("Failed to generate audio")}},G=(0,eB.D)({mutationFn:async e=>{s(e);let l=await (0,z.iJA)({voiceId:e,model:"elevenlabs"});if(!l.success)throw Error(l.error);await a()},onSuccess:()=>{f.Am.success("Voice saved."),t()},onError:e=>{f.Am.error(e.message||"Failed to save voice.")}});return(0,n.jsx)(R.cZ,{className:"max-w-sm md:max-w-3xl p-0 overflow-hidden",children:(0,n.jsxs)("div",{className:"divide-y relative",children:[(0,n.jsxs)("div",{className:"px-6 pt-6 pb-4 space-y-6",children:[(0,n.jsx)(R.fK,{children:(0,n.jsxs)(R.$N,{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"p-1 flex items-center justify-center rounded cursor-pointer text-bwleftblue",onClick:l,children:(0,n.jsx)(eX,{className:"size-6"})}),(0,n.jsx)("div",{children:"Voices"})]})}),(0,n.jsxs)("div",{className:"w-full flex border border-darkcolor/20 h-9 rounded-md overflow-hidden",children:[(0,n.jsx)("input",{type:"text",className:"h-full grow md:w-40 px-4 outline-none font-normal bg-transparent placeholder:text-light",placeholder:"Search Voice...",value:m,onChange:e=>x(e.target.value)}),(0,n.jsxs)("div",{className:"hidden md:flex",children:[(0,n.jsxs)(A.Ph,{value:v,onValueChange:h,children:[(0,n.jsx)(A.i4,{className:"capitalize w-20 border-r-0 border-y-0 border-l rounded-none outline-none",children:(0,n.jsx)(A.ki,{className:"capitalize",children:v||"Type"})}),(0,n.jsx)(A.Bw,{children:(0,n.jsxs)(A.DI,{children:[(0,n.jsx)(A.Ql,{value:null,className:"capitalize",children:"None"}),P.map(e=>(0,n.jsx)(A.Ql,{value:e,className:"capitalize",children:e},e))]})})]}),(0,n.jsxs)(A.Ph,{value:g,onValueChange:b,children:[(0,n.jsx)(A.i4,{className:"capitalize w-20 border-r-0 border-y-0 border-l rounded-none outline-none",children:(0,n.jsx)(A.ki,{className:"capitalize",children:g||"Age"})}),(0,n.jsx)(A.Bw,{children:(0,n.jsxs)(A.DI,{children:[(0,n.jsx)(A.Ql,{value:null,className:"capitalize",children:"None"}),E.map(e=>(0,n.jsx)(A.Ql,{value:e,className:"capitalize",children:e},e))]})})]}),(0,n.jsxs)(A.Ph,{value:j,onValueChange:w,children:[(0,n.jsx)(A.i4,{className:"capitalize w-28 border-r-0 border-y-0 border-l rounded-none outline-none",children:(0,n.jsx)(A.ki,{className:"capitalize",children:j||"Language"})}),(0,n.jsx)(A.Bw,{children:(0,n.jsxs)(A.DI,{children:[(0,n.jsx)(A.Ql,{value:null,className:"capitalize",children:"None"}),T.map(e=>(0,n.jsx)(A.Ql,{value:e,className:"capitalize",children:e},e))]})})]}),(0,n.jsxs)(A.Ph,{value:y,onValueChange:N,children:[(0,n.jsx)(A.i4,{className:"capitalize w-24 border-r-0 border-y-0 border-l rounded-none outline-none",children:(0,n.jsx)(A.ki,{className:"capitalize",children:y||"Accent"})}),(0,n.jsx)(A.Bw,{children:(0,n.jsxs)(A.DI,{children:[(0,n.jsx)(A.Ql,{value:null,className:"capitalize",children:"None"}),D.map(e=>(0,n.jsx)(A.Ql,{value:e,className:"capitalize",children:e},e))]})})]}),(0,n.jsxs)(eY,{type:"single",className:"gap-0",value:k,onValueChange:e=>C(e),children:[(0,n.jsxs)(e$,{value:"male","aria-label":"Toggle Male",className:"gap-0.5 rounded-none border-l border-darkcolor/20",children:[(0,n.jsx)(e0,{className:"size-4 text-bwleftblue"}),(0,n.jsx)("div",{className:"font-normal",children:"Male"})]}),(0,n.jsxs)(e$,{value:"female","aria-label":"Toggle Female",className:"gap-0.5 rounded-none border-l border-darkcolor/20",children:[(0,n.jsx)(eJ,{className:"size-4 text-bwleftblue"}),(0,n.jsx)("div",{className:"font-normal",children:"Female"})]})]})]})]})]}),(0,n.jsx)("div",{className:"px-6 py-4 grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto pb-24",children:_?(0,n.jsxs)("div",{className:"col-span-1 md:col-span-2 flex flex-col gap-3 items-center justify-center",children:[(0,n.jsx)(e1,{className:"text-bwleftblue size-[18px] animate-spin"}),(0,n.jsx)("div",{className:"animate-pulse text-[13px]",children:"Getting available voices"})]}):(null==M?void 0:M.length)?M.map(e=>(0,n.jsxs)("div",{className:"rounded-lg shadow-sm hover:shadow transition border bg-bwleftblue/5 px-3 py-4 space-y-2.5",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("img",{src:(null==e?void 0:e.gender)==="female"?"/chatllm/staticllm/f.png":"/chatllm/staticllm/m.png",alt:null==e?void 0:e.name,className:"size-5"}),(0,n.jsx)("div",{className:"",children:null==e?void 0:e.name})]}),(0,n.jsxs)("div",{className:"opacity-60 text-[13px]",children:[(0,n.jsxs)("span",{className:"capitalize",children:[null==e?void 0:e.age," ",null==e?void 0:e.gender]})," ","with ",(0,n.jsx)("span",{className:"capitalize",children:null==e?void 0:e.accent})," ","accent"]}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-1 capitalize",children:[(0,n.jsx)("div",{className:"bg-darkcoloro text-[11px] rounded-full py-0.5 px-2 border",children:null==e?void 0:e.language}),(0,n.jsx)("div",{className:"bg-darkcoloro text-[11px] rounded-full py-0.5 px-2 border",children:null==e?void 0:e.description}),(0,n.jsx)("div",{className:"bg-darkcoloro text-[11px] rounded-full py-0.5 px-2 border",children:null==e?void 0:e.useCase})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,n.jsxs)(p.Z,{className:" text-bwleftblue !bg-darkcoloro flex items-center justify-center gap-1 text-sm border hover:bg-darkcoloro ",disabled:i===e.voiceId,onClick:()=>Z(e.voiceId),children:[i===e.voiceId?(0,n.jsx)(e1,{className:"animate-spin"}):(0,n.jsx)(e5,{})," ","Preview"]}),(0,n.jsxs)(p.Z,{className:" text-white !bg-bwleftblue flex items-center justify-center gap-1 text-sm hover:bg-bwleftblue ",disabled:r===e.voiceId&&G.isPending,onClick:()=>G.mutate(e.voiceId),children:[r===e.voiceId&&G.isPending?(0,n.jsx)(e1,{className:"animate-spin"}):(0,n.jsx)(e2,{}),"Save Voice"]})]})]},e.voiceId)):(0,n.jsx)("div",{className:"col-span-1 md:col-span-2 flex flex-col gap-3 items-center justify-center",children:(0,n.jsx)("div",{className:"text-[13px] opacity-60",children:"No voices"})})}),i||c.length?(0,n.jsx)("div",{className:"absolute z-10 bg-darkcoloro inset-x-0 bottom-0 px-6 py-4 h-20 flex items-center justify-center",children:i?(0,n.jsxs)("div",{className:"w-full flex flex-col gap-3 items-center justify-center",children:[(0,n.jsx)(e1,{className:"text-bwleftblue size-5 animate-spin"}),(0,n.jsx)("div",{className:"animate-pulse text-[13px]",children:"Creating audio - May take a few minutes"})]}):c.length?(0,n.jsxs)("div",{className:"w-full flex items-center gap-3",children:[(0,n.jsx)("audio",{className:"w-full h-8",src:c[0],autoPlay:!0,controls:!0,controlsList:"nodownload noplaybackrate "}),(0,n.jsx)(p.Z,{onClick:()=>F(c[0]),className:(0,L.cn)("rounded-full !bg-bwleftblue !text-darkcoloro dark:text-darkwhite/[0.7] !py-1 !px-2"),children:(0,n.jsx)(e4,{className:"size-3.5"})})]}):null}):null]})})}let e3=(0,Q.default)(()=>Promise.all([t.e(5706),t.e(6278)]).then(t.bind(t,32768)).then(e=>e.IoArrowBack),{loadableGenerated:{webpack:()=>[null]}}),e8=(0,Q.default)(()=>Promise.all([t.e(5452),t.e(4141)]).then(t.bind(t,94295)).then(e=>e.IoMdFemale),{loadableGenerated:{webpack:()=>[null]}}),e7=(0,Q.default)(()=>Promise.all([t.e(5452),t.e(4141)]).then(t.bind(t,94295)).then(e=>e.IoMdMale),{loadableGenerated:{webpack:()=>[null]}}),e9=(0,Q.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuRefreshCw),{loadableGenerated:{webpack:()=>[null]}}),le=(0,Q.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuPlusCircle),{loadableGenerated:{webpack:()=>[null]}}),ll=(0,Q.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuVolume2),{loadableGenerated:{webpack:()=>[null]}}),lt=(0,Q.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuDownload),{loadableGenerated:{webpack:()=>[null]}});function ln(e){let{onBack:l,onSave:t,refetchCurrentHumeVoice:a}=e,[r,s]=(0,o.useState)(null),[i,d]=(0,o.useState)(null),[c,u]=(0,o.useState)([]),[m,x]=(0,o.useState)(""),[v,h]=(0,o.useState)(null),{data:g,isLoading:b}=(0,S.a)({queryKey:["humeVoices"],queryFn:()=>(0,z.WyA)({}),select:e=>null==e?void 0:e.result}),j=(0,o.useMemo)(()=>{let e=g;return(null==m?void 0:m.trim())&&(e=null==e?void 0:e.filter(e=>e.name.toLowerCase().includes(m.toLowerCase()))),v&&(e=null==e?void 0:e.filter(e=>{var l;return(null===(l=e.gender)||void 0===l?void 0:l.toLowerCase())===(null==v?void 0:v.toLowerCase())})),e},[m,v,g]),w=e=>{let l=document.createElement("a");l.href=e,l.download="tts-"+Date.now()+".mp3",l.id="tts-download"+Date.now(),document.body.appendChild(l),l.click()},y=async e=>{try{u([]),d(e);let l=await (0,z.Txv)({model:"hume",voiceId:e,description:""});if(l){let e=URL.createObjectURL(l);u([e])}else f.Am.error("Failed to generate audio");d(null)}catch(e){d(null),f.Am.error("Failed to generate audio")}},N=(0,eB.D)({mutationFn:async e=>{s(e);let l=await (0,z.iJA)({voiceId:e,model:"hume"});if(!l.success)throw Error(l.error);await a()},onSuccess:()=>{f.Am.success("Voice saved."),t()},onError:e=>{f.Am.error(e.message||"Failed to save voice.")}});return(0,n.jsx)(R.cZ,{className:"max-w-sm md:max-w-3xl p-0 overflow-hidden",children:(0,n.jsxs)("div",{className:"divide-y relative",children:[(0,n.jsxs)("div",{className:"px-6 pt-6 pb-4 space-y-6",children:[(0,n.jsx)(R.fK,{children:(0,n.jsxs)(R.$N,{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"p-1 flex items-center justify-center rounded cursor-pointer text-bwleftblue",onClick:l,children:(0,n.jsx)(e3,{className:"size-6"})}),(0,n.jsx)("div",{children:"Voices"})]})}),(0,n.jsxs)("div",{className:"w-full flex border border-darkcolor/20 h-9 rounded-md overflow-hidden",children:[(0,n.jsx)("input",{type:"text",className:"h-full grow md:w-40 px-4 outline-none font-normal bg-transparent placeholder:text-light",placeholder:"Search Voice...",value:m,onChange:e=>x(e.target.value)}),(0,n.jsx)("div",{className:"hidden md:flex",children:(0,n.jsxs)(eY,{type:"single",className:"gap-0",value:v,onValueChange:e=>h(e),children:[(0,n.jsxs)(e$,{value:"male","aria-label":"Toggle Male",className:"gap-0.5 rounded-none border-l border-darkcolor/20",children:[(0,n.jsx)(e7,{className:"size-4 text-bwleftblue"}),(0,n.jsx)("div",{className:"font-normal",children:"Male"})]}),(0,n.jsxs)(e$,{value:"female","aria-label":"Toggle Female",className:"gap-0.5 rounded-none border-l border-darkcolor/20",children:[(0,n.jsx)(e8,{className:"size-4 text-bwleftblue"}),(0,n.jsx)("div",{className:"font-normal",children:"Female"})]})]})})]})]}),(0,n.jsx)("div",{className:"px-6 py-4 grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto pb-24",children:b?(0,n.jsxs)("div",{className:"col-span-1 md:col-span-2 flex flex-col gap-3 items-center justify-center",children:[(0,n.jsx)(e9,{className:"text-bwleftblue size-[18px] animate-spin"}),(0,n.jsx)("div",{className:"animate-pulse text-[13px]",children:"Getting available voices"})]}):(null==j?void 0:j.length)?j.map(e=>(0,n.jsxs)("div",{className:"rounded-lg shadow-sm hover:shadow transition border bg-bwleftblue/5 px-3 py-4 space-y-2.5",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("img",{src:(null==e?void 0:e.gender)==="female"?"/chatllm/staticllm/f.png":"/chatllm/staticllm/m.png",alt:null==e?void 0:e.name,className:"size-5"}),(0,n.jsx)("div",{className:"",children:null==e?void 0:e.name})]}),(0,n.jsxs)("div",{className:"opacity-60 text-[13px]",children:[(0,n.jsx)("span",{className:"capitalize",children:null==e?void 0:e.gender})," "]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,n.jsxs)(p.Z,{className:" text-bwleftblue !bg-darkcoloro flex items-center justify-center gap-1 text-sm border hover:bg-darkcoloro ",disabled:i===e.name,onClick:()=>y(e.name),children:[i===e.name?(0,n.jsx)(e9,{className:"animate-spin"}):(0,n.jsx)(ll,{})," ","Preview"]}),(0,n.jsxs)(p.Z,{className:" text-white !bg-bwleftblue flex items-center justify-center gap-1 text-sm hover:bg-bwleftblue ",disabled:r===e.name&&N.isPending,onClick:()=>N.mutate(e.name),children:[r===e.name&&N.isPending?(0,n.jsx)(e9,{className:"animate-spin"}):(0,n.jsx)(le,{}),"Save Voice"]})]})]},e.voiceId)):(0,n.jsx)("div",{className:"col-span-1 md:col-span-2 flex flex-col gap-3 items-center justify-center",children:(0,n.jsx)("div",{className:"text-[13px] opacity-60",children:"No voices"})})}),i||c.length?(0,n.jsx)("div",{className:"absolute z-10 bg-darkcoloro inset-x-0 bottom-0 px-6 py-4 h-20 flex items-center justify-center",children:i?(0,n.jsxs)("div",{className:"w-full flex flex-col gap-3 items-center justify-center",children:[(0,n.jsx)(e9,{className:"text-bwleftblue size-5 animate-spin"}),(0,n.jsx)("div",{className:"animate-pulse text-[13px]",children:"Creating audio - May take a few minutes"})]}):c.length?(0,n.jsxs)("div",{className:"w-full flex items-center gap-3",children:[(0,n.jsx)("audio",{className:"w-full h-8",src:c[0],autoPlay:!0,controls:!0,controlsList:"nodownload noplaybackrate "}),(0,n.jsx)(p.Z,{onClick:()=>w(c[0]),className:(0,L.cn)("rounded-full !bg-bwleftblue !text-darkcoloro dark:text-darkwhite/[0.7] !py-1 !px-2"),children:(0,n.jsx)(lt,{className:"size-3.5"})})]}):null}):null]})})}function la(e){var l,a,r,s,i;let{deploymentConversationId:d,messageIndex:c}=e,[u,m]=(0,o.useState)(!1),[v,h]=(0,o.useState)(!1),[b,j]=(0,o.useState)(!1),[w,y]=(0,o.useState)(!1),[N,k]=(0,o.useState)([]),[C,I]=(0,o.useState)("elevenlabs"),[_,P]=(0,o.useState)("flash"),[E,T]=(0,o.useState)(""),[D,M]=(0,o.useState)(""),{data:F}=(0,S.a)({queryKey:["audioGenSettings"],queryFn:()=>(0,z.poK)({}),select:e=>e.result});(0,o.useEffect)(()=>{F&&I(F.model.default)},[F]);let{data:Z,refetch:G}=(0,S.a)({queryKey:["currentTone"],queryFn:()=>(0,z.Fly)({model:"elevenlabs"}),select:e=>e.result}),{data:O,refetch:U}=(0,S.a)({queryKey:["currentHumeVoice"],queryFn:()=>(0,z.Fly)({model:"hume"}),select:e=>e.result}),B=async()=>{try{y(!0),k([]);let e=await (0,z.yje)({deploymentConversationId:d,messageIndex:c,model:C,submodel:_,description:E});if(e){if(e.size<1e3){let l=await e.text();f.Am.error(l),y(!1);return}let l=URL.createObjectURL(e);k([l]),M(C)}else f.Am.error("Failed to generate audio");y(!1)}catch(e){e instanceof Error&&e.message.includes("504")?f.Am.error("Request timed out. Please try again with less text."):f.Am.error("Failed to generate audio"),y(!1)}},W=e=>{let l=document.createElement("a");l.href=e,l.download="tts-"+Date.now()+".mp3",l.id="tts-download"+Date.now(),document.body.appendChild(l),l.click()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(R.Vq,{open:u,onOpenChange:e=>!e&&m(!1),children:v?(0,n.jsx)(e6,{onBack:()=>h(!1),refetchCurrentTone:G,onSave:()=>{k([]),h(!1)}}):b?(0,n.jsx)(ln,{onBack:()=>j(!1),refetchCurrentHumeVoice:U,onSave:()=>{j(!1)}}):(0,n.jsxs)(R.cZ,{className:"max-w-sm p-0 divide-y",children:[(0,n.jsxs)("div",{className:"p-6 space-y-6 pb-0",children:[(0,n.jsxs)(R.fK,{children:[(0,n.jsx)(R.$N,{children:"Text To Speech"}),(0,n.jsx)(R.Be,{children:"Generate voice for the message"})]}),(0,n.jsxs)("div",{className:"space-y-1.5 w-full leading-[16px]",children:[(0,n.jsx)(V.Z,{htmlFor:"model",children:"Model"}),(0,n.jsxs)(A.Ph,{value:C,onValueChange:e=>I(e),children:[(0,n.jsx)(A.i4,{children:(0,n.jsx)(A.ki,{placeholder:"Select a model"})}),(0,n.jsx)(A.Bw,{children:null==F?void 0:null===(l=F.model)||void 0===l?void 0:l.options.map(e=>(0,n.jsx)(A.Ql,{value:e.key,children:e.value},e.key))})]})]}),"elevenlabs"===C?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"space-y-1.5 w-full leading-[16px]",children:[(0,n.jsx)(V.Z,{htmlFor:"submodel",children:"Submodel"}),(0,n.jsxs)(A.Ph,{value:_,onValueChange:e=>P(e),children:[(0,n.jsx)(A.i4,{children:(0,n.jsx)(A.ki,{placeholder:"Select a submodel"})}),(0,n.jsx)(A.Bw,{children:null==F?void 0:null===(i=F.settings)||void 0===i?void 0:null===(s=i.elevenlabs)||void 0===s?void 0:null===(r=s.submodels)||void 0===r?void 0:null===(a=r.options)||void 0===a?void 0:a.map(e=>(0,n.jsx)(A.Ql,{value:e.key,children:e.value},e.key))})]})]}),Z?(0,n.jsxs)("div",{className:"flex flex-col gap-2 mt-3.5",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("img",{src:(null==Z?void 0:Z.voice.gender)==="female"?"/chatllm/staticllm/f.png":"/chatllm/staticllm/m.png",alt:null==Z?void 0:Z.voice.name,className:""}),(0,n.jsx)("div",{className:"text-base",children:null==Z?void 0:Z.voice.name}),(0,n.jsx)("div",{className:"text-sm text-bwleftblue underline cursor-pointer",onClick:()=>h(!0),children:"Change"})]}),(0,n.jsx)(p.Z,{onClick:()=>{B()},disabled:w,children:"Generate"})]}):null]}):"hume"===C?(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(H.Z,{placeholder:"Describe the voice you want to use...",value:E,onChange:e=>T(e.target.value)}),(0,n.jsx)(p.Z,{onClick:()=>{B()},disabled:w,children:"Generate"})]}):null]}),(0,n.jsx)("div",{className:"px-6 py-4 min-h-20 w-full flex items-center justify-center",children:w?(0,n.jsxs)("div",{className:"w-full flex flex-col gap-3 items-center justify-center",children:[(0,n.jsx)(x.G,{className:"text-bwleftblue",icon:t(39847).QD,transform:{size:18},spin:!0}),(0,n.jsx)("div",{className:"animate-pulse text-[13px]",children:"Creating audio - May take up to 30 seconds"})]}):N.length?(0,n.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,n.jsxs)("span",{className:"text-sm",children:["Generated using ","elevenlabs"===D?"ElevenLabs":"Hume Octave",":"]}),(0,n.jsxs)("div",{className:"w-full flex items-center gap-3",children:[(0,n.jsx)("audio",{className:"w-full h-8",src:N[0],autoPlay:!0,controls:!0,controlsList:"nodownload noplaybackrate"}),(0,n.jsx)(p.Z,{onClick:()=>W(N[0]),className:(0,L.cn)("rounded-full !bg-bwleftblue !text-darkcoloro dark:text-darkwhite/[0.7] !py-1 !px-2"),children:(0,n.jsx)(x.G,{icon:t(48812).q7,transform:{size:14,y:.5}})})]})]}):null})]})}),(0,n.jsx)(g.Z,{title:"Sound",children:(0,n.jsx)("span",{children:(0,n.jsx)("div",{onClick:()=>m(!0),className:(0,L.cn)("px-1 rounded cursor-pointer transition-all h-[26px] flex items-center","text-bwleftblue dark:text-darkcolor/60","border border-transparent hover:border-bwleftblue/25 hover:dark:border-darkcolor/10","hover:bg-bwleftblue/20 dark:hover:bg-darkcolor/[0.1]"),children:(0,n.jsx)(x.G,{icon:t(96644).AQ,transform:{size:14}})})})})]})}var lr=t(56095);let ls=B.z.object({text:B.z.string().min(1)});function li(e){let{defaultText:l,onClose:a,onSave:r,action:s="Regenerate",className:i}=e,[d,c]=(0,o.useState)(!1),u=(0,U.cI)({resolver:(0,O.F)(ls),defaultValues:{text:l}}),m=()=>{u.reset(),a()};return(0,n.jsxs)("div",{className:(0,L.cn)("space-y-6",i),children:[(0,n.jsx)(U.Qr,{name:"text",control:u.control,render:e=>{let{field:l}=e;return(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsx)(H.Z,{id:"text",...l,className:"resize-none bg-transparent text-base font-light min-h-[30rem] outline-none",placeholder:"Write something..."}),u.formState.errors.text?(0,n.jsx)("p",{className:"text-sm text-red-600",children:u.formState.errors.text.message}):null]})}}),(0,n.jsxs)("div",{className:"flex items-center justify-end gap-2.5",children:[(0,n.jsx)(p.Z,{noBack:!0,className:"text-darkcolor/[0.7] rounded-full",moreSpace:!0,onClick:m,children:"Cancel"}),(0,n.jsx)(p.Z,{onClick:u.handleSubmit(async e=>{let{text:l}=e;c(!0),await r({text:l}),setTimeout(()=>{m(),c(!1)},750)}),disabled:!u.formState.isDirty,className:(0,L.cn)("rounded-full !bg-bwleftblue !text-darkcoloro dark:text-darkwhite/[0.7]",{"grayscale !opacity-50":!u.formState.isDirty}),children:d?(0,n.jsx)(x.G,{icon:t(35078).AX,spin:!0,transform:{size:16}}):s})]})]})}var lo=t(29827);let ld={"ui:submitButtonOptions":{norender:!0}};var lc=t(21576);let lu=e=>{let{name:l,src:a}=e,[r,s]=(0,o.useState)(!0),[i,d]=(0,o.useState)(!1),c=()=>{s(!1)};return((0,o.useEffect)(()=>{s(!0),d(!1)},[a]),!a||i)?(0,n.jsx)(x.G,{icon:t(64889).Z_,transform:{size:20}}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{className:"rounded-xl w-[24px] h-[24px] ".concat(r||i?"hidden":""),src:a,alt:null!=l?l:"image",onLoad:c,onError:e=>{c(),d(!0)}}),r&&(0,n.jsx)(x.G,{icon:t(64889).Z_,transform:{size:20}})]})};var lm=e=>{let{searchResults:l,setShowMoreSources:t}=e,[a,r]=(0,o.useState)([]);return(0,o.useEffect)(()=>{(null==l?void 0:l.length)>3?r(l.slice(0,3)):r(l)},[l]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:"Sources"}),(0,n.jsxs)("div",{className:"flex gap-[9px] flex-wrap",children:[a.map((e,l)=>{var t,a,r,s,i,o,d,c;return(0,n.jsxs)("div",{className:"cursor-pointer flex border w-[140px] h-[36px] items-center gap-[12px] p-[12px] rounded-[20px] custom-lg:w-[108px]",onClick:()=>{var l;window.open(null==e?void 0:null===(l=e.segment)||void 0===l?void 0:l.url,"_blank")},children:[(0,n.jsx)(lu,{name:"image",src:(null==e?void 0:null===(a=e.segment)||void 0===a?void 0:null===(t=a.metadata)||void 0===t?void 0:t.faviconUrl)||(null==e?void 0:null===(s=e.segment)||void 0===s?void 0:null===(r=s.metadata)||void 0===r?void 0:r.favicon_url)}),(0,n.jsx)("div",{className:" overflow-hidden text-ellipsis whitespace-nowrap",children:null!==(c=null==e?void 0:null===(o=e.segment)||void 0===o?void 0:null===(i=o.metadata)||void 0===i?void 0:i.name)&&void 0!==c?c:null==e?void 0:null===(d=e.segment)||void 0===d?void 0:d.url})]},l)}),(null==l?void 0:l.length)>3?(0,n.jsx)("div",{className:"cursor-pointer flex border w-[140px] h-[36px] items-center gap-[12px] p-[12px] rounded-[20px] justify-center custom-lg:w-[120px]",onClick:()=>{t(!0)},children:(0,n.jsxs)("div",{className:" overflow-hidden text-ellipsis whitespace-nowrap",children:["See +",(null==l?void 0:l.length)-(null==a?void 0:a.length)," More"]})}):null]})]})},lp=t(84772),lx=t.n(lp),lv=t(67536),lh=t(52299);let lf=e=>{var l,t,a,r;let{selectedImage:s,setSelectedImage:i,imageSearchResults:o}=e;return(0,n.jsx)("div",{className:"h-full",children:(0,n.jsxs)("div",{className:"grid grow grid-cols-10 gap-8",children:[(0,n.jsx)("div",{className:"col-span-7 flex h-full w-full select-none items-start justify-center py-md pl-lg hover:cursor-pointer",children:(0,n.jsx)(lg,{name:null!==(r=null==s?void 0:null===(l=s.metadata)||void 0===l?void 0:l.name)&&void 0!==r?r:"image",src:(null==s?void 0:null===(t=s.metadata)||void 0===t?void 0:t.contentUrl)||(null==s?void 0:null===(a=s.metadata)||void 0===a?void 0:a.content_url),className:"max-h-[70vh] object-cover w-full transition-all ease-in-out",showDownload:!0})}),(0,n.jsx)("div",{className:"pt-md pr-md col-span-4 lg:col-span-3",children:(0,n.jsx)("div",{className:"h-[calc(100vh-100px)] overflow-y-auto",children:(0,n.jsx)("div",{className:"grid grid-cols-1 gap-[12px] lg:grid-cols-2",children:o.map((e,l)=>{var t,a,r,o,d,c,u,m,p,x,v,h,f,g,b;return(0,n.jsx)("div",{className:"group relative h-full w-full overflow-hidden aspect-video w-full rounded-md ".concat((null==s?void 0:null===(t=s.metadata)||void 0===t?void 0:t.contentUrl)&&(null==s?void 0:null===(a=s.metadata)||void 0===a?void 0:a.contentUrl)===(null==e?void 0:null===(o=e.segment)||void 0===o?void 0:null===(r=o.metadata)||void 0===r?void 0:r.contentUrl)||(null==s?void 0:null===(d=s.metadata)||void 0===d?void 0:d.content_url)&&(null==s?void 0:null===(c=s.metadata)||void 0===c?void 0:c.content_url)===(null==e?void 0:null===(m=e.segment)||void 0===m?void 0:null===(u=m.metadata)||void 0===u?void 0:u.content_url)?"border-[2px] border-fuchsia-500":""),children:(0,n.jsx)("img",{alt:null!==(b=null==e?void 0:null===(x=e.segment)||void 0===x?void 0:null===(p=x.metadata)||void 0===p?void 0:p.name)&&void 0!==b?b:"image",className:"w-full cursor-zoom-in object-cover object-top min-h-[100px] h-full",src:(null==e?void 0:null===(h=e.segment)||void 0===h?void 0:null===(v=h.metadata)||void 0===v?void 0:v.thumbnailUrl)||(null==e?void 0:null===(g=e.segment)||void 0===g?void 0:null===(f=g.metadata)||void 0===f?void 0:f.thumbnail_url),onClick:()=>{i(null==e?void 0:e.segment)}})},l)})})})})]})})},lg=e=>{let{name:l,src:a,className:r,showDownload:s}=e,[i,d]=(0,o.useState)(!0),[c,u]=(0,o.useState)(!1),m=async e=>{try{let l=await fetch(e).then(e=>e.arrayBuffer()).then(e=>new Blob([e],{type:"image/jpeg"})),t=document.createElement("a"),n=URL.createObjectURL(l);t.href=n,t.download="download",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(n)}catch(e){console.error(e),f.Am.error(N.Z.errorDefault||String(e))}};return(0,o.useEffect)(()=>{d(!0),u(!1)},[a]),(0,n.jsx)("div",{className:"".concat(i||c?"w-full h-[70vh]":""),children:(0,n.jsxs)("div",{className:"group relative h-full w-full overflow-hidden rounded-md",children:[!s||i||c?null:(0,n.jsx)("a",{onClick:()=>{m(a)},style:i||c?{display:"none"}:{},children:(0,n.jsx)("div",{style:i||c?{display:"none"}:{},className:"absolute right-[16px] top-[16px] bg-[#00000080] hover:bg-[#00000080]/[0.3] w-[32px] h-[32px] rounded-[4px] flex items-center justify-center text-darkwhite cursor-pointer group-hover:flex",children:(0,n.jsx)(x.G,{icon:t(96951).E0,transform:{size:16}})})}),!c&&(0,n.jsx)("img",{className:"".concat(r||"w-full cursor-zoom-in object-cover object-top min-h-[100px] h-full transition-all ease-in-out"," ").concat(i||c?"hidden":""),src:a,alt:null!=l?l:"image",onLoad:()=>{d(!1)},onError:()=>{d(!1),u(!0)}}),i&&!c&&(0,n.jsx)(lh.O,{className:"w-full h-full dark:bg-neutral-600"}),c&&(0,n.jsxs)("div",{className:"flex flex-col gap-[4px] items-center justify-center w-full h-full border-[1px]/[0.2] border-neutral-500 rounded-[8px] bg-neutral-500/[0.2]  text-neutral-500",children:[(0,n.jsx)(x.G,{icon:t(97953).qD,transform:{size:32}}),(0,n.jsx)("span",{className:"mt-2 text-sm",children:"Image failed to load"})]})]})})};var lb=e=>{var l,t,a,r,s,i,d,c,u,m;let{imageSearchResults:p}=e,[x,v]=(0,o.useState)([]),[h,f]=(0,o.useState)([]),[g,b]=(0,o.useState)(null);return(0,o.useEffect)(()=>{(null==p?void 0:p.length)>4?(v(p.slice(1,4)),f(p.slice(4,7))):v(p.slice(1,p.length))},[p]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"group relative h-full w-full overflow-hidden aspect-video w-full shadow-md transition-all duration-200 ease-in-out hover:scale-[1.02] hover:shadow-lg rounded-lg",children:(0,n.jsx)(ez.Z,{zIndex:"z-[13]",className:"h-full w-full p-[60px]",onPreClick:()=>{var e;b(null==p?void 0:null===(e=p[0])||void 0===e?void 0:e.segment)},content:(0,n.jsx)(lf,{selectedImage:g,setSelectedImage:b,imageSearchResults:p}),hideOkButton:!0,children:(0,n.jsx)(lg,{name:null!==(m=null==p?void 0:null===(a=p[0])||void 0===a?void 0:null===(t=a.segment)||void 0===t?void 0:null===(l=t.metadata)||void 0===l?void 0:l.name)&&void 0!==m?m:"image",src:(null==p?void 0:null===(i=p[0])||void 0===i?void 0:null===(s=i.segment)||void 0===s?void 0:null===(r=s.metadata)||void 0===r?void 0:r.thumbnailUrl)||(null==p?void 0:null===(u=p[0])||void 0===u?void 0:null===(c=u.segment)||void 0===c?void 0:null===(d=c.metadata)||void 0===d?void 0:d.thumbnail_url)})})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-[12px] 2xl:grid-cols-2",children:[x.map((e,l)=>{var t,a,r,s,i,o,d;return(0,n.jsx)("div",{className:" group relative h-full w-full overflow-hidden aspect-video w-full shadow-md transition-all duration-200 ease-in-out hover:scale-[1.02] hover:shadow-lg rounded-md",children:(0,n.jsx)(ez.Z,{zIndex:"z-[13]",className:"h-full w-full p-[60px]",onPreClick:()=>{b(e.segment)},content:(0,n.jsx)(lf,{selectedImage:g,setSelectedImage:b,imageSearchResults:p}),hideOkButton:!0,children:(0,n.jsx)(lg,{name:null!==(d=null==e?void 0:null===(a=e.segment)||void 0===a?void 0:null===(t=a.metadata)||void 0===t?void 0:t.name)&&void 0!==d?d:"image",src:(null==e?void 0:null===(s=e.segment)||void 0===s?void 0:null===(r=s.metadata)||void 0===r?void 0:r.thumbnailUrl)||(null==e?void 0:null===(o=e.segment)||void 0===o?void 0:null===(i=o.metadata)||void 0===i?void 0:i.thumbnail_url),className:"w-full cursor-zoom-in object-cover object-top min-h-[100px] h-full transition-all ease-in-out"})})},l)}),(null==p?void 0:p.length)>4?(0,n.jsx)(ez.Z,{zIndex:"z-[13]",className:"h-full w-full p-[60px]",onPreClick:()=>{b(h[0].segment)},content:(0,n.jsx)(lf,{selectedImage:g,setSelectedImage:b,imageSearchResults:p}),hideOkButton:!0,children:(0,n.jsxs)("div",{className:"flex aspect-video w-full cursor-pointer flex-col rounded-md transition-all duration-200 ease-in-out hover:scale-[1.02] transition duration-300 border p-[10px]",children:[(0,n.jsx)("div",{className:"grid grow grid-cols-3 gap-[12px]",children:null==h?void 0:h.map((e,l)=>{var t,a,r,s,i,o,d;return(0,n.jsx)("div",{className:"col-span-1 aspect-square rounded overflow-hidden",children:(0,n.jsx)("div",{className:" group relative h-full w-full overflow-hidden w-full h-full rounded-sm",children:(0,n.jsx)(lg,{name:null!==(d=null==e?void 0:null===(a=e.segment)||void 0===a?void 0:null===(t=a.metadata)||void 0===t?void 0:t.name)&&void 0!==d?d:"image",src:(null==e?void 0:null===(s=e.segment)||void 0===s?void 0:null===(r=s.metadata)||void 0===r?void 0:r.thumbnailUrl)||(null==e?void 0:null===(o=e.segment)||void 0===o?void 0:null===(i=o.metadata)||void 0===i?void 0:i.thumbnail_url),className:"w-full object-cover h-full object-center transition-all ease-in-out"})})},l)})}),(0,n.jsx)("div",{className:"text-xs",children:"See More Images"})]})}):null]})]})},lj=e=>{let{tweetsSearchResults:l}=e;return l.length<1?"No Tweets Found":(0,n.jsx)(n.Fragment,{children:null==l?void 0:l.map((e,l)=>(0,n.jsxs)("div",{className:"border rounded-lg p-4 w-full ",children:[e.title," ",e.url]},l))})};let lw=e=>{let{selectedVideo:l,setSelectedVideo:a,imageSearchResults:r,loading:s,error:i,onLoad:o,onError:d,setLoading:c,setError:u}=e;return(0,n.jsx)("div",{className:"h-full",children:(0,n.jsxs)("div",{className:"grid grow grid-cols-10",children:[(0,n.jsx)("div",{className:"col-span-7 flex h-full w-full select-none items-start justify-center py-md pl-lg hover:cursor-pointer",children:(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl w-[60vw] h-[70vh]",children:[s&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center ",children:(0,n.jsx)(lh.O,{className:"w-full h-full dark:bg-neutral-600"})}),i?(0,n.jsx)("div",{className:"text-red-500",children:i}):(0,n.jsx)("iframe",{id:"video",src:l.embedUrl,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",className:"w-full h-full",allowFullScreen:!0,onLoad:o,onError:d},l.embedUrl)]})})}),(0,n.jsx)("div",{className:"pt-md pr-md col-span-4 lg:col-span-3",children:(0,n.jsx)("div",{className:"h-[calc(100vh-100px)] overflow-y-auto rounded-xl",children:(0,n.jsx)("div",{className:"grid grid-cols-1 gap-[12px] lg:grid-cols-2",children:r.map((e,l)=>{var r;return(0,n.jsxs)("div",{className:"group relative h-full w-full overflow-hidden aspect-video w-full shadow-md transition-all duration-200 ease-in-out hover:scale-[1.02] hover:shadow-lg rounded-md cursor-pointer",onClick:()=>{a(e),c(!0),u(null)},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"absolute inset-0 flex items-start justify-start rounded-inherit bg-black/60 px-sm py-xs opacity-0 duration-150 group-hover:opacity-100",children:(0,n.jsx)("div",{className:"line-clamp-3 text-white drop-shadow-sm default font-sans text-xs p-2",children:null==e?void 0:e.title})}),(0,n.jsxs)("div",{className:"absolute bottom-0 right-xs flex items-center justify-center gap-[8px] bg-black/80 px-[6px] py-[2px] white font-sans text-xs text-white w-full",children:[(0,n.jsx)(x.G,{icon:t(325).zc})," Watch Now"]})]}),(0,n.jsx)("img",{alt:null!==(r=null==e?void 0:e.title)&&void 0!==r?r:"Video Preview",className:"h-full w-full rounded-md object-cover",src:(null==e?void 0:e.thumbnailUrl)||(null==e?void 0:e.thumbnail_url)})]},l)})})})})]})})};var ly=e=>{let{searchResults:l}=e,[a,r]=(0,o.useState)([]),[s,i]=(0,o.useState)([]),[d,c]=(0,o.useState)(null),[u,m]=(0,o.useState)(!1),[p,v]=(0,o.useState)(null);(0,o.useEffect)(()=>{(null==l?void 0:l.length)>4?(r(l.slice(0,5)),i(l.slice(5,8))):r(l.slice(0,l.length))},[l]);let h=()=>{m(!1)},f=()=>{m(!1),v("Failed to load the video. Please try again later.")};return l.length<1?"No videos available":(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-[12px] 2xl:grid-cols-2",children:[a.map((e,a)=>{var r;return(0,n.jsx)("div",{className:"group relative aspect-video w-full cursor-pointer overflow-hidden rounded-md shadow-md transition-all duration-200 ease-in-out hover:scale-[1.02]",children:(0,n.jsxs)(ez.Z,{zIndex:"z-[13]",className:"h-full w-full p-[60px]",onPreClick:()=>{c(e),m(!0),v(null)},content:(0,n.jsx)(lw,{imageSearchResults:l,selectedVideo:d,setSelectedVideo:c,loading:u,error:p,onLoad:h,onError:f,setLoading:m,setError:v}),hideOkButton:!0,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"absolute inset-0 flex items-start justify-start rounded-inherit bg-black/60 px-sm py-xs opacity-0 duration-150 group-hover:opacity-100",children:(0,n.jsx)("div",{className:"line-clamp-3 text-white drop-shadow-sm default font-sans text-xs p-2",children:null==e?void 0:e.title})}),(0,n.jsxs)("div",{className:"absolute bottom-0 right-xs flex items-center justify-center gap-[8px] bg-black/80 px-[6px] py-[2px] white font-sans text-xs text-white w-full",children:[(0,n.jsx)(x.G,{icon:t(325).zc})," Watch Now"]})]}),(0,n.jsx)("img",{alt:null!==(r=null==e?void 0:e.title)&&void 0!==r?r:"Video Preview",className:"h-full w-full rounded-md object-cover",src:(null==e?void 0:e.thumbnailUrl)||(null==e?void 0:e.thumbnail_url)})]})},a)}),(null==l?void 0:l.length)>5&&(0,n.jsx)(ez.Z,{zIndex:"z-[13]",className:"h-full w-full p-[60px]",onPreClick:()=>{c(s[0]),m(!0),v(null)},content:(0,n.jsx)(lw,{imageSearchResults:l,selectedVideo:d,setSelectedVideo:c,loading:u,error:p,onLoad:h,onError:f,setLoading:m,setError:v}),hideOkButton:!0,children:(0,n.jsxs)("div",{className:"flex aspect-video w-full cursor-pointer flex-col rounded-md transition-all duration-200 ease-in-out hover:scale-[1.02] transition duration-300 border p-[10px]",children:[(0,n.jsx)("div",{className:"grid grow grid-cols-3 gap-[12px]",children:null==s?void 0:s.map((e,l)=>{var t;return(0,n.jsx)("div",{className:"col-span-1 aspect-square rounded overflow-hidden",children:(0,n.jsx)("div",{className:"bg-offset dark:bg-offsetDark group relative h-full w-full overflow-hidden w-full h-full rounded-sm",children:(0,n.jsx)("img",{alt:null!==(t=null==e?void 0:e.title)&&void 0!==t?t:"image",className:"w-full object-cover h-full object-center transition-all ease-in-out",src:(null==e?void 0:e.thumbnailUrl)||(null==e?void 0:e.thumbnail_url)})})},l)})}),(0,n.jsx)("div",{className:"text-xs",children:"See More Videos"})]})})]})})};let lN=e=>{let{name:l,src:a}=e,[r,s]=(0,o.useState)(!0),[i,d]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{s(!0),d(!1)},[a]),(0,n.jsx)("div",{className:"w-8 h-8 ".concat(r||i?"":"dark:bg-white"," flex items-center justify-center rounded-sm"),children:!a||i?(0,n.jsx)(x.G,{icon:t(65649).Xg,transform:{size:32}}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{className:" w-8 h-8 ".concat(r||i?"hidden":""," rounded-sm"),src:a,alt:null!=l?l:"image",onLoad:()=>{s(!1)},onError:e=>{s(!1),d(!0)}}),r&&(0,n.jsx)(x.G,{icon:t(65649).Xg,transform:{size:32}})]})})};var lk=e=>{let{searchResults:l}=e;return l.length<1?"No news available":(0,n.jsx)(n.Fragment,{children:null==l?void 0:l.map((e,l)=>{var t,a;return(0,n.jsxs)("div",{className:"border rounded-lg p-4 flex flex-col w-full gap-4",children:[(0,n.jsx)(lN,{src:null!==(t=null==e?void 0:e.faviconUrl)&&void 0!==t?t:null==e?void 0:e.favicon_url,name:"image"}),(0,n.jsx)("a",{href:e.url,target:"_blank",className:"text-[#2121C5] text-ellipsiss overflow-hidden h-[42px] dark:text-[#6F6FEF]",children:null!==(a=e.description)&&void 0!==a?a:e.title})]},l)})})};let lC=(0,o.forwardRef)((e,l)=>{let{children:t,className:a,...r}=e;return(0,n.jsx)(lv.Item,{className:lx()("mt-px overflow-hidden first:mt-0 first:rounded-t last:rounded-b focus-within:relative focus-within:z-10",a),...r,ref:l,children:t})}),lI=(0,o.forwardRef)((e,l)=>{let{children:a,className:r,...s}=e;return(0,n.jsx)(lv.Header,{className:"flex",children:(0,n.jsxs)(lv.Trigger,{className:lx()("shadow-neutral-500/[0.1] group flex h-[45px] flex-1 cursor-default items-center justify-between px-5 text-[15px] leading-none shadow-[0_1px_0] outline-none",r),...s,ref:l,children:[a,(0,n.jsx)(x.G,{className:"text-darkcolor ease-[cubic-bezier(0.87,_0,_0.13,_1)] transition-transform duration-300 group-data-[state=open]:rotate-180",icon:t(93537).pt})]})})}),lS=(0,o.forwardRef)((e,l)=>{let{children:t,className:a,...r}=e;return(0,n.jsx)(lv.Content,{className:lx()("data-[state=open]:animate-slideDown data-[state=closed]:animate-slideUp overflow-hidden text-[15px]",a),...r,ref:l,children:(0,n.jsx)("div",{className:"py-[15px] px-5 flex flex-wrap justify-between gap-[12px] max-h-[420px] overflow-y-auto [@media(max-height:968px)]:max-h-[180px]",children:t})})}),lA=e=>{let{value:l,title:a,type:r,deploymentConversationId:s,messageIndex:i}=e,[d,c]=(0,o.useState)(null),[u,m]=(0,o.useState)(!1);(0,o.useEffect)(()=>{c(null)},[s]);let p=async()=>{if(!d){m(!0);let e=await v(r);(null==e?void 0:e.success)?c(e.result):c(null),m(!1)}},v=(0,o.useCallback)(async e=>{switch(e){case"videos":return await (0,z.pi3)({deploymentConversationId:s,messageIndex:i});case"news":return await (0,z.cWV)({deploymentConversationId:s,messageIndex:i});case"tweets":return await (0,z.zmD)({deploymentConversationId:s,messageIndex:i})}},[s,i]),h=(0,o.useMemo)(()=>{switch(r){case"videos":return t(43048).Cj;case"news":return t(65649).Xg;default:return t(61376).NC}},[r]);return(0,n.jsxs)(lC,{value:l,children:[(0,n.jsx)(lI,{onClick:p,className:"cursor-pointer",children:(0,n.jsxs)("div",{className:"flex gap-[8px] items-center",children:[(0,n.jsx)(x.G,{icon:h}),(0,n.jsx)("span",{children:a})]})}),(0,n.jsx)(lS,{children:u?(0,n.jsx)(n.Fragment,{children:Array(6).fill(void 0).map((e,l)=>(0,n.jsx)(lh.O,{className:"".concat("videos"===r?"w-[159px]":"w-full"," h-[89px] dark:bg-neutral-600")},l))}):(0,n.jsx)(n.Fragment,{children:"videos"===r?(0,n.jsx)(ly,{searchResults:null!=d?d:[]}):"tweets"===r?(0,n.jsx)(lj,{tweetsSearchResults:null!=d?d:[]}):"news"===r?(0,n.jsx)(lk,{searchResults:null!=d?d:[]}):null})})]})};var l_=e=>{let{imageSearchResults:l,deploymentConversationId:a,messageIndex:r}=e,[s,i]=(0,o.useState)("searchLLM-images");return(0,o.useEffect)(()=>{i("searchLLM-images")},[a]),(0,n.jsxs)(lv.Root,{className:"w-full",type:"single",defaultValue:s,collapsible:!0,value:s,onValueChange:e=>{i(e)},children:[(0,n.jsxs)(lC,{value:"searchLLM-images",children:[(0,n.jsx)(lI,{className:"cursor-pointer",children:(0,n.jsxs)("div",{className:"flex gap-[8px] items-center",children:[(0,n.jsx)(x.G,{icon:t(54961).Vm}),(0,n.jsx)("span",{children:"Images"})]})}),(0,n.jsx)(lS,{children:(null==l?void 0:l.length)>0?(0,n.jsx)(lb,{imageSearchResults:l}):"No images available"})]}),(0,n.jsx)(lA,{value:"searchLLM-videos",title:"Videos",type:"videos",deploymentConversationId:a,messageIndex:r}),(0,n.jsx)(lA,{value:"searchLLM-news",title:"News",type:"news",deploymentConversationId:a,messageIndex:r})]})};let lP=e=>{let{name:l,src:a}=e,[r,s]=(0,o.useState)(!0),[i,d]=(0,o.useState)(!1),c=()=>{s(!1)};return((0,o.useEffect)(()=>{s(!0),d(!1)},[a]),!a||i)?(0,n.jsx)(x.G,{icon:t(64889).Z_,transform:{size:20}}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{className:"rounded-xl w-[24px] h-[24px] ".concat(r||i?"hidden":""),src:a,alt:null!=l?l:"image",onLoad:c,onError:e=>{c(),d(!0)}}),r&&(0,n.jsx)(x.G,{icon:t(64889).Z_,transform:{size:20}})]})};var lE=e=>{let{searchResults:l,setShowMoreSources:a}=e;return l.length<1?"No news available":(0,n.jsxs)("div",{className:"h-[400px] rounded-md border overflow-scroll dark:border-darkcolor/[0.2]",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center border-b-[1px] p-2 h-[46px] bg-darkcoloro rounded-t-md sticky top-0",children:[(0,n.jsx)("div",{children:"All Sources"}),(0,n.jsxs)(p.Z,{className:" m-[3px] h-[32px]",noScale:!0,onClick:()=>a(!1),children:[(0,n.jsx)("span",{className:" mr-[7px] opacity-60 ",children:(0,n.jsx)(x.G,{icon:t(13199).Y5,transform:{size:16,flipX:!0}})}),(0,n.jsx)("span",{children:"Hide"})]})]}),null==l?void 0:l.map((e,l)=>{var t,a,r,s,i,o,d,c,u,m,p,x;return(0,n.jsx)("div",{className:"p-3 flex flex-col w-full gap-4",children:(0,n.jsxs)("div",{className:"flex gap-2 items-start cursor-pointer",onClick:()=>{var l,t;window.open(null==e?void 0:null===(t=e.segment)||void 0===t?void 0:null===(l=t.metadata)||void 0===l?void 0:l.url,"_blank")},children:[(0,n.jsx)("div",{className:" flex-shrink-0 pt-[5px]",children:(0,n.jsx)(lP,{src:null!==(m=null==e?void 0:null===(a=e.segment)||void 0===a?void 0:null===(t=a.metadata)||void 0===t?void 0:t.faviconUrl)&&void 0!==m?m:null,name:"image"})}),(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("div",{className:"text-[#2121C5] font-medium dark:text-[#6F6FEF]",children:null==e?void 0:null===(s=e.segment)||void 0===s?void 0:null===(r=s.metadata)||void 0===r?void 0:r.name}),(null==e?void 0:null===(i=e.segment)||void 0===i?void 0:i.url)?(0,n.jsx)("div",{className:"font-normal text-[10px] leading-[20px] text-neutral-500",children:new URL(null!==(p=null==e?void 0:null===(o=e.segment)||void 0===o?void 0:o.url)&&void 0!==p?p:"").host}):null,(0,n.jsx)("a",{className:"font-normal text-[12px] leading-[16px]",children:null!==(x=null==e?void 0:null===(c=e.segment)||void 0===c?void 0:null===(d=c.metadata)||void 0===d?void 0:d.description)&&void 0!==x?x:null==e?void 0:null===(u=e.segment)||void 0===u?void 0:u.description})]})]})},l)})]})},lz=e=>{let{searchSuggestions:l,onSend:t}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-[16px] font-bold py-4",children:"Related"}),null==l?void 0:l.map((e,l)=>(0,n.jsx)("div",{className:"py-3 border-t-[1px] border-neutral-300 cursor-pointer",onClick:()=>{t(e.query)},children:e.query},l))]})},lT=t(53335),lD=t(95367);function lM(e){let{currentRoutedLLM:l,onRegenUsingLLM:t}=e,{data:a}=(0,c.KS)({}),{data:r,isLoading:s}=(0,c._d)({enabled:!0}),i=(0,o.useMemo)(()=>(null==r?void 0:r.length)?r.filter(e=>e.name!==l).map(e=>{var l;return{...null==a?void 0:null===(l=a.result)||void 0===l?void 0:l.find(l=>l.externalApplicationId===e.externalApplicationId),llmName:e.name}}):[],[a,r]);return!s&&(null==i?void 0:i.length)?(0,n.jsxs)("div",{className:"flex items-center gap-2.5 text-darkcolor font-light py-0.5",children:[(0,n.jsx)("div",{className:"text-sm",children:"Regenerate using:"}),null==i?void 0:i.map(e=>{var l;return(0,n.jsxs)("div",{className:"flex items-center gap-1 border border-gray-300 dark:border-gray-400 rounded-md px-2 py-[3px] text-xs shadow-sm cursor-pointer hover:bg-bwleftblue/10 hover:border-bwleftblue hover:text-bwleftblue hover:dark:border-bwleftblue",onClick:()=>t(e.llmName),children:[(0,n.jsx)("img",{src:(null==e?void 0:null===(l=e.theme)||void 0===l?void 0:l[z.my0])||(0,eI.B)("hp_chat_llm.webp"),alt:"",sizes:"20",width:20,height:20,className:"rounded-full size-5 object-cover border border-darkcolor/20 shrink-0"}),(0,n.jsx)("div",{children:e.name})]},e.externalApplicationId)})]}):(0,n.jsx)(lh.O,{className:"h-7 w-80"})}var lF=t(21652),lL=t.n(lF);let lZ=(0,Q.default)(()=>Promise.all([t.e(7240),t.e(9866)]).then(t.bind(t,61273)).then(e=>e.FaCodePullRequest),{loadableGenerated:{webpack:()=>[null]}}),lG=(0,Q.default)(()=>Promise.all([t.e(7240),t.e(9866)]).then(t.bind(t,61273)).then(e=>e.FaCodeBranch),{loadableGenerated:{webpack:()=>[null]}}),lR=(0,Q.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuRefreshCw),{loadableGenerated:{webpack:()=>[null]}});function lO(e){let{messageIndex:l,deploymentConversationId:t,deploymentId:a}=e,{isCreatingPR:r,setIsCreatingPR:s,setPrMessageIndex:i,prMessageIndex:d}=eS(e=>e),[c,u]=(0,o.useState)(""),[m,x]=(0,o.useState)(!1),v=(0,lo.NL)(),h=async()=>{await v.invalidateQueries({queryKey:["listConvoOne",a,t]}),u(""),setTimeout(()=>{s(!1),i(""),x(!1)},1500)},g=(0,eB.D)({mutationFn:async()=>{s(!0),i(l),await new Promise(e=>setTimeout(async()=>{let l=await (0,z.RLR)({params:{deploymentConversationId:t,deploymentId:a,branchName:c.trim().replace(/[^a-zA-Z0-9]/g,"_")}});(null==l?void 0:l.success)||f.Am.error((null==l?void 0:l.error)||"Failed to create pull request."),h(),e(!0)},0))}}),b=r&&d===l,j=function(e){let l=(0,o.useRef)();return(0,o.useEffect)(()=>{l.current=e}),l.current}(b);return(0,o.useEffect)(()=>{m||!j||b||h()},[b,m]),(0,n.jsx)("div",{className:(0,L.cn)("h-24",{"flex items-center":!m}),children:b?(0,n.jsxs)("div",{className:"col-span-1 md:col-span-2 flex flex-col gap-3 justify-center",children:[(0,n.jsx)(lR,{className:"text-bwleftblue size-[18px] animate-spin"}),(0,n.jsx)("div",{className:"animate-pulse text-[13px]",children:"Creating Pull Request"})]}):m?(0,n.jsxs)("div",{className:"space-y-2.5",children:[(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsx)(V.Z,{className:"flex items-center gap-2 opacity-70",children:"Enter The New Branch Name"}),(0,n.jsxs)("div",{className:"flex items-center w-full relative",children:[(0,n.jsx)(lG,{className:"absolute left-3 text-darkcolor/70"}),(0,n.jsx)("input",{className:"transition-colors duration-200 realtive flex h-9 w-full rounded-md border border-darkcolor/20 bg-transparent pl-9 pr-3 py-2 text-sm placeholder:text-darkcolor/20 disabled:pointer-events-none disabled:opacity-50",value:c,onChange:e=>u(e.target.value)})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-end gap-2.5",children:[(0,n.jsx)(p.Z,{className:"flex items-center gap-2 !bg-transparent hover:text-bwleftblue rounded-full text-sm",onClick:()=>x(!1),children:"Cancel"}),(0,n.jsx)(p.Z,{disabled:!c.trim(),onClick:g.mutate,className:"flex items-center gap-2 !bg-bwleftblue text-white rounded-full text-sm",children:"Create Pull Request"})]})]}):(0,n.jsxs)(p.Z,{className:"flex items-center gap-2 rounded-md !bg-bwleftblue/20 text-bwleftblue",onClick:()=>x(!0),children:[(0,n.jsx)(lZ,{}),(0,n.jsx)("span",{className:"",children:"Create Pull Request"})]})})}var lU=t(71096),lB=t.n(lU),lH=t(81315),lV=t(45492),lW=t(88308),lq=t(34743),lQ=t(81785),lK=t(28414),lY=t(57934),l$=t(2377),lX=t(76630),lJ=t(83113),l0=t(52626),l1=t(51517),l2=t(13981),l5=t(66888),l4=t(90216),l6=t(96065);function l3(e){let{data:l,segment:a,isLastMessage:r,beforeSegment:s,afterSegment:i}=e,{tryChangeToViewType:d,convoHistory:u,forceUpdateConvo:m,forceRefreshIFrame:p,setSegmentCmdTerminalToShow:v}=(0,l5.W)(e=>({forceUpdateConvo:e.forceUpdateConvo,forceRefreshIFrame:e.forceRefreshIFrame,convoHistory:e.convoHistory,setSegmentCmdTerminalToShow:e.setSegmentCmdTerminalToShow,tryChangeToViewType:e.tryChangeToViewType})),{isDark:h}=(0,l4.J)(e=>({isDark:e.isDark})),[b,j]=(0,c.PB)("hostedAppId"),{index:w,segment:y,count:k}=(0,o.useMemo)(()=>{var e,t,n;let a=null==l?void 0:null===(e=l.segments)||void 0===e?void 0:e.filter(e=>{var l;return(null==e?void 0:null===(l=e.type)||void 0===l?void 0:l.toLowerCase())==="file_write"}),r=null==a?void 0:a.filter(e=>{var l;return(null==e?void 0:null===(l=e.status)||void 0===l?void 0:l.toLowerCase())==="done"});if((null==r?void 0:r.length)>2){let e=null==r?void 0:r[(null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0)-3],a=(null==r?void 0:r.length)-2;if(null!=e){let t=null==l?void 0:null===(n=l.segments)||void 0===n?void 0:n.findIndex(l=>l===e);if(t>=0)return{index:t,segment:e,count:a}}}return{index:null,segment:null,count:null}},[l,a]),C=(0,o.useMemo)(()=>{var e,t,n,r;let s=null==l?void 0:null===(e=l.segments)||void 0===e?void 0:e.findIndex(e=>e===a);if(s<0)return!0;{let e=null==l?void 0:null===(t=l.segments)||void 0===t?void 0:t[s];if((null==e?void 0:e.type)==="terminal_command")return!1;if((null==e?void 0:e.type)==="saved_instance"){let t=null==l?void 0:null===(n=l.segments)||void 0===n?void 0:n[s+1];return(null==t?void 0:t.type)==="saved_instance"&&(null==e?void 0:e.state)==="saving"}{if((null==e?void 0:e.type)!=="file_write"||w>=0&&s<w)return!0;let t=null==l?void 0:null===(r=l.segments)||void 0===r?void 0:r.findLastIndex(l=>(null==l?void 0:l.type)===(null==e?void 0:e.type)&&(null==l?void 0:l.filepath)===(null==e?void 0:e.filepath));return!(t<0)&&t>=0&&s<t}}},[l,w,a]),I=(0,o.useMemo)(()=>{var e;return a===y||["saved_instance","file_write"].includes(null==a?void 0:null===(e=a.type)||void 0===e?void 0:e.toLowerCase())},[a,y]),S=(0,o.useMemo)(()=>{var e;return["terminal_command"].includes(null==a?void 0:null===(e=a.type)||void 0===e?void 0:e.toLowerCase())},[a]),A=(0,o.useMemo)(()=>{var e;let l=null==a?void 0:null===(e=a.type)||void 0===e?void 0:e.toLowerCase();return y===a?(0,n.jsx)("span",{className:" ml-[18px] border-[1px] border-darkcolor/[0.05] w-[19px] h-[19px] rounded-full flex items-center justify-center mr-[10px] ",children:(0,n.jsx)(x.G,{icon:t(59117).Uw,transform:{size:12}})}):"terminal_command"===l?(0,n.jsx)("span",{className:" rounded-[3px] border-[1px] border-darkcolor/[0.2] px-[0px] py-[1px] dark:bg-black bg-black/[0.3] flex items-center justify-center mr-[10px] ",children:(0,n.jsx)(x.G,{icon:t(24794).Jw,transform:{size:8}})}):"file_write"!==l?null:(null==a?void 0:a.status)==="writing"?(0,n.jsx)("span",{className:" ml-[19.5px]  h-[16px] flex items-center justify-center mr-[10px] ",children:(0,n.jsx)("img",{alt:"",src:"/chatllm/staticllm/".concat(h?"abacus_loader.gif":"abacus_loader_dark.gif"),className:" w-[16px] h-[16px] rounded-full ",referrerPolicy:"no-referrer"})}):(0,n.jsx)("span",{className:" ml-[18px] rounded-full px-[3px] py-[2px] text-white bg-green-500 flex items-center justify-center mr-[10px] ",children:(0,n.jsx)(x.G,{icon:t(74053).LE,transform:{size:12}})})},[a,y]),_=(0,o.useMemo)(()=>{var e,s,i,o,d,c,v;let h=null==a?void 0:null===(e=a.type)||void 0===e?void 0:e.toLowerCase();if(a===y)return null==k||k<=0?null:(0,n.jsxs)("div",{className:" ",children:[(0,n.jsx)("span",{className:" font-bold mr-[5px] ",children:null!=k?k:0}),"More File",1===k?"":"s","..."]});if("saved_instance"===h){let e=null==l?void 0:null===(s=l.segments)||void 0===s?void 0:s.findIndex(e=>e===a),c=null==l?void 0:null===(i=l.segments)||void 0===i?void 0:i[e+1],v=!1;if((null==c?void 0:null===(o=c.type)||void 0===o?void 0:o.toLowerCase())==="saved_instance"&&(null==a?void 0:a.state)==="saving"&&(v=!0),v)return null;{let e,s=(null==a?void 0:a.state)==="saving",i="Rollback to Checkpoint";r&&(i="Rollback to Previous Checkpoint"),s&&(i="Saving...");let o=(e=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.G,{spin:s,className:" ",icon:s?t(68153).QD:t(24154).On,transform:{size:14}}),(0,n.jsx)("span",{className:" ml-[5px] ",children:i})]}),(0,n.jsx)("div",{className:" bg-darkcolor/[0.1] text-[12px] px-[15px] py-[4px] border-[1px] border-darkcolor/[0.1] rounded-full "+(s?" cursor-not-allowed ":" cursor-default hover:bg-darkcolor/[0.2] hover:border-darkcolor/[0.3] "),children:e}));if(!s){let e=null==a?void 0:a.hostedAppInstanceId;if(r){let t=null;if(null==u||u.some((e,n)=>{var a;if((null==e?void 0:e.timestamp)!=null&&(null==l?void 0:l.timestamp)!=null&&(null==e?void 0:e.timestamp)===(null==l?void 0:l.timestamp)||(null==e?void 0:e.messageIndex)!=null&&(null==l?void 0:l.messageIndex)!=null&&(null==e?void 0:e.messageIndex)===(null==l?void 0:l.messageIndex))return!0;(null==e?void 0:null===(a=e.role)||void 0===a?void 0:a.toUpperCase())==="BOT"&&(t=e)}),e=null,null!=t&&(null==t||null===(d=t.segments)||void 0===d||d.some((l,t)=>{if((null==l?void 0:l.type)==="saved_instance"&&(null==l?void 0:l.state)==="done")return e=null==l?void 0:l.hostedAppInstanceId,!0})),null==e)return null}o=(0,n.jsx)(ez.Z,{disableClickOutside:!0,content:(0,n.jsxs)("div",{className:" flex flex-col gap-[5px] items-center text-darkcolor ",children:[(0,n.jsx)("div",{className:" mb-[20px] mt-[30px] ",children:(0,n.jsx)(x.G,{style:{color:"#FAA214"},icon:t(70930).RL,transform:{size:52}})}),(0,n.jsx)("div",{className:" mt-[15px] font-bold text-[22px] ",children:"Revert to Previous Version"}),(0,n.jsx)("div",{className:" opacity-70 text-[16px] ",children:"You are about to revert your project to a previous state."}),(0,n.jsxs)("div",{className:" text-center mt-[10px] text-[14px] px-[24px] py-[18px] font-[400] rounded bg-darkcolor/[0.1] ",children:["This action will revert all changes made since the selected version.",(0,n.jsx)("br",{}),"Your current work will be lost and cannot be restored."]}),(0,n.jsx)("div",{className:" mt-[15px] mb-[15px] "})]}),className:" w-[550px] ",okText:"Revert",onClickOk:l=>new Promise(l=>{(0,z.Mpe)({hostedAppId:b,hostedAppInstanceId:e}).then(e=>{(null==e?void 0:e.success)?(l(!0),f.Am.info("Version reverted successfully."),setTimeout(()=>{null==m||m(),null==p||p()},100)):(f.Am.error((null==e?void 0:e.error)||N.Z.errorDefault),l(!1))}).catch(e=>{f.Am.error((null==e?void 0:e.message)||N.Z.errorDefault),l(!1)})}),children:o})}return(0,n.jsx)("div",{className:" flex items-center gap-[5px] ",children:o})}}if("terminal_command"===h)return(0,n.jsx)("div",{className:" flex flex-col gap-[4px] ",children:(0,n.jsxs)("span",{className:" font-mono text-[12px] ",children:[(0,n.jsx)("span",{className:" mr-[5px] opacity-70 ",children:"Running:"}),null!==(c=null==a?void 0:a.cmdline)&&void 0!==c?c:"..."]})});if("file_write"!==h)return null;{let e=null==a?void 0:a.filepath;if(!e)return"Write file...";{let l="Writing";return l="done"===(null==a?void 0:null===(v=a.status)||void 0===v?void 0:v.toLowerCase())?"Written":"Updating",(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:" opacity-70 mr-[5px] ",children:l}),(0,n.jsx)("span",{className:" rounded bg-darkcolor/[0.2] text-[11px] px-[7px] py-[3px] ",children:null!=e?e:"-"})]})}}},[a,y,u,r]);return C?null:(0,n.jsxs)("div",{className:" flex items-center whitespace-normal text-[13px] py-[7px] my-[10px] "+(I?" ":" px-[20px] ")+(I?" ":S?" bg-darkcoloro/[0.8] ":" bg-darkcoloro/[0.3] "),children:[(0,n.jsxs)("span",{className:" relative ",children:[a!==y&&(null==a?void 0:a.type)==="file_write"&&["file_write"].includes(null==s?void 0:s.type)&&(0,n.jsx)("div",{className:" absolute left-1/2 bottom-full mb-[4px] h-[10px] w-[1px] border-l-[1px] border-l-darkcolor/[0.15] border-dotted "+(a===y?" translate-x-[3.5px] ":" translate-x-[4px] ")}),(null==a?void 0:a.type)==="file_write"&&["file_write"].includes(null==i?void 0:i.type)&&(0,n.jsx)("div",{className:" absolute left-1/2 top-full mt-[4px] h-[10px] w-[1px] border-l-[1px] border-l-darkcolor/[0.15] border-dotted "+(a===y?" translate-x-[3.5px] ":" translate-x-[4px] ")}),A]}),_,S&&(0,n.jsx)("span",{className:" ml-[20px] flex items-center ",children:(0,n.jsx)(g.Z,{title:"Show Command Output",children:(0,n.jsx)("span",{className:" flex items-center ",children:(0,n.jsx)(x.G,{onClick:e=>{null==v||v(a),null==d||d(l6.b.Code)},className:" px-[5px] py-[3px] bg-darkcolor/[0.07] hover:bg-darkcolor/[0.15] cursor-pointer rounded ",icon:t(4318).gf,transform:{size:14}})})})}),!_&&(0,n.jsx)("span",{children:"\xa0"})]})}let l8=(0,Q.default)(()=>Promise.all([t.e(9168),t.e(2025)]).then(t.bind(t,42025)),{loadableGenerated:{webpack:()=>[42025]},ssr:!1}),l7=e=>{var l;let{content:a,isDark:r,metadata:s,isContentLoading:i,deploymentId:d,attachmentId:c}=e,[u,m]=(0,o.useState)(!1),p=(0,o.useCallback)(async e=>{e.stopPropagation(),e.preventDefault(),m(!0);let l=(0,z.iMe)({deploymentId:d,attachmentId:c});try{let e=await (0,z.EZn)({url:l,isGet:!0,isBlob:!0}),t=document.createElement("a"),n=URL.createObjectURL(e);t.href=n,t.download=(null==s?void 0:s.filename)||"filename",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(n)}catch(e){f.Am.error(N.Z.isNullOrEmpty(e)?""+e:N.Z.errorDefault)}m(!1)},[d,c,s]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center py-3 px-4 w-full bg-darkcoloro cursor-pointer",children:[(0,n.jsxs)("div",{className:"flex gap-2 items-center w-[82%]",children:[(0,n.jsx)(x.G,{icon:t(91692).WF,className:"text-neutral-500/[0.5] text-[0.8rem]"}),(0,n.jsx)("span",{className:"text-ellipsis overflow-hidden whitespace-nowrap",children:null!==(l=null==s?void 0:s.filename)&&void 0!==l?l:"CSV"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-6 text-xs text-neutral-400",children:[u?(0,n.jsx)(x.G,{icon:t(68153).QD,transform:{size:24},spin:u}):(0,n.jsx)(g.Z,{title:"Download CSV",children:(0,n.jsx)(x.G,{icon:t(96951).E0,transform:{size:24},onClick:p,spin:u})}),(0,n.jsx)(x.G,{icon:t(64711).Wd,transform:{size:20}})]})]}),i?(0,n.jsx)("div",{className:"flex h-[80%] items-center justify-center",children:(0,n.jsx)(x.G,{icon:t(68153).QD,spin:!0})}):(0,n.jsxs)("div",{className:"relative flex h-full w-full flex-1 flex-col self-end pointer-events-none",children:[(0,n.jsx)("div",{className:"relative flex h-full flex-auto flex-col overflow-hidden border-t transition-colors border-transparent text-[14px]",children:i?(0,n.jsx)(x.G,{icon:t(68153).QD,spin:!0}):(0,n.jsx)(l8,{content:a,isDark:r})}),(0,n.jsx)("div",{className:"absolute bottom-0 h-24 w-full transition-colors h-[4em] bg-gradient-to-b from-darkcoloro/0 to-darkcoloro"})]})]})},l9=(0,Q.default)(()=>Promise.all([t.e(5377),t.e(2558)]).then(t.bind(t,52558)),{loadableGenerated:{webpack:()=>[52558]},ssr:!1}),te=(0,Q.default)(()=>Promise.all([t.e(9225),t.e(7253),t.e(1375),t.e(8119),t.e(7189)]).then(t.bind(t,57189)),{loadableGenerated:{webpack:()=>[57189]},ssr:!1}),tl=(0,Q.default)(()=>Promise.all([t.e(7689),t.e(1205),t.e(5423),t.e(4585)]).then(t.bind(t,50133)),{loadableGenerated:{webpack:()=>[50133]},ssr:!1}),tt=(0,Q.default)(()=>Promise.all([t.e(1205),t.e(5423),t.e(8179)]).then(t.bind(t,55520)),{loadableGenerated:{webpack:()=>[55520]},ssr:!1}),tn="## Ran Query\n",ta="## Data\n",tr="## Truncated Data Preview:\n",ts={"ui:submitButtonOptions":{props:{disabled:!0}}},ti=e=>{for(let l of document.querySelectorAll("img.chatImageClass"))if(l.src===e){l.scrollIntoView({behavior:"smooth",block:"center"});break}};function to(e){let{name:l,defaultExpanded:a,forceExpanded:r,onExpandedChange:s,children:i}=e,[d,c]=(0,o.useState)(null==a||a);return(0,o.useEffect)(()=>{null!=r&&c(r)},[r]),(0,n.jsxs)("div",{"data-gramm":"false",className:" "+(d?" ":" mb-[9px] "),children:[(0,n.jsxs)(p.Z,{useAccentColor:!0,className:" !px-[12px] !py-[3px] text-[13px] ",onClick:e=>{c(e=>(null==s||s(!e),e))},children:[(0,n.jsx)("span",{children:null!=l?l:"Expand"}),(0,n.jsx)("span",{className:" ml-[5px] ",children:(0,n.jsx)(x.G,{icon:d?t(5185).mT:t(43931).pt,transform:{size:15}})})]}),(0,n.jsx)("div",{"data-gramm":"false",className:" mt-[7px] "+(d?" block ":" hidden "),children:i})]})}function td(e){var l;let{isBot:a,isWrite:r,botIconUrl:s,data:i,isCopilot:d,isVisible:u,isSearchLLM:m,isTaskConversation:p}=e,{data:v}=(0,c.Pc)({ignoreNeedLogin:!0}),h=(0,o.useMemo)(()=>{var e;return N.Z.initials(null==v?void 0:null===(e=v.result)||void 0===e?void 0:e.name)},[v]),f=(0,o.useMemo)(()=>{var e;return N.Z.stringToColorHex(null==v?void 0:null===(e=v.result)||void 0===e?void 0:e.name)||"#173e7d"},[v]),g=(0,o.useMemo)(()=>{var e;return a&&!r?(d?"/chatllm/staticllm/ds_chatbot.webp":(null==i?void 0:i.llmBotIcon)?"/chatllm/staticllm/".concat(null==i?void 0:i.llmBotIcon):s)||(0,eI.B)("hp_chat_llm.webp"):(null==v?void 0:null===(e=v.result)||void 0===e?void 0:e.picture)||(0,eI.B)("person2.jpg")},[i,s,v,a,r]);if(a||!m)return(0,n.jsx)("div",{"data-gramm":"false",className:" flex-shrink-0 "+(!1!==u?" pt-[5px] ":" invisible !pointer-events-none !h-[0] !overflow-y-hidden "),children:(0,n.jsxs)("span",{className:" p-[2px] rounded-full block relative",children:[p?(0,n.jsx)("div",{className:"size-[29px] rounded-full bg-bwleftblue/15 flex items-center justify-center text-bwleftblue",children:(0,n.jsx)(x.G,{icon:t(45533).E9,transform:{size:16}})}):(0,n.jsx)("img",{referrerPolicy:"no-referrer",alt:"",src:g||"",className:" rounded-full w-[29px] h-[29px] border-[1px] border-darkcolor/[0.15] "}),!a&&!(null==v?void 0:null===(l=v.result)||void 0===l?void 0:l.picture)&&(0,n.jsx)("span",{style:{background:f},className:"text-darkwhite w-[29px] h-[29px] absolute top-[2px] left-[2px] right-0 bottom-0 rounded-full flex items-center justify-center text-[12px] border-[1px] border-darkcolor/[0.15]",children:h})]})})}let tc=" !pl-[32px] !mx-0 !pr-0 !max-w-[480px] ",tu={wrapHeaderText:!1,wrapText:!1,autoHeight:!0},tm=" px-8 [@media(max-width:1250px)]:px-[10px] [@media(max-width:1250px)]:max-w-[700px] max-w-[845px] ";function tp(e){var l,a,s,u,m,j,w,y,k,C,I,S,A,_,P,E,T,D,Z,G,R,O,U,B,H,V,W,q,Q,K,Y,$,X,et,en,ea,er,es,ei,eo,ed,ec,eu,em,ep,ex,ev,eh;let{data:ef,isWrite:eg,onSend:eb,onUploadDoc:ej,onRemoveFileByID:ew,isDark:ey,cacheFormDataAgents:eN,cacheFormDataAgentsUISchema:ek,cacheFormDataAgentsJsonSchema:eI,cacheFormDataAgentsFormChangeRef:eS,doHideAnyScore:eA,dataScoreOpen:eZ,onChangeHeight:eB,sideBySideWW:eH,widthDiffChanged:eV,forceWidthDiff:eW,canSideBySide:eq,doStop:eQ,isAgent:eK,isLast:eY,hideCodeBlocks:e$,setHideCodeBlocks:eX,hideBlocks:eJ,setHideBlocks:e0,isBinaryEnable:e1,supportsBinaryUpload:e2,isProcessing:e5,botName:e4,isProcessingUpload:e6,isRegenerateProcessing:e3,setIsRegenerateProcessing:e8,setIsProcessing:e7,setIsProcessingUpload:e9,isDeployError:le,isShowRegenerate:ll,isShowHumanize:lt,onClickSaveFeedback:ln,botIconUrl:ls,messageIndex:lu,messageIndexReal:lp,messageIndexOrder:lx,onRegenerate:lv,onVerifyResponse:lh,humanizeInstructions:lf,onHumanize:lg,onRegenUsingLLM:lb,onPromptSave:lj,executingCodeId:lw,requestCodeExecutionMutation:ly,keyText:lN,isInternal:lk,disabled:lC,deploymentId:lI,themeApp:lS,highlightColorHex:lA,deploymentConversationId:lP,isSelfServe:lF,isMobile:lZ,actionSegment:lG,onResponseAction:lR,orgHost:lU,dataChat:l5,onUserFormSubmit:l4,workflowGraph:l6,appId:l8,isWorkflowAgent:tp,conversationWarning:tx,isWorkflowAgentFormInterface:th=!1,availableRuntimeSchemas:tf={},isRefetchingChat:tg,isCopilot:tb,isLastPrompt:tj,isLastQueryPrompt:tw,isLastResponse:ty,agentConversationHistoryWithContextId:tN,requestStopCodeExecutionMutation:tk,stopExecutingCodeId:tC,isMatrixAgent:tI,isHideTopBar:tS,showHeader:tA,nextNodeData:t_,writeTextValue:tP,searchSuggestions:tE,verifyRequestId:tz,setIsVerifyLoading:tT,isVerifyLoading:tD,measure:tM,sideRef:tF,presetFileList:tL,scoreIndex:tZ,disableLLMSwitch:tG,isCentredChat:tR,requestCodeExecutionMutationCache:tO,setScoreIndex:tU,textwithTableWidth0:tB,isFilesExistInConversation:tH,projectName:tV,isTaskConversation:tW,isMessageIndexSameAsBeforeOne:tq,isMessageIndexSameAsAfterOne:tQ,showAgentWorkflowPreview:tK,hasThinkingOption:tY,textareaRef:t$,doAnimateLeaveEmptySpaceScrollRef:tX,listExtApps:tJ,lastBotMessageImageId:t0}=e,[t1,t2]=(0,o.useState)(!1),[t5,t4]=(0,o.useState)(null),[t6,t3]=(0,o.useState)(!1),[t8,t7]=(0,o.useState)(!1),[t9,ne]=(0,o.useState)(!1),[nl,nt]=(0,o.useState)(!1),[nn,na]=(0,o.useState)(),[nr,ns]=(0,o.useState)(),[ni,no]=(0,c.PB)("sideBySideTimestamp"),[nd,nc]=(0,c.PB)("sideBySide"),[nu,nm]=(0,c.PB)("sidebar"),[np,nx]=(0,c.PB)("playgroundType"),[nv]=(0,c.PB)("userG"),[nh,nf]=(0,c.PB)("realtimeSource"),{isSearchLLM:ng,isComputerAgent:nb,isRouteLLM:nj,isComputerAgentOldConvo:nw,computerAgentInfo:ny,isAiEngineerWorkflowPreview:nN,setIsAiEngineerWorkflowPreview:nk,deepResearchMsgInfo:nC,setDeepResearchMsgInfo:nI,setPrependMessage:nS,metadataUpdate:nA,setEnabledPowerPointGen:n_,csvMsgInfo:nP,setCsvMsgInfo:nE,csvDataMap:nz,setCsvDataMap:nT,showRightSidePanel:nD,setShowRightSidePanel:nM,showArtifactInfo:nF,setShowArtifactInfo:nL}=(0,M.b)(e=>({isSearchLLM:e.isSearchLLM,isComputerAgent:e.isComputerAgent,isRouteLLM:e.isRouteLLM,isComputerAgentOldConvo:e.isComputerAgentOldConvo,computerAgentInfo:e.computerAgentInfo,isAiEngineerWorkflowPreview:e.isAiEngineerWorkflowPreview,setIsAiEngineerWorkflowPreview:e.setIsAiEngineerWorkflowPreview,deepResearchMsgInfo:e.deepResearchMsgInfo,setDeepResearchMsgInfo:e.setDeepResearchMsgInfo,setPrependMessage:e.setPrependMessage,metadataUpdate:e.metadataUpdate,setEnabledPowerPointGen:e.setEnabledPowerPointGen,csvMsgInfo:e.csvMsgInfo,setCsvMsgInfo:e.setCsvMsgInfo,csvDataMap:e.csvDataMap,setCsvDataMap:e.setCsvDataMap,showRightSidePanel:e.showRightSidePanel,setShowRightSidePanel:e.setShowRightSidePanel,showArtifactInfo:e.showArtifactInfo,setShowArtifactInfo:e.setShowArtifactInfo})),nZ=(0,M.b)(e=>e.setUpdatedHumanizeInstructions),nG="1"===nd||ng&&!lZ&&lP&&!tR||nC,{setSelectedArtifactMsgId:nR,setStreamingArtifactInfo:nO,selectedArtifactMsgId:nU,streamingArtifactInfo:nB}=(0,eU.P)(e=>({setSelectedArtifactMsgId:e.setSelectedArtifactMsgId,setStreamingArtifactInfo:e.setStreamingArtifactInfo,selectedArtifactMsgId:e.selectedArtifactMsgId,streamingArtifactInfo:e.streamingArtifactInfo})),[nH,nV]=(0,o.useState)(null),nW=(0,o.useRef)(null),nq=(0,c.z0)(),nQ=(0,c.br)(),[nK,nY]=(0,o.useState)({}),[n$,nX]=(0,o.useState)(null),[nJ,n0]=(0,o.useState)(""),[n1,n2]=(0,o.useState)(!1),[n5,n4]=(0,eT.Z)(),{selectedImage:n6,setSelectedImage:n3,setIsPaintingMode:n8,editedImageMode:n7,setEditedImageMode:n9,currentImage:ae,tempText:al,setTempText:at}=(0,el.H)(e=>({selectedImage:e.selectedImage,setSelectedImage:e.setSelectedImage,setIsPaintingMode:e.setIsPaintingMode,editedImageMode:e.editedImageMode,setEditedImageMode:e.setEditedImageMode,currentImage:e.currentImage,tempText:e.tempText,setTempText:e.setTempText})),an=(null==ef?void 0:ef.role)==="BOT",aa=(null==ef?void 0:ef.role)==="USER",[ar,{width:as}]=(0,h.Z)(),[ai,{width:ao}]=(0,h.Z)(),ad=tB||ao,[ac,au]=(0,o.useState)([]),[am,ap]=(0,o.useState)([]),[ax,av]=(0,o.useState)(!1),[ah,af]=(0,o.useState)(!1),[ag,ab]=(0,o.useState)(!1),[aj,aw]=(0,o.useState)(!1),[ay,aN]=(0,o.useState)(!1),{data:ak}=(0,c.Pc)({ignoreNeedLogin:!0}),aC=(0,d.useRouter)(),[aI,aS]=(0,o.useState)(null),[aA,a_]=(0,o.useState)(!1),aP=(0,o.useRef)(null),aE=(0,o.useMemo)(()=>{var e,l;return(null==ef?void 0:null===(e=ef.highlights)||void 0===e?void 0:e.results)||(null==ef?void 0:null===(l=ef.searchResults)||void 0===l?void 0:l.results)},[ef]),az=(0,o.useMemo)(()=>lp||lx,[lp,lx]);(0,o.useEffect)(()=>{let e=null==aE?void 0:aE.some(e=>!0===e.is_realtime_synced_dataset_source);t2(e),null==tU||tU(e?null:tZ)},[aE,tU]),(0,o.useEffect)(()=>{null==tT||tT(!!tz),tz||t4(null)},[tz]);let[aT,aD]=(0,o.useReducer)(e=>e+1,0),aM=(0,eD.Z)(aT,100),aF=(0,o.useRef)(null);(0,o.useEffect)(()=>{aI?(n3(null),n8(!1),n9(!1)):aS(lP)},[lP]),(0,o.useEffect)(()=>{lP||(n3(null),n8(!1),n9(!1)),aN(!1)},[lP]),(0,o.useEffect)(()=>{nD||nO(null)},[nD]),(0,o.useEffect)(()=>{aF.current=tM},[tM]),(0,o.useEffect)(()=>{setTimeout(()=>{var e;null===(e=aF.current)||void 0===e||e.call(aF)},0)},[ef,aM,ad,t8]),(0,o.useEffect)(()=>{if(!aP.current)return;let e=new ResizeObserver(e=>{for(let l of e)nV(l.target.offsetWidth)});return e.observe(aP.current),()=>{e.disconnect()}},[aP.current]);let aL=e=>{let l=null,t=null;return["|---","| ---","|:--","|: --","| :--"].some((n,a)=>{let r=null==e?void 0:e.indexOf(n);r>-1?(l=r,t=r):null!=t&&r>-1&&r<t&&(l=r,t=r)}),null!=l?l:-1},aZ=(0,o.useRef)(!0);(0,o.useEffect)(()=>{if(aZ.current){aZ.current=!1;return}eZ!==ef&&setTimeout(()=>{t3(!1)},0)},[eZ,ef]);let aG=!!(null==lS?void 0:lS[z.LPr]),aR=(null==lS?void 0:lS[z.KjN+"table"])==="1",aO=(null==lS?void 0:lS[z.KjN+"attachment"])==="1",aU=(0,o.useRef)(!1),aB=(0,o.useMemo)(()=>{var e,l,t,a;if(eg||(null==ef?void 0:null===(e=ef.segments)||void 0===e?void 0:e.length)>0||null==ad||0===ad)return null;let r=null==ef?void 0:ef.text;if((!r||" "===r)&&(null==ef?void 0:ef.uiRequestId))return(0,n.jsx)("span",{className:" relative mt-[8px] block ",children:(0,n.jsx)(eP.Z,{size:19,isDraw:!0,isDark:ey})});let s=!1;aU.current=!1;let i=aL(r);if(i>-1){if((null==ef?void 0:ef.chatType)==="data_llm"){s=!0,aU.current=!0;let e=null==r?void 0:r.indexOf("```");e>-1&&!r.substring(e+3).startsWith("sql")&&(r=r.substring(0,e+3)+"sql"+r.substring(e+3))}let e=[],o=[],d=0;for(;i>-1&&d<9999;){let t=r.substring(0,i).split("\n");(null==t?void 0:t.length)>0&&(null==t?void 0:t[(null==t?void 0:t.length)-1])===""&&t.splice(t.length-1,1);let a="";for(let e=0;e<99999&&null!=t[t.length-1-e]&&"|"===t[t.length-1-e][0];e++)a=t[t.length-1-e]+"\n"+a;a.length>0&&(i-=a.length);let c=r.substring(0,i);if(s){let t=null==c?void 0:null===(l=c.split(RegExp("(".concat(tn,"|").concat(ta,"|").concat(tr,")"),"gi")))||void 0===l?void 0:l.filter(e=>""!==e);null==(t=null==t?void 0:t.map(e=>N.Z.removeEnters(e)))||t.some((l,t)=>{e.push((0,n.jsx)(eE.ZP,{measure:aD,isDark:ey,text:l,noAnim:!0},"sim_sep"+e.length+"_"+t)),o.push(l)})}else e.push((0,n.jsx)(eE.ZP,{measure:aD,isDark:ey,text:c,noAnim:!0},"sim"+e.length)),o.push(c);r=r.substring(i),s&&(r=N.Z.removeEnters(r));let u=r.split("\n"),m="";for(let e=0;e<99999&&null!=u[e]&&"|"===u[e][0];e++)m+=u[e]+"\n",r=r.substring(u[e].length+1);if(""!==m){let l=null;if(s){let e=eR(m);l=(0,n.jsx)(te,{onGridSizeChanged:e=>{null==aD||aD()},onGridReady:e=>{null==aD||aD()},rowData:null==e?void 0:e.data,columnDefs:null==e?void 0:e.columns,theme:"ag-theme-quartz",defaultColDef:tu,styles:{lineHeight:"normal"}})}o.push(m),e.push((0,n.jsxs)("div",{"data-gramm":"false",className:" relative border-[1px] rounded border-darkcolor/[0.2] aaoverflow-x-hidden mt-[8px] ",children:[l,null==l&&(0,n.jsx)("div",{"data-gramm":"false",style:{width:Math.max(10,(null!=ad?ad:0)-12)+"px"},className:" overflow-x-auto m-[5px] ",children:(0,n.jsx)("div",{"data-gramm":"false",className:" [&_table]:!max-w-max ",children:(0,n.jsx)(eE.ZP,{measure:aD,isDark:ey,text:m,noAnim:!0})})},"textMsg_"+lN)]},"sec_table"+e.length))}i=aL(r),d++}if(""!==r&&(o.push(r),e.push((0,n.jsx)(eE.ZP,{measure:aD,isDark:ey,text:r,noAnim:!0},"simLast"+e.length))),s){let l=[],r=[];if(null==o||o.some((e,t)=>{let n=N.Z.removeEnters(e);n===N.Z.removeEnters(tn)&&l.push(t),(n===N.Z.removeEnters(ta)||n===N.Z.removeEnters(tr))&&r.push(t)}),l.length>0&&r.length>0){let s=(0,n.jsx)("div",{"data-gramm":"false",className:" mt-[12px] ",children:(0,n.jsx)(to,{defaultExpanded:!e$,forceExpanded:!e$,name:e$?"View SQL":"Hide SQL",onExpandedChange:e=>{eX(!e)},children:null==l?void 0:l.map((l,t)=>null==e?void 0:e[l+1])})},"exp");null==r||null===(t=r.reverse())||void 0===t||t.some((l,t)=>{null==e||e.splice(l,1),null==o||o.splice(l,1)}),null==l||null===(a=l.reverse())||void 0===a||a.some((l,t)=>{null==e||e.splice(l,2),null==o||o.splice(l,2)}),null==e||e.unshift((0,n.jsx)("div",{"data-gramm":"false",className:" my-[4px] font-semibold text-[16px] ",children:N.Z.removeEnters(null==o?void 0:o[null==r?void 0:r[0]])===N.Z.removeEnters(tr)?"Truncated Data Preview":"Data"},"data1")),aG||null==e||e.unshift(s)}}return e}return null},[an,ef,eg,e$,ey,aG,ad]),aH=(0,o.useMemo)(()=>{var e,l;let a=null==ef?void 0:null===(e=ef.segments)||void 0===e?void 0:e.find(e=>{var l,t;return(null==e?void 0:e.type)==="collapsible_component"&&(null==e?void 0:null===(t=e.title)||void 0===t?void 0:null===(l=t.toLowerCase())||void 0===l?void 0:l.includes("routing to"))});if(!a)return null;let r=null==a?void 0:null===(l=a.title)||void 0===l?void 0:l.replace("> Routing to ","");return(0,n.jsxs)("div",{className:" inline-flex items-center gap-1 ",children:[(0,n.jsx)(x.G,{icon:t(95590).eF,transform:{size:14}}),(0,n.jsxs)("div",{children:["Routing to ",(0,n.jsx)("span",{className:"font-bold text-gray-500",children:r})]})]})},[ef]),aV=!aH&&eq&&"1"===nd&&!!ni&&ni===encodeURIComponent((null==ef?void 0:ef.timestamp)||"")&&an,aW=null==ef?void 0:null===(l=ef.text)||void 0===l?void 0:l.startsWith(lc.O),[aq,aQ]=(0,o.useState)(null),aK=(0,o.useCallback)(async function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;aQ(e);let t=(0,z.iMe)({deploymentId:lI,attachmentId:e});try{let e=await (0,z.EZn)({url:t,isGet:!0,isBlob:!0}),n=document.createElement("a"),a=URL.createObjectURL(e);n.href=a,n.download=l||"filename",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)}catch(e){console.error(e),f.Am.error(N.Z.isNullOrEmpty(e)?""+e:N.Z.errorDefault)}aQ(null)},[lI]),aY=(0,o.useCallback)(e=>{setTimeout(()=>{let e=encodeURIComponent((null==ef?void 0:ef.timestamp)||"");if("1"===nd){no(e||null);return}tS||(nu?localStorage.setItem("isSidebar",nu):localStorage.removeItem("isSidebar"),nm("1"));let l="1"===nd?null:"1";nc(l),null==l?no(null):no(e||null)},200)},[eA,tS,ef,nd,eq,ni,nu]),a$=(0,o.useMemo)(()=>{var e;return null==ef?void 0:null===(e=ef.segments)||void 0===e?void 0:e.some(e=>{var l,t;return(null==e?void 0:null===(l=e.type)||void 0===l?void 0:l.toLowerCase())==="base64_image"||(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.toLowerCase())==="image_url"})},[ef]),aX=(0,o.useMemo)(()=>{var e;return null==ef?void 0:null===(e=ef.segments)||void 0===e?void 0:e.some(e=>{var l;return(null==e?void 0:null===(l=e.type)||void 0===l?void 0:l.toLowerCase())==="chatllm_task_schedule"})},[ef]),aJ=(0,o.useMemo)(()=>{var e,l,t,n;let a=(null==ef?void 0:null===(l=ef.segments)||void 0===l?void 0:null===(e=l.find(e=>(null==e?void 0:e.generationParams)!=null))||void 0===e?void 0:e.generationParams)||null;return null==a&&(a=null==ef?void 0:null===(n=ef.debugInfo)||void 0===n?void 0:null===(t=n.find(e=>(null==e?void 0:e.name)==="image_generation"))||void 0===t?void 0:t.generation_params),a},[ef]),a0=(0,o.useMemo)(()=>{var e;return null==ef?void 0:null===(e=ef.segments)||void 0===e?void 0:e.some(e=>{var l;return(null==e?void 0:null===(l=e.type)||void 0===l?void 0:l.toLowerCase())==="video_generation"})},[ef]),a1=(0,o.useCallback)(e=>{t1?setTimeout(()=>{nf(String(e-1))},200):null==tU||tU(e-1),aY(e-1)},[aY,t1,nf,tU]),a2=(0,o.useMemo)(()=>{var e;let l=null;return null==ef||null===(e=ef.segments)||void 0===e||e.some((e,t)=>{var n;"agent_flow_button"===(null==e?void 0:null===(n=e.type)||void 0===n?void 0:n.toLowerCase())&&(l=e5)}),l},[ef,e5]);(0,o.useEffect)(()=>{var e,l;if(!eg&&null!=ad&&0!==ad&&!nr&&(an||tp)&&(null==ef?void 0:null===(e=ef.segments)||void 0===e?void 0:e.length)>0){let e=[],t=[];null==ef||null===(l=ef.segments)||void 0===l||l.some((l,n)=>{var a,r;let s=null==l?void 0:null===(a=l.type)||void 0===a?void 0:a.toLowerCase();"search_result"===s?(null==l?void 0:null===(r=l.segment)||void 0===r?void 0:r.url)&&e.push(l):"image_search_result"===s?t.push(l):"video_generation"===s&&n2(!0)}),au(e),ap(t)}},[an,tp,ef,eg,nr,ad]),(0,o.useEffect)(()=>{if(!nF&&(e5||e3)){var e;let l=null==nB?void 0:null===(e=nB.segment)||void 0===e?void 0:e.split("\n");((null==l?void 0:l.length)>9||(null==nB?void 0:nB.isPlaygroundCreated))&&(nL("showArtifact"),nI(null),nE(null),nm(""),setTimeout(()=>{nM(!0)},10))}},[nB,nF,e5,e3]),(0,o.useEffect)(()=>{var e,l;(null==ef?void 0:null===(e=ef.segments)||void 0===e?void 0:e.length)>0&&(null==ef||null===(l=ef.segments)||void 0===l||l.some((e,l)=>{var t,n,a,r,s,i;let o=null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.toLowerCase();"playground"!==o&&(e.isStreamingPlayground||(null==e?void 0:null===(n=e.artifactMetadata)||void 0===n?void 0:n.type)==="ppt")?nO({artifactMetadata:nW.current,segment:e.segment,isPlaygroundCreated:!!(null==ef?void 0:null===(r=ef.segments)||void 0===r?void 0:null===(a=r[l+1])||void 0===a?void 0:a.artifactMetadata)}):"playground"===o&&(null==e?void 0:e.isGeneratingPlayground)&&(e5||e3)&&ty&&an&&(nB||nx(null),nF&&nU||(nO({artifactMetadata:e.metadata}),nW.current=e.metadata,nx(e.metadata.type),nR((null==e?void 0:e.messageId)||(null==e?void 0:e.message_id))),(null==e?void 0:null===(s=e.metadata)||void 0===s?void 0:s.type)&&np!==(null==e?void 0:null===(i=e.metadata)||void 0===i?void 0:i.type)&&(nx(e.metadata.type),nR(null),setTimeout(()=>{nR((null==e?void 0:e.messageId)||(null==e?void 0:e.message_id))},10)))})),e5||e3||nO(null)},[ef,an,ty,nU,np]);let a5=e=>{if(e){if(nm(""),setTimeout(()=>{nM(!0)},10),nL("showArtifact"),nI(null),nE(null),n3(null),n9(!1),n8(!1),(null==e?void 0:e.messageId)!==nU){var l;nR(null==e?void 0:e.messageId),nx(null==e?void 0:null===(l=e.artifactMetadata)||void 0===l?void 0:l.type)}}else f.Am.error(N.Z.errorDefault)},a4=(0,o.useCallback)(e=>{nE(e),nI(null),nm(""),nL(""),nR(null),n3(null),setTimeout(()=>{nM(!0)},10)},[]),a6=(null==ef?void 0:ef.type)==="agent_form"||(null==ef?void 0:ef.keywordArguments)&&(!th&&(null==ef?void 0:ef.agentWorkflowNodeId)!==(null==l6?void 0:l6.primary_start_node)||th)&&(null==l6?void 0:l6.primary_start_node)!==null,a3=(0,o.useMemo)(()=>{var e;return null==ef?void 0:null===(e=ef.segments)||void 0===e?void 0:e.some(e=>(null==e?void 0:e.type)==="form")},[ef,null==ef?void 0:ef.segments]),a8=a6||a3,a7=(0,o.useCallback)((e,l,t)=>{if(e){var n;eN.current[e]=null!==(n=null==l?void 0:l.formData)&&void 0!==n?n:null}},[ef,eN]),a9=(0,o.useCallback)(e=>{null==l4||l4(ef,e,null==ef?void 0:ef.isAlreadyExecuted)},[ef,l4]),re=(0,o.useCallback)(e=>{null==l4||l4(ef,e,!eY)},[ef,l4,eY]),rl=eY&&!e5&&l8===N.Z.aiEngAppId&&!nN&&N.Z.isAIEngineerHasInfoToPreview(nA,lZ),rt=eY&&!e5&&l8===N.Z.aiEngAppId&&N.Z.isAIEngineerHasInfoToPreview(nA,lZ),{attachmentsInfo:rn,allDocsInfo:ra}=(0,o.useMemo)(()=>{var e,l,t,n,a,r;let s=[],i=null!==(t=null==ef?void 0:null===(e=ef.segments)||void 0===e?void 0:e.filter(e=>(null==e?void 0:e.type)==="attachments"))&&void 0!==t?t:[],o=null!==(n=null==ef?void 0:null===(l=ef.docInfos)||void 0===l?void 0:l.filter(e=>{var l,t;return((null==e?void 0:e.mimeType)==="text/csv"||(null==e?void 0:e.mime_type)==="text/csv")&&(null==e?void 0:null===(t=e.filename)||void 0===t?void 0:null===(l=t.toLowerCase())||void 0===l?void 0:l.includes(".csv"))}))&&void 0!==n?n:[];for(let e of i)if((null==e?void 0:null===(a=e.attachments)||void 0===a?void 0:a.length)>0){let l=null==e?void 0:null===(r=e.attachments)||void 0===r?void 0:r.filter(e=>{var l,t;return(null==e?void 0:e.mimeType)==="text/csv"&&(null==e?void 0:null===(t=e.filename)||void 0===t?void 0:null===(l=t.toLowerCase())||void 0===l?void 0:l.includes(".csv"))});s.push(...l)}return{attachmentsInfo:s,allDocsInfo:o}},[ef]);(0,o.useEffect)(()=>{(async()=>{try{let r={...nz},s=null==rn?void 0:rn.filter(e=>{let l=r[e.attachmentId||e.attachment_id];return!(null==l?void 0:l.content)&&!(null==l?void 0:l.isLoading)&&!(null==l?void 0:l.error)});if((null==s?void 0:s.length)>0){let i=null==s?void 0:s.map(e=>(r[e.attachmentId||e.attachment_id]={isLoading:!0},(0,z.zcA)({attachmentId:e.attachmentId||e.attachment_id,deploymentId:lI})));nT(r);let o=await Promise.allSettled(i);for(let i=0;i<s.length;i++){var e,l,t,n,a;let d=null===(e=o[i])||void 0===e?void 0:e.value,c=(null==d?void 0:d.success)?null===(t=o[i])||void 0===t?void 0:null===(l=t.value)||void 0===l?void 0:l.result:d;r[(null===(n=s[i])||void 0===n?void 0:n.attachmentId)||(null===(a=s[i])||void 0===a?void 0:a.attachment_id)]={content:null==c?void 0:c.content,metadata:{filename:s[i].filename},isLoading:!1,areColumnsTruncated:null==c?void 0:c.areColumnsTruncated,areRowsTruncated:null==c?void 0:c.areRowsTruncated,error:null==c?void 0:c.error}}nT(r)}}catch(e){console.log(e)}})()},[rn,nz,lI]),(0,o.useEffect)(()=>{(async()=>{try{let r={...nz},s=null==ra?void 0:ra.filter(e=>{let l=r[e.documentUploadId||e.document_upload_id];return!(null==l?void 0:l.content)&&!(null==l?void 0:l.isLoading)&&!(null==l?void 0:l.error)});if((null==s?void 0:s.length)>0){let i=null==s?void 0:s.map(e=>(r[e.documentUploadId||e.document_upload_id]={isLoading:!0},(0,z.Kh_)({documentUploadId:e.documentUploadId||e.document_upload_id})));nT(r);let o=await Promise.allSettled(i);for(let i=0;i<s.length;i++){var e,l,t,n,a;let d=null===(e=o[i])||void 0===e?void 0:e.value,c=(null==d?void 0:d.success)?null===(t=o[i])||void 0===t?void 0:null===(l=t.value)||void 0===l?void 0:l.result:d;r[(null===(n=s[i])||void 0===n?void 0:n.documentUploadId)||(null===(a=s[i])||void 0===a?void 0:a.document_upload_id)]={content:null==c?void 0:c.content,metadata:{filename:s[i].filename},isLoading:!1,areColumnsTruncated:null==c?void 0:c.areColumnsTruncated,areRowsTruncated:null==c?void 0:c.areRowsTruncated,error:null==c?void 0:c.error}}nT(r)}}catch(e){console.log(e)}})()},[ra,nz]);let rr=(0,o.useMemo)(()=>{var e,l,a,s,d,c,u,m,v,h,j,w;let y=null;if(eg||null==ad||0===ad)return null;if(nr)return(0,n.jsx)("div",{"data-gramm":"false",className:" prose dark:prose-invert markdown ",style:aa?{}:{width:r()(y)?y:Math.max(10,(null!==(l=null!=y?y:ad)&&void 0!==l?l:0)-12)+"px"},dir:"auto",children:(0,n.jsx)("div",{"data-gramm":"false",className:"whitespace-pre-wrap break-words break-word mx-0",children:nr},"user_data")});let k=null==ef?void 0:ef.text;if((!k||" "===k)&&(null==ef?void 0:ef.uiRequestId))return(0,n.jsx)("span",{className:" relative mt-[8px] block ",children:(0,n.jsx)(eP.Z,{size:19,isDraw:!0,isDark:ey})});let C=[],I=[];if(an||tp){if((null==ef?void 0:null===(e=ef.segments)||void 0===e?void 0:e.length)>0){let e=(null==ef?void 0:ef.chatType)==="data_llm",l=!1,s=null==ef?void 0:null===(a=ef.segments)||void 0===a?void 0:a.some(e=>(null==e?void 0:e.type)==="verification"),d=[...(null==ef?void 0:ef.segments)||[]];s&&(d=d.reduce((e,l)=>{let t=e.length-1;switch(null==l?void 0:l.type){case"verification":l.isStart?e.push({...l}):e[t]&&(e[t].isStart=!1);break;case"text":var n;(null===(n=e[t])||void 0===n?void 0:n.type)==="verification"&&e[t].isStart?e[t].segment.segment=null==l?void 0:l.segment:e.push({...l});break;default:e.push({...l})}return e},[])),null==d||d.some((a,s)=>{var c,u,m,v,h,j,w,k,S,A,_,P,E,T,D,M,F,Z,G,R,O,U,B,H,V,W,q,Q,K,Y,$,X,J,el,et,en,ea,er,es,ei;let eo=a.temp,ed=a.isSpinny,ec=null==a?void 0:null===(c=a.type)||void 0===c?void 0:c.toLowerCase();if(null==a||!a.isStreamingDeepResearch){if((null==a?void 0:a.sectionTitle)&&th&&I.push((0,n.jsx)("div",{"data-gramm":"false",className:"".concat(eE.S9," text-bwleftdate !font-bold [&:not(:first-child)]:mt-[25px]"),children:a.sectionTitle},"sectionTitle_"+s)),"playground"!==ec&&a.isStreamingPlayground)(e5||e3)&&ty&&(!lZ||nD)&&(nF?(!lZ||nD)&&I.push((0,n.jsxs)(p.Z,{className:"mt-[8px] w-full flex h-[48px] items-center text-[12px] !bg-bwleftblue/[0.2] text-bwleftblue gap-2 text-[16px]",disabled:e5,noScale:!0,onClick:()=>{a5(nB)},children:[(0,n.jsx)(x.G,{icon:(null==a?void 0:null===(u=a.artifactMetadata)||void 0===u?void 0:u.type)==="markdown"||"markdown"===np?t(29444).nf:t(28531).dT}),(0,n.jsx)("span",{className:"whitespace-nowrap text-ellipsis overflow-hidden",children:(null==nB?void 0:null===(m=nB.artifactMetadata)||void 0===m?void 0:m.title)?null==nB?void 0:null===(v=nB.artifactMetadata)||void 0===v?void 0:v.title:"markdown"===np?"Editor":"Playground"}),(e5||e3)&&ty?(0,n.jsx)(x.G,{icon:t(32187).LM,spin:!0}):null]},"artifact_code_btn_streaming"+s)):I.push((0,n.jsx)("div",{"data-gramm":"false",className:"max-h-[390px] overflow-auto border-[1px] border-neutral-300 rounded-xl",onClick:()=>{a5(nB)},children:(0,n.jsx)(l1.SU,{segmentInfo:a,artifactMetadata:null==nB?void 0:nB.artifactMetadata,isDark:ey})},"canvas_streaming"+s)));else if(["saved_instance","file_write","terminal_command"].includes(ec))I.push((0,n.jsx)(l3,{beforeSegment:null==d?void 0:d[s-2],afterSegment:null!==(h=null==d?void 0:d[s+2])&&void 0!==h?h:null==d?void 0:d[s+1],data:ef,segment:a,isLastMessage:eY},"idesegren_"+s));else if("deep_research"===ec){if(null==a?void 0:a.isRunningResearch){let{metadata:e}=a,l=null,r=0,i=null;ef.segments.forEach(e=>{var l;"web_search_result"===e.activityType?r+=1:"deep_research"===e.type&&(null==e?void 0:null===(l=e.metadata)||void 0===l?void 0:l.endTime)&&(i=e)}),(null==i?void 0:null===(j=i.metadata)||void 0===j?void 0:j.endTime)&&(null==e?void 0:e.startTime)&&(l=Math.round(((null==i?void 0:null===(w=i.metadata)||void 0===w?void 0:w.endTime)-(null==e?void 0:e.startTime))/60));let o=!((e5||e3)&&eY),d=o?l?"Research completed in ":"Research completed":"".concat(r>0?"Research in progress... ":"Starting Research..."),c=!o&&eY?"".concat(r>0?"".concat(r," sources"):""):l?" ".concat(l,"m ").concat(r>0?". ".concat(r," sources"):""):"";I.push((0,n.jsxs)("div",{"data-gramm":"false",className:"relative group my-3 cursor-pointer p-3 border-[1px] border-neutral-200/[0.8] dark:border-neutral-500/[0.8] rounded-lg max-w-[23rem] shadow-md flex gap-[8px] items-center",onClick:()=>{lZ||(nI({segmentMsgId:(null==a?void 0:a.messageId)||(null==a?void 0:a.message_id),botMsgId:lu}),nL(""),nE(null),nR(null),n3(null),nM(!1))},children:[o?(0,n.jsx)(x.G,{icon:t(23995).fV,className:"text-green-600"}):null,d,(0,n.jsx)("div",{className:"text-neutral-500/[0.8]",children:c})]},"deep_research"+s))}}else if("action"===ec&&(null==a?void 0:a.action)==="create_pull_request")I.push((0,n.jsx)("div",{"data-gramm":"false",className:"relative group my-3",children:(0,n.jsx)(lO,{messageIndex:null==ef?void 0:null===(k=ef.messageIndex)||void 0===k?void 0:k.toString(),deploymentConversationId:lP,deploymentId:lI})},"html_"+s));else if("chatllm_task_schedule"===ec)ee.featureFlags.showTasks&&I.push((0,n.jsx)("div",{"data-gramm":"false",className:"relative group my-1",children:(0,n.jsx)(lJ.Z,{lazyLoad:!0,showViewResults:!0,task:{...null==a?void 0:a.segment,scheduleInfo:void 0},onTaskUpdated:()=>{null==ri||ri.invalidateQueries({queryKey:["listConvoOne",lI,lP]})}})},"html_"+s));else if("pull_request"===ec&&(null==a?void 0:a.url))I.push((0,n.jsxs)("div",{"data-gramm":"false",className:"relative group my-2",children:[(0,n.jsxs)("div",{className:"font-medium",children:["Pull request '",(null==a?void 0:a.title)||"","' successfully created"]}),(0,n.jsx)("a",{href:null==a?void 0:a.url,target:"_blank",rel:"noreferrer",className:"text-bwleftblue font-normal",children:null==a?void 0:a.url})]},"html_"+s));else if("collapsible_component"===ec){if(null==a?void 0:null===(A=a.title)||void 0===A?void 0:null===(S=A.toLowerCase())||void 0===S?void 0:S.includes("routing to"))return;let{segment:e,isSpinny:l,title:t,type:r,isCollapsed:i,isRouting:o}=a,{segment:d,type:c}=e,u=ef.segments.length-1===s?"shimmer dark:shimmerDark pointer-events-none"+((null==a?void 0:a.temp)?" temp":""):"";if(o)I.push((0,n.jsx)("div",{"data-gramm":"false",className:"font-[300] text-neutral-500 !text-[12px] ml-[-2px] mt-[-8px]",children:t},"collapsible_component_"+s));else if("list"===c){let e=null==d?void 0:d.map((e,l)=>(0,n.jsxs)("li",{children:[" ",(0,n.jsx)(eE.ZP,{measure:aD,text:e,noAnim:!0},"bulletLinkItem")," "]},"".concat(e,"_").concat(l)));I.push((0,n.jsxs)("details",{className:"".concat(eG().shimmerTextWrapper," font-[300] first:mt-2"),open:!1===i,children:[(0,n.jsx)("summary",{onClick:e=>{setTimeout(()=>{null==tM||tM()},0)},className:"cursor-pointer ".concat(l?u:""),children:t}),(0,n.jsx)("ul",{children:e})]},"details_"+s))}else if("text"===c){let e=(null==a?void 0:a.isThought)||(null==a?void 0:a.isThoughts)||(null==a?void 0:null===(P=a.title)||void 0===P?void 0:null===(_=P.toLowerCase())||void 0===_?void 0:_.replace(/\./g,""))==="thoughts"||(null==a?void 0:null===(T=a.title)||void 0===T?void 0:null===(E=T.toLowerCase())||void 0===E?void 0:E.replace(/\./g,""))==="thought";I.push((0,n.jsxs)("details",{className:" ".concat(eG().shimmerTextWrapper," font-[300] first:mt-2 "),open:!1===i,children:[(0,n.jsx)("summary",{onClick:e=>{setTimeout(()=>{null==tM||tM()},0)},className:" cursor-pointer ".concat(l?u:""," "),children:t}),(0,n.jsx)("div",{className:" pl-4 mt-2 "+(e?" border-l-[2px] border-l-darkcolor/[0.2] text-[14px] font-[300] [&_*]:text-[14px] text-darkcolor/[0.7] pb-[2px] ":" "),children:(0,n.jsx)(eE.ZP,{measure:aD,text:d,noAnim:!0})})]},"text_details_"+s))}else I.push((0,n.jsx)("div",{"data-gramm":"false",className:"".concat(l?u:""," font-[300]"),children:t},"collapsible_component_"+s))}else if(("base64_image"===ec||"image_url"===ec)&&(null==a?void 0:a.isInline))C.push({...a,src:a.segment});else if("base64_image"===ec||"image_url"===ec)r()(null==a?void 0:a.segment)&&(y=a.height!==a.width?"100%":lZ?312:500,(null==a?void 0:a.model)&&I.push((0,n.jsx)(eE.ZP,{measure:aD,isDark:ey,text:"Image generated by ".concat(null==a?void 0:a.model),noAnim:!0},"text_"+s+"model")),I.push((0,n.jsx)("div",{"data-gramm":"false",className:" relative group mt-[8px] not-prose ",children:(0,n.jsx)(eO.Z,{type:ec,measure:aD,isAgent:eK,imgContent:a,alt:"Image",isMobile:lZ,actualAvailableWidth:ad,isWorkflowAgent:tp})},"html_"+s)));else if("list"===ec&&i()(a.segment)){let e=null===(D=a.segment)||void 0===D?void 0:D.map((e,l)=>(0,n.jsx)("li",{className:"m-0",children:(0,lr.xV)(e)},"".concat(e,"_").concat(l)));I.push((0,n.jsx)("ul",{className:"ps-[1em] ".concat(eG().shimmerTextWrapper," font-[300]"),children:e},"list_".concat(s)))}else if("html"===ec){if(r()(null==a?void 0:a.segment)){let e;let l=null==a?void 0:a.segment,t=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,r=[],i=999;for(;i>0&&null!=(e=t.exec(l));){let l=null===(Z=e[1])||void 0===Z?void 0:null===(F=Z.toLowerCase)||void 0===F?void 0:F.call(Z);["html","body"].includes(l)||r.push(l),i--}(null==r?void 0:r.length)===1&&(null==r?void 0:r[0])==="img"&&(null==l?void 0:null===(M=l.toLowerCase())||void 0===M?void 0:M.indexOf("width:"))===-1&&(l=null==l?void 0:l.replace("<img ",'<img style="width: 100%;" ')),I.push((0,n.jsx)("div",{"data-gramm":"false",style:{height:500,overflowY:"auto"},children:(0,n.jsx)("iframe",{onLoad:e=>{null==aD||aD()},srcDoc:l,className:" w-full block h-[500px] b-[0px] "})},"html_"+s))}}else if("attachments"===ec){let e=[];null==a||null===(G=a.attachments)||void 0===G||G.some((l,a)=>{var r,i,o,d,c,u;let m=(null==l?void 0:l.attachmentId)||(null==l?void 0:l.attachment_id);if(((null==l?void 0:l.mimeType)==="text/csv"||(null==l?void 0:l.mime_type)==="text/csv")&&(null===(i=l.filename)||void 0===i?void 0:null===(r=i.toLowerCase())||void 0===r?void 0:r.includes(".csv"))&&!lZ){let r=null==nz?void 0:nz[m];(null==nP?void 0:nP.content)||n6||nF?e.push((0,n.jsxs)(p.Z,{className:"mt-[8px] w-[260px] flex h-[48px] items-center text-[12px] !bg-bwleftblue/[0.2] text-bwleftblue gap-2 text-[16px]",disabled:e5,noScale:!0,onClick:()=>{a4({content:r.content,metadata:{filename:l.filename},attachmentId:m})},children:[(0,n.jsx)(x.G,{icon:t(41859).WF}),(0,n.jsx)("span",{className:"whitespace-nowrap text-ellipsis overflow-hidden",children:l.filename}),(e5||e3)&&ty?(0,n.jsx)(x.G,{icon:t(32187).LM,spin:!0}):null]},"attachs_"+s)):r&&e.push((null==r?void 0:r.content)?(0,n.jsx)("div",{"data-gramm":"false",className:" h-[390px] overflow-auto border-[1px] border-neutral-300 rounded-xl w-full overflow-y-hidden",onClick:()=>{a4({content:r.content,metadata:{filename:l.filename},attachmentId:m})},children:(0,n.jsx)(l7,{isContentLoading:!!(null==r?void 0:r.isLoading),content:null==r?void 0:r.content,isDark:ey,metadata:{filename:l.filename},deploymentId:lI,attachmentId:m})},"attachs_"+s):(0,n.jsx)(b.Z,{filename:(null==l?void 0:l.filename)||null,fileType:null==l?void 0:null===(o=l.mimeType)||void 0===o?void 0:o.toUpperCase(),isPreparingDownload:aq===m,onClickDownload:()=>{aK(m,null==l?void 0:l.filename)},isAttachment:!0,noView:!0},"".concat(m,"-").concat(a)))}else e.push((0,n.jsx)(b.Z,{filename:(null==l?void 0:l.filename)||null,fileType:null==l?void 0:null===(d=l.mimeType)||void 0===d?void 0:d.toUpperCase(),isPreparingDownload:aq===m,onClickDownload:()=>{aK(m,null==l?void 0:l.filename)},isAttachment:!0,noView:!0,onClickPromise:(null==l?void 0:l.mimeType)==="text/csv"&&(null==l?void 0:null===(u=l.filename)||void 0===u?void 0:null===(c=u.toLowerCase())||void 0===c?void 0:c.includes(".csv"))&&!lZ?()=>new Promise(e=>{var t,n;(null==l?void 0:l.mimeType)==="text/csv"&&(null==l?void 0:null===(n=l.filename)||void 0===n?void 0:null===(t=n.toLowerCase())||void 0===t?void 0:t.includes(".csv"))?(0,z.zcA)({attachmentId:m,deploymentId:lI}).then(e=>{if(null==e?void 0:e.result){var t,n,a;nm(""),nI(null),nL(""),n3(null),nE({content:null==e?void 0:null===(t=e.result)||void 0===t?void 0:t.content,metadata:{filename:l.filename},attachmentId:m,areColumnsTruncated:null==e?void 0:null===(n=e.result)||void 0===n?void 0:n.areColumnsTruncated,areRowsTruncated:null==e?void 0:null===(a=e.result)||void 0===a?void 0:a.areRowsTruncated}),setTimeout(()=>{nM(!0)},10)}}).catch(e=>{f.Am.error(N.Z.isNullOrEmpty(e)?N.Z.errorDefault:""+e)}).finally(()=>{e(!0)}):e(!0)}):null},"".concat(m,"-").concat(a)))}),(null==e?void 0:e.length)>0&&I.push((0,n.jsx)("div",{"data-gramm":"false",className:" flex gap-[8px] flex-wrap ",children:e},"attachs_"+s))}else if("table"===ec){let e=[];null==a||null===(R=a.columns)||void 0===R||R.some((l,t)=>{e.push({headerName:l,field:l,minWidth:100})});let l=[];null===(O=a.data)||void 0===O||O.some((e,t)=>{var n;let r={};null===(n=a.columns)||void 0===n||n.some((l,t)=>{r[l]=(null==e?void 0:e[t])||null}),l.push(r)});let r=(null==a?void 0:null===(U=a.attachmentInfo)||void 0===U?void 0:U.attachmentId)?(0,n.jsx)("div",{"data-gramm":"false",className:" absolute top-0 right-0 group-hover:block hidden ",children:(0,n.jsx)(g.Z,{title:"Download",children:(0,n.jsx)("span",{children:(0,n.jsx)(p.Z,{useAccentColor:!0,className:" !px-[7px] !py-[0] border-[1px] border-bwleftblue/[0.1] !bg-darkcoloro dark:!border-darkcolor/[0.1] dark:!text-border-darkcolor/[0.4] ",onClick:e=>{var l,t;aK(null==a?void 0:null===(l=a.attachmentInfo)||void 0===l?void 0:l.attachmentId,null==a?void 0:null===(t=a.attachmentInfo)||void 0===t?void 0:t.filename)},children:(0,n.jsx)(x.G,{spin:aq===(null==a?void 0:null===(B=a.attachmentInfo)||void 0===B?void 0:B.attachmentId),icon:aq===(null==a?void 0:null===(H=a.attachmentInfo)||void 0===H?void 0:H.attachmentId)?t(39847).QD:t(48812).q7,transform:{size:13}})})})})}):null,i="table---".concat(null==a?void 0:a.messageId,"---").concat(s,"---").concat(ey?"dark":"light"),o=(null==a?void 0:a.messageId)?eE.Wh[i]:null;!o&&(null==a?void 0:a.messageId)&&eE.HZ.push({time:lB()(),cacheKey:i});let d={height:40+(null!==(V=null==l?void 0:l.length)&&void 0!==V?V:0)*27+8+10,"--custom-table-body-height":"".concat((null!==(W=null==l?void 0:l.length)&&void 0!==W?W:0)*27,"px")};o=(0,n.jsxs)("div",{"data-gramm":"false",className:"relative group target_table_body",style:d,children:[(0,n.jsx)(te,{onGridSizeChanged:e=>{null==aD||aD()},onGridReady:e=>{null==aD||aD()},rowData:l,columnDefs:e,theme:"ag-theme-quartz",defaultColDef:tu,styles:{lineHeight:"normal"}}),r]},"tableElem_"+s),(null==a?void 0:a.messageId)&&(eE.Wh[i]=o);let c=o;aR||((null==a?void 0:a.header)&&I.push((0,n.jsx)("div",{"data-gramm":"false",className:"border border-[#CCCCCC] px-[14px] pb-[5px] mt-[20px]",style:{borderRadius:"3px 3px 0px 0px"},children:(0,n.jsx)(eE.ZP,{measure:aD,isDark:ey,text:null==a?void 0:a.header,noAnim:!0,bold:!0})},"tableHeader"+s)),I.push(c))}else if("code"===ec){let l=!!a.codeId&&!!(null==a?void 0:a.showExecuteButton)&&!tC&&!lw,r=null==a?void 0:a.artifactMetadata;if(r)lZ&&!nD||(nF||(null==nP?void 0:nP.content)||n6||(null==a?void 0:null===(Y=a.artifactMetadata)||void 0===Y?void 0:Y.type)==="ppt"?ty&&(e5||e3)||I.push((0,n.jsxs)(p.Z,{className:"mt-[8px] w-[260px] flex h-[48px] items-center text-[12px] !bg-bwleftblue/[0.2] text-bwleftblue gap-2 text-[16px]",disabled:e5,noScale:!0,onClick:()=>{a5(a),setTimeout(()=>{n3(null)},100)},children:[(0,n.jsx)(x.G,{icon:(null==a?void 0:null===($=a.artifactMetadata)||void 0===$?void 0:$.type)==="markdown"?t(29444).nf:t(28531).dT}),(0,n.jsx)("span",{className:"whitespace-nowrap text-ellipsis overflow-hidden",children:null==a?void 0:null===(X=a.artifactMetadata)||void 0===X?void 0:X.title}),(e5||e3)&&ty?(0,n.jsx)(x.G,{icon:t(32187).LM,spin:!0}):null]},"artifact_code_btn"+s)):I.push((0,n.jsx)("div",{"data-gramm":"false",className:"max-h-[390px] overflow-hidden border-[1px] border-neutral-300/[0.5] dark:border-neutral-300/[0.1] rounded-xl flex flex-col",onClick:()=>{a5(a),setTimeout(()=>{n3(null)},100)},children:(0,n.jsx)(l1.SU,{segmentInfo:a,artifactMetadata:r,isDark:ey})},"canvas_"+s)));else{let t=null==tO?void 0:null===(q=tO.current)||void 0===q?void 0:q[null==a?void 0:a.codeId];t||(t=()=>ly(null==a?void 0:a.codeId),null==tO||(null==tO.current&&(tO.current={}),tO.current[null==a?void 0:a.codeId]=t));let r=null==tO?void 0:null===(Q=tO.current)||void 0===Q?void 0:Q[(null==a?void 0:a.codeId)+"_stop"];r||(r=()=>tk(null==a?void 0:a.codeId),null==tO||(null==tO.current&&(tO.current={}),tO.current[(null==a?void 0:a.codeId)+"_stop"]=r));let i=(0,n.jsx)(eE.ZP,{measure:aD,segmentData:a,deploymentId:lI,deploymentConversationId:lP,showExecuteButton:l,onExecuteClick:t,isExecuting:!!lw&&lw===(null==a?void 0:a.codeId),isStopExecuting:!!tC&&tC===(null==a?void 0:a.codeId),isDark:ey,text:"\n  ```".concat(null==a?void 0:a.language,"\n  ").concat((null==a?void 0:null===(K=a.segment)||void 0===K?void 0:K.replace(/^ +/gm,e=>"\xa0".repeat(e.length)))||"","\n  ```\n            "),noAnim:!0,onStopExecuteClick:r,indentLevel:null==a?void 0:a.indentLevel},"code_"+s);if(e){let e=(0,n.jsx)("div",{"data-gramm":"false",className:" mt-[20px] ",children:(0,n.jsx)(to,{defaultExpanded:!e$,forceExpanded:!e$,name:e$?"View SQL & Code":"Hide SQL & Code",onExpandedChange:e=>{eX(!e),null==aD||aD()},children:i})},"expander_"+s);aG||I.push(e)}else aG||I.push(i)}}else if("chart"===ec){let e=null==a?void 0:a.segment;i()(e)||(e=[e]);let l=ad-14>723?709:ad-14;null==e||e.some((e,t)=>{let r="chart---".concat(l,"---").concat(null==a?void 0:a.messageId,"---").concat(t,"---").concat(ey?"dark":"light"),i=!!(null==e?void 0:e.data)&&!!(null==e?void 0:e.layout),o=i&&(null==a?void 0:a.messageId)?eE.Wh[r]:null;if(!o&&i){var d,c,u;(null==a?void 0:a.messageId)&&eE.HZ.push({time:lB()(),cacheKey:r});let i=null==a?void 0:null===(u=a.segment)||void 0===u?void 0:null===(c=u[0])||void 0===c?void 0:null===(d=c.layout)||void 0===d?void 0:d.height;null==i?i=460:i+=10,o=(0,n.jsxs)("div",{className:"chart-container",children:[(0,n.jsx)("div",{"data-gramm":"false",className:"border border-[#CCCCCC] px-[14px] pb-[5px] mt-[20px]",style:{borderRadius:"3px 3px 0px 0px"},children:(0,n.jsx)(eE.ZP,{measure:aD,isDark:ey,text:"Data Graph",noAnim:!0,bold:!0},"chartHeader"+s)}),(0,n.jsx)("div",{style:{overflow:"auto",justifyContent:"center",display:"flex",height:i},className:" border border-[#CCCCCC] border-t-0 ",children:(0,n.jsx)(l9,{useResizeHandler:!0,onUpdate:(e,l)=>{setTimeout(()=>{var e;null===(e=aF.current)||void 0===e||e.call(aF)},0)},data:null==e?void 0:e.data,frames:null==e?void 0:e.frames,layout:{...null==e?void 0:e.layout,width:l},responsive:!0})})]},"chartContainer".concat(s,"-").concat(t)),(null==a?void 0:a.messageId)&&(eE.Wh[r]=o)}let m=o;I.push((0,n.jsx)("div",{"data-gramm":"false",className:"mt-[20px]",children:(null==e?void 0:e.data)&&(null==e?void 0:e.layout)?m:null},"chart_"+s+"_"+t))})}else if("agent_flow_button"===ec){let e=!eY||a2;I.push((0,n.jsx)(p.Z,{disabled:e,useAccentColor:!e,className:"mt-[8px] text-[14px]",noScale:!0,onClick:e=>null==lR?void 0:lR(a,null==ef?void 0:ef.runContextId),children:(null==a?void 0:a.label)||"Submit"},"agent_flow_button_"+s))}else if(tp&&(null==a?void 0:a.error))I.push((0,n.jsx)(eE.ZP,{measure:aD,isDark:ey,text:"".concat(lc.O).concat(null==a?void 0:a.error),noAnim:!0},"text_"+s));else if(tp||"form"!==ec){if("video_generation"===ec)I.push((0,n.jsx)("div",{"data-gramm":"false",className:" relative group mt-[8px] not-prose ",children:(0,n.jsx)(tv,{measure:aD,segmentData:a,isMobile:lZ,textwithTableWidth:ad})},"video_generation"+s));else if("code_output"===ec)aG||I.push((0,n.jsx)(eE.ZP,{measure:aD,isDark:ey,text:null==a?void 0:a.segment,noAnim:!0,onClickAnchorTagHandler:a1},"code_output"+s));else if("playground"===ec){if(null==a?void 0:a.isGeneratingPlayground){let e=null==ef?void 0:null===(et=ef.segments)||void 0===et?void 0:et.find(e=>e&&!!e.artifactMetadata);(e5||e3)&&ty&&an&&(l=!0),lZ&&e&&!nD&&I.push((0,n.jsx)("div",{"data-gramm":"false",className:"relative group mt-[8px] p-[4px] flex items-center justify-center rounded-md border-[1px] border-neutral-500 border-dashed text-neutral-500",children:(0,n.jsx)("div",{children:"Playground is visible only on Desktop"})},"mobile_playground"+s))}else(e5||e3)&&(l=!1)}else if("verification"===ec){(null==a?void 0:null===(en=a.segment)||void 0===en?void 0:en.sources)==="None"||(null==a?void 0:null===(ea=a.segment)||void 0===ea?void 0:ea.sources)===void 0||!a.segment.segment||a.segment.segment.includes("```")||/\[source\]\(search_result_[^)]+\)/.test(a.segment.segment)||(a.segment.segment=(a.segment.segment||"")+" [source](search_result_verification_".concat(null==a?void 0:a.messageId,")"));let e=N.Z.getVerificationHighlightColor(null==a?void 0:null===(er=a.segment)||void 0===er?void 0:er.classification);I.push((0,n.jsx)("span",{className:(0,L.cn)("mr-2"),children:(0,n.jsx)(eE.ZP,{measure:aD,isDark:ey,text:a.segment.segment,segmentData:a,data:ef,onClickAnchorTagHandler:a1,noAnim:!0,highlightColor:e,containerWidth:nH},"verification_"+s)},"verification_wrapper_"+s))}else if("agent_creation_wizard"===ec){let e=null==a?void 0:a.templateInfos,l=null!==(es=null==t_?void 0:t_.formResponse)&&void 0!==es?es:null,t="".concat(null==a?void 0:a.messageId,"-").concat(s),r=t?eN.current[t]:null;null==r&&(r=l)&&t&&(eN.current[t]=r);let i=t?eS.current[t]:null;null==i&&t&&(i=a7.bind(null,t),eS.current[t]=i),I.push((0,n.jsx)(o.Fragment,{children:(0,n.jsx)(tl,{templates:e,measure:aD,agentWorkflowNodeId:null==ef?void 0:ef.agentWorkflowNodeId,deploymentId:lI,uniqueKey:(null==ef?void 0:ef.agentWorkflowNodeId)+"",onFormSubmit:re,onFormChange:i,formData:r,orgHost:lU,noSubmit:!0,readOnly:!th&&!eY,auxFlowWithOutSchema:!1,isWorkflowAgent:!1,shouldAllowRename:!1})},"agent_form_"+t))}else if("agent_notification"!==ec||(null==a?void 0:a.txn)!=="create"||lZ){if("enable_ppt_gen_mode"===ec&&eY&&!ay)aN(!0),nS({id:"pptgen",title:"Generate Powerpoint",prompt:"",placeholder:"Describe the Powerpoint to generate...",value:"PPT_GEN"});else if(r()(null==a?void 0:a.segment)&&!l){if(null==a?void 0:a.isGeneratingPlayground)I.push((0,n.jsxs)(p.Z,{className:"mt-[8px] w-full flex h-[48px] items-center text-[12px] !bg-bwleftblue/[0.2] text-bwleftblue justify-center gap-2 text-[16px]",noScale:!0,onClick:()=>{a5(a)},children:[(0,n.jsx)(x.G,{icon:t(28531).dT}),null==a?void 0:null===(ei=a.metadata)||void 0===ei?void 0:ei.title,(e5||e3)&&ty?(0,n.jsx)(x.G,{icon:t(32187).LM,spin:!0}):null]},"artifact_code_btn"+s));else if(ed&&eo&&ef.segments.length-1===s&&(e5||e3)&&ty){if((null==a?void 0:a.segment)==="Generating PowerPoint Presentation"&&nS(null),I.push((0,n.jsx)("div",{"data-gramm":"false",className:"".concat("shimmer dark:shimmerDark pointer-events-none"+(eo?" temp":"")),children:a.segment})),lG&&an&&(!(null==lG?void 0:lG.isRegenerate)||!(null==lG?void 0:lG.isGeneratingImage))){let e=(null==lG?void 0:lG.isGeneratingImage)?null==lG?void 0:lG.genImageBtnText:(null==lG?void 0:lG.isExecutingCode)?null==lG?void 0:lG.executeCodeBtnText:"";I.push((0,n.jsx)(p.Z,{className:"mt-[8px] h-[24px] !p-0 flex items-center text-[12px] text-bwleftblue !bg-transparent hover:!bg-transparent",noScale:!0,onClick:e=>{rv(lG)},children:e},"redo_without_image_gen"+s))}}else!eo&&(null==a?void 0:a.segment)&&(a_(!0),I.push((0,n.jsx)(eE.ZP,{measure:aD,isDark:ey,text:null==a?void 0:a.segment,noAnim:!0,onClickAnchorTagHandler:a1,data:ef},"text_"+s)))}}}else{let{uiSchema:e,jsonSchema:l}=a,t=null!=e?e:null,r=null!=l?l:{},i=null!==(J=null==t_?void 0:t_.formResponse)&&void 0!==J?J:null,o="".concat(null!==(el=null==a?void 0:a.messageId)&&void 0!==el?el:null==ef?void 0:ef.messageId,"-").concat(s),d=o?ek.current[o]:null;null==d?(d={...t||{},...!eY&&!th&&ts||{}},ek.current[o]=d):o&&!lL()(d,t)&&(d=t,o&&(ek.current[o]=d));let c=o?eI.current[o]:null;null==c?(c=r||{},o&&(eI.current[o]=c)):o&&!lL()(c,r)&&(c=r,o&&(eI.current[o]=c));let u=o?eN.current[o]:null;null==u&&(u=i)&&o&&(eN.current[o]=u);let m=o?eS.current[o]:null;null==m&&o&&(m=a7.bind(null,o),eS.current[o]=m);let p=(0,n.jsx)(tt,{measure:aD,agentWorkflowNodeId:null==ef?void 0:ef.agentWorkflowNodeId,inputJsonSchema:c,deploymentId:lI,uniqueKey:(null==ef?void 0:ef.agentWorkflowNodeId)+"",inputUiSchema:d,onFormSubmit:re,onFormChange:m,formData:u,orgHost:lU,noSubmit:!0,readOnly:!th&&!eY,auxFlowWithOutSchema:!1,isWorkflowAgent:!1,shouldAllowRename:!1,appId:l8,doAnimateLeaveEmptySpaceScrollRef:tX,isProcessing:e5||e3},"agent_form_"+o);(null==ef?void 0:ef.isUnsubmittedForm)&&(p=(0,n.jsxs)("details",{className:"".concat(eG().shimmerTextWrapper," font-[300] w-full "),children:[(0,n.jsx)("summary",{className:"cursor-pointer",children:"View form"}),(0,n.jsx)("div",{"data-gramm":"false",className:"mt-[10px]",children:p}),(0,n.jsx)("span",{className:"text-bwleftdate font-medium text-[12px]",children:"Note: This form was not submitted. "})]})),I.push((0,n.jsx)("div",{"data-gramm":"false","data-chat-form":!0,className:"flex my-[10px] !border-[#243c5a] bg-neutral-100 dark:bg-neutral-800 rounded-3xl w-full justify-center items-center p-[24px] relative gap-[30px] ".concat(eY?"":"pointer-events-none"),children:p},"chatllm_teams_form_".concat(s)))}}});let c=null==d?void 0:d.some(e=>(null==e?void 0:e.type)==="enable_ppt_gen_mode");eY&&c?n_(!0):eY&&n_(!1)}else{let e=null,l=null;if(null==ef?void 0:null===(s=ef.text)||void 0===s?void 0:s.includes("data:image/png;")){let t=null==ef?void 0:null===(c=ef.text)||void 0===c?void 0:c.split("data:image/png;");e="data:image/png;".concat(t[1]),l=t[0]}else if(null==ef?void 0:null===(d=ef.text)||void 0===d?void 0:d.includes("ywtNy772PWwXecPtq2-tAQ")){let t=null==ef?void 0:null===(u=ef.text)||void 0===u?void 0:u.split("_ywtNy772PWwXecPtq2-tAQ")[0],n=null==t?void 0:t.split("https://");e="https://".concat(n[1]),l=n[0]}if(e)y=lZ?312:412,I.push((0,n.jsx)(eE.ZP,{measure:aD,isDark:ey,text:l,noAnim:!0},"text_0"));else if(a6){let{ui_schema:e,json_schema:l}=lr.ri.getNodeSchemaAlongWithRuntimeSchema(tN,ef,l6),t=null,a=null,r=null!==(j=null!==(h=null==ef?void 0:ef.messageId)&&void 0!==h?h:null==ef?void 0:null===(v=ef.segments)||void 0===v?void 0:null===(m=v.find(e=>null==e?void 0:e.messageId))||void 0===m?void 0:m.messageId)&&void 0!==j?j:"",s="".concat(r),i=s?ek.current[s]:null;null==i?(t=e,a=l,i={...t||{},...(null==ef?void 0:ef.readOnly)&&!th&&ld||{}},ek.current[s]=i):s&&!lL()(i,e)&&(i=e,s&&(ek.current[s]=i));let o=s?eI.current[s]:null;null==o?(null==a&&null==t&&(a=l),o=a||{},s&&(eI.current[s]=o)):s&&!lL()(o,l)&&(o=l,s&&(eI.current[s]=o));let d=s?eN.current[s]:null;null==d&&(d=ef.formData||ef.keywordArguments)&&s&&(eN.current[s]=d);let c=s?eS.current[s]:null;null==c&&s&&(c=a7.bind(null,s),eS.current[s]=c);let u=(0,n.jsx)(tt,{measure:aD,agentWorkflowNodeId:null==ef?void 0:ef.agentWorkflowNodeId,inputJsonSchema:o,deploymentId:lI,uniqueKey:(null==ef?void 0:ef.agentWorkflowNodeId)+"",inputUiSchema:i,onFormChange:c,onFormSubmit:a9,formData:d,orgHost:lU,noSubmit:!0,readOnly:!!(null==ef?void 0:ef.readOnly)&&!th,auxFlowWithOutSchema:!1,shouldAllowRename:!1,isProcessing:e5||e3,isWorkflowAgentFormInterface:th,doAnimateLeaveEmptySpaceScrollRef:tX,appId:l8},"agent_form_"+s);(null==ef?void 0:ef.isUnsubmittedForm)&&(u=(0,n.jsxs)("details",{className:"".concat(eG().shimmerTextWrapper," font-[300] w-full "),children:[(0,n.jsx)("summary",{className:"cursor-pointer",children:"View form"}),(0,n.jsx)("div",{"data-gramm":"false",className:"mt-[10px]",children:u}),(0,n.jsx)("span",{className:"text-bwleftdate font-medium text-[12px]",children:"Note: This form was not submitted. "})]})),I.push((0,n.jsx)("div",{"data-gramm":"false","data-chat-form":!0,className:"flex my-[10px] !border-[#243c5a] bg-neutral-100 dark:bg-neutral-800 rounded-3xl w-full justify-center items-center p-[12px] relative",children:u},"form_0"))}else I.push((0,n.jsx)(eE.ZP,{measure:aD,isDark:ey,text:(null==ef?void 0:ef.text)||"",noAnim:!0,onClickAnchorTagHandler:a1,data:ef},"text_0"))}}else ng&&(null==k||k.length),I.push((0,n.jsx)("div",{"data-gramm":"false",className:"whitespace-pre-wrap break-words break-word mx-0",children:null!=k?k:""},"user_data"));return(0,n.jsxs)("div",{"data-gramm":"false",className:" prose dark:prose-invert markdown ",style:aa?{}:nD?{width:"390px"}:{width:r()(y)?y:Math.max(10,(null!==(w=null!=y?y:ad)&&void 0!==w?w:0)-12)+"px"},dir:"auto",children:[I,C.length>0&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(l2.Gallery,{images:C,thumbnailImageComponent:e=>{let l={...e.imageProps,segment:e.imageProps.src};return(0,n.jsx)(eO.Z,{isAgent:eK,type:"collage",measure:aD,imgContent:l,alt:"Collage image",isMobile:lZ,actualAvailableWidth:ad,isWorkflowAgent:tp,isCollage:!0})},margin:8,enableImageSelection:!1})})]})},[an,ef,eg,ey,ad,a7,a9,aK,e$,eJ,aR,aG,aq,lG,lU,ad,lw,tC,tN,nr,a2,eY,nU,nH,nz,nP,nD]);(0,o.useEffect)(()=>{(null==al?void 0:al.toString())===(null==rr?void 0:rr.toString())&&at(null)},[rr,al]);let rs=(0,o.useMemo)(()=>{var e;let l=null===(e=(null==ef?void 0:ef.segments)||[])||void 0===e?void 0:e.filter(e=>(null==e?void 0:e.type)==="text");return 1===l.length?l[0]:null},[ef]),ri=(0,lo.NL)(),ro=async e=>{let{text:l}=e;try{let e=await (0,z.aR1)({params:{deploymentConversationId:lP,text:l,messageIndex:(null==ef?void 0:ef.messageIndex)||lu,segmentCounter:null==rs?void 0:rs.counter}});if(!(null==e?void 0:e.success))throw Error((null==e?void 0:e.error)||"Failed to save response");null==ri||ri.invalidateQueries({queryKey:["listConvoOne",lI,lP]})}catch(e){f.Am.error((null==e?void 0:e.message)||"Failed to save response")}},rd=(0,o.useCallback)(()=>{ap([]),av(!1),au([]),null==lv||lv()},[lv]),rc=(0,o.useCallback)(async(e,l)=>{try{let t=(0,lX.i)(e),n=await (0,lW.l)().use(lq.Z).use(l$.Z).use(lH.Z).use(lQ.Z).use(lV.Z,{output:"html"}).use(lY.Z).use(lK.Z).process(t),a=document.createElement("html"),r=document.createElement("head"),s=document.createElement("body"),i=document.createElement("link");i.rel="stylesheet",i.href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css",r.append(i);let o=document.createElement("div");if(o.innerHTML=String(n),s.append(o),a.append(r),a.append(s),l){let e=a.cloneNode(!0),l=e=>{let t=window.getComputedStyle(e),n=Array.from(t).map(e=>"".concat(e,": ").concat(t.getPropertyValue(e),";")).join(" ");e.setAttribute("style",n),Array.from(e.children).forEach(l)};l(e);let t=document.createElement("div");if(t.appendChild(e),document.body.appendChild(t),!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&navigator.clipboard&&window.ClipboardItem)await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([t.innerHTML],{type:"text/html"}),"text/plain":new Blob([t.innerText],{type:"text/plain"})})]);else{let e=document.createRange();e.selectNodeContents(t);let l=window.getSelection();l.removeAllRanges(),l.addRange(e),document.execCommand("copy")}document.body.removeChild(t)}else n4(e)}catch(e){console.error("Error rendering Markdown to HTML:",e)}},[]),ru=(0,o.useCallback)(e=>{var l,a,r,s;let i=null!==(l=null==ef?void 0:ef.text)&&void 0!==l?l:"";if(i||(i=null===(a=ef.segments)||void 0===a?void 0:a.reduce((e,l)=>l.temp||"object"==typeof l.segment||"playground"===l.type||"deep_research"===l.type||"deep_research_activity"===l.type||l.isStreamingDeepResearch?e:"".concat(e).concat("pull_request"===l.type?"Pull request '".concat((null==l?void 0:l.title)||"","' successfully created ").concat(l.url):l.segment),"")),tp){let e="";if((null==ef?void 0:ef.streamedData)&&(e=null==ef?void 0:ef.streamedData),(null==ef?void 0:null===(r=ef.streamedSectionData)||void 0===r?void 0:r.length)>0){let l=null==ef?void 0:null===(s=ef.streamedSectionData)||void 0===s?void 0:s.reduce((e,l)=>(null==l?void 0:l.segment)?"".concat(e).concat(l.segment):e,"");e="".concat(e).concat(l)}i="".concat(e).concat(i)}rc(i,e),f.Am.success("Copied to Clipboard!",{icon:(0,n.jsx)(x.G,{icon:t(66522).Yj,transform:{size:16}})})},[ef,tp]),rm=async()=>{na(null);let e=ef.segments,l=[];for(let t of e)(null==t?void 0:t.type)==="image_url"&&l.push(t.segment);let t=l[0],n=await fetch(t);na(new File([await n.blob()],"image.png",{type:"image/png"})),ne(!0)},rp=async e=>{if(na(null),null==e?void 0:e.isEditRequest){if(!e.imagePromptPublicUrl&&!e.controlImagePublicUrl){f.Am.error("No image to edit");return}let l="";l=e.imagePromptPublicUrl?e.imagePromptPublicUrl:e.controlImagePublicUrl;let t=await fetch(l);na(new File([await t.blob()],"image.png",{type:e.imagePromptMimeType||e.controlImageMimeType||"image/png"}))}nt(!0)},rx=(0,o.useMemo)(()=>null==ef?void 0:ef.docInfos,[ef]),rv=(0,o.useCallback)(e=>{lw?tk(lw):null==eQ||eQ(e)},[eQ,lw]),rh=(null==ef?void 0:null===(a=ef.searchResults)||void 0===a?void 0:a.results)==null||(null==ef?void 0:null===(u=ef.searchResults)||void 0===u?void 0:null===(s=u.results)||void 0===s?void 0:s.length)===0,rf=(0,o.useMemo)(()=>(null==ef?void 0:ef.systemMessage)||null,[ef]),rg=(0,o.useMemo)(()=>(null==ef?void 0:ef.prompt)||null,[ef]),rb=(0,o.useMemo)(()=>{if((null==ef?void 0:ef.debugInfo)!=null&&i()(null==ef?void 0:ef.debugInfo)){let e=null==ef?void 0:ef.debugInfo,l=[];return null==e||e.some((e,a)=>{if(null==e)return;let s=Object.keys(null!=e?e:{});if(0===s.length)return;let i=(null==e?void 0:e.name)||"Debug Line "+(a+1);l.push((0,n.jsxs)("div",{"data-gramm":"false",className:" text-[14px] font-mono whitespace-pre my-[7px] border-t-[1px] border-t-darkcolor/[0.1] pt-[7px] ",children:[(0,n.jsx)("div",{className:" font-semibold ",children:i}),(0,n.jsx)("div",{"data-gramm":"false",className:" ml-[5px] ",children:null==s?void 0:s.map((l,s)=>{if("name"===l)return null;let o=null==e?void 0:e[l];r()(o)||(o=JSON.stringify(o,null,2));let d=""+i+"-"+l;return(0,n.jsxs)("div",{className:" whitespace-normal ",children:[(0,n.jsxs)("div",{"data-gramm":"false",onClick:e=>{nY(e=>{let l=!!(null==e?void 0:e[d]);return(e={...null!=e?e:{}})[d]=!l,e})},className:" border-[1px] border-darkcolor/[0.2] rounded opacity-70 text-[12px] bg-darkcolor/[0.1] py-[4px] px-[8px] w-full flex items-center !cursor-pointer ",children:[(0,n.jsx)("span",{className:" w-[20px] flex items-center justify-center ",children:(0,n.jsx)(x.G,{icon:(null==nK?void 0:nK[d])?t(46058).pt:t(59808)._t,transform:{size:16}})}),(0,n.jsxs)("span",{children:[l,":"]})]}),(null==nK?void 0:nK[d])&&(0,n.jsx)("pre",{className:"whitespace-pre-wrap overflow-x-auto",children:o})]},"k"+a+"-"+s)})})]},"li"+a))}),l}return null},[ef,nK]),rj=null==ef?void 0:null===(m=ef.segments)||void 0===m?void 0:m.some(e=>"verification"===e.type),rw=(null==ef?void 0:ef.verificationSummary)?null==ef?void 0:null===(j=ef.verificationSummary)||void 0===j?void 0:j.split(". ").filter(e=>""!==e.trim()&&!e.trim().startsWith("0")):[],ry=null==ef?void 0:null===(w=ef.segments)||void 0===w?void 0:w.find(e=>"image_url"===e.type),rN=(0,o.useMemo)(()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),[]),[rk,rC]=(0,o.useState)(null),rI=e=>{rC(e),(0,z.Th3)({computerId:ny.computerId}).then(l=>{var t,n,a,r,s;if(l.success){let t=null==l?void 0:null===(a=l.result)||void 0===a?void 0:a.endpoint;try{window.open("".concat(t,"/downloadComputerFile?organizationId=").concat(null==ak?void 0:null===(s=ak.result)||void 0===s?void 0:null===(r=s.organization)||void 0===r?void 0:r.organizationId,"&computerId=").concat(null==ny?void 0:ny.computerId,"&filePath=").concat(e))}catch(e){f.Am.error(e?"".concat(e):N.Z.errorDefault)}}else f.Am.error(null!==(n=null==l?void 0:null===(t=l.result)||void 0===t?void 0:t.error)&&void 0!==n?n:N.Z.errorDefault);rC(null)}).catch(e=>{f.Am.error(e?"".concat(e):N.Z.errorDefault),rC(null)})},rS=(0,o.useMemo)(()=>{var e,l;return tJ&&(null==tJ?void 0:null===(e=tJ.result)||void 0===e?void 0:e.length)&&(null==nA?void 0:nA.externalApplicationId)&&(null==nA?void 0:nA.agentId)&&(null==tJ?void 0:null===(l=tJ.result)||void 0===l?void 0:l.find(e=>(null==e?void 0:e.externalApplicationId)===(null==nA?void 0:nA.externalApplicationId)))||null},[tJ,nA]);return(0,n.jsxs)(v.E.div,{ref:ar,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onHoverStart:e=>{t3(!0)},onHoverEnd:e=>{t3(!1)},"data-msg-index":""+(null!=lx?lx:""),"data-msg-isbot":an?"1":"0","data-msg-last-prompt":tw?"1":"0",className:" ".concat(ng&&an&&(!eY||eY&&!e5&&!e3)?"min-h-[56vh]":" min-h-[0px] "),children:[(0,n.jsxs)("div",{ref:aP,style:{marginRight:ng||nC||nF||(null==nP?void 0:nP.content)?0:eH+(nG&&null!=eW?eW:0)+"px"},className:"text-[16px] text-darkcolor py-[2px] transition-all duration-300 relative"+(eg?" !py-0 ":" xl:pr-[1px] "),children:[an&&!lZ&&ac.length>0?(0,n.jsx)("div",{className:"".concat(tH?eG().chatContent:" "," ").concat(tH&&!nu?eG().chatContentInfo:" "," ")+tm+" group relative mx-auto flex gap-[9px] rounded-xl items-center"+(an?" py-[8px] ":"  ")+(nG?"ml-[158px] [@media(max-width:1728px)]:ml-[208px] [@media(min-width:1729px)]:ml-auto":"")+(ng||nC?" custom-lg:px-[10px] custom-lg:!m-[8px] custom-lg:!w-7/12 custom-lg:!flex-col custom-lg:!items-start":"")+(tK?tc:"")+(nD?"!px-[10px]":""),children:(0,n.jsx)(lm,{searchResults:ac,setShowMoreSources:av})}):null,(0,n.jsxs)("div",{className:(0,L.cn)("".concat(tH?eG().chatContent:" "," ").concat(tH&&!nu?eG().chatContentInfo:" "," "),tm,"group relative  mx-auto flex gap-[9px] rounded-xl",{"my-2.5":!eg&&!eY},{"mt-2.5":!eg&&eY},{"flex-row-reverse":aa},an?" py-3 ":"  ",nG?"ml-[158px] [@media(max-width:1728px)]:ml-[208px] [@media(min-width:1729px)]:ml-auto":"",ng&&!lP?" [@media(max-width:1250px)]: !max-w-full !px-0 ":"",ng||nC?" custom-lg:px-[10px] custom-lg:!m-[8px] ".concat(eg?"":" custom-lg:!w-7/12 "," "):"",tK?tc:"",nD?"!px-[10px]":"",{"!mx-auto !px-0 !my-2 !max-w-full":!tp&&(!lP||tR)}),children:[aV&&(0,n.jsx)("div",{className:" absolute left-full top-1/2 -translate-y-1/2 ml-[4px] opacity-90 text-darkcolor flex flex-col gap-[4px] ",children:(0,n.jsx)(x.G,{icon:t(97762).I4,transform:{size:24}})}),!eg&&!(null==ad||0===ad)&&(0,n.jsx)(td,{botIconUrl:ls,isBot:an,data:ef,isVisible:!1!==tA,isWrite:eg,isCopilot:tb,isSearchLLM:ng,isTaskConversation:tW}),(0,n.jsxs)("div",{className:"flex-1 relative",children:[!eg&&!(null==ad||0===ad)&&!1!==tA&&(an||!an&&!ng)&&(0,n.jsx)(n.Fragment,{children:an&&(0,n.jsxs)("div",{className:"absolute text-[#999] -top-[18px] font-medium !text-[12px] ml-0.5 flex items-center gap-1",children:[tV&&(0,n.jsxs)("span",{className:"flex items-center text-xs gap-0.5",children:[(0,n.jsxs)("span",{className:"flex items-center text-xs text-gray-500 gap-0.5",children:[(0,n.jsx)(x.G,{icon:t(23804).mD,transform:{size:14,y:-1}}),tV]}),(0,n.jsx)(x.G,{icon:t(95590).eF,transform:{size:14}})]}),tW?(0,n.jsxs)("span",{children:["Task run ",(null==ef?void 0:ef.timestamp)?"at ".concat(lB()(null==ef?void 0:ef.timestamp).format("h:mm a, Do MMM YYYY")):""]}):(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[nq?"AppLLM Engineer":tb?"AI Engineer":(null==ef?void 0:ef.llmDisplayName)||e4||"ChatLLM",aH]})]})}),eg?null:(0,n.jsx)("div",{className:(0,L.cn)("flex",{"justify-end":aa}),children:(0,n.jsx)("div",{className:(0,L.cn)("relative min-w-12",{"max-w-[75%]":aa,"flex flex-col items-end":aa&&!(t8||a8),"inline-block":aa&&(t8||a8),"flex-grow":!aa,"w-full":t8||a8}),children:t8?(0,n.jsxs)(n.Fragment,{children:[tj&&(0,n.jsx)(li,{defaultText:(null==ef?void 0:ef.text)||"",onSave:async e=>{ns(e.text),lj(e),t7(!1)},onClose:()=>t7(!1)}),ty&&rs?(0,n.jsx)(li,{defaultText:(null==rs?void 0:rs.segment)||"",onSave:ro,onClose:()=>t7(!1),action:"Save",className:"mt-2.5"}):null]}):(0,n.jsxs)(n.Fragment,{children:[((null==rx?void 0:rx.length)>0||(null==ef?void 0:null===(y=ef.attachments)||void 0===y?void 0:y.length)>0&&!aU.current)&&(0,n.jsxs)("div",{className:"flex flex-wrap w-full mb-[10px] ".concat(aa?"justify-end gap-2":""),children:[null==rx?void 0:rx.map((e,l)=>{var a,r,s,i,o,d;let c=(null==e?void 0:e.documentUploadId)||(null==e?void 0:e.document_upload_id);if(!((null==e?void 0:e.mimeType)==="text/csv"&&(null===(r=e.filename)||void 0===r?void 0:null===(a=r.toLowerCase())||void 0===a?void 0:a.includes(".csv")))||lZ)return(0,n.jsx)(b.Z,{docId:null!==(o=null==e?void 0:e.docId)&&void 0!==o?o:null==e?void 0:e.doc_id,filename:null==e?void 0:e.filename,fileType:null!==(d=null==e?void 0:e.mimeType)&&void 0!==d?d:null==e?void 0:e.mime_type,isDocClickable:null==e?void 0:e.isClickable,isShowThumbnail:!0},"".concat(null==e?void 0:e.docId,"-").concat(l));{let a=null==nz?void 0:nz[c];if((null==nP?void 0:nP.content)||n6||nF)return(0,n.jsxs)(p.Z,{className:"mt-[8px] w-[260px] flex h-[48px] items-center text-[12px] !bg-bwleftblue/[0.2] text-bwleftblue gap-2 text-[16px]",disabled:e5,noScale:!0,onClick:()=>{a4({content:a.content,metadata:{filename:e.filename},attachmentId:c})},children:[(0,n.jsx)(x.G,{icon:t(41859).WF}),(0,n.jsx)("span",{className:"whitespace-nowrap text-ellipsis overflow-hidden",children:e.filename}),(e5||e3)&&ty?(0,n.jsx)(x.G,{icon:t(32187).LM,spin:!0}):null]},"attachs_"+l);if(a)return(null==a?void 0:a.content)?(0,n.jsx)("div",{"data-gramm":"false",className:"h-[390px] overflow-auto border-[1px] border-neutral-300 rounded-xl w-full overflow-y-hidden w-[588px]",onClick:()=>{a4({content:a.content,metadata:{filename:e.filename},attachmentId:c})},children:(0,n.jsx)(l7,{isContentLoading:!!(null==a?void 0:a.isLoading),content:null==a?void 0:a.content,isDark:ey,metadata:{filename:e.filename},deploymentId:lI,attachmentId:c})},"attachs_"+l):(0,n.jsx)(b.Z,{docId:null!==(s=null==e?void 0:e.docId)&&void 0!==s?s:null==e?void 0:e.doc_id,filename:null==e?void 0:e.filename,fileType:null!==(i=null==e?void 0:e.mimeType)&&void 0!==i?i:null==e?void 0:e.mime_type,isDocClickable:null==e?void 0:e.isClickable,isShowThumbnail:!0},"".concat(null==e?void 0:e.docId,"-").concat(l))}}),!aU.current&&(null==ef?void 0:null===(k=ef.attachments)||void 0===k?void 0:k.map((e,l)=>{var t,a,r;return(null==ef?void 0:null===(t=ef.segments)||void 0===t?void 0:t.length)>0&&(null==e?void 0:e.attachmentId)&&(null==ef?void 0:null===(a=ef.segments)||void 0===a?void 0:a.some(l=>{var t;return(null==l?void 0:null===(t=l.attachmentInfo)||void 0===t?void 0:t.attachmentId)===(null==e?void 0:e.attachmentId)}))?null:aO?void 0:(0,n.jsx)(b.Z,{filename:(null==e?void 0:e.filename)||null,fileType:null==e?void 0:null===(r=e.mimeType)||void 0===r?void 0:r.toUpperCase(),previewString:(null==e?void 0:e.contents)||null,noView:N.Z.isNullOrEmpty(null==e?void 0:e.contents),isPreparingDownload:aq===(null==e?void 0:e.attachmentId),onClickDownload:(null==e?void 0:e.contents)!=null?null:()=>{aK(null==e?void 0:e.attachmentId,null==e?void 0:e.filename)},isAttachment:!0},"".concat(null==e?void 0:e.attachmentId,"-").concat(l))}))]}),(0,n.jsx)("div",{className:"relative ml-[2px] h-[0px]",children:(0,n.jsx)("div",{className:"relative border-[1px] border-transparent",ref:ai},"a"+nG)}),(null!=aB||null!=rr)&&(0,n.jsxs)("div",{className:(0,L.cn)("relative ml-0.5",{"-mt-[3px]":aa}),children:[(0,n.jsx)("div",{className:(0,L.cn)("absolute z-10  -top-4 flex items-center right-6 justify-end",{"flex-row-reverse -left-6 top-3":aa}),children:tp||e5||t8||nq||tb||!tj&&(!ty||!rs)||nw||aW||nb&&!tj?null:(0,n.jsx)(g.Z,{title:tj?"Edit Prompt":"Edit Response",children:(0,n.jsx)("div",{className:"cursor-pointer hidden group-hover:block text-bwleftblue p-1 rounded-md hover:bg-bwleftblue/10 transition-all leading-none dark:!border-darkcolor/[0.1] dark:!text-darkcolor/[0.6] dark:!bg-darkcolor/[0.05] dark:hover:!bg-darkcolor/[0.1]",onClick:()=>t7(!0),children:(0,n.jsx)(x.G,{icon:t(58243).Iw,transform:{size:13}})})})}),null!=aB?(0,n.jsx)("span",{children:aB},"textMsgTables_"+lN):aa?(0,n.jsx)("div",{className:"px-5 pb-2.5 pt-2 bg-neutral-100 dark:bg-[rgb(48,48,48)] rounded-3xl",children:(null==ef?void 0:ef.repaintedImage)?(0,n.jsxs)("div",{className:"flex items-center gap-2 ".concat(tj?"relative z-10":""),children:[(0,n.jsx)("img",{src:null==ef?void 0:null===(S=ef.repaintedImage)||void 0===S?void 0:null===(I=S.segments)||void 0===I?void 0:null===(C=I[1])||void 0===C?void 0:C.segment,alt:"image",className:"w-[24px] h-[24px] rounded-sm cursor-pointer hover:opacity-80 object-cover",onClick:()=>{var e,l,t;return ti(null==ef?void 0:null===(t=ef.repaintedImage)||void 0===t?void 0:null===(l=t.segments)||void 0===l?void 0:null===(e=l[1])||void 0===e?void 0:e.segment)}}),rr]}):tj&&n6&&(null==ae?void 0:ae.segment)?(0,n.jsxs)("div",{className:"flex items-center gap-2 ".concat(tj?"relative z-10":""),children:[(0,n.jsx)("img",{src:null==ae?void 0:ae.segment,alt:"image",className:"w-[24px] h-[24px] rounded-sm cursor-pointer hover:opacity-80",onClick:()=>ti(null==n6?void 0:n6.segment)}),rr]}):al&&tj?al:rr},"textMsg_"+lN):(0,n.jsx)("div",{children:rr},"textMsg_"+lN)]})]})})}),!th&&eg&&(0,n.jsx)(e_,{lastBotMessageImageId:t0,isTaskConversation:tW,presetFileList:tL,onChangeHeight:eB,onSend:eb,onStop:rv,dataChat:l5,forceHideAttachFile:(null==lS?void 0:lS[z.mMf])==="1",inputQuestion:nQ||nq?nQ?"Describe what you want to build. Be pretty detailed...":nq?"How can I help you?":"":ng?(null==l5?void 0:null===(_=l5.result)||void 0===_?void 0:null===(A=_.history)||void 0===A?void 0:A.length)>0?"Ask Follow-up Question":"Ask Anything":(null==lS?void 0:lS[z.HSx])||null,warningMsgS:null!==(ev=null==lS?void 0:lS[z.JEt])&&void 0!==ev?ev:null,disabled:lC,onUploadDoc:ej,onRemoveFileByID:ew,isAgent:eK,isBinaryEnable:e1,supportsBinaryUpload:e2,isProcessing:e5,setIsProcessing:e7,setIsRegenerateProcessing:e8,isProcessingUpload:e6,setIsProcessingUpload:e9,deploymentConversationId:lP,isMobile:lZ,appId:l8,deploymentId:lI,conversationWarning:tx,isMatrixAgent:tI,value:tP,isSelfServe:lF,disableLLMSwitch:tG,isCentredChat:tR,humanizeInstructions:lf,textareaRef:t$,hasThinkingOption:tY}),(e5||e3)&&th&&eY&&(0,n.jsx)("div",{className:"text-center py-[10px] flex justify-center items-center",children:(0,n.jsx)(eP.Z,{size:19,isDraw:!0,isDark:ey})}),(0,n.jsxs)("div",{className:"flex justify-start items-center",children:[rS&&rt&&(0,n.jsx)(p.Z,{className:"mt-[8px] h-[48px] !bg-bwleftblue/[0.2] text-bwleftblue text-[16px] mr-[4px]",onClick:()=>{window.open("/chatllm/?appId=".concat(null==rS?void 0:rS.externalApplicationId),"_blank")},children:"View Agent"}),rl&&(0,n.jsx)(p.Z,{className:"mt-[8px] h-[48px] !bg-bwleftblue/[0.2] text-bwleftblue text-[16px]",onClick:()=>{nk(!nN),nM(!0)},children:"Test and Edit Agent"})]})]})]}),t1&&(null==aE?void 0:aE.length)>0&&an&&(!e5&&!e6&&!e3||!eY)&&(0,n.jsx)("div",{className:"".concat(tH?eG().chatContent:" "," ").concat(tH&&!nu?eG().chatContentInfo:" "," ")+tm+" my-4 text-[12px] mx-auto items-start justify-start flex gap-[22px] rounded-xl "+(nG?"ml-[158px] [@media(max-width:1728px)]:ml-[208px] [@media(min-width:1729px)]:ml-auto":"")+((ng||nC)&&an?" custom-lg:px-[10px] custom-lg:!m-[8px] custom-lg:!w-7/12":"")+(nD?" !px-[10px] ":""),children:(0,n.jsxs)("div",{className:" ml-[15px] flex flex-wrap gap-[10px] mt-[2px] transition-all duration-300 items-center mr-[5px]",children:["Sources",aE.slice(0,3).map((e,l)=>{var a,r,s,i,o;return(0,n.jsxs)("div",{className:(0,lT.m6)(" cursor-pointer flex gap-1 items-center justify-center w-[105px] h-[29px] px-2 border-[1px] rounded-full dark:border-white/30  border-black/[0.1]  shadow dark:shadow-white/20  shadow-black/15 shadow-b-2 hover:bg-black/[0.05] hover:dark:bg-white/20"),onClick:()=>a1(l+1),children:[(null==e?void 0:e.source_connector_type)&&lD.Pw.includes(null==e?void 0:e.source_connector_type)?(0,n.jsx)("img",{alt:null==e?void 0:e.source_connector_type,src:"/chatllm/sourcesConnectorLogo/".concat(null==e?void 0:e.source_connector_type,".png"),className:"w-[15px] h-[15px]"}):(0,n.jsx)(x.G,{icon:t(20878).gM,transform:{size:15}}),(0,n.jsxs)("p",{className:"font-normal text-black dark:text-white text-[10px] truncate",children:[(null==e?void 0:e.title)||(null==e?void 0:null===(a=e.metadata)||void 0===a?void 0:a.Filename),(null==e?void 0:null===(s=e.attributes)||void 0===s?void 0:null===(r=s.team)||void 0===r?void 0:r.value)&&(0,n.jsxs)("span",{children:["#",null===(o=e.attributes)||void 0===o?void 0:null===(i=o.team)||void 0===i?void 0:i.value]})]})]},e.title+l)}),aE.length>3&&(0,n.jsx)("div",{className:(0,lT.m6)("cursor-pointer pl-1 hover:underline"),onClick:e=>{aY(e)},children:(0,n.jsxs)("p",{className:"font-normal text-blue-600 dark:text-white mt-[2px]",children:["See +",aE.length-3," More"]})})]})}),!eg&&null!=ln&&null!=lu&&(!N.Z.isNullOrEmpty(null==ef?void 0:ef.text)||(null==ef?void 0:null===(P=ef.segments)||void 0===P?void 0:P.length)>0)&&(null==ef?void 0:ef.text)!==" "&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"".concat(tH?eG().chatContent:" "," ").concat(tH&&!nu?eG().chatContentInfo:" "," ")+tm+(eY&&!nj?" h-[64px] ":"")+" text-bwleftblue mx-auto items-start justify-start flex gap-[22px] rounded-xl "+(nG?"ml-[158px] [@media(max-width:1728px)]:ml-[208px] [@media(min-width:1729px)]:ml-auto":"")+((ng||nC)&&an?" custom-lg:px-[10px] custom-lg:!m-[8px] custom-lg:!w-7/12":"")+(tK?tc:"")+(nD?"!px-[10px]":""),children:[!an&&!ng&&(0,n.jsx)("div",{className:" mt-[17px] "}),an&&(0,n.jsxs)("div",{className:" ml-[44px] flex gap-1 mt-[2px] transition-all duration-300 w-full items-center mr-[5px] "+(an?" pt-[2px] ":"  ")+(!eY&&!t6||!an||(e5||e6||e3)&&eY?" invisible ":" visible "),children:[!nb&&!aW&&!a0&&!nq&&(0,n.jsxs)(F.h_,{children:[(0,n.jsx)(F.$F,{asChild:!0,children:(0,n.jsx)("div",{className:(0,L.cn)("rounded cursor-pointer transition-all size-[26px] flex items-center justify-center","text-bwleftblue dark:text-darkcolor/60","border border-transparent hover:border-bwleftblue/25 hover:dark:border-darkcolor/10","hover:bg-bwleftblue/20 dark:hover:bg-darkcolor/[0.1]"),children:(0,n.jsx)(x.G,{icon:t(71133).Yj,transform:{size:16}})})}),(0,n.jsxs)(F.AW,{children:[!rN&&(0,n.jsxs)(F.Xi,{className:"flex items-center gap-1.5 cursor-pointer",onClick:()=>ru(!0),children:[(0,n.jsx)(x.G,{icon:t(11514).cC,transform:{size:16}}),(0,n.jsx)("div",{className:"text-sm",children:"Copy rendered response"})]}),(0,n.jsxs)(F.Xi,{className:"flex items-center gap-2.5 cursor-pointer",onClick:()=>ru(!1),children:[(0,n.jsx)(x.G,{icon:t(65470).K5,transform:{size:16}}),(0,n.jsx)("div",{className:"text-sm",children:"Copy raw response"})]})]})]}),aJ&&eY&&!tb&&!n7&&a$&&!nq&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Z,{title:"Edit Image",children:(0,n.jsx)("span",{children:(0,n.jsx)("div",{onClick:()=>{ry?(nm(""),n3(ry),nI(null),nS(null),nE(null),n9(!0),n8(!1),nM(!0),setTimeout(()=>{n9(!0)},100)):rm()},className:(0,L.cn)("px-1.5 rounded cursor-pointer transition-all h-[26px] flex items-center","text-bwleftblue dark:text-darkcolor/60","border border-transparent hover:border-bwleftblue/25 hover:dark:border-darkcolor/10","hover:bg-bwleftblue/20 dark:hover:bg-darkcolor/[0.1]"),children:(0,n.jsx)(x.G,{icon:t(58243).Iw,transform:{size:14,y:.5}})})})}),t9&&(0,n.jsx)(eC.Z,{imageGenParams:{prompt:(null==aJ?void 0:aJ.prompt)||"",model:"",fileEditingDisabled:!0,isEditRequest:!0},onSend:e=>{if(null==eb)return;if(e6){f.Am.error("Uploading...");return}let l=(null==e?void 0:e.prompt)?null==e?void 0:e.prompt:null;if(!l){f.Am.error("Text can't be empty!");return}null==eb||eb(l,null,null,()=>{e7(!0)},null,null,(null==e?void 0:e.prompt)?e:null).then(e=>{e7(!1),e&&(setTimeout(()=>{var e,l;null===(l=t$.current)||void 0===l||null===(e=l.focus)||void 0===e||e.call(l)},100),nZ({humanizeInstructions:{},saveHumanizeInstructionsToConversation:!0}))}).catch(e=>{e7(!1)})},onClose:()=>ne(!1),deploymentId:lI,file:nn})]}),!nb&&eY&&ll&&!nq&&!n1&&(!nG||"showArtifact"===nF||ng||nC||(null==nP?void 0:nP.content))&&!aW&&!tp&&(0,n.jsxs)(n.Fragment,{children:[tg||a$||a0||tb||!lF||!aA?null:(0,n.jsx)(la,{messageIndex:(null==ef?void 0:ef.messageIndex)||lu,deploymentConversationId:lP}),!lt||tW||a$||a0||tb||aX||!aA?null:(0,n.jsx)(J,{humanizeInstructions:lf,onHumanize:lg}),!tb&&!a0&&!tW&&!aX&&!(aJ&&(null==aJ?void 0:aJ.mask))&&(0,n.jsx)(n.Fragment,{children:aJ?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Z,{title:"Regenerate Image",children:(0,n.jsx)("span",{children:(0,n.jsx)("div",{onClick:()=>rp(aJ),className:(0,L.cn)("px-1.5 rounded cursor-pointer transition-all h-[26px] flex items-center","text-bwleftblue dark:text-darkcolor/60","border border-transparent hover:border-bwleftblue/25 hover:dark:border-darkcolor/10","hover:bg-bwleftblue/20 dark:hover:bg-darkcolor/[0.1]"),children:(0,n.jsx)(x.G,{icon:t(10927).p,transform:{size:14,y:.5}})})})}),nl&&(0,n.jsx)(eC.Z,{imageGenParams:{...aJ,isRegenerate:!0},onSend:e=>{var l,t;if(null==eb)return;if(!(null==e?void 0:null===(l=e.prompt)||void 0===l?void 0:l.trim())){f.Am.error("Text can't be empty!");return}let n=null==e?void 0:null===(t=e.prompt)||void 0===t?void 0:t.trim();at(n),null==lv||lv(null,null,n,e)},onClose:()=>nt(!1),deploymentId:lI,file:(null==aJ?void 0:aJ.isEditRequest)?nn:void 0})]}):(0,n.jsx)(g.Z,{title:"Regenerate",children:(0,n.jsx)("span",{children:(0,n.jsx)("div",{onClick:rd,className:(0,L.cn)("px-1.5 rounded cursor-pointer transition-all h-[26px] flex items-center","text-bwleftblue dark:text-darkcolor/60","border border-transparent hover:border-bwleftblue/25 hover:dark:border-darkcolor/10","hover:bg-bwleftblue/20 dark:hover:bg-darkcolor/[0.1]"),children:(0,n.jsx)(x.G,{icon:t(10927).p,transform:{size:14,y:.5}})})})})})]}),!nb&&!lF&&!le&&!aW&&!th&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ez.Z,{zIndex:"z-[13]",onClickOk:ln.bind(null,!0,nJ,lu,n$),onPreClick:()=>{(null==ef?void 0:ef.isUseful)===!0&&ef.feedback?n0(ef.feedback):n0(""),nX(null)},okText:"Save",title:"Additional Feedback".concat((null==lS?void 0:lS[z.sWo])&&(null==lS?void 0:null===(T=lS[z.uT8])||void 0===T?void 0:null===(E=T.split(z.ump))||void 0===E?void 0:E.length)>0?"":" (optional)"),content:(0,n.jsxs)("div",{className:" my-[20px] ",children:[(null==lS?void 0:null===(Z=lS[z.uT8])||void 0===Z?void 0:null===(D=Z.split(z.ump))||void 0===D?void 0:D.length)>0&&(0,n.jsx)("div",{className:" mb-[10px] ",children:(0,n.jsx)(eF.Z,{items:null==lS?void 0:null===(R=lS[z.uT8])||void 0===R?void 0:null===(G=R.split(z.ump))||void 0===G?void 0:G.map((e,l)=>({label:e,value:e})),value:n$,onChange:e=>{nX(e)}})}),(0,n.jsx)("textarea",{className:" w-full bg-darkcoloro px-[6px] py-[4px] text-darkcolor text-[13px] rounded !outline-none border-[1px] border-darkcolor/[0.2] ",autoFocus:!0,value:nJ,onChange:e=>{n0(e.target.value||"")}})]}),children:(0,n.jsx)(g.Z,{title:"Feedback",children:(0,n.jsx)("span",{children:(0,n.jsx)("div",{className:(0,L.cn)("px-1.5 rounded cursor-pointer transition-all h-[26px] flex items-center","text-bwleftblue dark:text-darkcolor/60","border border-transparent hover:border-bwleftblue/25 hover:dark:border-darkcolor/10","hover:bg-bwleftblue/20 dark:hover:bg-darkcolor/[0.1]"),children:(null==ef?void 0:ef.isUseful)===!0?(0,n.jsx)(x.G,{icon:t(4185).u8,transform:{size:16}}):(0,n.jsx)(x.G,{icon:t(62059).u8,transform:{size:16}})})})})}),(0,n.jsx)(ez.Z,{zIndex:"z-[13]",onClickOk:ln.bind(null,!1,nJ,lu,n$),onPreClick:()=>{(null==ef?void 0:ef.isUseful)===!1&&ef.feedback?n0(ef.feedback):n0(""),nX(null)},okText:"Save",title:"Additional Feedback".concat((null==lS?void 0:lS[z.sWo])&&(null==lS?void 0:null===(U=lS[z.lYl])||void 0===U?void 0:null===(O=U.split(z.ump))||void 0===O?void 0:O.length)>0?"":" (optional)"),content:(0,n.jsxs)("div",{className:" my-[20px] ",children:[(null==lS?void 0:null===(H=lS[z.lYl])||void 0===H?void 0:null===(B=H.split(z.ump))||void 0===B?void 0:B.length)>0&&(0,n.jsx)("div",{className:" mb-[10px] ",children:(0,n.jsx)(eF.Z,{items:null==lS?void 0:null===(W=lS[z.lYl])||void 0===W?void 0:null===(V=W.split(z.ump))||void 0===V?void 0:V.map((e,l)=>({label:e,value:e})),value:n$,onChange:e=>{nX(e)}})}),(0,n.jsx)("textarea",{className:" w-full bg-darkcoloro px-[6px] py-[4px] text-darkcolor text-[13px] rounded !outline-none border-[1px] border-darkcolor/[0.2] ",autoFocus:!0,value:nJ,onChange:e=>{n0(e.target.value||"")}})]}),children:(0,n.jsx)(g.Z,{title:"Feedback",children:(0,n.jsx)("span",{children:(0,n.jsx)("div",{className:(0,L.cn)("px-1.5 rounded cursor-pointer transition-all h-[26px] flex items-center","text-bwleftblue dark:text-darkcolor/60","border border-transparent hover:border-bwleftblue/25 hover:dark:border-darkcolor/10","hover:bg-bwleftblue/20 dark:hover:bg-darkcolor/[0.1]"),children:(null==ef?void 0:ef.isUseful)===!1?(0,n.jsx)(x.G,{icon:t(86427).b,transform:{size:16}}):(0,n.jsx)(x.G,{icon:t(18443).b,transform:{size:16}})})})})})]}),!t1&&an&&(null==ef?void 0:ef.uiRequestId)==null&&!rh&&!aW&&!(null==lS?void 0:lS[z.yYE])&&!lF&&(0,n.jsxs)("div",{onClick:e=>{tZ&&(null==tU||tU(0)),aY(e)},className:(0,L.cn)("px-1.5 rounded cursor-pointer transition-all h-[26px] flex items-center","text-bwleftblue dark:text-darkcolor/60","border border-transparent hover:border-bwleftblue/25 hover:dark:border-darkcolor/10","hover:bg-bwleftblue/20 dark:hover:bg-darkcolor/[0.1]"),children:[(0,n.jsx)(x.G,{icon:t(96543).Ew,transform:{size:15,y:-1}}),(0,n.jsx)("span",{className:"ml-0.5 text-sm",children:"Sources"})]}),!lF&&!le&&!aW&&(0,n.jsxs)(n.Fragment,{children:[((null==rf?void 0:rf.length)>0||(null==rg?void 0:rg.length)>0)&&!rb&&lk&&(0,n.jsx)(ez.Z,{cancelText:"Ok",hideOkButton:!0,content:(0,n.jsxs)("div",{className:" sm:w-[900px] h-[70vh] flex flex-col",children:[(0,n.jsxs)("div",{className:" flex-1 flex flex-col ",children:[(0,n.jsx)("div",{className:" font-semibold my-[3px] uppercase mt-[13px] ",children:"System Prompt"}),(0,n.jsx)("div",{className:" text-darkcolor mb-[20px] py-[5px] px-[10px] border-[1px] border-darkcolor/[0.1] rounded flex-1 relative ",children:(0,n.jsx)(eL.Z,{onlyVertical:!0,children:(0,n.jsx)("div",{className:" p-[10px] ",children:null==rf?void 0:null===(q=rf.split("\n"))||void 0===q?void 0:q.map((e,l)=>(0,n.jsx)("div",{children:e},"line"+l))})})})]}),(0,n.jsxs)("div",{className:" flex-1 flex flex-col ",children:[(0,n.jsx)("div",{className:" font-semibold my-[3px] uppercase ",children:"User Prompt"}),(0,n.jsx)("div",{className:" text-darkcolor mb-[20px] py-[5px] px-[10px] border-[1px] border-darkcolor/[0.1] rounded flex-1 relative ",children:(0,n.jsx)(eL.Z,{onlyVertical:!0,children:(0,n.jsx)("div",{className:" p-[10px] ",children:null==rg?void 0:null===(Q=rg.split("\n"))||void 0===Q?void 0:Q.map((e,l)=>(0,n.jsx)("div",{children:e},"line"+l))})})})]})]}),children:(0,n.jsx)(g.Z,{title:"Debug Info",children:(0,n.jsx)("span",{children:(0,n.jsx)("div",{className:(0,L.cn)("px-1.5 rounded cursor-pointer transition-all h-[26px] flex items-center","text-bwleftblue dark:text-darkcolor/60","border border-transparent hover:border-bwleftblue/25 hover:dark:border-darkcolor/10","hover:bg-bwleftblue/20 dark:hover:bg-darkcolor/[0.1]"),children:(0,n.jsx)(x.G,{icon:t(89137).QL,transform:{size:16}})})})})}),!tS&&lh&&(null==aE?void 0:aE.length)>0&&an&&(0,n.jsx)(g.Z,{title:tD?"Verifying...":rj?rw.length>0?(0,n.jsx)("div",{className:"space-y-2 max-w-[300px]",children:["passed","conflicting","inadequate"].map(e=>{let l={passed:{bg:"#caf9ef",text:"#226b4b"},conflicting:{bg:"#f9e0e2",text:"#c12f1b"},inadequate:{bg:"#fcf3d4",text:"#c8be2b"}};return rw.filter(l=>l.includes(e)).map((t,a)=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"bg-[".concat(l[e].bg,"] text-[").concat(l[e].text,"] h-[30px] min-w-[30px] rounded-lg flex items-center justify-center"),children:t.split(" ")[0]}),(0,n.jsxs)("p",{children:[" ",t.split(" ").slice(1).join(" ").replace(/\.+$/,""),"."]})]},"".concat(e,"-").concat(a)))})}):"Verified":"Verify Response",children:(0,n.jsx)("span",{children:(0,n.jsx)("button",{disabled:tD,onClick:()=>{rj||(t4(az),lh(az))},className:(0,L.cn)("px-1.5 rounded cursor-pointer transition-all h-[26px] flex items-center ml-1","text-bwleftblue dark:text-darkcolor/60","border border-transparent hover:border-bwleftblue/25 hover:dark:border-darkcolor/10","hover:bg-bwleftblue/20 dark:hover:bg-darkcolor/[0.1]",tD?"bg-gray-200 dark:bg-gray-700 hover:bg-gray-200 hover:border-gray-200 hover:cursor-not-allowed dark:hover:bg-gray-700":""),children:tD&&az===t5?(0,n.jsx)(x.G,{className:"loader animate-spin",icon:t(28607).LM,transform:{size:18}}):rj?(0,n.jsx)(x.G,{icon:t(52200).f8,transform:{size:18}}):(0,n.jsx)(x.G,{icon:t(75665).jM,transform:{size:18}})})})}),rb&&(lk||tp)&&(0,n.jsx)(ez.Z,{zIndex:"z-[13]",cancelText:"Ok",hideOkButton:!0,content:(0,n.jsx)("div",{className:" sm:w-[900px] h-[70vh] flex flex-col",children:(0,n.jsxs)("div",{className:" flex-1 flex flex-col ",children:[(0,n.jsx)("div",{className:" font-semibold my-[3px] uppercase mt-[13px] ",children:"Debug Info"}),(0,n.jsx)("div",{className:" text-darkcolor mb-[20px] py-[5px] px-[10px] border-[1px] border-darkcolor/[0.1] rounded flex-1 relative ",children:(0,n.jsx)(eL.Z,{onlyVertical:!0,children:(0,n.jsx)("div",{className:" p-[10px] ",children:rb})})})]})}),children:(0,n.jsx)(g.Z,{title:"Debug Info",children:(0,n.jsx)("span",{children:(0,n.jsx)("div",{className:(0,L.cn)("px-1.5 rounded cursor-pointer transition-all h-[26px] flex items-center","text-bwleftblue dark:text-darkcolor/60","border border-transparent hover:border-bwleftblue/25 hover:dark:border-darkcolor/10","hover:bg-bwleftblue/20 dark:hover:bg-darkcolor/[0.1]"),children:(0,n.jsx)(x.G,{icon:t(89137).QL,transform:{size:16}})})})})})]}),(!nb||lk)&&lF&&!le&&!aW&&(0,n.jsxs)(n.Fragment,{children:[!nb&&rb&&lk&&(null==ef?void 0:null===(K=ef.debugInfo)||void 0===K?void 0:K.some(e=>{var l;return null==e?void 0:null===(l=e.name)||void 0===l?void 0:l.startsWith("Turn")}))&&(0,n.jsx)(g.Z,{title:"ChatLLM Teams v2 was used",children:(0,n.jsx)("span",{children:(0,n.jsxs)("div",{className:(0,L.cn)("px-1.5 rounded cursor-pointer transition-all h-[26px] flex items-center gap-1.5","text-bwleftblue dark:text-darkcolor/60","border border-transparent hover:border-bwleftblue/25 hover:dark:border-darkcolor/10","hover:bg-bwleftblue/20 dark:hover:bg-darkcolor/[0.1]"),children:[(0,n.jsx)(x.G,{icon:t(51046).qH,transform:{size:14,y:.5}}),(0,n.jsx)("span",{className:"text-sm",children:"Teams v2"})]})})}),(0,n.jsxs)(F.h_,{children:[(0,n.jsx)(F.$F,{asChild:!0,children:(0,n.jsx)("div",{className:(0,L.cn)("rounded cursor-pointer transition-all size-[26px] flex items-center justify-center","text-bwleftblue dark:text-darkcolor/60","border border-transparent hover:border-bwleftblue/25 hover:dark:border-darkcolor/10","hover:bg-bwleftblue/20 dark:hover:bg-darkcolor/[0.1]"),children:(0,n.jsx)(x.G,{icon:t(70935).Uw,transform:{size:14,y:.5}})})}),(0,n.jsxs)(F.AW,{children:[(0,n.jsxs)(F.Xi,{className:"flex items-center gap-1.5 cursor-pointer",onClick:()=>af(!0),children:[(0,n.jsx)(x.G,{icon:t(62059).u8,transform:{size:16}}),(0,n.jsx)("div",{className:"text-sm",children:"Helpful"})]}),(0,n.jsxs)(F.Xi,{className:"flex items-center gap-1.5 cursor-pointer",onClick:()=>ab(!0),children:[(0,n.jsx)(x.G,{icon:t(18443).b,transform:{size:16}}),(0,n.jsx)("div",{className:"text-sm",children:"Not Helpful"})]}),lk&&(rb||(null==rf?void 0:rf.length)>0||(null==rg?void 0:rg.length)>0)?(0,n.jsxs)(F.Xi,{className:"flex items-center gap-1.5 cursor-pointer",onClick:()=>aw(!0),children:[(0,n.jsx)(x.G,{icon:t(89137).QL,transform:{size:16}}),(0,n.jsx)("div",{className:"text-sm",children:"Debug Info"})]}):null]})]}),(0,n.jsx)(ez.Z,{openOverride:ah,zIndex:"z-[13]",onClickOk:ln.bind(null,!0,nJ,lu,n$),onChangeOpen:e=>{e||(n0(""),nX(null),af(!1))},onPreClick:()=>{(null==ef?void 0:ef.isUseful)===!0&&ef.feedback?n0(ef.feedback):n0(""),nX(null)},okText:"Save",title:"Additional Feedback".concat((null==lS?void 0:lS[z.sWo])&&(null==lS?void 0:null===($=lS[z.uT8])||void 0===$?void 0:null===(Y=$.split(z.ump))||void 0===Y?void 0:Y.length)>0?"":" (optional)"),content:(0,n.jsxs)("div",{className:" my-[20px] ",children:[(null==lS?void 0:null===(et=lS[z.uT8])||void 0===et?void 0:null===(X=et.split(z.ump))||void 0===X?void 0:X.length)>0&&(0,n.jsx)("div",{className:" mb-[10px] ",children:(0,n.jsx)(eF.Z,{items:null==lS?void 0:null===(ea=lS[z.uT8])||void 0===ea?void 0:null===(en=ea.split(z.ump))||void 0===en?void 0:en.map((e,l)=>({label:e,value:e})),value:n$,onChange:e=>{nX(e)}})}),(0,n.jsx)("textarea",{className:" w-full bg-darkcoloro px-[6px] py-[4px] text-darkcolor text-[13px] rounded !outline-none border-[1px] border-darkcolor/[0.2] ",autoFocus:!0,value:nJ,onChange:e=>{n0(e.target.value||"")}})]})}),(0,n.jsx)(ez.Z,{openOverride:ag,zIndex:"z-[13]",onClickOk:ln.bind(null,!1,nJ,lu,n$),onChangeOpen:e=>{e||(n0(""),nX(null),ab(!1))},onPreClick:()=>{(null==ef?void 0:ef.isUseful)===!1&&ef.feedback?n0(ef.feedback):n0(""),nX(null)},okText:"Save",title:"Additional Feedback".concat((null==lS?void 0:lS[z.sWo])&&(null==lS?void 0:null===(es=lS[z.lYl])||void 0===es?void 0:null===(er=es.split(z.ump))||void 0===er?void 0:er.length)>0?"":" (optional)"),content:(0,n.jsxs)("div",{className:" my-[20px] ",children:[(null==lS?void 0:null===(eo=lS[z.lYl])||void 0===eo?void 0:null===(ei=eo.split(z.ump))||void 0===ei?void 0:ei.length)>0&&(0,n.jsx)("div",{className:" mb-[10px] ",children:(0,n.jsx)(eF.Z,{items:null==lS?void 0:null===(ec=lS[z.lYl])||void 0===ec?void 0:null===(ed=ec.split(z.ump))||void 0===ed?void 0:ed.map((e,l)=>({label:e,value:e})),value:n$,onChange:e=>{nX(e)}})}),(0,n.jsx)("textarea",{className:" w-full bg-darkcoloro px-[6px] py-[4px] text-darkcolor text-[13px] rounded !outline-none border-[1px] border-darkcolor/[0.2] ",autoFocus:!0,value:nJ,onChange:e=>{n0(e.target.value||"")}})]})}),((null==rf?void 0:rf.length)>0||(null==rg?void 0:rg.length)>0)&&!rb&&lk&&(0,n.jsx)(ez.Z,{openOverride:aj,cancelText:"Ok",hideOkButton:!0,onChangeOpen:e=>{e||aw(!1)},content:(0,n.jsxs)("div",{className:" sm:w-[900px] h-[70vh] flex flex-col",children:[(0,n.jsxs)("div",{className:" flex-1 flex flex-col ",children:[(0,n.jsx)("div",{className:" font-semibold my-[3px] uppercase mt-[13px] ",children:"System Prompt"}),(0,n.jsx)("div",{className:" text-darkcolor mb-[20px] py-[5px] px-[10px] border-[1px] border-darkcolor/[0.1] rounded flex-1 relative ",children:(0,n.jsx)(eL.Z,{onlyVertical:!0,children:(0,n.jsx)("div",{className:" p-[10px] ",children:null==rf?void 0:null===(eu=rf.split("\n"))||void 0===eu?void 0:eu.map((e,l)=>(0,n.jsx)("div",{children:e},"line"+l))})})})]}),(0,n.jsxs)("div",{className:" flex-1 flex flex-col ",children:[(0,n.jsx)("div",{className:" font-semibold my-[3px] uppercase ",children:"User Prompt"}),(0,n.jsx)("div",{className:" text-darkcolor mb-[20px] py-[5px] px-[10px] border-[1px] border-darkcolor/[0.1] rounded flex-1 relative ",children:(0,n.jsx)(eL.Z,{onlyVertical:!0,children:(0,n.jsx)("div",{className:" p-[10px] ",children:null==rg?void 0:null===(em=rg.split("\n"))||void 0===em?void 0:em.map((e,l)=>(0,n.jsx)("div",{children:e},"line"+l))})})})]})]})}),rb&&lk&&(0,n.jsx)(ez.Z,{openOverride:aj,zIndex:"z-[13]",cancelText:"Ok",hideOkButton:!0,onChangeOpen:e=>{e||aw(!1)},content:(0,n.jsx)("div",{className:" sm:w-[900px] h-[70vh] flex flex-col",children:(0,n.jsxs)("div",{className:" flex-1 flex flex-col ",children:[(0,n.jsx)("div",{className:" font-semibold my-[3px] uppercase mt-[13px] ",children:"Debug Info"}),(0,n.jsx)("div",{className:" text-darkcolor mb-[20px] py-[5px] px-[10px] border-[1px] border-darkcolor/[0.1] rounded flex-1 relative ",children:(0,n.jsx)(eL.Z,{onlyVertical:!0,children:(0,n.jsx)("div",{className:" p-[10px] ",children:rb})})})]})})})]}),(null==ef?void 0:ef.computePointsUsed)&&(null==ef?void 0:ef.computePointsUsed)>0?(0,n.jsx)("div",{className:"flex gap-3 ml-auto mr-[25px] text-xs",children:(0,n.jsxs)("div",{onClick:()=>aC.push("/admin/profile/?userG=".concat(nv)),className:"underline cursor-pointer",children:["Compute Points Used: ",null==ef?void 0:ef.computePointsUsed]})}):null,!le&&!aW&&aU.current&&(null==ef?void 0:null===(ep=ef.attachments)||void 0===ep?void 0:ep.map((e,l)=>{var t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:" flex-1 "},"".concat(null==e?void 0:e.attachmentId,"-").concat(l,"-flex1")),(0,n.jsx)(b.Z,{asButton:!0,className:" !px-[8px] !py-[2px] border-[1px] border-bwleftblue/[0.1] text-[13px] dark:!border-darkcolor/[0.1] dark:!text-darkcolor/[0.6] dark:!bg-darkcolor/[0.05] dark:hover:!bg-darkcolor/[0.1]",filename:(null==e?void 0:e.filename)||null,fileType:null==e?void 0:null===(t=e.mimeType)||void 0===t?void 0:t.toUpperCase(),previewString:(null==e?void 0:e.contents)||null,noView:N.Z.isNullOrEmpty(null==e?void 0:e.contents),isPreparingDownload:aq===(null==e?void 0:e.attachmentId),onClickDownload:(null==e?void 0:e.contents)!=null?null:()=>{aK(null==e?void 0:e.attachmentId,null==e?void 0:e.filename)},isAttachment:!0},"".concat(null==e?void 0:e.attachmentId,"-").concat(l))]})}))]})]}),!lZ&&nj&&(null==ef?void 0:ef.routedLlm)&&an&&eY&&!eg&&!e5&&!e3?(0,n.jsx)("div",{className:(0,L.cn)("".concat(tH?eG().chatContent:" "," ").concat(tH&&!nu?eG().chatContentInfo:" "," "),tm,"text-bwleftblue mx-auto items-start justify-start flex gap-[22px] rounded-xl h-[64px]",{"ml-[158px] [@media(max-width:1728px)]:ml-[208px] [@media(min-width:1729px)]:ml-auto":nG},nD?"!px-[10px]":""),children:(0,n.jsx)("div",{className:"mt-4 ml-10",children:(0,n.jsx)(lM,{currentRoutedLLM:null==ef?void 0:ef.routedLlm,onRegenUsingLLM:lb})})}):null]}),an&&nb&&(eY&&!e5&&!e3||!eY)&&(0,n.jsx)(n.Fragment,{children:(null==ef?void 0:null===(ex=ef.computerFiles)||void 0===ex?void 0:ex.length)>0&&(0,n.jsxs)("div",{className:tm+(eY?" h-auto min-h-[64px] overflow-y-auto":"")+" text-bwleftblue mx-auto items-start justify-start flex flex-col gap-[22px] rounded-xl mt-1 mb-4 ml-[20px] "+(nD?"!px-[10px]":""),children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-neutral-600 dark:text-neutral-400 ml-[44px]",children:"New files"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2 ml-[44px]",children:ef.computerFiles.map((e,l)=>(0,n.jsxs)("div",{className:"flex items-center gap-2 px-2 py-2 rounded-md group relative hover:bg-neutral-100 dark:hover:bg-neutral-800",children:[(0,n.jsx)(x.G,{icon:"folder"===e.type?t(19688).Pk:t(93802).gM,className:"text-bwleftblue dark:text-darkcolor/60",transform:{size:20}}),(0,n.jsx)("span",{className:"font-mono text-[14px] truncate max-w-[350px]",children:e.path}),"folder"===e.type?(0,n.jsx)("div",{"data-gramm":"false",className:"invisible group-hover:visible group-hover:text-black dark:group-hover:text-white absolute -top-2 -right-2",children:(0,n.jsx)(l0.Z,{userInfo:ak,insideFileSegment:!0})}):(0,n.jsx)("div",{"data-gramm":"false",className:"invisible group-hover:visible absolute -top-2 -right-0",children:(0,n.jsx)(p.Z,{onClick:()=>{rI(e.path)},className:"!border-0 !p-0",noBack:!0,noScale:!0,disabled:rk===e.path,children:(0,n.jsx)("span",{className:"text-bwleftblue cursor-pointer group-hover:text-black dark:group-hover:text-white",children:(0,n.jsx)(g.Z,{title:"Download",children:rk===e.path?(0,n.jsx)(x.G,{icon:t(32187).LM,spin:!0,transform:{size:16}}):(0,n.jsx)(x.G,{icon:t(48812).q7,transform:{size:16}})})})})})]},"computer-file-".concat(l)))})]})}),!eY||eg||e5||e3||!tE||tg?null:(0,n.jsx)("div",{className:"".concat(tH?eG().chatContent:" "," ").concat(tH&&!nu?eG().chatContentInfo:" "," ")+tm+" group relative mx-auto flex gap-[9px]  rounded-xl items-center"+(an?" py-[8px] ":"  ")+(nG?"ml-[158px] [@media(max-width:1728px)]:ml-[208px] [@media(min-width:1729px)]:ml-auto":"")+(ng||nC?" custom-lg:px-[10px] custom-lg:!m-[8px] custom-lg:!w-7/12 custom-lg:!flex-col custom-lg:!items-start":"")+(tK?tc:"")+(nD?"!px-[10px]":""),children:(0,n.jsx)("div",{className:"ml-[44px] w-full",children:(0,n.jsx)(lz,{searchSuggestions:tE,onSend:e=>{eb(e,null,null,()=>{e7(!0)}).then(e=>{e7(!1)}).catch(e=>{e7(!1)})}})})}),an&&ng?(0,n.jsx)(v.E.div,{className:"absolute top-0 right-0 pr-[20px] [@media(max-width:1250px)]:!w-5/12 [@media(min-width:1729px)]:left-[70rem] ".concat("1"===nu?"[@media(min-width:1729px)]:left-[82rem]":""," [@media(min-width:1729px)]:m-auto"),animate:{width:nu?eH+(nG&&null!=eW?eW:0)-60:"390px"},children:ax?(0,n.jsx)(lE,{searchResults:ac,setShowMoreSources:av}):tA?(0,n.jsx)(n.Fragment,{children:!((null==am?void 0:am.length)>0)&&(e5||e3)?null:(0,n.jsx)(l_,{imageSearchResults:am,deploymentConversationId:lP,messageIndex:null!==(eh=null==ef?void 0:ef.messageIndex)&&void 0!==eh?eh:lu})}):null}):null]}),!eq&&"1"===nd&&ni===encodeURIComponent((null==ef?void 0:ef.timestamp)||"")&&(0,n.jsx)(eM.Z,{deploymentId:lI,deploymentConversationId:lP,data:ef,dataScoreOpen:eZ,scoreIndex:tZ})]})}let tx=e=>{let{promptInfo:l,isMobile:a}=e,[r,s]=(0,eT.Z)(),i=(0,o.useCallback)(()=>{s(l),f.Am.success("Copied to Clipboard!",{icon:(0,n.jsx)(x.G,{icon:t(66522).Yj,transform:{size:16}})})},[l]);return(0,n.jsx)(g.Z,{title:l,side:"bottom",content:(0,n.jsxs)("div",{className:"flex flex-col gap-[12px] text-darkcolor",children:[(0,n.jsx)("div",{className:"text-[#00000080] dark:text-darkwhite/[0.7]",children:"Prompt"}),(0,n.jsx)("div",{className:"".concat(a?"max-h-[400px] overflow-auto":""," w-[300px]"),children:l}),(0,n.jsxs)(p.Z,{useAccentColor:!0,className:" !px-[7px] !py-[0] border-[1px] border-bwleftblue/[0.1] w-[86px] h-[32px] rounded-[20px]",onClick:i,children:[(0,n.jsx)(x.G,{icon:t(66522).Yj,transform:{size:13}})," Copy"]})]}),children:(0,n.jsx)("div",{className:"absolute right-[52px] top-[16px] z-[1] flex items-center justify-center h-[32px] w-[32px] bg-[#00000080] hover:bg-[#00000080]/[0.3] rounded-[4px] text-darkwhite cursor-pointer",children:(0,n.jsx)(x.G,{icon:t(16672).DB,transform:{size:16}})})})},tv=(0,o.memo)(e=>{let{measure:l,segmentData:a,isMobile:r,textwithTableWidth:s}=e,i=(0,o.useRef)(),d=(0,o.useRef)(null),[c,{height:u}]=(0,h.Z)(),m=(0,o.useRef)(null),p=(0,o.useMemo)(()=>{var e;return null==m.current?m.current=a:lL()(m.current,a)||(m.current=a),null!==(e=m.current)&&void 0!==e?e:a},[a,m]);(0,o.useEffect)(()=>{d.current=l},[d,l]),(0,o.useLayoutEffect)(()=>{var e;null===(e=d.current)||void 0===e||e.call(d)},[d]);let v=(0,o.useCallback)(()=>{if(u>0){var e;null===(e=d.current)||void 0===e||e.call(d)}},[d,u]),f=(0,o.useMemo)(()=>{let e=!1,l=N.Z.tryParseInt(null==p?void 0:p.width),t=N.Z.tryParseInt(null==p?void 0:p.height);return l>1&&t>1&&(e=!0),e},[p]),b=(0,o.useMemo)(()=>{let e={};if(s>0&&(e.width=s),f){let l=N.Z.tryParseInt(null==p?void 0:p.width),t=N.Z.tryParseInt(null==p?void 0:p.height),n=N.Z.getBestImageMeasure(t,l,r,s);(null==n?void 0:n.width)>1&&(null==n?void 0:n.height)>1&&(e.width=null==n?void 0:n.width,e.height=null==n?void 0:n.height)}return e},[s,f,r]);return(0,n.jsxs)("div",{style:b,className:" relative ",ref:c,children:[(0,n.jsx)(tx,{promptInfo:p.prompt,isMobile:r}),(0,n.jsx)(g.Z,{title:"Download",side:"bottom",children:(0,n.jsx)("div",{className:"absolute right-[16px] top-[16px] z-[1] flex items-center justify-center h-[32px] w-[32px] bg-[#00000080] hover:bg-[#00000080]/[0.3] rounded-[4px] text-darkwhite cursor-pointer",onClick:async()=>{if(null==i?void 0:i.current){let e=i.current.querySelector("source").getAttribute("src");if(e.includes("cloudflarestream.com")||e.includes("cdn.abacus.ai")){let l=document.createElement("a");l.href=e,l.download="video.mp4",e.includes("cdn.abacus.ai")&&(l.target="_blank"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}else{let l=await fetch(e),t=await l.blob(),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="video.mp4",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)}}},children:(0,n.jsx)(x.G,{icon:t(96951).E0,transform:{size:16}})})}),(0,n.jsx)("video",{onLoadedMetadata:v,ref:i,controls:!0,controlsList:"nodownload",disablePictureInPicture:!0,className:" rounded-md m-0 "+(f?" max-h-full max-w-full ":" w-full max-h-[600px] "),loop:p.loop,children:(0,n.jsx)("source",{src:p.segment,type:"video/mp4"},"s"+p.segment)},"v"+p.segment)]})})},47978:function(e,l,t){"use strict";t.d(l,{Z:function(){return w}});var n=t(57437),a=t(14301),r=t(48547),s=t(99376),i=t(2265),o=t(3916),d=t(53436),c=t(29827),u=t(49070),m=t(14438),p=t(63020),x=t(5529),v=t(56210),h=t(57099),f=t(65308),g=t(591),b=t(89307),j=t(81447);function w(e){var l,w,y,N,k;let{data:C,isLoading:I,isAdminPage:S,onEditName:A,isEditNameAny:_,appId:P,isForceSelected:E,unseen:z,project:T,defaultProjectLLMId:D,isSelfServe:M}=e,F=(0,s.useSearchParams)(),L=(0,s.useRouter)(),Z=(0,s.usePathname)(),[G]=(0,u.PB)("projectId"),R=(0,c.NL)(),{data:O}=(0,f.Z0)(),U=(0,i.useMemo)(()=>null==O?void 0:O.filter(e=>e.chatllmProjectId!==(null==C?void 0:C.chatllmProjectId)),[O,null==C?void 0:C.chatllmProjectId]),{mutate:B}=(0,f.CN)({projectId:null!==(w=null==C?void 0:C.chatllmProjectId)&&void 0!==w?w:G,onSuccess:()=>{null==R||R.invalidateQueries({queryKey:["listConvos",null==C?void 0:C.deploymentId]}),R.invalidateQueries({queryKey:["listConvoOne",null==C?void 0:C.deploymentId,null==C?void 0:C.deploymentConversationId]})}}),{mutate:H}=(0,f.$e)({projectId:null!==(y=null==C?void 0:C.chatllmProjectId)&&void 0!==y?y:G,onSuccess:()=>{null==R||R.invalidateQueries({queryKey:["listConvos",null==C?void 0:C.deploymentId]})}}),[V,W]=(0,u.PB)("convoId"),[q,Q]=(0,u.PB)("sidebar"),[,K]=(0,u.PB)("aiAssistedEditAgentAppId"),[,Y]=(0,u.PB)("assistedAgentProjectId"),[,$]=(0,u.PB)("assistedChatbotProjectId"),[,X]=(0,u.PB)("isConversationChanged"),J=S?E:V===(null==C?void 0:C.deploymentConversationId),ee=(0,i.useMemo)(()=>h.featureFlags.showTasks&&(null==C?void 0:C.conversationType)==="CHAT_LLM_TASK",[C]),el=(0,i.useRef)(null),[et,en]=(0,i.useState)(!1),[ea,er]=(0,i.useState)(""),{setSelectedArtifactMsgId:es}=(0,p.P)(e=>({setSelectedArtifactMsgId:e.setSelectedArtifactMsgId})),{isAIEngOldFlow:ei,setIsAIEngineer:eo,isComputerAgent:ed,isSearchLLM:ec,isWebSearchSelected:eu,setIsWebSearchSelected:em,isThinkSelected:ep,setIsThinkSelected:ex}=(0,x.b)(e=>({isAIEngOldFlow:e.isAIEngOldFlow,setIsAIEngineer:e.setIsAIEngineer,isComputerAgent:e.isComputerAgent,isSearchLLM:e.isSearchLLM,isWebSearchSelected:e.isWebSearchSelected,setIsWebSearchSelected:e.setIsWebSearchSelected,isThinkSelected:e.isThinkSelected,setIsThinkSelected:e.setIsThinkSelected})),ev=_&&!et;(0,i.useEffect)(()=>{null==A||A(et)},[et]);let eh=(0,i.useCallback)(()=>new Promise(e=>{let l=null==C?void 0:C.deploymentConversationId;(0,d.Ya1)({deploymentId:null==C?void 0:C.deploymentId,deploymentConversationId:l}).then(t=>{if(null==t?void 0:t.success){if(e(!0),null==R||R.invalidateQueries({queryKey:["listConvos",null==C?void 0:C.deploymentId]}),R.invalidateQueries({queryKey:["listCopilotConvos"]}),R.invalidateQueries({queryKey:["project-conversations"]}),V===l){let e=(0,o._)(F,{convoId:null,projectId:null,aiAssistedEditAgentAppId:null,assistedAgentProjectId:null,assistedChatbotProjectId:null,showArtifact:null,playgroundType:null});L.push("".concat(Z,"?")+e)}}else m.Am.error((null==t?void 0:t.error)||o.Z.errorDefault),e(!1)}).catch(l=>{m.Am.error(o.Z.isNullOrEmpty(l)?o.Z.errorDefault:""+l),e(!1)})}),[V,null==C?void 0:C.deploymentConversationId]),[ef,eg]=(0,u.PB)("projectId"),[eb,ej]=(0,u.PB)("appId"),ew=(0,i.useCallback)(e=>{var l,t,n;if((null===(t=e.target)||void 0===t?void 0:null===(l=t.getAttribute("id"))||void 0===l?void 0:l.startsWith("convo-action-"))||S||I||ev)return;"true"===sessionStorage.getItem("isCopilotProcessing")&&(sessionStorage.removeItem("projectId"),sessionStorage.removeItem("whiteboard"),sessionStorage.removeItem("hotkeyMessage"),sessionStorage.removeItem("whiteboardNoData")),ec||ed||P===o.Z.aiEngAppId||P===o.Z.appLlmEndAppId||!M||X("changed"),eu&&em(!1),ep&&ex(!1),W((null==C?void 0:C.deploymentConversationId)||""),(null==C?void 0:C.chatllmProjectId)?(D&&ej(D),eg(null==C?void 0:C.chatllmProjectId)):eg(null),Y(null),Q(null),es(null);let a=(null==C?void 0:null===(n=C.conversationType)||void 0===n?void 0:n.toLowerCase())==="copilot";if(ei)eo(a);else if(a&&P!==o.Z.aiEngAppId){let e=new URLSearchParams(F.toString());e.set("convoId",null==C?void 0:C.deploymentConversationId),e.set("appId",o.Z.aiEngAppId),e.has("aiAssistedEditAgentAppId")&&e.delete("aiAssistedEditAgentAppId"),e.has("assistedAgentProjectId")&&e.delete("assistedAgentProjectId"),e.has("assistedChatbotProjectId")&&e.delete("assistedChatbotProjectId"),window.history.pushState(null,"","/chatllm/?".concat(e.toString()))}},[I,null==C?void 0:C.deploymentConversationId,C,ev,S,ec,ed,M,eu,D,ep]),ey=(0,i.useCallback)(e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),(async()=>{(0,d.EPO)({name:ea,deploymentId:null==C?void 0:C.deploymentId,deploymentConversationId:null==C?void 0:C.deploymentConversationId}).then(e=>{if(null==e?void 0:e.success){var l,t;en(!1),null==R||R.invalidateQueries({queryKey:["listConvos",null==C?void 0:C.deploymentId]}),(null!==(l=null==C?void 0:C.chatllmProjectId)&&void 0!==l?l:G)&&(null==R||R.invalidateQueries({queryKey:["project-conversations",null!==(t=null==C?void 0:C.chatllmProjectId)&&void 0!==t?t:G]})),R.invalidateQueries({queryKey:["listCopilotConvos"]})}}).catch(e=>{})})()},[ea,null==C?void 0:C.deploymentConversationId,null==C?void 0:C.deploymentId,R]),eN=(0,i.useCallback)(e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),er((null==C?void 0:C.name)||""),en(!0),setTimeout(()=>{var e,l;null===(l=el.current)||void 0===l||null===(e=l.focus)||void 0===e||e.call(l)},100)},[el,C,null==C?void 0:C.name]),[ek,eC]=(0,i.useState)(!1),eI=(0,i.useCallback)(e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),en(!1)},[]);return(0,n.jsxs)(n.Fragment,{children:[!J||et||S?null:(0,n.jsx)(b.aR,{open:ek,onOpenChange:eC,children:(0,n.jsxs)(b._T,{children:[(0,n.jsx)(b.fY,{children:(0,n.jsxs)(b.f$,{children:['Do you want to delete "',null==C?void 0:null===(l=C.name)||void 0===l?void 0:l.replace(/"/g,""),'" conversation?']})}),(0,n.jsxs)(b.xo,{children:[(0,n.jsx)(b.le,{size:"sm",className:"rounded-full px-4",children:"Cancel"}),(0,n.jsx)(b.OL,{size:"sm",variant:"destructive",className:"rounded-full px-4",onClick:eh,children:"Delete"})]})]})}),(0,n.jsxs)("div",{id:"task-convo-".concat(null==C?void 0:C.deploymentConversationId),onClick:ew,className:"py-[7px] group px-2 ml-2.5 rounded-l-full "+(ev&&!J?"":" cursor-pointer ")+(J?" bg-bwleftblue/25 dark:bg-bwleftblue/40 ":" ")+"text-darktoptext/70",children:[I&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:" flex items-center gap-[5px] ",children:[(0,n.jsx)("div",{className:"bg-darkcolor/[0.3] rounded w-[150px] h-[18px] animate-pulse"}),(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)("div",{className:"bg-darkcolor/[0.3] rounded w-[18px] h-[18px] animate-pulse"}),(0,n.jsx)("div",{className:"bg-darkcolor/[0.3] rounded w-[18px] h-[18px] animate-pulse"})]})}),!I&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:" relative flex gap-[2px] h-[24px] ml-[10px] items-stretch "+(et?" mr-[3px] ":" "),children:[ee&&(0,n.jsxs)("div",{className:"h-4 w-3 flex items-center mr-1.5 relative",children:[(0,n.jsx)(r.G,{icon:t(30246).E9,transform:{size:15,y:5}}),z&&(0,n.jsx)("div",{className:"absolute top-[3px] -right-[5px] bg-red-500 rounded-full size-[5px]"})]}),(0,n.jsxs)("div",{className:(0,v.cn)(" text-[14px] py-[4px] overflow-hidden ".concat(J?" w-[calc(100%-48px)] text-ellipsis ":" ")+(S?" pt-[2px] ":" ")+(et?" mr-[4px] ":" "),{"w-[calc(100%-66px)]":J&&ee}),children:[et&&(0,n.jsx)("input",{value:ea,onChange:e=>{er(e.target.value||"")},ref:el,className:" py-[0px] px-[4px] !outline-none w-full bg-darkcoloro text-darkcolor rounded border-darkcolor/[0.2] border-[1px] ",dir:"auto"}),et?null:(0,n.jsx)("span",{title:null!==(N=null==C?void 0:C.name)&&void 0!==N?N:"",className:" overflow-x-hidden whitespace-nowrap ",children:null==C?void 0:C.name})]}),J&&(0,n.jsxs)("div",{className:" "+(et?" ":" absolute top-0 bottom-0 right-0 flex items-stretch "),children:[!et&&(0,n.jsx)("div",{className:"flex-shrink-0 w-[30px]",children:"\xa0"}),(0,n.jsxs)("div",{className:" flex flex-shrink-0 items-center h-full text-darktoptext/70 ",children:[S||et?null:(0,n.jsxs)(g.h_,{modal:!0,children:[(0,n.jsx)(g.$F,{asChild:!0,children:(0,n.jsxs)(j.z,{variant:"ghost",size:"icon-xs",className:"rounded-full",children:[(0,n.jsx)(r.G,{icon:t(91559).S6,transform:{size:16}}),(0,n.jsx)("span",{className:"sr-only",children:"More"})]})}),(0,n.jsxs)(g.AW,{className:"w-fit max-w-60 rounded-lg",side:"right",align:"start",children:[(0,n.jsxs)(g.Xi,{className:"cursor-pointer gap-2",onSelect:eN,id:"convo-action-edit",children:[(0,n.jsx)(r.G,{icon:t(25785).Iw,transform:{size:16},id:"convo-action-edit"}),"Edit"]}),(0,n.jsxs)(g.Xi,{className:"cursor-pointer gap-2",onSelect:()=>eC(!0),id:"convo-action-delete",children:[(0,n.jsx)(r.G,{icon:t(31898).Vu,transform:{size:16},id:"convo-action-delete"}),"Delete"]}),(0,n.jsx)(g.VD,{}),(null==U?void 0:U.length)>0&&(0,n.jsxs)(g.Ph,{children:[(0,n.jsxs)(g.kt,{className:"cursor-pointer gap-2",id:"convo-action-move-to-project",children:[(0,n.jsx)(r.G,{icon:t(23804).mD,transform:{size:16,y:-1},id:"convo-action-move-to-project"}),"Move to project"]}),(0,n.jsx)(g.cq,{children:(0,n.jsx)(g.TG,{className:"w-fit max-w-60 rounded-lg",children:U.map(e=>(0,n.jsxs)(g.Xi,{className:"cursor-pointer flex-row gap-2",onClick:()=>B({conversationId:null==C?void 0:C.deploymentConversationId,projectId:e.chatllmProjectId}),id:"convo-action-move-to-project",children:[(0,n.jsx)(r.G,{icon:t(23804).mD,transform:{size:16,y:-1},id:"convo-action-move-to-project"}),e.name]},e.chatllmProjectId))})})]}),(null==C?void 0:C.chatllmProjectId)?(0,n.jsxs)(g.Xi,{className:"cursor-pointer text-destructive focus:bg-destructive/10 focus:text-destructive dark:text-red-500 gap-2",onSelect:()=>{var e;return H({conversationId:null==C?void 0:C.deploymentConversationId,projectId:null!==(e=null==C?void 0:C.chatllmProjectId)&&void 0!==e?e:G})},children:[(0,n.jsx)(r.G,{icon:t(29604).sf,transform:{size:16}}),(0,n.jsxs)("span",{children:["Remove from ",null!==(k=null==T?void 0:T.name)&&void 0!==k?k:"project"]})]}):null]})]}),et&&(0,n.jsx)(a.Z,{noBack:!0,onClick:ey,className:" px-[6px] sm:px-[6px] py-[1px] sm:py-[1px] ",children:(0,n.jsx)(r.G,{icon:t(18895).LE,transform:{size:16}})}),et&&(0,n.jsx)(a.Z,{noBack:!0,onClick:eI,className:" px-[6px] sm:px-[6px] py-[1px] sm:py-[1px] ",children:(0,n.jsx)(r.G,{icon:t(25667).faXmark,transform:{size:16}})})]})]})]})})]})]})}},34402:function(e,l,t){"use strict";t.d(l,{Z:function(){return c}});var n=t(57437),a=t(48547),r=t(70742),s=t(36853),i=t(48672),o=t(53436),d=t(2265);function c(e){let{isAdmin:l,userInfo:c}=e,[u,m]=(0,d.useState)(null),[p,x]=(0,d.useState)(null),v=(0,d.useMemo)(()=>({disableLink:!0,style:{base:{fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px",color:"#ffffff","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}}),[]);return((0,d.useEffect)(()=>{p&&null==u&&m((0,i.J)(p))},[p,u]),(0,d.useEffect)(()=>{(0,o.OJJ)(c,null)&&(0,o.VN0)({}).then(e=>{(null==e?void 0:e.result)&&x(null==e?void 0:e.result)})},[c]),p)?(0,n.jsxs)("div",{className:" flex-1 items-center justify-center flex flex-col mx-[22px] lg:mx-[0] ",children:[(0,n.jsx)("div",{className:" text-[40px] text-[#8c54ff] font-[600] ",children:"ChatLLM Teams"}),(0,n.jsx)("div",{className:" text-[24px] text-[#ffffff] font-[300] text-center",children:"Chat With The AI Brain For Your Organization"}),(0,n.jsx)("div",{className:" mt-[36px] rounded-[7px] bg-darkcoloro px-[24px] py-[17px] ",children:(0,n.jsxs)("div",{className:" text-[#34235e] dark:text-[#ffffff] text-[16px] sm:text-[24px] font-[600] sm:max-w-[30vw] flex items-center gap-[15px]",children:[(0,n.jsx)(a.G,{icon:t(12398).xH,transform:{size:16}}),(0,n.jsx)("span",{className:" ml-[5px] sm:text-[20px] text-[14px] ",children:l?"You must accept the RBI e-mandate to use the platform. If you want to try another card, please input it below":"You don't have the full platform access. Please contact your admin for further information!"})]})}),(0,n.jsx)("div",{className:" mt-[30px] rounded-[7px] bg-white/[0.1] px-[4px] sm:px-[24px] py-[17px] min-w-[450px] ",children:(0,n.jsx)("div",{className:" lg:w-full mt-[4px] ",children:(0,n.jsx)("div",{className:" flex whitespace-nowrap h-auto ",children:(0,n.jsx)("div",{className:" px-[5px] sm:px-[24px] py-[16px] flex-1 ",children:(0,n.jsx)(s.Elements,{stripe:u,children:(0,n.jsx)(r.Z,{userInfo:c,showCancel:!1,options:v})})})})})})]}):null}},19072:function(e,l,t){"use strict";t.d(l,{O:function(){return j},Z:function(){return w}});var n=t(57437),a=t(95951),r=t(71265),s=t(48547),i=t(86159),o=t(3916),d=t(86520),c=t(42715),u=t.n(c),m=t(14301),p=t(3531),x=t.n(p),v=t(2265),h=t(93810),f=t.n(h),g=t(96377),b=t(13894);let j=e=>{let l=null,n=null;return(null==(e=null==e?void 0:e.toLowerCase())?void 0:e.includes("text/"))?(l=t(69166).OE,n="Text"):(null==e?void 0:e.startsWith("application/"))&&((null==e?void 0:e.includes("ms-excel"))||(null==e?void 0:e.includes("xls"))||(null==e?void 0:e.includes("spreadsheet")))?(l=t(48514).ic,n="Excel"):(null==e?void 0:e.startsWith("application/"))&&((null==e?void 0:e.includes("vnd.openxmlformats-officedocument.wordprocessingml"))||(null==e?void 0:e.includes("application/vnd.google-apps.document"))||(null==e?void 0:e.includes("application/msword")))?(l=t(93431).Mf,n="Word"):(null==e?void 0:e.startsWith("application/"))&&((null==e?void 0:e.includes("vnd.openxmlformats-officedocument.presentationml.presentation"))||(null==e?void 0:e.includes("application/vnd.ms-powerpoint")))?(l=t(30271).WO,n="PPT"):(null==e?void 0:e.includes("pdf"))?(l=t(77126).gS,n="PDF"):(null==e?void 0:e.startsWith("application/"))&&(null==e?void 0:e.includes("pdf"))?(l=t(77126).gS,n="PDF"):(null==e?void 0:e.startsWith("application/"))&&(null==e?void 0:e.includes("csv"))?(l=t(18827).fU,n="CSV"):(null==e?void 0:e.startsWith("image/"))&&(null==e?void 0:e.includes("jpg"))?(l=t(3840).Oi,n="JPEG"):(null==e?void 0:e.startsWith("image/"))&&(null==e?void 0:e.includes("jpeg"))?(l=t(3840).Oi,n="JPEG"):(null==e?void 0:e.startsWith("image/"))&&(null==e?void 0:e.includes("png"))?(l=t(3840).Oi,n="PNG"):(null==e?void 0:e.startsWith("application/"))&&((null==e?void 0:e.includes("zip"))||(null==e?void 0:e.includes("x-iwork-numbers-sffnumbers")))?(l=t(36277).km,n="ZIP"):(null==e?void 0:e.startsWith("application/"))&&((null==e?void 0:e.includes("rar"))||(null==e?void 0:e.includes("7z"))||(null==e?void 0:e.includes("gzip")))?(l=t(65690).gA,n="FILE"):(null==e?void 0:e.startsWith("video/"))&&((null==e?void 0:e.includes("mp4"))||(null==e?void 0:e.includes("msvideo"))||(null==e?void 0:e.includes("wmv"))||(null==e?void 0:e.includes("quicktime"))||(null==e?void 0:e.includes("flv"))||(null==e?void 0:e.includes("mpg"))||(null==e?void 0:e.includes("mpeg"))||(null==e?void 0:e.includes("webm")))?(l=t(13153).hv,n="VIDEO"):(null==e?void 0:e.startsWith("github"))&&(l=t(65885).zh,n="GITHUB"),{res:l,name:n}};function w(e){var l,c,p,h,w,y,N,k,C;let{docId:I,filename:S,fileType:A,className:_,asButton:P,isAttachment:E,onClickDownload:z,previewString:T,isPreparingDownload:D,noView:M,isDocClickable:F,onClickDelete:L,isShowThumbnail:Z,noBorder:G,onClickFile:R,onClickPromise:O,description:U,renderFileElement:B,showAsIcon:H}=e,V=null==A?void 0:A.toLowerCase(),[W,q]=(0,v.useState)(!1),Q=window.location.host,K=Q?"&orgHost=".concat(encodeURIComponent(b.Z.calcHostOnly(Q))):"",Y=B?B():(0,n.jsx)(i.Z,{title:S,children:(0,n.jsxs)("div",{className:" relative group transition-all duration-300 border-gray-300 ".concat(G?"":"border-[1px]"," flex items-center rounded-lg p-2 mr-[6px] my-[3px] ").concat(L?x().fileRectContent:""," min-w-[100px] bg-white dark:!bg-darkcolor/[0.05] dark:!border-darkcolor/[0.1] ").concat(!E||null!=T||O?" cursor-pointer ":" cursor-default "," ").concat(!1===F?"pointers-events-none":""," ").concat(H?"!w-[57px] !min-w-0 !mr-0 !pr-0 ":""),onClick:()=>{null==R||R(),O&&(q(!0),null==O||O().then(()=>{}).catch(f()).finally(()=>{q(!1)})),window.focus()},children:[L&&!W?(0,n.jsx)("div",{onClick:e=>{null==e||e.stopPropagation(),null==e||e.preventDefault(),q(!0),null==L||L(I).then(()=>{}).catch(f()).finally(()=>{q(!1)})},className:x().closeIcon+" z-[1] absolute right-0 top-0 w-[16px] h-[16px] right-[10px] text-darkwhite !bg-gray-400/[0.6] truncate dark:!bg-gray-600 hover:!bg-gray-400/[0.6] cursor-pointer flex items-center justify-center rounded-[10px] ".concat(H?"!top-[-4px] !right-[-6px]":""),children:W?null:(0,n.jsx)(s.G,{icon:t(68770).g8,transform:{size:10}})}):null,W?(0,n.jsx)("div",{className:x().closeIcon+" z-[1] absolute right-0 top-0 w-[16px] h-[16px] right-[10px] text-darkwhite !bg-gray-400/[0.6] truncate dark:!bg-gray-600 hover:!bg-gray-400/[0.6] cursor-pointer flex items-center justify-center rounded-[10px] ".concat(H?"!top-[-4px] !right-[-6px]":""),children:W?(0,n.jsx)(s.G,{icon:t(38166).mH,transform:{size:10},spin:!0}):null}):null,E&&null!=z&&(0,n.jsx)("div",{className:" group-hover:block absolute -top-[5px] -right-[5px] shadow hover:shadow-lg w-[27px] h-[27px] rounded bg-darkcoloro border-[1px] border-darkcolor/[0.3] cursor-pointer "+(D?" block pointer-events-none ":" hidden ")+(G?" hover:shadow-none ":""),children:(0,n.jsx)(i.Z,{title:"Download",children:(0,n.jsx)("div",{onClick:e=>{null==e||e.stopPropagation(),null==e||e.preventDefault(),null==z||z()},className:" flex items-center justify-center hover:bg-darkcolor/[0.15] cursor-pointer rounded w-full h-full ",children:(0,n.jsx)(s.G,{spin:D,icon:D?t(39847).QD:t(48812).q7,transform:{size:14}})})})}),(0,n.jsx)("div",{className:"flex !w-[40px] !h-[40px] bg-bwleftblue/[0.6] rounded-lg items-center justify-center text-white",children:(null==V?void 0:V.includes("image/"))&&Z?(0,n.jsx)(g.Z,{alt:"Image",src:"/api/v0/getDocstoreImage?docId=".concat(encodeURIComponent("".concat(I)),"&maxWidth=100","&maxHeight=100").concat(K)}):(0,n.jsx)(s.G,{icon:null!==(c=null===(l=j(A))||void 0===l?void 0:l.res)&&void 0!==c?c:t(23130).faFileLines,transform:{size:24}})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0 ms-[6px] ml-[8px] max-w-[190px] ".concat(L?x().fileRectTextWrapper:""," ").concat(H?"!hidden":""),children:[(0,n.jsxs)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white text-ellipsis my-0",children:[S,o.Z.isNullOrEmpty(S)&&null==z&&!M&&"Preview"]}),(0,n.jsxs)("p",{className:"text-sm text-gray-400 truncate dark:text-gray-300 flex relative transition-all duration-300 line-clamp-1 my-0 ",children:[!M&&(0,n.jsxs)("span",{className:" invisible group-hover:visible ",children:[(0,n.jsx)(s.G,{icon:t(79100).wn,transform:{size:15},className:" mr-[3px] "}),"View"]}),U&&M&&(0,n.jsx)("span",{className:"text-ellipsis overflow-hidden max-w-[110px]",children:U})]})]})]})});if(E&&!1!==F){if(P)return(0,n.jsxs)(m.Z,{onClick:z,className:_,useAccentColor:!0,children:[(0,n.jsx)("span",{className:" mr-[5px] ",children:(0,n.jsx)(s.G,{icon:null!==(N=null!==(y=t(60763)._o)&&void 0!==y?y:null===(p=j(A))||void 0===p?void 0:p.res)&&void 0!==N?N:t(23130).faFileLines,transform:{size:17}})}),(0,n.jsx)("span",{children:"Download"+(S?" (":"")+(null!==(k=null==S?void 0:null===(w=S.split("."))||void 0===w?void 0:null===(h=w.reverse())||void 0===h?void 0:h[0])&&void 0!==k?k:"")+")"})]});if(null==T)return Y;{u()(T)||(T=JSON.stringify(T));let e=T,l=o.Z.tryJsonParse(T);if(null!=l&&(e=JSON.stringify(l,void 0,2)),(null==e?void 0:e.indexOf("\n"))>-1){let l=[];null==e||null===(C=e.split("\n"))||void 0===C||C.some((e,t)=>{l.push((0,n.jsx)("div",{children:e},"l"+t))}),e=l}return(0,n.jsx)(a.Z,{cancelText:"Close",title:"Preview",hideOkButton:!0,className:" bg-darkcoloro ",content:(0,n.jsx)("div",{className:" p-[10px] whitespace-pre font-mono min-w-[700px] min-h-[500px] bg-darkcolor/[0.15] relative ",children:(0,n.jsx)("div",{className:" m-[10px] absolute top-0 left-0 right-0 bottom-0 ",children:(0,n.jsx)(d.Z,{children:e})})}),children:Y})}}return!1===F?Y:(0,n.jsx)(a.Z,{cancelText:"Close",title:"Document Preview",hideOkButton:!0,className:" bg-darkcoloro w-1/2 [@media(min-width:1375px)]:w-2/5 [@media(max-width:1100px)]:w-[550px] [@media(max-width:35rem)]:w-2/3",content:(0,n.jsx)(r.Z,{docId:I}),zIndex:"z-[99999]",children:Y})}},16512:function(e,l,t){"use strict";var n=t(57437);t(2265);var a=t(48547),r=t(19072);l.Z=e=>{var l,s;let{progressUpload:i,file:o,removeFile:d,disabled:c,previousUploadedFilePreview:u}=e||{};if(null==o)return null;if(o&&!i)return u(o);let{name:m,res:p}=(0,r.O)((null==o?void 0:o.mimeType)||(null==o?void 0:o.mime_type))||{};return(0,n.jsxs)("div",{className:" group cursor-default flex items-center border-gray-300 border-[1px] rounded-lg p-2 pr-3 mr-[6px] my-[3px] min-w-[100px] dark:bg-gray-800 dark:border-gray-700 relative ",children:[!c&&(0,n.jsx)("div",{onClick:e=>d(o),className:" -translate-y-1/3 translate-x-1/3 invisible group-hover:visible absolute right-0 top-0 w-[18px] h-[18px] rounded bg-darkcoloro border-[1px] border-darkcolor/[0.4] cursor-pointer ",children:(0,n.jsx)("div",{className:" absolute top-0 left-0 right-0 bottom-0 flex items-center justify-center bg-darkcolor/[0.07] rounded hover:bg-darkcolor/[0.4] ",children:(0,n.jsx)(a.G,{icon:t(68770).g8,transform:{size:15}})})}),(0,n.jsxs)("div",{className:"flex !w-[40px] !h-[40px] bg-gray-500 rounded-lg items-center justify-center text-white",children:["SUCCESS"==i&&(0,n.jsx)(a.G,{icon:null!==(s=null===(l=(0,r.O)(null==o?void 0:o.mimeType))||void 0===l?void 0:l.res)&&void 0!==s?s:t(23130).faFileLines,transform:{size:24}}),"FAILED"==i&&(0,n.jsx)(a.G,{icon:t(17262).xH,transform:{size:24}}),1===i&&(0,n.jsx)(a.G,{spin:!0,icon:t(39847).QD,transform:{size:17}}),i<1&&(0,n.jsxs)("div",{className:" text-[13px] ",children:[Math.round(100*i),"%"]}),!i&&(0,n.jsx)(a.G,{icon:null!=p?p:t(23130).faFileLines,transform:{size:24}})]}),(0,n.jsxs)("div",{className:"flex-1 min-w-0 ms-[6px] ml-[8px] ",children:[(0,n.jsx)("p",{title:o.name||o.filename,className:"text-sm font-medium text-gray-900 truncate dark:text-white max-w-[190px] text-ellipsis m-0",children:o.name||o.filename}),(0,n.jsx)("p",{className:"text-sm text-gray-400 truncate dark:text-gray-300 m-0",children:m||"FILE"})]})]},"".concat(o.name))}},96065:function(e,l,t){"use strict";var n,a;t.d(l,{b:function(){return n}}),(a=n||(n={})).Code="code",a.Preview="preview"},97742:function(e,l,t){"use strict";t.d(l,{Z:function(){return k}});var n=t(57437),a=t(2265),r=t(14301),s=t(56210),i=t(48958),o=t(29501),d=t(69997),c=t(23749),u=t(53436),m=t(16512),p=t(48547),x=t(31486),v=t(70978),h=t(14438),f=t(96535),g=t(16593),b=t(27795),j=t.n(b),w=t(25415);let y=e=>new Promise(l=>setTimeout(l,e)),N={imageGenerationForm:{}};function k(e){let{onSend:l,onClose:b,onCancel:k,imageGenParams:C,prompt:I,deploymentId:S,file:A}=e,[_,P]=(0,w.Z)("preselected-model",""),[E,z]=(0,a.useState)(!1),[T,D]=(0,a.useState)({}),[M,F]=(0,a.useState)({}),[L,Z]=(0,a.useState)({}),[G,R]=(0,a.useState)(!1),[O,U]=(0,a.useState)(!1),[B,H]=(0,a.useState)([]),[V,W]=(0,a.useState)(!1),q=(0,a.useRef)(null),Q=(0,a.useRef)(null),{control:K,handleSubmit:Y,formState:{errors:$},reset:X,watch:J}=(0,o.cI)({defaultValues:{...N}}),ee=J("imageGenerationForm.model"),el=J("imageGenerationForm.prompt"),et=J("imageGenerationForm.scaleFactor"),en=["flux_pro_ultra"],ea=["flux_pro_canny","flux_pro_depth"],{data:er}=(0,g.a)({queryKey:["editImageModels"],queryFn:()=>(0,u.XS7)({}),select:e=>{var l;return null==e?void 0:null===(l=e.result)||void 0===l?void 0:l.models}}),es=e=>{en.includes(e)?(U(!0),R(!1)):ea.includes(e)?(U(!1),R(!0)):(U(!1),R(!1))};(0,a.useEffect)(()=>{es(ee)},[ee]);let ei=e=>{var l,t;let n={},a={model:ee||_};(null==e?void 0:e.model)&&(n.model=e.model,(null==C?void 0:C.isEditRequest)&&!(null==er?void 0:er.includes(a.model))?a.model=(null==C?void 0:C.model)||"flux_pro_ultra":a.model||(a.model=e.model.default));let r=j()(a.model);if(r&&(null==e?void 0:null===(l=e.settings)||void 0===l?void 0:l[r])){let l=null==e?void 0:null===(t=e.settings)||void 0===t?void 0:t[r];n={...n,...l},Object.keys(l).forEach(e=>{a[e]=l[e].default})}if((el||I)&&(a.prompt=el||I),null==C?void 0:C.isEditRequest){let e=[];for(let l=0;l<n.model.options.keys.length;l++)(null==er?void 0:er.includes(n.model.options.keys[l]))&&e.push(l);H(e)}else H(n.model.options.keys.map((e,l)=>l));D(n),C&&!V?setTimeout(()=>{X({imageGenerationForm:C}),W(!0)},60):X({imageGenerationForm:a})};(0,a.useEffect)(()=>{"flux_pro"===ee||"flux_pro_ultra"===ee||"gemini_native"===ee?(R(!1),U(!0)):("flux_pro_canny"===ee||"flux_pro_depth"===ee)&&(R(!0),U(!1))},[ee]),(0,a.useEffect)(()=>{G&&setTimeout(()=>{if(A&&q.current&&0===q.current.files.length){let e=new DataTransfer;e.items.add(A),q.current.files=e.files,q.current.dispatchEvent(new Event("change",{bubbles:!0}))}},60)},[q.current,G,ee]),(0,a.useEffect)(()=>{O&&setTimeout(()=>{if(A&&Q.current&&0===Q.current.files.length){let e=new DataTransfer;e.items.add(A),Q.current.files=e.files,Q.current.dispatchEvent(new Event("change",{bubbles:!0}))}},60)},[Q.current,O,ee]);let{data:eo,isLoading:ed}=(0,g.a)({queryKey:["imageGenSettings"],queryFn:()=>(0,u.pF7)({}),select:e=>null==e?void 0:e.result});(0,a.useEffect)(()=>(z(!0),()=>{z(!1)}),[]),(0,a.useEffect)(()=>{eo&&ei(eo),ee&&P(ee)},[eo,ee]);let ec=async(e,l)=>{let t=null;F(e=>({...e,[l]:1}));let n=await (0,u.saE)({deploymentId:S,selectedFiles:[e]});if(null==n?void 0:n.request_id){let e=999;do{var a,r;if((null==(t=await (0,u.LsV)({request_id:null==n?void 0:n.request_id}))?void 0:t.error)||null==t||(null==t?void 0:null===(a=t.result)||void 0===a?void 0:a.error)){null==t||null===(r=t.result)||void 0===r||r.error,t=null;break}await y(1e3),e--}while(e>0&&(null==t?void 0:t.status)!=="COMPLETED"&&(null==t?void 0:t.status)!=="CANCELED"&&(null==t?void 0:t.status)!=="SUCCESS"&&(null==t?void 0:t.status)!=="FAILED")}return F(e=>({...e,[l]:t?"SUCCESS":"FAILED"})),t},eu=async(e,l,t)=>{var n;let a=e.target.files,r=null==e?void 0:null===(n=e.dataTransfer)||void 0===n?void 0:n.files;if(r&&[...r].length>0){let e=[...r];if(e.length>1){h.Am.error("Please drag and drop only a single file.");return}a=e}let s=(a=Array.from(a||[]))[0];if(s.size>20971520){h.Am.error("Please upload an image with a maximum size of 20MB.");return}let i=new FileReader;i.onload=n=>{var a;let r=new Image;r.onload=()=>{var n,a;let i=Math.max(r.width,r.height),o=Math.min(r.width,r.height);if(o<300){h.Am.error("Please upload an image with a minimum resolution of 300x300");return}if(i/o>2.5&&(null==ee?void 0:null===(a=ee.toString())||void 0===a?void 0:null===(n=a.toLowerCase())||void 0===n?void 0:n.startsWith("magnific"))){h.Am.error("Please upload an image with a maximum aspect ratio of 5:2 for Magnific Upscaling");return}ec(s,t).then(e=>{var t,n,a;if(null==e?void 0:null===(t=e.result)||void 0===t?void 0:t.success){let t=null==e?void 0:null===(a=e.result)||void 0===a?void 0:null===(n=a.result)||void 0===n?void 0:n.docInfos;l.onChange(null==t?void 0:t[0].doc_id)}else Z({...L})}),Z({...L,[t]:{docId:null,filename:null==s?void 0:s.name,mimeType:null==s?void 0:s.type,pageCount:null,size:null==s?void 0:s.size,uniqueFileId:t}}),(null==e?void 0:e.target)&&(e.target.value="")},r.src=null===(a=n.target)||void 0===a?void 0:a.result},i.readAsDataURL(s)},em=(e,l)=>{let t=L[l];return l===(null==t?void 0:t.uniqueFileId)?(0,n.jsx)(m.Z,{file:t,removeFile:()=>{delete L[l],e.onChange(void 0),Z({...L})},progressUpload:M[null==t?void 0:t.uniqueFileId]}):null},ep=(e,l)=>{let t=e.target.value;t&&(!/^\d+$/.test(t)||parseInt(t)>2147483647||0>parseInt(t))||l.onChange(t)};return(0,n.jsx)(i.Vq,{open:E,children:(0,n.jsxs)(i.cZ,{className:"max-w-lg p-0",children:[(0,n.jsx)(i.fK,{className:"pt-6 px-6",children:(0,n.jsx)(i.$N,{children:(null==C?void 0:C.isEditRequest)?"Image Generation (Edit)":"Image Generation"})}),(0,n.jsx)("div",{className:(0,s.cn)("grid gap-6 min-h-40 max-h-96 overflow-y-auto px-6",{"items-center justify-center":ed}),children:ed?(0,n.jsx)(p.G,{spin:!0,icon:t(39847).QD,transform:{size:17},className:"text-bwleftblue"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Qr,{name:"imageGenerationForm.isEditRequest",defaultValue:null==C?void 0:C.isEditRequest,control:K,render:e=>{let{field:l}=e;return null}}),(null==C?void 0:C.isEditRequest)&&(0,n.jsx)(n.Fragment,{children:Object.keys(T||{}).map(e=>{let l=T[e];return"file"===l.type?(0,n.jsx)("div",{children:(0,n.jsx)(o.Qr,{name:"imageGenerationForm.".concat(e),control:K,rules:{required:l.optional?null:"File is mandatory"},render:l=>{var t,a,r;let{field:s}=l;return(0,n.jsxs)("div",{className:"space-y-2.5 w-full leading-[16px] ".concat((null==C?void 0:C.fileEditingDisabled)?"pointer-events-none":""),children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(d.Z,{htmlFor:"imageGenerationForm.".concat(e),children:"Image to Edit"}),(0,n.jsx)("p",{className:"text-[11px] opacity-50 m-0",children:"Using previously generated image to generate a new image"})]}),(0,n.jsxs)("div",{className:"border border-neutral-500 border-dashed rounded-lg ",children:[(0,n.jsxs)("div",{className:"relative h-10 overflow-hidden rounded-lg text-sm focus:outline-none w-full border-neutral-500",children:[(0,n.jsx)("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center ",children:(0,n.jsx)("span",{children:"Editing generated image"})}),(0,n.jsx)("input",{title:"",type:"file",onDrop:l=>{eu(l,s,e)},onChange:l=>{eu(l,s,e)},className:"opacity-0 w-full h-full  cursor-pointer",accept:"image/png, image/jpeg, image/jpg",ref:"controlImage"===e?q:"imagePrompt"===e?Q:null})]}),(0,n.jsx)("div",{className:"flex flex-wrap w-full gap-[10px] px-[10px] py-[10px] border-t-[1px] rounded-b-lg border-dashed border-neutral-500 empty:py-0 empty:border-t-0",children:em(s,e)})]}),(null===(t=$.imageGenerationForm)||void 0===t?void 0:t[e])&&(0,n.jsx)("p",{className:"text-[11px] text-red-500 !m-0",children:null===(r=$.imageGenerationForm)||void 0===r?void 0:null===(a=r[e])||void 0===a?void 0:a.message})]})}})},e):null})}),Object.keys(T||{}).map(e=>{let l=T[e];return(null==C?void 0:C.isEditRequest)&&"file"===l.type?null:(0,n.jsxs)("div",{children:["dropdown"===l.type&&(0,n.jsx)(o.Qr,{name:"imageGenerationForm.".concat(e),control:K,defaultValue:l.default,render:t=>{var a,r,s;let{field:i}=t;return(0,n.jsxs)("div",{className:"space-y-2.5 w-full leading-[16px]",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(d.Z,{htmlFor:"imageGenerationForm.".concat(e),children:l.displayName}),(0,n.jsx)("p",{className:"text-[11px] opacity-50",children:(null==C?void 0:C.isEditRequest)&&"model"===e?"Select the model to use for image editing":l.helptext})]}),(0,n.jsxs)(c.Ph,{value:i.value,onValueChange:i.onChange,children:[(0,n.jsx)(c.i4,{className:"w-56",children:(0,n.jsx)(c.ki,{placeholder:"Select ".concat(l.displayName)})}),(0,n.jsx)(c.Bw,{children:(0,n.jsx)(c.DI,{children:"model"===e?B.map(e=>(0,n.jsx)(c.Ql,{value:l.options.keys[e],children:l.options.values[e]},l.options.keys[e])):l.options.keys.map((e,t)=>(0,n.jsx)(c.Ql,{value:e,children:l.options.values[t]},e))})})]}),"model"===e&&(null==i?void 0:null===(s=i.value)||void 0===s?void 0:null===(r=s.toString())||void 0===r?void 0:null===(a=r.toLowerCase())||void 0===a?void 0:a.startsWith("magnific"))?(0,n.jsxs)("div",{className:"text-[11px]",children:[(0,n.jsx)("span",{className:"font-bold opacity-100 text-red-500",children:"Please note: Magnific can use up a lot of compute points! "}),(0,n.jsx)("a",{className:"text-bwleftblue underline",href:"/chatllm/admin/profile/",rel:"noopener noreferrer",target:"_blank",children:"Learn More"})]}):null]})}}),"number"===l.type&&(0,n.jsx)(o.Qr,{name:"imageGenerationForm.".concat(e),control:K,render:t=>{var a;let{field:r}=t;return(0,n.jsxs)("div",{className:"space-y-2.5 leading-[16px]",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(d.Z,{className:"flex items-center gap-2",children:l.displayName}),(0,n.jsx)("p",{className:"text-[11px] opacity-50",children:l.helptext})]}),(0,n.jsx)(x.Z,{value:r.value?String(r.value):"",onChange:e=>ep(e,r),className:"min-h-0 w-1/3 resize-none outline-none ".concat((null===(a=$.imageGenerationForm)||void 0===a?void 0:a[e])?"border-red-500":""),rows:1,placeholder:"Random",dir:"auto"})]})}}),"text"===l.type&&(0,n.jsx)(o.Qr,{name:"imageGenerationForm.".concat(e),control:K,render:t=>{var a,r,s,i;let{field:o}=t;return(0,n.jsxs)("div",{className:"space-y-2.5 leading-[16px]",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(d.Z,{className:"flex items-center gap-2",children:l.displayName}),(0,n.jsx)("p",{className:"text-[11px] opacity-50",children:l.helptext})]}),(0,n.jsx)(x.Z,{...o,className:"resize-none outline-none ".concat((null===(a=$.imageGenerationForm)||void 0===a?void 0:a[e])?"border-red-500":""),rows:3,placeholder:"e.g. A serene mountain landscape with snow-capped peaks",dir:"auto"}),(null===(r=$.imageGenerationForm)||void 0===r?void 0:r[e])&&(0,n.jsx)("p",{className:"text-[11px] text-red-500 !m-0",children:null===(i=$.imageGenerationForm)||void 0===i?void 0:null===(s=i[e])||void 0===s?void 0:s.message})]})}}),"switch"===l.type&&(0,n.jsx)(o.Qr,{name:"imageGenerationForm.".concat(e),control:K,defaultValue:l.default,render:e=>{let{field:t}=e;return(0,n.jsx)("div",{className:"space-y-2.5 w-full leading-[16px]",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(v.Z,{className:" mt-[3px] bg-darkcolor/[0.2] ",value:t.value,onChange:t.onChange}),(0,n.jsx)("span",{className:"text-sm mb-0.5",children:l.helptext})]})})}}),"file"===l.type&&(0,n.jsx)(o.Qr,{name:"imageGenerationForm.".concat(e),control:K,rules:{required:l.optional?null:"File is mandatory"},render:a=>{var r,s,i;let{field:o}=a;return(0,n.jsxs)("div",{className:"space-y-2.5 w-full leading-[16px] ".concat((null==C?void 0:C.fileEditingDisabled)?"pointer-events-none":""),children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(d.Z,{htmlFor:"imageGenerationForm.".concat(e),children:l.displayName}),(0,n.jsx)("p",{className:"text-[11px] opacity-50 m-0",children:l.helptext})]}),(0,n.jsxs)("div",{className:"border border-neutral-500 border-dashed rounded-lg ",children:[(0,n.jsxs)("div",{className:"relative h-10 overflow-hidden rounded-lg text-sm focus:outline-none w-full border-neutral-500",children:[(0,n.jsxs)("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center ",children:[!(null==C?void 0:C.fileEditingDisabled)&&(0,n.jsx)(p.G,{className:"pr-[5px]",icon:t(18059).cf}),(0,n.jsx)("span",{children:(null==C?void 0:C.fileEditingDisabled)?"Editing generated image":"Upload / Drag and drop files here"})]}),(0,n.jsx)("input",{title:"",type:"file",onChange:l=>{eu(l,o,e)},onDrop:l=>{eu(l,o,e)},className:"opacity-0 w-full h-full  cursor-pointer",accept:"image/png, image/jpeg, image/jpg",ref:"controlImage"===e?q:"imagePrompt"===e?Q:null})]}),(0,n.jsx)("div",{className:"flex flex-wrap w-full gap-[10px] px-[10px] py-[10px] border-t-[1px] rounded-b-lg border-dashed border-neutral-500 empty:py-0 empty:border-t-0",children:em(o,e)})]}),(null===(r=$.imageGenerationForm)||void 0===r?void 0:r[e])&&(0,n.jsx)("p",{className:"text-[11px] text-red-500 !m-0",children:null===(i=$.imageGenerationForm)||void 0===i?void 0:null===(s=i[e])||void 0===s?void 0:s.message})]})}}),"slider"===l.type&&(0,n.jsx)(o.Qr,{name:"imageGenerationForm.".concat(e),control:K,defaultValue:l.default,render:e=>{let{field:t}=e;return(0,n.jsxs)("div",{className:"space-y-2.5 leading-[16px]",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(d.Z,{className:"flex items-center gap-2",children:l.displayName}),(0,n.jsx)("p",{className:"text-[11px] opacity-50",children:l.helptext})]}),(0,n.jsxs)("div",{className:"flex flex-row",children:[(0,n.jsxs)(f.fC,{className:"relative flex h-5 w-[200px] touch-none select-none items-center ml-[5px]",defaultValue:[l.default],max:l.max,min:l.min,step:l.step,value:[t.value],onValueChange:e=>{(null==e?void 0:e.length)>0&&t.onChange(e[0])},children:[(0,n.jsx)(f.fQ,{className:"relative h-[3px] grow rounded-full bg-neutral-300",children:(0,n.jsx)(f.e6,{className:"absolute h-full rounded-full bg-bwleftblue"})}),(0,n.jsx)(f.bU,{className:"block size-4 rounded-[10px] bg-bwleftblue shadow-[0_2px_10px] shadow-blackA4 hover:bg-bwleftblue focus:shadow-[0_0_0_5px] focus:shadow-blackA5 focus:outline-none","aria-label":"Volume"})]}),(0,n.jsx)(d.Z,{className:"text-sm ml-4",children:Number(t.value).toFixed(2)})]})]})}})]},e)})]})}),(0,n.jsx)(i.cN,{className:"mt-4 flex-row justify-end w-full pb-6 px-6",children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(r.Z,{noBack:!0,className:"text-darkcolor/[0.7] rounded-full",moreSpace:!0,onClick:()=>{z(!1),k?k():b()},children:"Cancel"}),(0,n.jsx)(r.Z,{onClick:Y(e=>{let t=!1;if(Object.keys(M||{}).length>0&&(t=Object.values(M).some(e=>1===e)),t)h.Am.error("Uploading file...");else{var n,a,r;if((null==ee?void 0:null===(a=ee.toString())||void 0===a?void 0:null===(n=a.toLowerCase())||void 0===n?void 0:n.startsWith("magnific"))&&et){let e=parseFloat(et.replace("x","")),l=(null===(r=L.imagePrompt)||void 0===r?void 0:r.size)*e*e/1024/1024;if(l>20){h.Am.error("The final image size is too large (~"+l.toFixed(2)+"MB). Please try a smaller scale factor.");return}}z(!1),l(e.imageGenerationForm),b()}}),className:(0,s.cn)("rounded-full !bg-bwleftblue !text-darkcoloro dark:text-darkwhite/[0.7]"),children:"Generate"})]})})]})})}},69440:function(e,l,t){"use strict";t.d(l,{P:function(){return g}});var n=t(57437),a=t(3916),r=t(48547),s=t(2265),i=t(14438),o=t(62514),d=t(32397),c=t(14301),u=t(56210),m=t(3426),p=t(63020),x=t(49070),v=t(95951),h=t(5529);let f={},g=e=>{let{promptInfo:l,isMobile:a,type:u}=e,[m,p]=(0,d.Z)(),x=(0,s.useCallback)(()=>{p(l),i.Am.success("Copied to Clipboard!",{icon:(0,n.jsx)(r.G,{icon:t(66522).Yj,transform:{size:16}})})},[l]);return(0,n.jsx)(o.Z,{className:"".concat(a?"":"!w-[700px]"),align:"center",content:(0,n.jsxs)("div",{className:"flex flex-col gap-[12px] text-darkcolor",children:[(0,n.jsx)("div",{className:"text-[#00000080] dark:text-darkwhite/[0.7]",children:"Prompt"}),(0,n.jsx)("div",{className:"".concat(a?"max-h-[400px] overflow-auto":""),children:l}),(0,n.jsxs)(c.Z,{useAccentColor:!0,className:" !px-[7px] !py-[0] border-[1px] border-bwleftblue/[0.1] w-[86px] h-[40px] rounded-[20px]",onClick:x,children:[(0,n.jsx)(r.G,{icon:t(66522).Yj,transform:{size:13}})," Copy"]})]}),children:(0,n.jsx)("div",{className:" ".concat("image_url"!==u||a?"absolute right-[40px] top-[0px] flex items-center justify-center h-[32px] w-[32px] bg-[#00000080] dark:bg-darkwhite/[0.3] hover:dark:bg-darkwhite/[0.3] hover:bg-[#00000080]/[0.3]  text-darkwhite ":"text-gray-600 hover:text-gray-900 flex items-center justify-center",",cursor-pointer rounded-[4px"),children:(0,n.jsx)(r.G,{icon:t(16672).DB,size:"lg"})})})};l.Z=e=>{let{alt:l,type:o,isMobile:d,actualAvailableWidth:c,measure:b,imgContent:j,isAgent:w,isWorkflowAgent:y,isCollage:N=!1}=e,[k,C]=(0,s.useState)(!0),[I,S]=(0,s.useState)(!1),[A,_]=(0,s.useState)(null),[P,E]=(0,s.useState)(null),[z,T]=(0,x.PB)("sidebar"),{setSelectedImage:D}=(0,m.H)(),{setDeepResearchMsgInfo:M,setCsvMsgInfo:F,setShowRightSidePanel:L,setShowArtifactInfo:Z}=(0,h.b)(e=>({setDeepResearchMsgInfo:e.setDeepResearchMsgInfo,setCsvMsgInfo:e.setCsvMsgInfo,setShowRightSidePanel:e.setShowRightSidePanel,setShowArtifactInfo:e.setShowArtifactInfo})),{setSelectedArtifactMsgId:G}=(0,p.P)(e=>({setSelectedArtifactMsgId:e.setSelectedArtifactMsgId})),[R,O]=(0,x.PB)("playgroundType"),{src:U,srcHeight:B,srcWidth:H}=(0,s.useMemo)(()=>({src:null==j?void 0:j.segment,srcHeight:null==j?void 0:j.height,srcWidth:null==j?void 0:j.width}),[j]),V=(0,s.useMemo)(()=>{let e=null!=A?A:{height:400,width:400},{height:l,width:t}=a.Z.getNonDialogImageMeasure(parseInt(B,10),parseInt(H,10),d,c);return t>1&&l>1&&(e={height:l,width:t}),e},[A,B,H,d,c]),W=(0,s.useMemo)(()=>{let e=null==f?void 0:f[U];if(null!=e){let l=URL.createObjectURL(e);return C(!1),l}return P},[U,P]),q=(0,s.useMemo)(()=>null==(null==f?void 0:f[U])&&k,[k,U]),Q=(0,s.useRef)(b);(0,s.useEffect)(()=>{Q.current=b},[b]);let K=()=>{C(!1),setTimeout(()=>{var e;null===(e=Q.current)||void 0===e||e.call(Q)},0)};(0,s.useLayoutEffect)(()=>{var e;null===(e=Q.current)||void 0===e||e.call(Q)},[j,q,W,B]);let Y=(0,s.useCallback)(()=>{let{height:e,width:l}=a.Z.getNonDialogImageMeasure(parseInt(B,10),parseInt(H,10),d,c);_({height:e,width:l})},[B,H,d,c]);(0,s.useMemo)(()=>{let{height:e,width:l}=a.Z.getBestImageMeasure(parseInt(B,10),parseInt(H,10),d,c),t=e;null!=t&&t<=1&&(t=null);let n=l;return null!=n&&n<=1&&(n=null),{width:n,height:t}},[H,B,d,c]),(0,s.useEffect)(()=>{y||Y()},[B,H,d,c,y]);let $=async e=>{try{let l=await fetch(e).then(e=>e.arrayBuffer()).then(e=>new Blob([e],{type:"image/jpeg"})),t=document.createElement("a"),n=URL.createObjectURL(l);t.href=n,t.download="download",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(n)}catch(e){console.error(e),i.Am.error(a.Z.isNullOrEmpty(e)?""+e:a.Z.errorDefault)}};(0,s.useEffect)(()=>{if(null==f?void 0:f[U])return;let e=async()=>{try{let e=await fetch(U,{headers:{Accept:"image/jpeg"}}).then(e=>e.arrayBuffer()).then(e=>new Blob([e],{type:"image/jpeg"}));f[U]=e;let l=URL.createObjectURL(e);E(l),C(!1)}catch(e){S(!0),C(!1),console.error(e)}};(null==U?void 0:U.includes("imagedelivery.net"))?e():E(U)},[U]),(0,s.useEffect)(()=>()=>{W&&URL.revokeObjectURL(W)},[W]);let X=(0,s.useMemo)(()=>{let e=window.innerWidth>window.innerHeight?window.innerHeight:window.innerWidth,l=e*(d?1:.75),t=e*(d?1:.75);return B<H?d?l=4*(t=H*t/1792)/7:t=7*l/4:B>H&&(t=d?4*(l=B*window.innerHeight*.68/1792)/7:4*l/7),{dialogHeight:"max-w-[".concat(.8*window.innerHeight,"px]"),dilaogWidth:"max-w-[".concat(.8*window.innerWidth,"px]"),imgHeight:l,imgWidth:t}},[B,H,window.innerWidth,window.innerHeight]);return(0,n.jsxs)(n.Fragment,{children:["image_url"!==o||w||d?(0,n.jsx)(v.Z,{zIndex:"z-[13]",className:"h-full w-full ".concat(X.dilaogWidth," ").concat(X.dialogHeight," ").concat(d?"!px-[4px]":""),content:(0,n.jsxs)("div",{className:"relative",style:{height:"95%"},children:[(null==j?void 0:j.imgGenerationPrompt)?(0,n.jsx)(g,{promptInfo:null==j?void 0:j.imgGenerationPrompt,isMobile:d}):null,(0,n.jsx)("a",{onClick:()=>{$(U)},children:(0,n.jsx)("div",{className:"absolute right-[0px] top-[0px] bg-[#00000080] dark:bg-darkwhite/[0.3] hover:dark:bg-darkwhite/[0.2] hover:bg-[#00000080]/[0.3] w-[32px] h-[32px] rounded-[4px] flex items-center justify-center text-darkwhite cursor-pointer",children:(0,n.jsx)(r.G,{icon:t(96951).E0,transform:{size:16}})})}),(0,n.jsx)("div",{className:" w-full b-[0px] flex items-center justify-center h-full",children:(0,n.jsx)("img",{className:"max-w-full max-h-full object-contain object-left-top",src:W,alt:l})})]}),title:"",cancelText:"Close",hideOkButton:!0,children:y?(0,n.jsxs)("div",{className:"relative max-w-full max-h-[560px] overflow-hidden flex items-center",style:q?{width:V.width,height:V.height}:{},children:[(0,n.jsx)("a",{onClick:e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),$(U)},style:q||I?{display:"none"}:{},children:(0,n.jsx)("div",{style:q||I?{display:"none"}:{},className:"absolute right-3 top-3 bg-[#00000080] hover:bg-[#00000080]/[0.3] size-8 rounded-sm flex items-center justify-center text-darkwhite cursor-pointer ".concat(d?"":"hidden"," group-hover:flex"),children:(0,n.jsx)(r.G,{icon:t(96951).E0,transform:{size:16}})})}),(0,n.jsx)("img",{style:q||I?{display:"none",width:V.width,height:V.height}:{},className:"max-w-full  max-h-[560px] object-contain object-center",src:W,alt:l,onLoad:K,onError:e=>{K(),S(!0)}})]}):(0,n.jsx)("div",{className:"h-full w-full",children:(0,n.jsxs)("div",{className:"aamax-w-full max-h-[560px] b-[0px] overflow-auto rounded-[8px] ".concat(N?"":"inline-block"),children:[(0,n.jsx)("a",{onClick:e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),$(U)},style:q||I?{display:"none"}:{},children:(0,n.jsx)("div",{style:q||I?{display:"none"}:{},className:"absolute right-3 top-3 bg-[#00000080] hover:bg-[#00000080]/[0.3] size-8 rounded-sm flex items-center justify-center text-darkwhite cursor-pointer ".concat(d?"":"hidden"," group-hover:flex"),children:(0,n.jsx)(r.G,{icon:t(96951).E0,transform:{size:16}})})}),(0,n.jsx)("img",{className:"!m-0",style:q||I?{display:"none",width:V.width,height:V.height}:{},src:W,alt:l,onLoad:K,onError:e=>{K(),S(!0)}})]})})}):(0,n.jsx)("img",{className:"cursor-pointer max-w-full max-h-full object-contain chatImageClass",src:j.segment,alt:l,onLoad:K,onClick:()=>{D({...j,downloadImage:$}),G(null),Z(""),O(null),M(null),F(null),T(""),setTimeout(()=>{L(!0)},10)}}),q&&!I&&(0,n.jsx)("div",{className:"flex items-center justify-center w-full h-full absolute top-0 border-[1px]/[0.2] border-neutral-500 rounded-[8px] bg-neutral-500/[0.2]",children:(0,n.jsx)(r.G,{icon:t(39847).QD,transform:{size:16},spin:!0})}),I&&(0,n.jsxs)("div",{className:(0,u.cn)("flex flex-col gap-[4px] items-center justify-center w-full h-full border-[1px]/[0.2] border-neutral-500 rounded-[8px] bg-neutral-500/[0.2] text-red-500",y?"p-[20px]":"absolute top-0"),children:[(0,n.jsx)(r.G,{icon:t(89653).faTriangleExclamation,transform:{size:16}}),(0,n.jsx)("div",{children:"Error while loading the image"})]})]})}},75292:function(e,l,t){"use strict";t.d(l,{Z:function(){return s}});var n=t(57437),a=t(3916),r=t(48547);function s(e){let{value:l,onChange:s,placeholder:i,isNumber:o,clearButton:d,className:c,min:u,max:m}=e,p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=a.Z.tryParseInt(l)||0;t+=e,null!=m&&t>m&&(t=m),null!=u&&t<u&&(t=u),null==s||s({target:{value:t}})};return(0,n.jsxs)("span",{className:" relative flex w-full border-[1px] border-darkcolor/[0.15] dark:border-[#ffffff]/[0.5] rounded ",children:[(0,n.jsx)("input",{min:u,max:m,onKeyDown:e=>{var l;let t=null===(l=e.key)||void 0===l?void 0:l.toLowerCase();"arrowup"===t?(null==e||e.preventDefault(),p(1)):"arrowdown"===t&&(null==e||e.preventDefault(),p(-1))},className:" flex-1 text-darkcolor bg-transparent h-[40px] px-[12px] !outline-none "+(null!=c?c:" "),placeholder:i,value:l,onChange:e=>{if(o){let l=a.Z.tryParseInt(e.target.value)||"";e.target.value=l}null==s||s(e)}}),o&&(0,n.jsxs)("div",{className:" flex flex-col w-[39px] border-l-[1px] border-l-darkcolor/[0.15] ",children:[(0,n.jsx)("div",{onClick:e=>{p(1)},className:" select-none flex-1 flex items-center justify-center border-b-[1px] border-b-darkcolor/[0.1] hover:bg-darkcolor/[0.05] transition-all duration-300 ",children:(0,n.jsx)(r.G,{className:" opacity-60 ",icon:t(45623).l1,transform:{size:13}})}),(0,n.jsx)("div",{onClick:e=>{p(-1)},className:" select-none flex-1 flex items-center justify-center hover:bg-darkcolor/[0.05] transition-all duration-300 ",children:(0,n.jsx)(r.G,{className:" opacity-60 ",icon:t(16750).eW,transform:{size:13}})})]}),d&&!o&&l.length>0&&(0,n.jsx)("div",{onClick:e=>{e.target.value="",null==s||s(e)},className:" flex !cursor-pointer pt-[3px] pb-[2px] px-[5px] bg-darkcolor/[0.05] hover:bg-darkcolor/[0.12] rounded-full my-[4px] mr-[4px] ",children:(0,n.jsx)(r.G,{className:" opacity-60 ",icon:t(68770).g8,transform:{size:16}})})]})}},72360:function(e,l,t){"use strict";t.d(l,{Z:function(){return r}});var n=t(57437),a=t(48547);function r(e){let{isAbsolute:l=!1,children:r,size:s=24,isDraw:i=!1,isDark:o=!1}=e;return(0,n.jsxs)("div",{className:"\n        flex flex-col justify-center\n        ".concat(l?"absolute top-0 left-0 right-0 bottom-0":"","\n        ").concat(i?"":"items-center","\n      "),children:[!i&&(0,n.jsx)(a.G,{icon:t(39847).QD,transform:{size:s},spin:!0}),i&&(0,n.jsx)("img",{src:o?"/chatllm/staticllm/abacus_loader.gif":"/chatllm/staticllm/abacus_loader_dark.gif",className:"w-[26px] h-[26px] rounded-full"}),r&&(0,n.jsx)("div",{className:"text-[14px] text-darkcolor mt-[15px]",children:r})]})}},46137:function(e,l,t){"use strict";t.d(l,{v:function(){return O}});var n=t(57437),a=t(2265),r=t(42715),s=t.n(r),i=t(76843),o=t(30686),d=t(46957),c=t(34743),u=t(81785),m=t(88308),p=t(46882),x=t(10760),v=t(32854),h=t(81315),f=t(45492),g=t(2377);let b={allowDangerousHtml:!0},j=/^(https?|ircs?|mailto|xmpp)$/i,w=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function y(e){let l=e.allowedElements,t=e.allowElement,r=e.children||"",j=e.className,y=e.components,k=e.disallowedElements;e.rehypePlugins,e.remarkPlugins;let I=(0,a.useMemo)(()=>e.remarkRehypeOptions?{...e.remarkRehypeOptions,...b}:b,[e]),S=e.skipHtml,A=e.unwrapDisallowed,_=e.urlTransform||N,P=(0,a.useMemo)(()=>(0,m.l)().use(c.Z).use(g.Z).use(h.Z).use(u.Z).use(v.Z).use(f.Z,{errorColor:"inherit"}).use(C),[I]),E=(0,a.useMemo)(()=>new x.k,[]),z=(0,a.useMemo)(()=>("string"==typeof r?E.value=r:(0,i.t1)("Unexpected value `"+r+"` for `children` prop, expected `string`"),E),[r,E]);(0,a.useEffect)(()=>{for(let t of(l&&k&&(0,i.t1)("Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other"),w))Object.hasOwn(e,t.from)&&(0,i.t1)("Unexpected `"+t.from+"` prop, "+(t.to?"use `"+t.to+"` instead":"remove it")+" (see <#"+t.id+"> for more info)")},[l,k,e,w,""]);let T=(0,a.useMemo)(()=>P.parse(z),[z,r,P]),D=(0,a.useRef)(new Map),M=(0,a.useRef)(null);(0,a.useEffect)(()=>{s()(r)?M.current&&(null==r?void 0:r.startsWith(M.current))||(M.current=r,D.current=new Map):(M.current=null,D.current=new Map)},[r,M]);let F=(0,a.useMemo)(()=>{var e;let l=[];null==T||null===(e=T.children)||void 0===e||e.forEach((e,t)=>{var n,a,r,s;let i=null===(a=D.current)||void 0===a?void 0:null===(n=a.get)||void 0===n?void 0:n.call(a,t);if(i&&(null==i?void 0:i.node)===e)l.push(i.hast);else{let n;let a=P.runSync({type:"root",children:[e]},z);n=j?{type:"element",tagName:"div",properties:{className:j},children:(null==a?void 0:a.type)==="root"?null==a?void 0:a.children:[a]}:a,(0,p.Vn)(n,L),null===(s=D.current)||void 0===s||null===(r=s.set)||void 0===r||r.call(s,t,{node:e,hast:n}),null==l||l.push(n)}});let t={type:"root",children:null==l?void 0:l.flatMap(e=>(null==e?void 0:e.type)==="root"?null==e?void 0:e.children:[e])};return j?{type:"element",tagName:"div",properties:{className:j},children:(null==t?void 0:t.type)==="root"?null==t?void 0:t.children:[t]}:t},[j,D,T,z,P]);return(0,o.v)(F,{Fragment:n.Fragment,components:y,ignoreInvalidStyle:!0,jsx:n.jsx,jsxs:n.jsxs,passKeys:!0,passNode:!0});function L(e,n,a){if("raw"===e.type&&a&&"number"==typeof n)return S?a.children.splice(n,1):a.children[n]={type:"text",value:e.value},n;if("element"===e.type){let l;for(l in d.w)if(Object.hasOwn(d.w,l)&&Object.hasOwn(e.properties,l)){let t=e.properties[l],n=d.w[l];(null===n||n.includes(e.tagName))&&(e.properties[l]=_(String(t||""),l,e))}}if("element"===e.type){let r=l?!l.includes(e.tagName):!!k&&k.includes(e.tagName);if(!r&&t&&"number"==typeof n&&(r=!t(e,n,a)),r&&a&&"number"==typeof n)return A&&e.children?a.children.splice(n,1,...e.children):a.children.splice(n,1),n}}}function N(e){let l=e.indexOf(":"),t=e.indexOf("?"),n=e.indexOf("#"),a=e.indexOf("/");return -1===l||-1!==a&&l>a||-1!==t&&l>t||-1!==n&&l>n||j.test(e.slice(0,l))?e:""}let k=e=>null==e?void 0:e.map(e=>"text"===e.type?"string"==typeof e.value?e.value:"":"element"===e.type&&e.children?k(e.children):"").join(""),C=()=>e=>{(0,p.Vn)(e,"element",e=>{if("code"===e.tagName){let l=k(e.children);e.properties={...e.properties,rawcode:l||""}}})};t(2446);var I=t(76630),S=t(80647),A=t.n(S),_=t(48547),P=t(3916),E=t(14438),z=t(56210),T=t(32397);t(30803);var D=t(49070);function M(e){let{popupContent:l,popupContentWidth:t,children:r}=e,s=(0,a.useRef)(null),i=(0,a.useRef)(null),[o,d]=(0,D.PB)("hideTopBar"),c="1"===o,[u,m]=(0,a.useState)(!1),[p,x]=(0,a.useState)("down"),[v,h]=(0,a.useState)("left"),f=()=>{if(!s.current||!i.current)return;let e=s.current.getBoundingClientRect(),l=i.current.getBoundingClientRect(),n=window.innerHeight,a=t<window.innerWidth?t:window.innerWidth;e.top<n/2-50?x("down"):x("up");let r=!c&&window.innerWidth>980?260:0,o=e.left-r,d=a-e.right+r;if(l.width>=a&&(i.current.style.width="".concat(a-40,"px"),i.current.style.maxHeight="600px"),Math.abs(d-o)<.2*a){let e=d>o?2*o:2*d;e<l.width&&(i.current.style.width="".concat(e-20,"px"),i.current.style.maxHeight="400px"),h("center")}else d>o?(l.width>d&&(i.current.style.width="".concat(d,"px"),i.current.style.maxHeight="400px"),h("left")):d<o&&(l.width>o&&(i.current.style.width="".concat(o,"px"),i.current.style.maxHeight="400px"),h("right"))};return(0,a.useEffect)(()=>{if(u){let e=setTimeout(()=>{f()},0);return window.addEventListener("resize",f),()=>{clearTimeout(e),window.removeEventListener("resize",f)}}},[u]),(0,n.jsxs)("span",{className:"citationWrapper",ref:s,onMouseEnter:()=>{m(!0)},onMouseLeave:()=>{m(!1)},children:[r,u&&l&&(0,n.jsx)("div",{ref:i,className:"citationPopup citationPopup--".concat(p," citationPopup--").concat(v),children:l})]})}var F=t(14301),L=t(29827),Z=t(21770),G=t(53436),R=t(23888);let O=e=>{let{text:l,components:r,isDark:s,onNeedData:i,onNeedSegmentData:o,onClickAnchorTagHandler:d,deploymentId:c,deploymentConversationId:u,highlightColor:m,containerWidth:p}=e,[x,v]=(0,T.Z)(),h=(0,a.useMemo)(()=>(0,I.i)(l),[l]),f=(0,a.useMemo)(()=>m?"bg-[".concat(m,"]"):"",[m]),g=(0,a.useMemo)(()=>({code:e=>{var l,a;let{children:r,className:s,node:i,rawcode:d,...m}=e,p=/language-(\w+)/.exec(s||"");return p?(0,n.jsxs)("div",{"data-gramm":"false",className:" relative bg-neutral-100 dark:bg-neutral-800 mb-2 ",children:[(0,n.jsx)("div",{className:" mt-[7px] rounded-t-[3px] px-[14px] font-normal py-[6px] border-[1px] border-[rgba(128,128,128,0.4)] flex items-center ".concat(A().codeHeader),children:(null==p?void 0:p[1])||""}),(0,n.jsx)("div",{className:"sticky top-[2rem] ".concat(A().codeHeader),children:(0,n.jsx)("div",{className:"absolute bottom-[8px] right-2 flex items-center bg-neutral-100 dark:bg-neutral-800",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(U,{deploymentId:c,deploymentConversationId:u,onNeedSegmentData:o}),(0,n.jsxs)("div",{onClick:e=>{let l=null==d?void 0:d.replace(/(\u00A0)|  \n|\n$/g,(e,l)=>"\xa0"===l?" ":"  \n"===e?"\n":"\n"===e?"":e);(null==l?void 0:l.endsWith("```"))&&(l=l.substring(0,l.length-3)),(null==l?void 0:l.startsWith("```sql"))&&(l=null==l?void 0:l.substring(6)),v(l=P.Z.removeEnters(null==l?void 0:l.trim())),E.Am.success("Copied!")},className:" flex items-center gap-[4px] text-[11px] text-darkcolor/[0.5] !cursor-pointer hover:text-darkcolor/[0.7] hover:bg-darkcolor/[0.06] p-[2px] pt-[4px] rounded ",children:[(0,n.jsx)(_.G,{icon:t(66522).Yj,transform:{size:16}}),(0,n.jsxs)("span",{className:"w-[60px]",children:["Copy ",(null==p?void 0:null===(l=p[1])||void 0===l?void 0:l.toLowerCase())==="sql"?"SQL":(null==p?void 0:null===(a=p[1])||void 0===a?void 0:a.toLowerCase())==="plaintext"?"":"Code"]})]})]})})}),(0,n.jsx)("div",{style:{fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},className:" px-[15px] py-[10px] rounded-b-[4px] border-[1px] border-t-0 border-[rgba(128,128,128,0.4)] ",children:r})]}):(0,n.jsx)("code",{"data-gramm":"false",...m,className:s,children:r})},a:e=>{let{node:l,...t}=e;return(0,n.jsx)(B,{...t,containerWidth:p,onClickAnchorTagHandler:d,onNeedData:i})},p:e=>{var l,t,a,r,s,i,o,d,c,u;let{node:m,...p}=e,x=!1;return(null==m?void 0:null===(l=m.children)||void 0===l?void 0:l.length)===1&&(null==m?void 0:null===(a=m.children)||void 0===a?void 0:null===(t=a[0])||void 0===t?void 0:t.tagName)==="span"&&Array.isArray(null==m?void 0:null===(i=m.children)||void 0===i?void 0:null===(s=i[0])||void 0===s?void 0:null===(r=s.properties)||void 0===r?void 0:r.className)&&(null==m?void 0:null===(u=m.children)||void 0===u?void 0:null===(c=u[0])||void 0===c?void 0:null===(d=c.properties)||void 0===d?void 0:null===(o=d.className)||void 0===o?void 0:o.includes("katex"))&&(x=!0),f?(0,n.jsx)("span",{...p,className:(0,z.cn)(null==p?void 0:p.className,"first:mt-1.5",x?"katex-only":""),children:(0,n.jsx)("span",{className:(0,z.cn)("inline pt-[1px] pb-[4px] px-1 rounded text-black",f),children:p.children})}):(0,n.jsx)("p",{...p,className:(0,z.cn)(null==p?void 0:p.className,"first:mt-1.5",x?"katex-only":""),children:p.children})},li:e=>{let{node:l,...t}=e;return f?(0,n.jsx)("li",{...t,className:(0,z.cn)(null==t?void 0:t.className,"ml-4 !my-0 list-disc",f?"text-black":""),children:(0,n.jsx)("span",{className:(0,z.cn)("pt-[1px] pb-[4px] px-1 pr-0 rounded text-black",f),children:t.children})}):(0,n.jsx)("li",{...t,className:(0,z.cn)(null==t?void 0:t.className,"ml-4 list-disc"),children:t.children})},ol:e=>{let{node:l,...t}=e;return(0,n.jsx)("ol",{...t,className:(0,z.cn)(null==t?void 0:t.className,f?"!my-0":""),children:t.children})},ul:e=>{let{node:l,...t}=e;return(0,n.jsx)("ul",{...t,className:(0,z.cn)(null==t?void 0:t.className,f?"!my-0":""),children:t.children})},strong:e=>{let{node:l,...t}=e;return(0,n.jsx)("strong",{...t,className:(0,z.cn)(null==t?void 0:t.className,f?"text-black":""),children:t.children})}}),[s,i,c,u,o,d,f,p]),b=(0,a.useMemo)(()=>null!=r?r:g,[r,g]);return(0,n.jsx)(y,{components:b,children:h})},U=(0,a.memo)(e=>{let{onNeedSegmentData:l,deploymentId:r,deploymentConversationId:s}=e,{setIsProcessingExecuteCode:i,isProcessing:o}=(0,R.g)(e=>({setIsProcessingExecuteCode:e.setIsProcessingExecuteCode,isProcessing:e.isProcessing})),[d,c]=(0,a.useState)(null),[u,m]=(0,D.pZ)(),p=(0,L.NL)(),[x,v]=(0,a.useState)(!1),[h,f]=(0,a.useState)(null),[g,b]=(0,a.useState)(null);(0,a.useEffect)(()=>{i(!!h)},[h]),(0,a.useEffect)(()=>{let e=null==l?void 0:l();c(null!=e?e:null)},[u,l]);let j=!!(null==d?void 0:d.codeId)&&!!(null==d?void 0:d.showExecuteButton)&&!g&&!h&&!x&&!o,w=!!h&&h===(null==d?void 0:d.codeId),y=!!g&&g===(null==d?void 0:d.codeId),N=(0,Z.D)({mutationFn:async e=>{f(e),m();let l=await (0,G.da7)({params:{codeId:e,deploymentId:r,deploymentConversationId:s}});if(m(),!(null==l?void 0:l.success))throw Error("Failed to execute code")},onSuccess:()=>{g||(v(!0),null==p||p.invalidateQueries({queryKey:["listConvoOne",r,s]}).then(e=>{setTimeout(()=>{v(!1),m()},0)})),m()},onError:e=>{m(),E.Am.error((null==e?void 0:e.message)||"Failed to execute code")},onSettled:()=>{m(),f(null)}}),k=(0,Z.D)({mutationFn:async e=>{b(e),f(null),m(),v(!0);let l=await (0,G.egC)({params:{codeId:e,deploymentId:r,deploymentConversationId:s}});if(v(!1),m(),!(null==l?void 0:l.success))throw Error("Failed to stop code execution")},onSuccess:()=>{m()},onError:e=>{m(),E.Am.error((null==e?void 0:e.message)||"Failed to stop code execution")},onSettled:()=>{m(),b(null)}}),C=(0,a.useMemo)(()=>N.mutate,[N]),I=(0,a.useMemo)(()=>k.mutate,[k]),S=(0,a.useCallback)(()=>C(null==d?void 0:d.codeId),[null==d?void 0:d.codeId,d,C]),A=(0,a.useCallback)(()=>I(null==d?void 0:d.codeId),[d,null==d?void 0:d.codeId,I]);return(0,n.jsxs)(n.Fragment,{children:[j?(0,n.jsxs)("div",{onClick:()=>w?null:null==S?void 0:S(),className:" flex items-center gap-[4px] text-[11px] text-darkcolor/[0.5] !cursor-pointer hover:text-darkcolor/[0.7] hover:bg-darkcolor/[0.06] p-[2px] pt-[4px] rounded ",children:[(0,n.jsx)(_.G,{icon:t(85460).dD,transform:{size:16}}),(0,n.jsx)("span",{children:"Execute"})]}):null,w||y?(0,n.jsx)("div",{className:" flex items-center gap-[4px] text-[11px] text-darkcolor/[0.5] !cursor-pointer hover:text-darkcolor/[0.7] hover:bg-darkcolor/[0.06] p-[2px] pt-[4px] rounded ",children:(0,n.jsx)(_.G,{icon:t(35078).AX,spin:!0,transform:{size:16}})}):null,w&&!y?(0,n.jsxs)("div",{onClick:()=>null==A?void 0:A(),className:" flex items-center gap-[4px] text-[11px] text-darkcolor/[0.5] !cursor-pointer hover:text-darkcolor/[0.7] hover:bg-darkcolor/[0.06] p-[2px] pt-[4px] rounded ",children:[(0,n.jsx)(_.G,{icon:t(85460).dD,transform:{size:16}}),(0,n.jsx)("span",{children:"Stop Execution"})]}):null]})}),B=(0,a.memo)(e=>{let{href:l,children:r,onClickAnchorTagHandler:s,onNeedData:i,containerWidth:o}=e,{isProcessing:d}=(0,R.g)(e=>({isProcessing:e.isProcessing})),[c,u]=(0,D.pZ)();if((0,a.useEffect)(()=>{!d&&((null==l?void 0:l.includes("search_result_"))||(null==l?void 0:l.includes("rag_source_")))&&setTimeout(()=>{u()},100)},[l,d]),!((null==l?void 0:l.includes("search_result_"))||(null==l?void 0:l.includes("rag_source_"))))return(0,n.jsx)("a",{href:l,target:"_blank",rel:"noopener noreferrer",children:r});{var m,p,x,v,h,f;let e=null==i?void 0:i(),a=l.includes("search_result_verification_"),r=a?"search_result_verification_":l.includes("search_result_")?"search_result_":"rag_source_",d=l.split(r),c=(null==e?void 0:null===(p=e.highlightxs)||void 0===p?void 0:null===(m=p.results)||void 0===m?void 0:m.length)>0?null==e?void 0:null===(x=e.highlights)||void 0===x?void 0:x.results:null==e?void 0:null===(v=e.searchResults)||void 0===v?void 0:v.results,u=d.length>1?d[d.length-1]:null,g=u?parseInt(u,10)-1:null;if(a){let l=null==e?void 0:null===(h=e.segments)||void 0===h?void 0:h.find(e=>e.messageId===d[d.length-1]);if(!l)return null;let{text:a,classification:i,reason:c,sources:u}=null==l?void 0:l.segment,m=u.split(",").join("-").split("-").map(e=>Number(e)),p=P.Z.getVerificationTextColor(i);return(0,n.jsx)(M,{popupContent:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"text-sm font-bold uppercase ".concat(p?"text-[".concat(p,"]"):""),children:i}),(0,n.jsx)("div",{children:(0,n.jsx)("i",{children:a.split("[source](".concat(r))[0]})}),(0,n.jsxs)("div",{className:"text-gray-600 text-sm mt-1",children:["Reason: ",c]}),m.filter(e=>0!==e).length>0&&(0,n.jsx)("div",{className:"flex border-t-[2px] mt-2 pt-2 flex-wrap gap-2",children:m.filter(e=>0!==e).map(e=>(0,n.jsxs)(F.Z,{onClick:()=>{null==s||s(e)},className:"text-gray-600 bg-neutral-300 hover:bg-black/[0.3] w-[110px] text-sm mt-1",children:["Source: ",e]},e))})]}),popupContentWidth:o,children:(0,n.jsx)(F.Z,{className:"inline  dark:!bg-[#d1d5da] rounded-full w-[20px] h-[20px] !p-0 !mx-1 text-[12px] mt-[-2px]",children:(0,n.jsx)(_.G,{className:"hover:rotate-180 transition-transform duration-300",icon:t(92301).gc,transform:{size:16}})})})}if(null!==g&&Number.isInteger(g)&&g>=0&&g<(null!==(f=null==c?void 0:c.length)&&void 0!==f?f:0)){let e=null==c?void 0:c[g],l=null==e?void 0:e.answer,t=null==e?void 0:e.source;return l?(0,n.jsx)(M,{popupContent:(0,n.jsxs)("div",{className:"flex flex-col max-h-[200px]",children:[(0,n.jsx)(F.Z,{className:"w-full mb-3 !bg-[#e5e5e5] hover:!bg-[#d1d5da] dark:!bg-[#d1d5da] dark:hover:!bg-[#e5e5e5] text-black rounded-md !py-1.5",onClick:()=>{null==s||s(g+1)},children:"Show Detailed Info"}),(0,n.jsx)("div",{children:l}),t&&(0,n.jsx)("div",{className:"mt-2 pt-2 border-t text-sm text-gray-500 dark:text-gray-400",children:t})]}),popupContentWidth:o,children:(0,n.jsx)(F.Z,{className:(0,z.cn)("inline !bg-[#e5e5e5] dark:!bg-[#d1d5da] rounded-full w-[20px] h-[20px] !p-0 !mx-1 text-[12px]"),onClick:()=>{null==s||s(g+1)},children:u})}):(0,n.jsx)(F.Z,{className:"inline !bg-[#e5e5e5] dark:!bg-[#d1d5da] rounded-full w-[20px] h-[20px] !p-0 !mx-1 text-[12px]",onClick:()=>{null==s||s(g+1)},children:u})}}})},10013:function(e,l,t){"use strict";var n=t(57437),a=t(53436),r=t(95951),s=t(48547),i=t(14301),o=t(2265),d=t(14438),c=t(65178),u=t(10854),m=t(64349),p=t(3916),x=t(71096),v=t.n(x),h=t(16206),f=t.n(h),g=t(19072),b=t(96377),j=t(64798),w=t.n(j),y=t(13894),N=t(86159);v().extend(f()),l.Z=e=>{var l;let{position:x="absolute",isLarge:h=!0,isBottom:f=!0,isFullWidth:j=!1,isIcon:k=!1,onFilesSelected:C,trigger:I=null,standalone:S=!1,isDisabled:A=!1}=e,[_,P]=(0,o.useState)(null),[E,z]=(0,o.useState)(null),T=(0,o.useRef)({}),[D,M]=(0,o.useState)(null),[F,L]=(0,o.useState)(!1),[Z,G]=(0,o.useState)(!1),[R,O]=(0,o.useState)(0),[U,B]=(0,o.useState)(!1),{setSelectedFilesFromPersistence:H,setDeletedFilesFromPersistence:V}=(0,u.G)(),W=(e,l)=>new Promise(e=>{(0,a.$8u)({docIds:l?[l.document_upload_id]:E.filter(e=>e.document_upload_id).map(e=>e.document_upload_id)}).then(e=>{var l,t,n,a,r;(null==e?void 0:e.success)?(V(!0),P(null!==(n=null==e?void 0:null===(l=e.result)||void 0===l?void 0:l.docInfos)&&void 0!==n?n:[]),O(null!==(a=null==e?void 0:null===(t=e.result)||void 0===t?void 0:t.maxCount)&&void 0!==a?a:0),z(null),G(!0),d.Am.success("Deleted Successfully")):d.Am.error(null!==(r=null==e?void 0:e.error)&&void 0!==r?r:p.Z.errorDefault)}).catch(e=>{d.Am.error(p.Z.isNullOrEmpty(e)?p.Z.errorDefault:""+e)}).finally(()=>{e(!0)})}),q=(0,o.useCallback)(e=>{let{scrollTop:l,clientHeight:t,scrollHeight:n}=e.target;n-l!==t||F||Z||!(R>(null==_?void 0:_.length))||Q(null==_?void 0:_.length,D)},[_,F,Z,D,R]),Q=(e,l)=>{0===e?L(!0):B(!0),(0,a.E1K)({startFrom:null!=e?e:0,count:20,filters:l?{file_name:l}:null}).then(l=>{var t,n,a,r,s;if((null==l?void 0:l.success)&&(null==l?void 0:null===(t=l.result)||void 0===t?void 0:t.docInfos)){let t=null==l?void 0:null===(a=l.result)||void 0===a?void 0:null===(n=a.docInfos)||void 0===n?void 0:n.map(e=>({...e,isPersistenceFile:!0}));O(null!==(s=null==l?void 0:null===(r=l.result)||void 0===r?void 0:r.maxCount)&&void 0!==s?s:0),0===e?P(t):P([..._,...t])}else O(0)}).finally(()=>{L(!1),B(!1)})};(0,o.useEffect)(()=>{Z&&setTimeout(()=>{G(!1)},250)},[Z]);let K=(0,o.useCallback)(w()(e=>{Q(0,e)},300),[]),Y=window.location.host,$=Y?"&orgHost=".concat(encodeURIComponent(y.Z.calcHostOnly(Y))):"";return(0,n.jsx)("div",{className:"".concat(x," ").concat(f?"bottom-[30px]":""," ").concat(j||"relative"===x?"right-[0px]":"right-[24px]"," flex flex-col gap-[12px] ").concat(j&&"relative"!==x?"w-full":""," ").concat(A?"pointer-events-none":""),children:(0,n.jsx)(r.Z,{zIndex:"z-[100]",className:"w-3/4",cancelText:"Cancel",okText:"Select",disableClickOutside:!0,title:"Select a file",onPreClick:()=>{Q(0,null)},content:(0,n.jsxs)("div",{className:"overflow-y-auto",style:{height:"".concat("".concat((null===(l=window)||void 0===l?void 0:l.innerHeight)*.55,"px"))},onScroll:q,children:[(0,n.jsxs)("div",{className:"flex items-center py-[20px] gap-[5px] sticky top-0 bg-darkcoloro justify-between z-[1] pr-[20px]",children:[(0,n.jsxs)("div",{className:" text-[12px] border-[1px] border-darkcolor/[0.2] flex items-center rounded-[4px] h-[36px]",children:[(0,n.jsx)("span",{className:"h-[34px] px-[12px] flex items-center justify-center p-[12px] text-bwleftblue bg-bwleftblue/[0.1]",children:(0,n.jsx)(s.G,{icon:t(79100).wn,transform:{size:18}})}),(0,n.jsx)("input",{className:"bg-darkcoloro p-[4px] h-[34px] rounded-[4px] min-w-[385px] outline-none",placeholder:"Search",onChange:e=>{let l=e.target.value.trim();M(l),K(l)},dir:"auto"})]}),(null==E?void 0:E.length)>0?(0,n.jsx)(m.Z,{title:"Do you want to delete the selected ".concat(E.length," file(s)?"),className:" w-auto ",isDanger:!0,okText:"Delete",onClickOk:W,children:(0,n.jsxs)(i.Z,{useAccentColor:!0,children:[(0,n.jsx)(s.G,{icon:t(95720).$,transform:{size:16}})," Delete Selected Files(",E.length,")"]})}):F?null:(0,n.jsx)(m.Z,{title:"Do you want to delete all the files?",className:" w-auto ",isDanger:!0,okText:"Delete",onClickOk:()=>new Promise(e=>{(0,a.P2d)({}).then(e=>{var l,t,n,a,r;(null==e?void 0:e.success)?(V(!0),P(null!==(n=null==e?void 0:null===(l=e.result)||void 0===l?void 0:l.docInfos)&&void 0!==n?n:[]),O(null!==(a=null==e?void 0:null===(t=e.result)||void 0===t?void 0:t.maxCount)&&void 0!==a?a:0),z(null),G(!0),d.Am.success("Deleted Successfully")):d.Am.error(null!==(r=null==e?void 0:e.error)&&void 0!==r?r:p.Z.errorDefault)}).catch(e=>{d.Am.error(p.Z.isNullOrEmpty(e)?p.Z.errorDefault:""+e)}).finally(()=>{e(!0)})}),children:(0,n.jsxs)(i.Z,{useAccentColor:!0,children:[(0,n.jsx)(s.G,{icon:t(95720).$,transform:{size:16}})," Delete All Files"]})})]}),(0,n.jsxs)("div",{className:"h-[500px] ".concat(F||(null==_?void 0:_.length)===0?"flex items-center justify-center":""),children:[F?(0,n.jsx)(s.G,{spin:!0,icon:t(39847).QD,transform:{size:17},className:"text-bwleftblue"}):null,F||(null==_?void 0:_.length)!==0?null:(0,n.jsx)("div",{className:"text-darkcolor/[0.7]",children:"No Files Available"}),(null==_?void 0:_.length)>0&&!F?(0,n.jsxs)("table",{className:"w-full",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"text-bwleftblue border-t-[1px] border-b-[1px] text-left border-bwleftblue/[0.2] dark:border-bwleftblue/[0.4] h-[30px]",children:[(0,n.jsx)("th",{}),(0,n.jsx)("th",{children:"#ID"}),(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Uploaded Time"})]})}),(0,n.jsx)("tbody",{className:"text-[#34235E] dark:text-[#ffffff]",children:_.map((e,l)=>{var a,r,o,d,u,p,x,h,f,j,w,y,N;return(0,n.jsxs)("tr",{className:"h-[50px] border-t-[1px] border-bwleftblue/[0.2] dark:border-bwleftblue/[0.4] cursor-pointer hover:bg-bwleftblue/[0.2] rounded-[8px]",children:[(0,n.jsx)("td",{children:(0,n.jsx)(c.Z,{value:!!T.current[e.document_upload_id],className:"bg-darkcolor",onChange:l=>{l?(E?z([...E,e]):z([e]),T.current[e.document_upload_id]=!0):((null==E?void 0:E.length)>0&&z(E.filter(l=>l.document_upload_id!==e.document_upload_id)),delete T.current[e.document_upload_id])}})}),(0,n.jsx)("td",{children:l+1}),(0,n.jsxs)("td",{className:"flex gap-[12px] items-center",style:{height:"inherit"},children:[(null==e?void 0:null===(a=e.mime_type)||void 0===a?void 0:a.includes("image/"))?(0,n.jsx)("div",{className:"flex !w-[40px] !h-[40px] bg-bwleftblue/[0.6] rounded-lg items-center justify-center text-white",children:(0,n.jsx)(b.Z,{alt:"Image",src:"/api/v0/getDocstoreImage?docId=".concat(encodeURIComponent("".concat(e.doc_id)),"&maxWidth=100","&maxHeight=100").concat($)})}):(0,n.jsx)("div",{className:"flex !w-[40px] !h-[40px] bg-bwleftblue/[0.6] rounded-lg items-center justify-center text-white",children:(0,n.jsx)(s.G,{icon:null!==(y=null===(r=(0,g.O)((null==e?void 0:null===(o=e.metadata)||void 0===o?void 0:o.service)==="githubuser"?"GITHUB":null==e?void 0:e.mime_type))||void 0===r?void 0:r.res)&&void 0!==y?y:t(23130).faFileLines,transform:{size:24}})}),(null==e?void 0:null===(d=e.metadata)||void 0===d?void 0:d.service)==="githubuser"?"Git Files - ".concat(null!==(N=null==e?void 0:null===(p=e.metadata)||void 0===p?void 0:null===(u=p.github_paths)||void 0===u?void 0:u.length)&&void 0!==N?N:1," File").concat((null==e?void 0:null===(h=e.metadata)||void 0===h?void 0:null===(x=h.github_paths)||void 0===x?void 0:x.length)>1?"s":""," - ").concat(null==e?void 0:null===(f=e.metadata)||void 0===f?void 0:f.github_repo):e.filename]}),(0,n.jsx)("td",{children:null===(w=v()(e.uploaded_at))||void 0===w?void 0:null===(j=w.utc())||void 0===j?void 0:j.format("LLL")}),(0,n.jsx)("td",{children:(0,n.jsx)(m.Z,{title:"Do you want to delete the file?",className:" w-auto ",isDanger:!0,okText:"Delete",onClickOk:W.bind(null,null,e),children:(0,n.jsx)(i.Z,{useAccentColor:!0,children:(0,n.jsx)(s.G,{icon:t(95720).$,transform:{size:16}})})})})]},"doc_".concat(e.document_upload_id,"_").concat(l))})})]}):null,U?(0,n.jsxs)("div",{className:"text-darkcolor/[0.7] flex gap-[4px] items-center",children:[(0,n.jsx)(s.G,{icon:t(35545).IJ,spin:!0}),"Loading more files"]}):null]})]}),onClickOk:()=>new Promise(e=>{(null==E?void 0:E.length)>0?(null==C||C(E),e(!0),P(null),z(null),S||H(E),T.current={}):(e(!1),d.Am.error("select a file"))}),onClickCancel:()=>{P(null),z(null),T.current={},null==C||C()},children:null!=I?I:h&&!k?(0,n.jsxs)("div",{className:"h-8 relative text-darktoptext flex gap-3 text-xs items-center font-medium cursor-pointer ",children:[(0,n.jsx)("div",{className:"size-5 pl-1",children:(0,n.jsx)(s.G,{icon:t(20878).gM,transform:{size:22}})}),(0,n.jsx)("div",{children:"FILES"})]}):k?(0,n.jsx)(N.Z,{title:"Add from Files",side:"top",children:(0,n.jsx)("div",{className:"size-7 border border-darkcolor rounded-full relative text-darktoptext flex text-xs items-center justify-center cursor-pointer hover:bg-darkcolor/[0.1] ".concat(A?"!text-neutral-400 border-neutral-400":""),children:(0,n.jsx)(s.G,{icon:t(20878).gM,transform:{size:20}})})}):(0,n.jsxs)("div",{className:"option gap-[12px] hover:bg-bwleftblue/[0.2] px-[8px] rounded-md text-darkcolor",children:[(0,n.jsx)("div",{className:"text-darkwhite !bg-bwleftblue  h-[18px] w-[18px] rounded-[9px] flex items-center justify-center",children:(0,n.jsx)(s.G,{icon:t(20878).gM,transform:{size:9}})}),(0,n.jsx)("span",{children:"Add from Files"})]})})})}},36275:function(e,l,t){"use strict";t.d(l,{Z:function(){return q}});var n=t(57437),a=t(2265),r=t(29155);let s=e=>{let l=(0,r.Z)(e);return l.isValid()?{hex:l.toHexString(),rgb:l.toRgb(),hsl:l.toHsl(),hsv:l.toHsv(),alpha:l.getAlpha()}:{hex:"#000000",rgb:{r:0,g:0,b:0,a:1},hsl:{h:0,s:0,l:0,a:1},hsv:{h:0,s:0,v:0,a:1},alpha:1}},i=(e,l)=>{let{hex:t}=e,n=(0,r.Z)(t),a=[];return("string"==typeof l?[l]:l).forEach(e=>"analogous"===e?n.analogous().forEach(e=>a.push(e.toHexString())):"monochromatic"===e?n.monochromatic().forEach(e=>a.push(e.toHexString())):"splitcomplement"===e?n.splitcomplement().forEach(e=>a.push(e.toHexString())):"tetrad"===e?n.tetrad().forEach(e=>a.push(e.toHexString())):"triad"===e?n.triad().forEach(e=>a.push(e.toHexString())):a.push(n.complement().toHexString())),a};var o={light:{background:"#fff",inputBackground:"#f4f4f4",color:"#262626",borderColor:"#D4D4D4",borderRadius:"4px",boxShadow:"0px 8px 16px rgba(0, 0, 0, 0.1)",width:"280px"}};let d={width:"100%",height:"8px",background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)",boxShadow:"inset 0 0 1px rgba(0, 0, 0, .2)",position:"relative",borderRadius:"4px"},c={width:"calc(100% - 8px)",height:"100%",position:"relative",marginLeft:"8px"},u={width:"12px",borderRadius:"12px",height:"12px",boxSizing:"border-box",boxShadow:"0 0 1px rgba(0, 0, 0, .9)",border:"2px solid #fff",position:"absolute",transform:"translate(-2px, -2px)",cursor:"pointer",left:"calc(var(--rpc-hue-pointer) - 8px)"},m=e=>e>1?1:e<0?0:e;var p=e=>{let{onMove:l}=e,[t,n]=(0,a.useState)(!1),r=(0,a.useRef)(null),s=(0,a.useCallback)(e=>{if(!r.current)return{left:0,top:0};let{width:l,left:t,top:n,height:a}=r.current.getBoundingClientRect(),{pageX:s,pageY:i}=e.pageX&&"number"==typeof e.pageX?e:e.touches[0];return{left:m((s-(t+window.pageXOffset))/l),top:m((i-(n+window.pageYOffset))/a)}},[]),i=(0,a.useCallback)(e=>{e.preventDefault(),r.current&&l(s(e))},[l,s]),o=(0,a.useCallback)(e=>{l(s(e)),n(!0)},[l,s]),d=(0,a.useCallback)(()=>n(!1),[]),c=(0,a.useCallback)(e=>{let l=e?document.addEventListener:document.removeEventListener;l("mousemove",i),l("touchmove",i),l("mouseup",d),l("touchend",d)},[i,d]);return(0,a.useLayoutEffect)(()=>(c(t),()=>{t&&c(!1)}),[t,c]),{ref:r,handleStart:o}},x=a.memo(e=>{let{hsl:l,onChange:t}=e,{ref:r,handleStart:s}=p({onMove:(0,a.useCallback)(e=>{let{left:n}=e;return t&&t({h:360*n,s:l.s,l:l.l,a:l.a})},[t])});return(0,n.jsx)("div",{style:d,ref:r,onTouchStart:s,onMouseDown:s,children:(0,n.jsx)("div",{style:c,children:(0,n.jsx)("div",{style:u})})})});let v={margin:"5px 0 0",width:"100%",height:"8px",boxShadow:"inset 0 0 1px rgba(0, 0, 0, .2)",position:"relative",zIndex:1,borderRadius:"4px",background:"var(--rpc-input-background)"},h={position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to right, rgba(var(--rpc-red), var(--rpc-green), var(--rpc-blue), 0) 0%, rgba(var(--rpc-red), var(--rpc-green), var(--rpc-blue), 1) 100%)",borderRadius:"4px"},f={width:"calc(100% - 8px)",height:"100%",position:"relative",marginLeft:"8px"},g={width:"12px",borderRadius:"12px",height:"12px",boxShadow:"0 0 1px rgba(0, 0, 0, .9)",border:"2px solid #fff",position:"absolute",transform:"translate(-2px, -2px)",cursor:"pointer",left:"calc(var(--rpc-alpha-pointer) - 8px)",boxSizing:"border-box"},b={position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",backgroundImage:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAC9JREFUOBFjZGBgEAFifOANPkkmfJLEyI0awMAw8GHASERU4U0nA++FURdQISEBAFeUATP+HuV8AAAAAElFTkSuQmCC")',backgroundPosition:"left center",zIndex:-1,borderRadius:"calc(var(--rpc-border-radius) / 2)"};var j=a.memo(e=>{let{onChange:l}=e,{ref:t,handleStart:r}=p({onMove:(0,a.useCallback)(e=>{let{left:t}=e;return l&&l(parseFloat(t.toFixed(2)))},[l])});return(0,n.jsxs)("div",{style:v,ref:t,onTouchStart:r,onMouseDown:r,children:[(0,n.jsx)("div",{style:h}),(0,n.jsx)("div",{style:b}),(0,n.jsx)("div",{style:f,children:(0,n.jsx)("div",{style:g})})]})});let w={padding:"0.4rem",borderTop:"1px solid var(--rpc-border-color)",display:"grid",gridTemplateColumns:"repeat(10, 1fr)",gridGap:"0.4rem"},y={height:"20px",margin:"0",outline:"none",appearance:"none",cursor:"pointer",padding:"0",borderRadius:"var(--rpc-border-radius)",border:"1px solid var(--rpc-border-color)",overflow:"hidden",position:"relative",background:"none",gridColumnEnd:"span 1"},N={height:"20px",margin:"0",padding:"0",outline:"none",background:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",border:"none",borderRadius:"var(--rpc-border-radius)",gridColumnEnd:"span 1"},k={height:"9px",width:"9px",fill:"var(--rpc-color)"},C=e=>({position:"absolute",background:"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")"),top:"0px",right:"0px",bottom:"0px",left:"0px",zIndex:2}),I={position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",backgroundImage:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAC9JREFUOBFjZGBgEAFifOANPkkmfJLEyI0awMAw8GHASERU4U0nA++FURdQISEBAFeUATP+HuV8AAAAAElFTkSuQmCC")',backgroundPosition:"left center",zIndex:1};var S=a.memo(e=>{let{colors:l,onClick:t,onAdd:a}=e;return(0,n.jsxs)("div",{style:w,children:[l.map((e,l)=>{let a=(0,r.Z)(e);if(!a.isValid())throw Error("".concat(e," is not a valid color."));let s=a.toRgb();return(0,n.jsxs)("button",{style:y,onClick:()=>t(s),type:"button",children:[(0,n.jsx)("div",{style:C(s)}),(0,n.jsx)("div",{style:I})]},l)}),a&&(0,n.jsx)("button",{style:N,onClick:a,type:"button",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 50 50",style:k,children:(0,n.jsx)("path",{d:"M27.5 50h-5V27.5H0v-5h22.5V0h5v22.5H50v5H27.5z"})})})]})});let A={position:"absolute",top:0,left:0,bottom:0,right:0},_={width:"calc(100% - 0.8rem)",height:"200px",margin:"0.4rem",position:"relative",background:"hsl(var(--rpc-hue),100%, 50%)",borderRadius:"var(--rpc-border-radius)",border:"1px solid var(--rpc-border-color)",overflow:"hidden"},P={position:"absolute",cursor:"hand",top:"var(--rpc-saturation-pointer-top)",left:"var(--rpc-saturation-pointer-left)"},E={width:"12px",borderRadius:"12px",height:"12px",boxSizing:"border-box",boxShadow:"0 0 1px rgba(0, 0, 0, .9)",border:"2px solid #fff"};var z=a.memo(e=>{let{hsl:l,onChange:t}=e,{ref:r,handleStart:s}=p({onMove:(0,a.useCallback)(e=>{let{left:n,top:a}=e;return t&&t({...l,s:n,v:1-a})},[t])});return(0,n.jsxs)("div",{style:_,ref:r,onTouchStart:s,onMouseDown:s,children:[(0,n.jsx)("style",{children:"\n        .saturation-white {\n          background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n          background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n        }\n        .saturation-black {\n          background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n          background: linear-gradient(to top, #000, rgba(0,0,0,0));\n        }\n        "}),(0,n.jsxs)("div",{style:A,className:"saturation-white",children:[(0,n.jsx)("div",{style:A,className:"saturation-black"}),(0,n.jsx)("div",{style:P,children:(0,n.jsx)("div",{style:E})})]})]})}),T=a.memo(e=>{let{colors:l,onClick:t,currentColor:r}=e,[s,i]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=JSON.parse(window.localStorage.getItem("rpc-presets")||"[]");Array.isArray(e)&&i(e)},[]);let o=(0,a.useCallback)(()=>{let e=[...s,r];window.localStorage.setItem("rpc-presets",JSON.stringify(e)),i(e)},[l,r]);return(0,n.jsx)(S,{onClick:t,colors:[...l,...s],onAdd:o})});let D={background:"var(--rpc-background)",boxShadow:"var(--rpc-box-shadow)",borderRadius:"var(--rpc-border-radius)",width:"var(--rpc-width)",minWidth:"280px",border:"1px solid var(--rpc-border-color)"},M={position:"relative",width:"25px",height:"25px",borderRadius:"var(--rpc-border-radius)",overflow:"hidden",boxShadow:"inset 0 0 2px 0px rgba(0, 0, 0, .2)",backgroundImage:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAC9JREFUOBFjZGBgEAFifOANPkkmfJLEyI0awMAw8GHASERU4U0nA++FURdQISEBAFeUATP+HuV8AAAAAElFTkSuQmCC")',backgroundPosition:"left center"},F={background:"var(--rpc-input-background)",borderRadius:"var(--rpc-border-radius)"},L={position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",background:"var(--rpc-rgba)",zIndex:1,border:"1px solid var(--rpc-border-color)",borderRadius:"var(--rpc-border-radius)"},Z={margin:"0.4rem 0.4rem",width:"calc(100% - 0.8rem)",display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap"},G={flexGrow:2,marginLeft:"0.4rem"},R={margin:"0 0.3rem 0.3rem",display:"flex",alignItems:"center",justifyContent:"space-between"},O={display:"flex",alignItems:"center",color:"var(--rpc-color)",border:"1px solid var(--rpc-border-color)",borderRadius:"var(--rpc-border-radius)",margin:"0.1rem",background:"var(--rpc-input-background)"},U={width:"45px",background:"none",color:"var(--rpc-color)",border:"none",borderRadius:"var(--rpc-border-radius)",padding:"5px",fontSize:"10px",margin:"0",textTransform:"uppercase",boxSizing:"border-box"},B={paddingLeft:"5px",fontSize:"10px",color:"var(--rpc-borderColor)"},H={display:"flex",flexDirection:"column",alignItems:"center",fontFamily:"sans-serif",fontSize:"10px",color:"var(--rpc-color)"};var V=a.memo(e=>{let{name:l,value:t,type:a="text",label:r,prefix:s,min:i,max:o,step:d,maxLength:c,size:u="small",onChange:m,onBlur:p}=e;return(0,n.jsxs)("label",{style:H,children:[(0,n.jsxs)("div",{style:O,children:[s&&(0,n.jsx)("span",{style:B,children:s}),(0,n.jsx)("input",{autoComplete:"off",type:a,name:l,value:t,onChange:e=>m(e.target.value),onBlur:e=>{if(p)return p(e.target.value);m(e.target.value)},style:{...U,width:"small"===u?"42px":"54px"},spellCheck:!1,maxLength:c,min:i,max:o,step:d})]}),(0,n.jsx)("span",{children:r})]})}),W=a.memo(e=>{let{theme:l,color:t,presets:d,onChange:c,hideAlpha:u,hideInputs:m,className:p,combinations:v}=e,[h,f]=(0,a.useState)(s(t));(0,a.useEffect)(()=>{f(s(t))},[t]);let g=(0,a.useCallback)(e=>{let l=s(e);f(l),c&&c(l)},[h]),b=(0,a.useCallback)(e=>g({...h.rgb,a:e}),[h]),{rgb:w,hsl:y,hsv:N,hex:k,alpha:C}=h,I={"--rpc-background":(null==l?void 0:l.background)||o.light.background,"--rpc-input-background":(null==l?void 0:l.inputBackground)||o.light.inputBackground,"--rpc-color":(null==l?void 0:l.color)||o.light.color,"--rpc-border-color":(null==l?void 0:l.borderColor)||o.light.borderColor,"--rpc-border-radius":(null==l?void 0:l.borderRadius)||o.light.borderRadius,"--rpc-box-shadow":(null==l?void 0:l.boxShadow)||o.light.boxShadow,"--rpc-width":(null==l?void 0:l.width)||o.light.width},A={"--rpc-hue":y.h,"--rpc-red":w.r,"--rpc-green":w.g,"--rpc-blue":w.b,"--rpc-hex":k,"--rpc-alpha":C,"--rpc-rgba":"rgba(".concat(w.r,", ").concat(w.g,", ").concat(w.b,", ").concat(C,")"),"--rpc-hue-pointer":"".concat(100*y.h/360,"%"),"--rpc-alpha-pointer":"".concat(100*C,"%"),"--rpc-saturation-pointer-top":"calc(".concat(-(100*N.v)+100,"% - 6px)"),"--rpc-saturation-pointer-left":"calc(".concat(100*N.s,"% - 6px)")},_=(e,l)=>{if(""===l||l.length>3)return;let t="a"===e?parseInt(l)/100:parseInt(l);g({...w,[e]:t})};return(0,n.jsxs)("div",{style:{...I,...D,...A},className:p,children:[(0,n.jsx)(z,{hsl:y,onChange:g}),(0,n.jsxs)("div",{style:Z,children:[(0,n.jsx)("div",{style:F,children:(0,n.jsx)("div",{style:M,children:(0,n.jsx)("div",{style:L})})}),(0,n.jsxs)("div",{style:G,children:[(0,n.jsx)(x,{hsl:y,onChange:g}),!u&&(0,n.jsx)(j,{onChange:b})]})]}),!m&&(0,n.jsxs)("div",{style:R,children:[(0,n.jsx)(V,{type:"text",name:"hex",label:"Hex",size:"large",prefix:"#",onChange:e=>{if(!/^[0-9A-Fa-f]+$/.test(e))return;let l=(0,r.Z)("#".concat(e));f({hex:"#".concat(e),rgb:l.toRgb(),hsl:l.toHsl(),hsv:l.toHsv(),alpha:l.getAlpha()}),(null==e?void 0:e.length)===6&&g(l)},onBlur:g,maxLength:6,value:k.replace("#","")}),(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)(V,{value:w.r,label:"R",name:"red",type:"number",min:0,max:255,step:1,onChange:e=>_("r",e)}),(0,n.jsx)(V,{value:w.g,label:"G",name:"green",type:"number",min:0,max:255,step:1,onChange:e=>_("g",e)}),(0,n.jsx)(V,{value:w.b,label:"B",name:"blue",type:"number",min:0,max:255,step:1,onChange:e=>_("b",e)}),!u&&(0,n.jsx)(V,{value:100*w.a,label:"Alpha",name:"alpha",type:"number",min:0,max:100,step:1,onChange:e=>_("a",e)})]})]}),d&&(0,n.jsx)(T,{colors:d,onClick:g,currentColor:h.rgb}),v&&(0,n.jsx)(S,{colors:i(h,v),onClick:g})]})});function q(e){let{color:l,onChangeColor:t}=e;return(0,n.jsx)("span",{children:(0,n.jsx)(W,{combinations:"monochromatic",hideAlpha:!0,color:l,onChange:e=>{var l;null==t||t(null!==(l=null==e?void 0:e.hex)&&void 0!==l?l:null)}})})}},84318:function(e,l,t){"use strict";t.d(l,{Z:function(){return K},h:function(){return Q}});var n=t(57437),a=t(48547),r=t(56210),s=t(2265),i=t(3916),o=t(5529),d=t(3377),c=t(14438),u=t(49070),m=t(25415),p=t(81447),x=t(99376),v=t(30166),h=t(57099),f=t(48958),g=t(31486),b=t(13590),j=t(69997),w=t(29501),y=t(31229),N=t(14301);let k=y.z.object({instructions:y.z.string().max(1500,{message:"Instructions must be less than 1500 characters"}).optional()});function C(e){let{open:l,onClose:t,defaultInstructions:a,onSave:s,inProgress:i}=e,o=(0,w.cI)({resolver:(0,b.F)(k),defaultValues:{instructions:null!=a?a:""}});return(0,n.jsx)(f.Vq,{open:l,onOpenChange:t,children:(0,n.jsxs)(f.cZ,{children:[(0,n.jsx)(f.fK,{children:(0,n.jsx)(f.$N,{children:"Custom Instructions"})}),(0,n.jsx)(w.Qr,{name:"instructions",control:o.control,render:e=>{let{field:l}=e;return(0,n.jsxs)("div",{className:"space-y-2.5",children:[(0,n.jsx)(j.Z,{className:"opacity-60 font-medium",children:"Provide instructions to the AI that apply to all chats within this space."}),(0,n.jsx)(g.Z,{id:"instructions",...l,className:"resize-none min-h-20",rows:8,placeholder:"Enter instructions to customize AI behavior...",dir:"auto"}),o.formState.errors.instructions?(0,n.jsx)("p",{className:"text-sm text-red-600",children:o.formState.errors.instructions.message}):null]})}}),(0,n.jsxs)("div",{className:"flex justify-end gap-2.5",children:[(0,n.jsx)(N.Z,{noBack:!0,className:"text-darkcolor/[0.7] rounded-full",moreSpace:!0,disabled:!1,onClick:t,children:"Cancel"}),(0,n.jsx)(N.Z,{disabled:i,className:(0,r.cn)("rounded-full !bg-bwleftblue !text-darkcoloro dark:text-darkwhite/[0.7]",{"opacity-50 grayscale":i}),onClick:o.handleSubmit(s),children:"Update"})]})]})})}var I=t(65308),S=t(52299),A=t(10013),_=t(10854),P=t(96377),E=t(19072),z=t(13894),T=t(86159),D=t(53436),M=t(77598);let F=e=>new Promise(l=>setTimeout(l,e));function L(e){var l;let{projectId:i,deploymentId:o,open:d,onClose:u}=e,[m,x]=(0,s.useState)(0),{setSelectedFilesFromPersistence:v}=(0,_.G)(),{data:h,isLoading:g}=(0,I.Cz)({projectId:i}),{mutateAsync:b}=(0,I.zk)({projectId:i}),{mutateAsync:j}=(0,I.D9)({projectId:i}),w=window.location.host,y=w?"&orgHost=".concat(encodeURIComponent(z.Z.calcHostOnly(w))):"",N=(0,s.useRef)(null),[k,C]=(0,s.useState)(!1),S=async e=>{if(e){var l,t,n,a,r,s,d;if(e.size>104857600){c.Am.error("File size must be less than 100MB");return}try{let d;let c=await (0,D.saE)({selectedFiles:[e],deploymentId:o,chatllmProjectId:i}),u=null;if(null==c?void 0:c.request_id){let e=999;do{if((null==(d=await (0,D.LsV)({request_id:null==c?void 0:c.request_id}))?void 0:d.error)||null==d||(null==d?void 0:null===(r=d.result)||void 0===r?void 0:r.error)){u=(null==d?void 0:null===(s=d.result)||void 0===s?void 0:s.error)||null,d=null;break}await F(1e3),e--}while(e>0&&(null==d?void 0:d.status)!=="COMPLETED"&&(null==d?void 0:d.status)!=="CANCELED"&&(null==d?void 0:d.status)!=="SUCCESS"&&(null==d?void 0:d.status)!=="FAILED")}let m=null==d?void 0:null===(a=d.result)||void 0===a?void 0:null===(n=a.result)||void 0===n?void 0:null===(t=n.docInfos)||void 0===t?void 0:null===(l=t[0])||void 0===l?void 0:l.document_upload_id;if(!m)throw Error(null!=u?u:"Error uploading file");await b({documentIds:[m]})}catch(e){c.Am.error(null!==(d=null==e?void 0:e.message)&&void 0!==d?d:"Error uploading file")}}},{getRootProps:L,getInputProps:Z,isDragActive:G}=(0,M.uI)({noClick:!0,onDrop:async e=>{if(null==e?void 0:e.length){if(e.length>5){c.Am.error("Only 5 files can be uploaded at a time");return}C(!0),await Promise.all(e.map(e=>S(e))),C(!1)}}});return(0,n.jsx)(f.Vq,{open:d,onOpenChange:u,children:(0,n.jsxs)(f.cZ,{className:"max-w-2xl",children:[(0,n.jsx)(f.fK,{children:(0,n.jsxs)(f.$N,{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{children:"Project Files"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(A.Z,{position:"static",standalone:!0,trigger:(0,n.jsxs)(p.z,{className:"rounded-full",variant:"outline",size:"sm",children:[(0,n.jsx)("div",{className:"text-darkwhite !bg-bwleftblue size-[18px] rounded-full flex items-center justify-center",children:(0,n.jsx)(a.G,{icon:t(20878).gM,transform:{size:9}})}),"Add from files"]}),onFilesSelected:async e=>{(null==e?void 0:e.length)&&(await b({documentIds:e.map(e=>e.document_upload_id)}),v([]))}}),(0,n.jsxs)(p.z,{className:"relative rounded-full",variant:"outline",size:"sm",children:[k?(0,n.jsx)(a.G,{icon:t(68153).QD,className:"animate-spin"}):(0,n.jsx)(a.G,{icon:t(55066).PQ}),"Upload from Computer",(0,n.jsx)("input",{disabled:k||g,className:"cursor-pointer absolute block py-2 px-4 size-full opacity-0 pin-r pin-t",type:"file",onChange:async e=>{e.preventDefault();let l=e.target.files;if(null==l?void 0:l.length){if(l.length>5){c.Am.error("Only 5 files can be uploaded at a time"),x(e=>e+1);return}C(!0),await Promise.all(Array.from(l).map(e=>S(e))),x(e=>e+1),C(!1)}},multiple:!0,ref:N},m)]})]})]})}),(0,n.jsx)("div",{className:"max-h-80 overflow-y-auto space-y-2",...g||k?{}:L(),children:(null==h?void 0:null===(l=h.docInfos)||void 0===l?void 0:l.length)?null==h?void 0:h.docInfos.map((e,l)=>{var r,s,i,o,d,c,u,m,x,v,h;return(0,n.jsxs)("div",{className:"relative py-3 pl-3 pr-16 cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-900 overflow-hidden group flex items-center justify-between rounded-md border border-neutral-300 dark:border-neutral-700 transition-all duration-200",children:[(0,n.jsxs)("div",{className:"flex gap-3 items-center break-all",style:{height:"inherit"},children:[(null==e?void 0:null===(r=e.mime_type)||void 0===r?void 0:r.includes("image/"))?(0,n.jsx)("div",{className:"shrink-0 flex !size-10 bg-bwleftblue/[0.6] rounded-lg items-center justify-center text-white",children:(0,n.jsx)(P.Z,{alt:"Image",src:"/api/v0/getDocstoreImage?docId=".concat(encodeURIComponent("".concat(e.doc_id)),"&maxWidth=100","&maxHeight=100").concat(y)})}):(0,n.jsx)("div",{className:"shrink-0 flex !size-10 bg-bwleftblue/[0.6] rounded-lg items-center justify-center text-white",children:(0,n.jsx)(a.G,{icon:null!==(v=null===(s=(0,E.O)((null==e?void 0:null===(i=e.metadata)||void 0===i?void 0:i.service)==="githubuser"?"GITHUB":null==e?void 0:e.mime_type))||void 0===s?void 0:s.res)&&void 0!==v?v:t(23130).faFileLines,transform:{size:24}})}),(0,n.jsx)("span",{children:(null==e?void 0:null===(o=e.metadata)||void 0===o?void 0:o.service)==="githubuser"?"Git Files - ".concat(null!==(h=null==e?void 0:null===(c=e.metadata)||void 0===c?void 0:null===(d=c.github_paths)||void 0===d?void 0:d.length)&&void 0!==h?h:1," File").concat((null==e?void 0:null===(m=e.metadata)||void 0===m?void 0:null===(u=m.github_paths)||void 0===u?void 0:u.length)>1?"s":""," - ").concat(null==e?void 0:null===(x=e.metadata)||void 0===x?void 0:x.github_repo):e.filename})]}),(0,n.jsx)("div",{className:"group-hover:opacity-100 opacity-0 transition-all duration-200 absolute right-3",children:(0,n.jsx)(T.Z,{title:"Remove from project",children:(0,n.jsx)(p.z,{variant:"ghost",size:"icon-sm",onClick:()=>j({documentIds:[e.document_upload_id]}),children:(0,n.jsx)(a.G,{icon:t(29604).sf,transform:{size:16}})})})})]},"doc_".concat(e.document_upload_id,"_").concat(l))}):(0,n.jsx)("div",{className:(0,r.cn)("relative h-32 flex items-center justify-center rounded-lg border border-dashed border-neutral-400 dark:border-neutral-600",{"border-bwleftblue":G}),children:g||k?(0,n.jsx)("span",{children:k?(0,n.jsx)(a.G,{icon:t(68153).QD,className:"animate-spin"}):"Loading..."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"Drag and drop file here"}),(0,n.jsx)("input",{className:"cursor-pointer absolute block py-2 px-4 size-full opacity-0 pin-r pin-t",...Z()},m)]})})}),(0,n.jsx)("div",{className:"flex justify-end gap-2.5",children:(0,n.jsx)(p.z,{variant:"ghost",className:"rounded-full text-bwleftblue hover:text-bwleftblue",onClick:u,children:"Close"})})]})})}var Z=t(71096),G=t.n(Z),R=t(45721),O=t.n(R),U=t(591);G().extend(O());let B=e=>e.split(".").pop();function H(e){var l,r,i,o,d,c,u,m,p;let{projectId:x,deploymentId:v}=e,[h,f]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),{data:j}=(0,I.Z0)(),{data:w}=(0,I.PY)({projectId:x}),{mutate:y,isPending:N}=(0,I.dY)({projectId:x,onSuccess:()=>{f(!1)}}),{data:k,isLoading:A}=(0,I.jw)({projectId:x}),{data:_,isLoading:P}=(0,I.Cz)({projectId:x});return w?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"grow w-full hidden md:grid grid-cols-12 gap-4",children:[(0,n.jsxs)("div",{className:"col-span-7 flex flex-col gap-3",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-neutral-600 dark:text-neutral-400",children:"Your chats in the project"}),A?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.O,{className:"w-full h-5"}),(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)(S.O,{className:"w-full h-5"}),(0,n.jsx)(S.O,{className:"w-full h-5"}),(0,n.jsx)("hr",{}),(0,n.jsx)(S.O,{className:"w-full h-5"}),(0,n.jsx)(S.O,{className:"w-full h-5"})]})]}):(null==k?void 0:k.length)?(0,n.jsx)("div",{className:"max-h-48 overflow-y-auto",children:k.map(e=>(0,n.jsx)(V,{projectId:x,project:w,projects:j,conversation:e},e.deploymentConversationId))}):(0,n.jsx)("div",{className:"text-sm font-medium text-neutral-500",children:"No chats in yet"})]}),(0,n.jsxs)("div",{className:"col-span-5 flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"shadow-sm border-neutral-300 dark:border-neutral-700 border rounded-2xl p-4 flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(a.G,{icon:t(58615).Al,transform:{size:16,y:-1}}),(0,n.jsx)("span",{className:"text-sm font-medium",children:"Custom Instructions"})]}),(null==w?void 0:w.customInstructions)?(0,n.jsx)("div",{onClick:()=>f(!0),className:"cursor-pointer text-bwleftblue text-xs",children:"Edit"}):null]}),(null==w?void 0:w.customInstructions)?(0,n.jsx)("hr",{className:"border-neutral-300 dark:border-neutral-700"}):null,(0,n.jsx)("div",{className:"line-clamp-3 text-xs text-neutral-500",children:null!==(p=null==w?void 0:w.customInstructions)&&void 0!==p?p:"Instructions that apply to all chats within this project."}),(null==w?void 0:w.customInstructions)?null:(0,n.jsxs)("div",{onClick:()=>f(!0),className:"flex items-center gap-0.5 text-sm cursor-pointer text-bwleftblue",children:[(0,n.jsx)(a.G,{icon:t(74751).r8,transform:{size:13}}),(0,n.jsx)("span",{className:"text-xs",children:"Add instructions"})]})]}),(0,n.jsxs)("div",{className:"shadow-sm border-neutral-300 dark:border-neutral-700 border rounded-2xl p-4 flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(a.G,{icon:t(93802).gM,transform:{size:16,y:-1}}),(0,n.jsx)("span",{className:"text-sm font-medium",children:"Project Files"}),(null==_?void 0:null===(l=_.docInfos)||void 0===l?void 0:l.length)?(0,n.jsxs)("span",{className:"text-xs text-neutral-500",children:[null==_?void 0:null===(r=_.docInfos)||void 0===r?void 0:r.length," File",(null==_?void 0:null===(i=_.docInfos)||void 0===i?void 0:i.length)>1?"s":""]}):null]}),(null==_?void 0:null===(o=_.docInfos)||void 0===o?void 0:o.length)?(0,n.jsx)("div",{onClick:()=>b(!0),className:"text-xs cursor-pointer text-bwleftblue",children:"Manage"}):null]}),(null==_?void 0:null===(d=_.docInfos)||void 0===d?void 0:d.length)?(0,n.jsx)("hr",{className:"border-neutral-300 dark:border-neutral-700"}):null,P?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.O,{className:"w-full h-5"}),(0,n.jsx)(S.O,{className:"w-full h-5"})]}):(null==_?void 0:null===(c=_.docInfos)||void 0===c?void 0:c.length)?(0,n.jsx)("div",{className:"space-y-2 max-h-28 overflow-y-auto",children:null==_?void 0:null===(u=_.docInfos)||void 0===u?void 0:u.map((e,l)=>{var r,s,i;let o=B(e.filename),d=(0,n.jsxs)("div",{className:"flex gap-3 line-clamp-1 cursor-pointer items-center group-hover:text-bwleftblue transition-all duration-300",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(a.G,{icon:t(93802).gM,transform:{size:16}}),(null==o?void 0:o.length)>0&&(null==o?void 0:o.length)<5?(0,n.jsx)("div",{className:"absolute top-2.5 left-1 text-[6px] font-medium bg-bwcentercolor rounded-sm p-px leading-none uppercase",children:o}):null]}),(0,n.jsx)("span",{className:"text-xs leading-5 line-clamp-1",children:e.filename})]},null!==(r=null==e?void 0:e.document_upload_id)&&void 0!==r?r:l);return(0,n.jsx)("div",{className:"group",children:(0,n.jsx)(E.Z,{docId:null==e?void 0:e.doc_id,filename:e.filename,fileType:null==e?void 0:e.mime_type,renderFileElement:()=>d},null!==(s=null==e?void 0:e.document_upload_id)&&void 0!==s?s:l)},null!==(i=null==e?void 0:e.document_upload_id)&&void 0!==i?i:l)})}):(0,n.jsx)("div",{className:"text-xs text-neutral-500",children:"Upload files for chat context in this project."}),(null==_?void 0:null===(m=_.docInfos)||void 0===m?void 0:m.length)?null:(0,n.jsxs)("div",{onClick:()=>b(!0),className:"flex items-center gap-0.5 text-sm cursor-pointer text-bwleftblue",children:[(0,n.jsx)(a.G,{icon:t(74751).r8,transform:{size:13}}),(0,n.jsx)("span",{className:"text-xs",children:"Upload files"})]})]})]})]}),h?(0,n.jsx)(C,{open:!0,defaultInstructions:null==w?void 0:w.customInstructions,onClose:()=>f(!1),onSave:e=>{let{instructions:l}=e;return y({chatllmProjectId:w.chatllmProjectId,customInstructions:l})},inProgress:N}):null,g?(0,n.jsx)(L,{open:!0,onClose:()=>b(!1),projectId:x,deploymentId:v}):null]}):null}function V(e){var l;let{projectId:r,project:s,conversation:i,projects:o}=e,[d,c]=(0,u.PB)("convoId"),{mutate:m}=(0,I.$e)({projectId:r}),{mutate:x}=(0,I.CN)({projectId:r}),v=null==o?void 0:o.filter(e=>e.chatllmProjectId!==r);return(0,n.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-neutral-300 dark:border-neutral-700",children:[(0,n.jsxs)("div",{className:"cursor-pointer",onClick:()=>c(i.deploymentConversationId),children:[(0,n.jsx)("div",{className:"text-sm font-medium",children:i.name}),(0,n.jsxs)("div",{className:"mt-0.5 flex items-center gap-1.5 text-neutral-500",children:[(0,n.jsx)(a.G,{icon:t(24154).On,transform:{size:16}}),(0,n.jsx)("span",{className:"text-xs",children:G()(i.lastEventCreatedAt).fromNow()})]})]}),(0,n.jsxs)(U.h_,{modal:!0,children:[(0,n.jsx)(U.$F,{asChild:!0,children:(0,n.jsxs)(p.z,{variant:"ghost",size:"icon-xs",className:"rounded-full",children:[(0,n.jsx)(a.G,{icon:t(91559).S6,transform:{size:16}}),(0,n.jsx)("span",{className:"sr-only",children:"More"})]})}),(0,n.jsxs)(U.AW,{className:"w-fit max-w-60 rounded-lg",side:"bottom",align:"start",children:[(null==v?void 0:v.length)>0&&(0,n.jsxs)(U.Ph,{children:[(0,n.jsxs)(U.kt,{className:"cursor-pointer gap-2",children:[(0,n.jsx)(a.G,{icon:t(23804).mD,transform:{size:16,y:-1}}),(0,n.jsx)("span",{children:"Move to project"})]}),(0,n.jsx)(U.cq,{children:(0,n.jsx)(U.TG,{className:"w-fit max-w-60 rounded-lg",children:v.map(e=>(0,n.jsx)(U.Xi,{className:"cursor-pointer flex-row justify-between",onClick:()=>x({conversationId:i.deploymentConversationId,projectId:e.chatllmProjectId}),children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2 line-clamp-1",children:[(0,n.jsx)(a.G,{icon:t(23804).mD,transform:{size:16,y:-1}}),(0,n.jsx)("span",{children:e.name})]})},e.chatllmProjectId))})})]}),(0,n.jsxs)(U.Xi,{className:"cursor-pointer text-destructive focus:bg-destructive/10 focus:text-destructive dark:text-red-500 gap-2",onSelect:()=>m({conversationId:i.deploymentConversationId}),children:[(0,n.jsx)(a.G,{icon:t(29604).sf,transform:{size:16}}),(0,n.jsxs)("span",{children:["Remove from ",null!==(l=null==s?void 0:s.name)&&void 0!==l?l:"project"]})]})]})]})]})}function W(e){let{projectId:l}=e,{data:r}=(0,I.PY)({projectId:l}),[s,i]=(0,u.PB)("projectId");return r?(0,n.jsxs)("div",{className:"flex flex-col items-center cursor-pointer",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5 relative group",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1 text-neutral-500",children:[(0,n.jsx)(a.G,{icon:t(23804).mD,transform:{size:16,y:-1}}),(0,n.jsx)("div",{className:"",children:"Project: "})]}),(0,n.jsx)("div",{className:"font-medium text-2xl text-center",children:null==r?void 0:r.name}),(0,n.jsx)(T.Z,{delayDuration:0,title:"Close project",children:(0,n.jsx)("span",{children:(0,n.jsx)(p.z,{variant:"secondary",size:"icon-xxs",onClick:()=>{i(null)},children:(0,n.jsx)(a.G,{icon:t(25667).faXmark,className:"!size-4 text-muted-foreground"})})})})]}),(null==r?void 0:r.description)?(0,n.jsx)("div",{className:"text-sm text-center line-clamp-1 max-w-sm opacity-75 font-normal",children:null==r?void 0:r.description}):null]}):(0,n.jsx)(S.O,{className:"w-40 h-8"})}let q=(0,v.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuX),{loadableGenerated:{webpack:()=>[null]}}),Q={default:(0,n.jsx)(a.G,{className:"text-yellow-400",icon:t(66823).X8,transform:{size:20}}),html:(0,n.jsx)(a.G,{className:"text-purple-400",icon:t(59844).m6,transform:{size:20}}),code:(0,n.jsx)(a.G,{className:"text-sky-400",icon:t(28531).dT,transform:{size:20}}),image:(0,n.jsx)(a.G,{className:"text-red-400",icon:t(54961).Vm,transform:{size:20}})};function K(e){var l;let{isAgent:v,onSend:f,botIconUrl:g,onSendConvoOne:b,isBotLLM:j,extAppName:w,extAppDescription:y,onlyImageGenEnabled:N,appId:k,defaultPrompts:C,setIsProcessing:I,setIsProcessingUpload:S,isProcessing:A,isProcessingUpload:_,onUploadDocument:P,isBinaryEnable:E,supportsBinaryUpload:z,isSelfServe:T,themeApp:D,showTricks:M,deploymentId:F,onRemoveFileByID:L,isNewTask:Z,deploymentConversationId:G,hasThinkingOption:R,isHideTopBar:O,textareaRef:U}=e,B=(0,x.useRouter)(),{data:V}=(0,u.Pc)({ignoreNeedLogin:!0}),K=(null==V?void 0:null===(l=V.result)||void 0===l?void 0:l.isChatOnly)!==!0,[Y]=(0,u.PB)("projectId"),{data:$}=(0,u.PJ)({enabled:T}),[X,J]=(0,m.Z)("unseeTasksClosed",null),ee=(0,s.useMemo)(()=>!(!$||!$.length||X&&Date.now()-X<864e5),[$,X]),[el,et]=s.useState(!1),{isSearchLLM:en,isComputerAgent:ea,isComputerAgentInfoProcessing:er,isComputerAgentOldConvo:es}=(0,o.b)(e=>({isSearchLLM:e.isSearchLLM,isComputerAgent:e.isComputerAgent,isComputerAgentInfoProcessing:e.isComputerAgentInfoProcessing,isComputerAgentOldConvo:e.isComputerAgentOldConvo})),[ei,eo]=(0,u.PB)("CodeLLM"),ed=(0,u.z0)(),ec=(0,u.br)(),eu=(0,s.useMemo)(()=>{if(j)return null;{var e;let l=y||null;return null==l?null:null==l?void 0:null===(e=l.split("\n"))||void 0===e?void 0:e.map((e,l)=>(0,n.jsx)("div",{className:" opacity-70 ",children:e},"linedesc_".concat(l)))}},[y,j]),em=(0,s.useMemo)(()=>ed?[{text:"Landing page for Wordpress",icon:"/chatllm/staticllm/appllm_icon1.png"},{text:"Calendar app with React",icon:"/chatllm/staticllm/appllm_icon2.png"},{text:"Flash card app for language learning",icon:"/chatllm/staticllm/appllm_icon3.png"},{text:"Photo editor",icon:"/chatllm/staticllm/appllm_icon4.png"}].map(e=>(e.icon=(0,n.jsx)("img",{className:" w-[16px] h-[16px] mt-[2px] ml-[1px] -mr-[2px] object-contain ",src:null==e?void 0:e.icon}),e)):k===i.Z.aiEngAppId?[{text:"Create a custom chatbot",icon:(0,n.jsx)(a.G,{className:"text-green-700",icon:t(28091).dt,transform:{size:20}}),description:"For creating a chatbot with customized behaviour or use some contextual data to search over while responding"},{text:"Create an AI Agent",superscript:"[Beta]",icon:(0,n.jsx)(a.G,{className:"text-sky-700",icon:t(88458).p4,transform:{size:20}}),description:"For more complex agentic operations. Will help you kickstart your AI Agent's code, which you may need to edit to make it functional"}]:en?[{text:"Longest biking trails",icon:(0,n.jsx)(a.G,{className:"text-bwleftblue",icon:t(98509)._V,transform:{size:20}})},{text:"When is the next solar eclipse?",icon:(0,n.jsx)(a.G,{className:"text-orange-500",icon:t(77438).DB,transform:{size:20}})},{text:"Apps similar to WhatsApp",icon:(0,n.jsx)(a.G,{className:"text-green-600",icon:t(54402).VH,transform:{size:20}})},{text:"Best coffee shops in Portland",icon:(0,n.jsx)(a.G,{className:"text-orange-900",icon:t(20240).TT,transform:{size:20}})}]:ea?[{text:"Find and download an image of Machu Picchu",icon:(0,n.jsx)(a.G,{className:"text-red-400",icon:t(54961).Vm,transform:{size:20}})},{text:"Show me available flights to Greece",icon:(0,n.jsx)(a.G,{className:"text-purple-500",icon:t(17362).wK,transform:{size:20}})},{text:"Schedule a Zoom meeting for Wednesday",icon:(0,n.jsx)(a.G,{className:"text-blue-500",icon:t(29143).zp,transform:{size:20}})},{text:"Open Gmail and open most recent email",icon:(0,n.jsx)(a.G,{className:"text-yellow-500",icon:t(17250).FU,transform:{size:20}})}]:j||C.length?N?[{text:"Draw a dragon",icon:(0,n.jsx)(a.G,{className:"text-red-400",icon:t(54961).Vm,transform:{size:20}})}]:C.length?C.map(e=>({...e,icon:Q[e.icon]})):[{text:"Fun fact about Rome",icon:(0,n.jsx)(a.G,{className:"text-yellow-400",icon:t(66823).X8,transform:{size:20}})},{text:"HTML landing page",icon:(0,n.jsx)(a.G,{className:"text-purple-400",icon:t(59844).m6,transform:{size:20}})},{text:"Python for fibonacci series",icon:(0,n.jsx)(a.G,{className:"text-sky-400",icon:t(28531).dT,transform:{size:20}})},{text:"Draw a dragon",icon:(0,n.jsx)(a.G,{className:"text-red-400",icon:t(54961).Vm,transform:{size:20}})}]:[],[j,k,ed,C,en,ea,N]),ep=(0,s.useRef)(!1),ex=(0,s.useMemo)(()=>k===i.Z.aiEngAppId,[k]),ev=(0,s.useMemo)(()=>(null==em?void 0:em.length)>0?(0,n.jsx)("div",{className:(0,r.cn)("col-span-1 md:col-span-2 flex justify-center"),children:(0,n.jsx)("div",{className:(0,r.cn)("flex flex-wrap gap-3",{"flex-col !gap-0 divide-y w-2/3 max-w-lg -mt-14 divide-gray-300 dark:divide-gray-600 ":en,"justify-center":!en&&!ea,"pointer-events-none":es," mt-[10px] -mb-[14px] ":ec}),children:em.map((e,l)=>(0,n.jsxs)("button",{className:(0,r.cn)("relative flex gap-2 p-2.5 text-start align-top text-[15px] dark:border-darkcolor/[0.2]",{"bg-darkcoloro rounded-2xl border shadow hover:shadow-md":!en,"group items-center":en,"w-full h-[52px] group items-center gap-4":ea,"md-screen:hidden":l>2}),onClick:()=>{if(!es&&!ep.current){if(er){c.Am.error("Loading Operator...");return}ep.current=!0,null==f||f(e.text),et(!0),setTimeout(()=>{ep.current=!1},1e3)}},children:[(0,n.jsx)("div",{className:(0,r.cn)({"w-5 flex justify-center":en}),children:en?(0,n.jsx)(a.G,{className:"opacity-50 group-hover:opacity-80 group-hover:text-bwleftblue transition",icon:t(47583).im,transform:{size:16}}):e.icon}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:(0,r.cn)("mt-px line-clamp-1 text-darkcolor opacity-70 text-sm",{"text-base group-hover:text-bwleftblue transition":en}),children:[e.text,(null==e?void 0:e.superscript)?(0,n.jsx)("sup",{className:"text-[10px] text-bwleftblue ml-[2px]",children:null==e?void 0:e.superscript}):null]}),(null==e?void 0:e.description)?(0,n.jsx)("div",{className:"text-xs text-darkcolor opacity-70 max-w-72",children:null==e?void 0:e.description}):null]})]},l))})}):null,[em,en,f,et,er,es]),eh=(0,u.ZC)({llmName:h.T}),ef=(0,s.useMemo)(()=>k===(null==eh?void 0:eh.externalApplicationId),[k,eh]),eg=(0,s.useMemo)(()=>!!(h.featureFlags.showProjects&&T),[h.featureFlags.showProjects,T]);return(0,n.jsxs)("div",{className:(0,r.cn)("relative flex flex-col items-center justify-center !mx-auto",ec?" z-[3] ":" z-10 ",{" mt-14 ":!ec},d.uO,{"!mx-0 !my-0 h-full":ea},{"!max-w-[940px]":ec}),children:[ef?(0,n.jsx)("div",{className:"rounded-3xl border border-border bg-background shadow-lg shadow-black/5 py-2 px-4",children:(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("span",{className:"font-medium",children:"Please note:"})," GPT-4.5 is very expensive and can use your compute points quickly. ",(0,n.jsx)("span",{className:"text-bwleftblue cursor-pointer underline",onClick:()=>{window.open("https://apps.abacus.ai/chatllm/admin/profile","_blank")},children:"(Learn more)"})]})}):null,!ef&&(null==$?void 0:$.length)&&ee?(0,n.jsx)("div",{className:"rounded-3xl border border-border bg-background shadow-lg shadow-black/5 mb-2",children:(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 pr-2 pl-3 py-0.5 hover:bg-muted rounded-l-full cursor-pointer",onClick:()=>{B.push(K?"/admin/tasks":"/tasks")},children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(a.G,{icon:t(30246).E9,transform:{size:15}}),(0,n.jsx)("div",{className:"absolute top-px -right-1 bg-red-500 rounded-full size-[5px]"})]}),(0,n.jsxs)("p",{className:"text-sm",children:["Unread tasks (",null==$?void 0:$.length,")"]})]}),(0,n.jsx)(p.z,{variant:"ghost",size:"icon-xs",className:"rounded-l-none border-l rounded-r-full",onClick:()=>J(Date.now()),children:(0,n.jsx)(q,{})})]})}):null,(0,n.jsxs)("div",{className:(0,r.cn)("mt-12 w-full grid grid-cols-1 md:grid-cols-2 gap-4",{"mt-0":ea||eg&&Y}),children:[(0,n.jsxs)("div",{className:(0,r.cn)("col-span-1 md:col-span-2 rounded-2xl bg-transparent sm:min-w-[400px] flex items-center justify-center",{"p-3 flex-col":!j&&eu}),children:[(0,n.jsx)("div",{className:"".concat(ex?"h-32":"h-11"," flex items-center font-medium text-2xl"),children:eg&&Y?(0,n.jsx)(W,{projectId:Y}):ex?(0,n.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,n.jsx)("span",{children:"AI Engineer - Your Assistant for Abacus.AI!"}),(0,n.jsxs)("span",{className:"text-sm text-muted-foreground mt-1 mb-12",children:["The AI Engineer can ONLY handle creation of custom chatbots and agents on the Abacus.AI platform. Currently, it can't create open-ended agents, games, or web pages. For that, we recommend our VS Code-based editor ",(0,n.jsx)("a",{href:"https://codellm.abacus.ai",target:"_blank",rel:"noopener noreferrer",className:"text-bwleftblue hover:underline",children:"CodeLLM"}),"."]})]}):ea?(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{children:"ChatLLM Operator"}),(0,n.jsx)("sup",{className:"text-[10px] text-bwleftblue ml-[4px] top-[-12px] border-[1px] border-bwleftblue rounded-lg px-[4px]",children:"BETA"})]}):Z?(0,n.jsx)("span",{children:"Enter new task details"}):null}),!j&&eu?(0,n.jsxs)("div",{className:" text-darkcolor opacity-70 mt-[3px] "+(O?" text-[16px] rounded-[14px] shadow-[0_2px_4px_rgba(0,0,0,0.2)] px-[14px] py-[10px] flex items-center gap-[7px] font-[500] ":" text-sm "),children:[O&&g&&(0,n.jsx)("img",{alt:"",src:g,className:" w-[20px] h-[20px] object-contain "}),eu]}):null]}),!en&&!Z&&!Y&&!ec&&!ed&&ev,ed&&(0,n.jsxs)("div",{className:" flex flex-col items-center justify-center col-span-1 md:col-span-2 -mt-[50px] ",children:[(0,n.jsx)("span",{className:" text-[26px] font-[500] ",children:"What do you want to build?"}),(0,n.jsx)("span",{className:" opacity-50 font-[400] text-[16px] mt-[6px] ",children:"Prompt, run, edit, and deploy full-stack websites!"})]}),ec&&ev,(0,n.jsx)("div",{className:(0,r.cn)("col-span-1 md:col-span-2 pb-12",{"pb-0":ea||ex},{hidden:ex}),children:(0,n.jsx)(d.ZP,{isWrite:!0,setIsProcessing:I,setIsProcessingUpload:S,isHideTopBar:O,onSend:b,dataChat:{},disabled:!1,onUploadDoc:P,onRemoveFileByID:L,isBinaryEnable:E,supportsBinaryUpload:z,isProcessing:A,isProcessingUpload:_,deploymentConversationId:G,isMobile:!1,appId:k,setScoreIndex:()=>{},themeApp:D,isSelfServe:T,disableLLMSwitch:el,isCentredChat:!0,deploymentId:F,isAgent:v,hasThinkingOption:R,textareaRef:U})}),en&&(0,n.jsx)("p",{className:"-mt-16 text-[11px] opacity-50 col-span-1 md:col-span-2 flex justify-center",children:"Use the pull-down on top to navigate to other LLMs."}),en&&ev,(ec||j&&!Y&&!en&&M)&&(0,n.jsxs)("div",{className:" col-span-1 md:col-span-2 flex justify-center text-sm gap-2 "+(ec?" -mt-[80px] ":" "),children:[(0,n.jsxs)("span",{className:"flex items-center text-bwleftblue gap-1 cursor-pointer",onClick:()=>window.open("https://abacus.ai/help/howTo/chatllm/prompting","_blank"),children:[(0,n.jsx)(a.G,{icon:t(18049).t3,transform:{size:14}})," ",(0,n.jsx)("span",{children:ec?"Help and How-To":"Prompting Tips and Tricks"})]}),ea?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-bwleftblue",children:"|"}),(0,n.jsxs)("span",{className:"flex items-center text-bwleftblue gap-1 cursor-pointer",onClick:()=>window.open("https://abacus.ai/help/howTo/chatllm/faqs/computer_agent ","_blank"),children:[(0,n.jsx)(a.G,{icon:t(18049).t3,transform:{size:14}})," ",(0,n.jsx)("span",{children:"FAQs"})]})]}):null]}),eg&&Y?(0,n.jsx)("div",{className:"col-span-1 md:col-span-2 flex justify-center text-sm gap-2",children:(0,n.jsx)(H,{projectId:Y,deploymentId:F})}):null,ex&&(0,n.jsx)("div",{className:"col-span-1 md:col-span-2 flex justify-center text-sm gap-2",children:(0,n.jsxs)("span",{className:"flex items-center text-bwleftblue gap-1 cursor-pointer",onClick:()=>window.open("https://abacus.ai/help/howTo/chatllm/faqs/chatbots_vs_agents","_blank"),children:[(0,n.jsx)(a.G,{icon:t(18049).t3,transform:{size:14}})," ",(0,n.jsx)("span",{children:"Custom Chatbots vs AI Agents"})]})})]})]})}},35987:function(e,l,t){"use strict";t.d(l,{Z:function(){return v}});var n=t(57437),a=t(48958),r=t(31486),s=t(13590),i=t(69997),o=t(29501),d=t(31229),c=t(14301),u=t(56210),m=t(48547),p=t(75292);let x=d.z.object({name:d.z.string().min(1,{message:"Name is required"}).max(30,{message:"Project name must be less than 30 characters"}),description:d.z.string().max(1e3).optional()});function v(e){let{open:l,onClose:d,defaultName:v,defaultDescription:h,onSave:f}=e,g=(0,o.cI)({resolver:(0,s.F)(x),defaultValues:{name:null!=v?v:"",description:null!=h?h:""}});return(0,n.jsx)(a.Vq,{open:l,onOpenChange:d,children:(0,n.jsxs)(a.cZ,{children:[(0,n.jsx)(a.fK,{children:(0,n.jsx)(a.$N,{children:v?"Edit Project":"New Project"})}),(0,n.jsx)(o.Qr,{name:"name",control:g.control,render:e=>{let{field:l}=e;return(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsx)(i.Z,{children:"Project Name"}),(0,n.jsx)(p.Z,{...l}),g.formState.errors.name?(0,n.jsx)("p",{className:"text-sm text-red-600",children:g.formState.errors.name.message}):null]})}}),(0,n.jsx)(o.Qr,{name:"description",control:g.control,render:e=>{let{field:l}=e;return(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsx)(i.Z,{children:"Provide a description for this project (optional)"}),(0,n.jsx)(r.Z,{...l,className:"resize-none min-h-20 focus:outline-none border-darkcolor/[0.15] dark:border-[#ffffff]/[0.5]",rows:1}),g.formState.errors.description?(0,n.jsx)("p",{className:"text-sm text-red-600",children:g.formState.errors.description.message}):null]})}}),!v&&(0,n.jsxs)("div",{className:"rounded-xl bg-neutral-100 dark:bg-neutral-900 px-4 py-3 flex gap-2",children:[(0,n.jsx)(m.G,{icon:t(66655).cH,transform:{size:15,y:2}}),(0,n.jsx)("div",{className:"",children:(0,n.jsx)("p",{className:"text-sm",children:"Projects can be used to organize chats, files, and custom instructions in one place. Simply upload your files once, and they'll be accessible within all chats in the project!"})})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,n.jsx)(c.Z,{className:"rounded-full bg-transparent",onClick:d,children:"Cancel"}),(0,n.jsx)(c.Z,{className:(0,u.cn)("rounded-full !bg-bwleftblue !text-darkcoloro dark:text-darkwhite/[0.7]"),onClick:g.handleSubmit(f),children:v?"Save":"Create"})]})]})})}},65308:function(e,l,t){"use strict";t.d(l,{$e:function(){return x},CN:function(){return p},Cz:function(){return v},D9:function(){return f},PY:function(){return c},Z0:function(){return d},dY:function(){return u},jw:function(){return m},zk:function(){return h}});var n=t(53436),a=t(3916),r=t(16593),s=t(29827),i=t(21770),o=t(14438);let d=()=>(0,r.a)({queryKey:["projects"],queryFn:()=>(0,n.mt5)({}),select:e=>e.result,refetchOnMount:!0}),c=e=>{let{projectId:l}=e;return(0,r.a)({queryKey:["project",l],queryFn:e=>{let{queryKey:l}=e;return(0,n.jMj)({chatllmProjectId:l[1]})},select:e=>e.result})},u=e=>{let{projectId:l,onSuccess:t}=e,r=(0,s.NL)();return(0,i.D)({mutationFn:async e=>{var l;let t=await (0,n.rEg)({payload:e});if(t.success)return t.result;o.Am.error(null!==(l=null==t?void 0:t.error)&&void 0!==l?l:a.Z.errorDefault)},onSuccess:()=>{r.invalidateQueries({queryKey:["project",l]}),r.invalidateQueries({queryKey:["projects"]}),null==t||t()}})},m=e=>{let{projectId:l,enabled:t=!0}=e;return(0,r.a)({queryKey:["project-conversations",l],queryFn:e=>{let{queryKey:l}=e;return(0,n.Zy8)({chatllmProjectId:l[1]})},select:e=>e.result,refetchOnMount:!0,enabled:t})},p=e=>{let{projectId:l,onSuccess:t}=e,r=(0,s.NL)();return(0,i.D)({mutationFn:async e=>{var t,r;let s=null!==(t=e.projectId)&&void 0!==t?t:l,i=await (0,n.oHr)({payload:{chatllmProjectId:s,deploymentConversationId:e.conversationId}});if(i.success)return s;o.Am.error(null!==(r=null==i?void 0:i.error)&&void 0!==r?r:a.Z.errorDefault)},onSuccess:e=>{null==t||t(),r.invalidateQueries({queryKey:["projects"]}),r.invalidateQueries({queryKey:["project",e]}),r.invalidateQueries({queryKey:["project-conversations",e]}),e!==l&&(r.invalidateQueries({queryKey:["project",l]}),r.invalidateQueries({queryKey:["project-conversations",l]}))}})},x=e=>{let{projectId:l,onSuccess:t}=e,r=(0,s.NL)();return(0,i.D)({mutationFn:async e=>{var t,r;let s=null!==(t=e.projectId)&&void 0!==t?t:l,i=await (0,n.f68)({payload:{chatllmProjectId:s,deploymentConversationId:e.conversationId}});if(i.success)return s;o.Am.error(null!==(r=null==i?void 0:i.error)&&void 0!==r?r:a.Z.errorDefault)},onSuccess:e=>{null==t||t(),r.invalidateQueries({queryKey:["projects"]}),r.invalidateQueries({queryKey:["project",e]}),r.invalidateQueries({queryKey:["project-conversations",e]}),e!==l&&(r.invalidateQueries({queryKey:["project",l]}),r.invalidateQueries({queryKey:["project-conversations",l]}))}})},v=e=>{let{projectId:l}=e;return(0,r.a)({queryKey:["project-files",l],queryFn:e=>{let{queryKey:l}=e;return(0,n.E1K)({chatllmProjectId:l[1]})},select:e=>e.result,refetchOnMount:!0})},h=e=>{let{projectId:l}=e,t=(0,s.NL)();return(0,i.D)({mutationFn:async e=>{var t,r;let s=null!==(t=e.projectId)&&void 0!==t?t:l,i=await (0,n.tIQ)({payload:{chatllmProjectId:s,documentUploadIds:e.documentIds}});if(i.success)return s;o.Am.error(null!==(r=null==i?void 0:i.error)&&void 0!==r?r:a.Z.errorDefault)},onSuccess:e=>{t.invalidateQueries({queryKey:["project-files",e]}),e!==l&&t.invalidateQueries({queryKey:["project-files",l]})}})},f=e=>{let{projectId:l}=e,t=(0,s.NL)();return(0,i.D)({mutationFn:async e=>{var t,r;let s=null!==(t=e.projectId)&&void 0!==t?t:l,i=await (0,n.CJ3)({payload:{chatllmProjectId:s,documentUploadIds:e.documentIds}});if(i.success)return s;o.Am.error(null!==(r=null==i?void 0:i.error)&&void 0!==r?r:a.Z.errorDefault)},onSuccess:e=>{t.invalidateQueries({queryKey:["project-files",e]}),e!==l&&t.invalidateQueries({queryKey:["project-files",l]})}})}},95367:function(e,l,t){"use strict";t.d(l,{Pw:function(){return a},nw:function(){return i},rf:function(){return s},sS:function(){return o},yY:function(){return r}});var n=t(57437);let a=["jira","teamsscraper","confluence","sharepoint"],r={h1:e=>{let{children:l}=e;return(0,n.jsx)("h1",{className:"text-xl font-bold my-2",children:l})},h2:e=>{let{children:l}=e;return(0,n.jsx)("h2",{className:"text-lg font-semibold my-2",children:l})},h3:e=>{let{children:l}=e;return(0,n.jsx)("h3",{className:"text-base font-medium my-2",children:l})},h4:e=>{let{children:l}=e;return(0,n.jsx)("h4",{className:"text-base font-medium my-2 text-gray-800 dark:text-gray-100",children:l})},p:e=>{let{children:l}=e;return(0,n.jsx)("p",{className:"my-2 text-gray-700 dark:text-gray-300 leading-relaxed",children:l})},ul:e=>{let{children:l}=e;return(0,n.jsx)("ul",{className:"list-disc pl-6 my-2",children:l})},ol:e=>{let{children:l}=e;return(0,n.jsx)("ol",{className:"list-decimal pl-6 my-2",children:l})},li:e=>{let{children:l}=e;return(0,n.jsx)("li",{className:"text-gray-700 dark:text-gray-300",children:l})},code:e=>{let{children:l}=e;return(0,n.jsx)("code",{className:"inline bg-gray-200 dark:bg-gray-800 text-sm text-gray-700 dark:text-gray-300 px-1 rounded",children:l})},pre:e=>{let{children:l}=e;return(0,n.jsx)("pre",{className:"block p-3 bg-gray-100 dark:bg-gray-800 text-sm text-gray-700 dark:text-gray-200 rounded overflow-auto whitespace-pre-wrap",children:l})},a:e=>{let{href:l,children:t}=e;return(0,n.jsx)("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700 underline break-all",children:t})}},s=function(e){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||l&&/^(?:Title|Created by|Modified by|Created at|Last modified at|Path|Size):.*/im.test(e))return"";let t=e.replace(/\\n/g,"\n");return(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/[○●■]/g,"-")).replace(/^(\s*)[•]/gm,"$1-")).replace(/^\s*(\d+)\.\s+/gm,"$1. ")).replace(/\s{2,}/g," ")).replace(/[\u200B-\u200D\uFEFF]/g,"")).replace(/["]/g,'"')).replace(/[']/g,"'")).replace(/^(.*?):(?=\s)/gm,"**$1:**")).replace(/\((\d+)\s*lines?\s*skipped\)/gi,"_($1 lines skipped)_")).replace(/```(\w+)?/g,"\n```$1\n")).replace(/^\s{4,}/gm,"    ")).split("\n").map(e=>e.trim()).filter(e=>e).join("\n\n")).replace(/\n{3,}/g,"\n\n")).trim()},i=e=>{var l;if(!e)return null;let t=null===(l=e.split(".").pop())||void 0===l?void 0:l.toLowerCase();if(!t)return null;switch(t){case"txt":return"Text Document";case"xlsx":case"xls":return"Excel Spreadsheet";case"doc":case"docx":return"Word Document";case"ppt":case"pptx":return"PowerPoint Presentation";case"pdf":return"PDF Document";case"csv":return"CSV File";case"jpg":case"jpeg":return"JPEG Image";case"png":return"PNG Image";case"zip":return"ZIP Archive";case"rar":return"RAR Archive";case"7z":return"7-Zip Archive";case"gz":case"gzip":return"GZIP Archive";case"mp4":return"MP4 Video";case"avi":return"AVI Video";case"wmv":return"Windows Media Video";case"mov":return"QuickTime Video";case"flv":return"Flash Video";case"mpg":case"mpeg":return"MPEG Video";case"webm":return"WebM Video";default:return t.toUpperCase()}},o=e=>{if(!e)return"0 B";let l=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,l)).toFixed(2))," ").concat(["B","KB","MB","GB","TB"][l])}},56120:function(e,l,t){"use strict";t.d(l,{Z:function(){return H}});var n=t(57437),a=t(48614),r=t(30278),s=t(48547),i=t(3916),o=t(2265),d=t(42715),c=t.n(d);function u(e){let{children:l,max:t,noButton:a,maxMore:r}=e,[s,i]=(0,o.useState)(!1),{res:d,isMore:u}=(0,o.useMemo)(()=>{let e=l;Array.isArray(e)&&(e=e.join(", "));let n=!1;return null!=e&&null!=t&&t>=0&&c()(e)&&(null==e?void 0:e.length)>t&&(e=s?e.substring(0,r).trimEnd():e.substring(0,t).trimEnd(),n=!0),{res:e,isMore:n}},[s,l,t,r]);return u?[(0,n.jsx)("span",{children:d},"moretext"),a?null:(0,n.jsx)("span",{className:" ml-[5px] cursor-pointer text-blue-600 ",onClick:e=>{i(e=>!e)},children:s?"Less...":"More..."},"more")]:[d]}var m=t(54887),p=t(56383),x=t(10088),v=t(22345),h=t.n(v),f=t(95951),g=t(86520),b=t(90216),j=t(53436),w=t(73863),y=t(29998),N=t.n(y),k=t(53335),C=t(86159),I=t(27648),S=t(4466),A=t(46137),_=e=>{let{text:l,components:t}=e;return(0,n.jsx)(A.v,{components:t,text:l})},P=t(49070),E=t(95367),z=t(71265);let T=e=>{let{answer:l}=e,a=(0,E.rf)(l,!0);return a.trim()?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 px-4",children:[(0,n.jsx)(s.G,{icon:t(70334).y1,className:"text-gray-500"}),(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Relevant Context"})]}),(0,n.jsx)("div",{className:"mx-4",children:(0,n.jsx)("div",{className:"max-h-[200px] overflow-y-auto break-words p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:(0,n.jsx)(_,{text:a,components:E.yY})})})]}):null},D=e=>{var l;let{fileType:a,size:r,createdDateTime:i,createdBy:o,sitePath:d,onCopyPath:c,isCopied:u}=e;return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 px-4",children:[(0,n.jsx)(s.G,{icon:t(23130).faFileLines,className:"text-gray-500"}),(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"File Details"})]}),(0,n.jsx)("div",{className:"mx-4 bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-[100px_1fr] gap-y-3 items-center",children:[a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Type"}),(0,n.jsx)("span",{className:"text-gray-800 dark:text-gray-200",children:(null===(l=a.split("/")[1])||void 0===l?void 0:l.toUpperCase())||a})]}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Size"}),(0,n.jsx)("span",{className:"text-gray-800 dark:text-gray-200",children:(0,E.sS)(parseInt(r))})]}),i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Created"}),(0,n.jsx)("span",{className:"text-gray-800 dark:text-gray-200",children:new Date(i).toLocaleString()})]}),o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Owner"}),(0,n.jsx)("span",{className:"text-gray-800 dark:text-gray-200",children:o})]}),d&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Location"}),(0,n.jsxs)("div",{className:"flex items-center gap-2 min-h-[24px]",children:[(0,n.jsx)("span",{className:"text-gray-800 dark:text-gray-200 break-all",children:d}),(0,n.jsxs)("button",{onClick:c,className:"relative p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 flex-shrink-0",title:u?"Copied!":"Copy path",children:[(0,n.jsx)(s.G,{icon:t(78564).kZ,className:(0,k.m6)("w-4 h-4 text-gray-500","transition-all duration-200",u?"scale-0 opacity-0":"scale-100 opacity-100")}),(0,n.jsx)(s.G,{icon:t(74053).LE,className:(0,k.m6)("w-4 h-4 text-blue-500 absolute inset-0 m-auto","transition-all duration-200",u?"scale-100 opacity-100":"scale-0 opacity-0")})]})]})]})]})})]})},M=e=>{let{sourceLink:l,docstoreId:a}=e;return(0,n.jsxs)("div",{className:"flex items-center gap-3 px-4",children:[(0,n.jsxs)("a",{href:l,className:"flex items-center gap-2 px-4 py-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-800 rounded-lg transition-colors",target:"_blank",rel:"noreferrer",children:[(0,n.jsx)(s.G,{icon:t(43541).wl,className:"w-4 h-4"}),(0,n.jsx)("span",{children:"View in SharePoint"})]}),a&&(0,n.jsx)(f.Z,{cancelText:"Close",title:"Document Preview",hideOkButton:!0,className:" bg-darkcoloro w-1/2 [@media(min-width:1375px)]:w-2/5 [@media(max-width:1100px)]:w-[550px] [@media(max-width:35rem)]:w-2/3",content:(0,n.jsx)(z.Z,{docId:a}),zIndex:"z-[99999]",children:(0,n.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[(0,n.jsx)(s.G,{icon:t(12769).cw,className:"w-4 h-4"}),(0,n.jsx)("span",{children:"View Full Document"})]})})]})},F=e=>{var l,t,a,r,s,i,o,d,c,u,m,p,x,v,h,f,g,b,j,w,y,N;let{data:k}=e,C=null==k?void 0:k.attributes,I=null==k?void 0:k.source_link;return C?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("hr",{className:"border-t border-gray-300"}),(null===(l=C.description)||void 0===l?void 0:l.value)&&(0,n.jsx)("div",{className:"whitespace-pre-wrap break-words overflow-auto",children:(0,n.jsx)(_,{text:C.description.value,components:E.yY})}),((null===(t=C.assignee)||void 0===t?void 0:t.value)||(null===(a=C.reporter)||void 0===a?void 0:a.value))&&(0,n.jsxs)("div",{className:"space-y-4",children:[(null===(s=C.assignee)||void 0===s?void 0:null===(r=s.value)||void 0===r?void 0:r.displayName)&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"w-24 text-gray-500 font-medium",children:"Assignee"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(null===(i=C.assignee.value.avatarUrls)||void 0===i?void 0:i["32x32"])&&(0,n.jsx)("img",{src:C.assignee.value.avatarUrls["32x32"],alt:"Assignee",className:"w-8 h-8 rounded-full"}),(0,n.jsx)("span",{className:"text-gray-800 font-medium",children:C.assignee.value.displayName})]})]}),(null===(d=C.reporter)||void 0===d?void 0:null===(o=d.value)||void 0===o?void 0:o.displayName)&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"w-24 text-gray-500 font-medium",children:"Reporter"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(null===(c=C.reporter.value.avatarUrls)||void 0===c?void 0:c["32x32"])&&(0,n.jsx)("img",{src:C.reporter.value.avatarUrls["32x32"],alt:"Reporter",className:"w-8 h-8 rounded-full"}),(0,n.jsx)("span",{className:"text-gray-800 font-medium",children:C.reporter.value.displayName})]})]})]}),(null===(u=C.priority)||void 0===u?void 0:u.value)&&(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[C.priority.value.iconUrl&&(0,n.jsx)("img",{src:C.priority.value.iconUrl,alt:"Priority",className:"w-5 h-5"}),(0,n.jsxs)("span",{className:"text-gray-600 dark:text-gray-300",children:[(0,n.jsx)("strong",{children:"Priority:"})," ",C.priority.value.name]})]}),((null===(m=C.labels)||void 0===m?void 0:m.value)||(null===(p=C.status)||void 0===p?void 0:p.value))&&(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{className:"text-gray-700 dark:text-gray-200",children:"Labels:"}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 mt-1",children:[(null===(x=C.status)||void 0===x?void 0:x.value)&&(0,n.jsx)("span",{className:"px-2 py-1 rounded text-white text-xs",style:{backgroundColor:(null===(v=C.status.value.statusCategory)||void 0===v?void 0:v.colorName)==="yellow"?"blue":null===(h=C.status.value.statusCategory)||void 0===h?void 0:h.colorName},children:C.status.value.name}),(null===(f=C.labels)||void 0===f?void 0:f.value)&&C.labels.value.map((e,l)=>(0,n.jsx)("span",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded text-xs",children:e},l))]})]}),((null===(g=C.created)||void 0===g?void 0:g.value)||(null===(b=C.updated)||void 0===b?void 0:b.value))&&(0,n.jsxs)("div",{className:"flex items-center justify-start text-xs text-gray-500 dark:text-gray-400 space-x-4",children:[(null===(j=C.created)||void 0===j?void 0:j.value)&&(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Created At:"})," ",new Date(C.created.value).toLocaleString()]}),(null===(w=C.updated)||void 0===w?void 0:w.value)&&(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Last Updated:"})," ",new Date(C.updated.value).toLocaleString()]})]}),(null===(N=C.comments)||void 0===N?void 0:null===(y=N.value)||void 0===y?void 0:y.length)>0&&(0,n.jsxs)("div",{className:"whitespace-pre-wrap break-words overflow-auto",children:[(0,n.jsx)("h2",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Comments"}),C.comments.value.map((e,l)=>{var t,a,r;return(0,n.jsxs)("div",{className:"flex items-start space-x-3 border-t pt-4",children:[(null===(a=e.author)||void 0===a?void 0:null===(t=a.avatarUrls)||void 0===t?void 0:t["32x32"])&&(0,n.jsx)("img",{src:e.author.avatarUrls["32x32"],alt:"".concat(e.author.displayName||"User"," Avatar"),className:"w-8 h-8 rounded-full"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:[(0,n.jsx)("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:(null===(r=e.author)||void 0===r?void 0:r.displayName)||"Anonymous"})," ",(0,n.jsx)("span",{children:e.created&&new Date(e.created).toLocaleString()})]}),e.body&&(0,n.jsx)(_,{text:e.body,components:E.yY})]})]},l)})]}),(0,n.jsx)("hr",{className:"border-t border-gray-300"}),I&&(0,n.jsx)("div",{children:(0,n.jsx)("a",{href:I,className:"text-blue-500 hover:text-blue-600 underline",target:"_blank",rel:"noreferrer",children:"View Issue in Jira"})})]}):null},L=e=>{var l,t,a,r,s;let{data:i}=e,o=(null==i?void 0:i.attributes)||{},d=null==i?void 0:i.source_link;return o?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("hr",{className:"border-t border-gray-300"}),(null===(l=o.content)||void 0===l?void 0:l.value)&&(0,n.jsxs)("div",{className:"break-words overflow-auto",children:[(0,n.jsx)(_,{text:o.content.value.substring(0,1e3),components:E.yY}),o.content.value.length>1e3&&(0,n.jsx)("span",{className:"text-gray-500",children:"..."})]}),(null===(t=o.created_by)||void 0===t?void 0:t.value)&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"w-24 text-gray-500 font-medium",children:"Owned by"}),(0,n.jsx)("span",{className:"text-gray-800 font-medium",children:o.created_by.value})]}),(null===(a=o.space)||void 0===a?void 0:a.value)&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"w-24 text-gray-500 font-medium",children:"Space"}),(0,n.jsx)("span",{className:"text-gray-800",children:o.space.value})]}),(null===(r=o.created_date_time)||void 0===r?void 0:r.value)&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"w-24 text-gray-500 font-medium",children:"Created At"}),(0,n.jsx)("span",{className:"text-gray-800",children:new Date(o.created_date_time.value).toLocaleString()})]}),(null===(s=o.last_modified_date_time)||void 0===s?void 0:s.value)&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"w-24 text-gray-500 font-medium",children:"Last Updated"}),(0,n.jsx)("span",{className:"text-gray-800",children:new Date(o.last_modified_date_time.value).toLocaleString()})]}),(0,n.jsx)("hr",{className:"border-t border-gray-300"}),d&&(0,n.jsx)("div",{children:(0,n.jsx)("a",{href:d,className:"text-blue-500 hover:text-blue-600 underline",target:"_blank",rel:"noreferrer",children:"View Page in Confluence"})})]}):null},Z=e=>{var l,t,a,r,s,i,o,d,c,u,m,p,x,v,h,f;let{data:g}=e,b=(null==g?void 0:g.attributes)||{},j=null==g?void 0:g.source_link;return b?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("hr",{className:"border-t border-gray-300"}),(null===(l=b.content_type)||void 0===l?void 0:l.value)==="channel_post"?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex flex-col space-y-2 bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[(null===(a=b.team)||void 0===a?void 0:a.value)&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"w-24 text-gray-500 font-medium",children:"Team"}),(0,n.jsx)("span",{className:"text-gray-800 dark:text-gray-200 font-medium",children:b.team.value})]}),(null===(r=b.channel)||void 0===r?void 0:r.value)&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"w-24 text-gray-500 font-medium",children:"Channel"}),(0,n.jsx)("span",{className:"text-gray-800 dark:text-gray-200",children:b.channel.value})]})]}),(0,n.jsxs)("div",{className:"flex items-start space-x-3 bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,n.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold",children:(null===(o=b.user)||void 0===o?void 0:null===(i=o.value)||void 0===i?void 0:null===(s=i.charAt(0))||void 0===s?void 0:s.toUpperCase())||"?"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:(null===(d=b.user)||void 0===d?void 0:d.value)||"Unknown User"}),(0,n.jsx)("span",{className:"text-xs text-gray-500",children:(null===(c=b.created_date_time)||void 0===c?void 0:c.value)?new Date(b.created_date_time.value).toLocaleString():"Unknown Date"})]})}),(null===(u=b.subject)||void 0===u?void 0:u.value)&&(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:b.subject.value}),(0,n.jsx)("div",{className:"text-gray-700 dark:text-gray-300",children:(0,n.jsx)(_,{text:(null===(p=b.content)||void 0===p?void 0:null===(m=p.value)||void 0===m?void 0:m.replace(/<\/?[^>]+(>|$)/g,"").substring(0,1e3))||"",components:{MARKDOWN_COMPONENTS:E.yY}})})]})]})]}):(null===(t=b.content_type)||void 0===t?void 0:t.value)==="chat_message"?(0,n.jsxs)("div",{className:"space-y-4",children:[(null===(x=b.chat_topic)||void 0===x?void 0:x.value)&&"Unknown Name"!==b.chat_topic.value&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"w-24 text-gray-500 font-medium",children:"Chat Topic"}),(0,n.jsx)("span",{className:"text-gray-800 dark:text-gray-200 font-medium",children:b.chat_topic.value})]}),(null===(v=b.messages)||void 0===v?void 0:v.value)&&b.messages.value.length>0&&(0,n.jsx)("div",{className:"space-y-4",children:b.messages.value.map((e,l)=>{var t,a,r,s,i,o;return(0,n.jsxs)("div",{className:"flex items-start space-x-3 bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[(0,n.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold",children:(null===(r=e.from)||void 0===r?void 0:null===(a=r.name)||void 0===a?void 0:null===(t=a.charAt(0))||void 0===t?void 0:t.toUpperCase())||"?"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:(null===(s=e.from)||void 0===s?void 0:s.name)||"Unknown User"}),(0,n.jsx)("span",{className:"text-xs text-gray-500",children:(null===(i=e.created_date_time)||void 0===i?void 0:i.date)&&(null===(o=e.created_date_time)||void 0===o?void 0:o.time)?new Date("".concat(e.created_date_time.date," ").concat(e.created_date_time.time)).toLocaleString():"Unknown Date"})]})}),(0,n.jsx)("div",{className:"text-gray-700 dark:text-gray-300",children:(0,n.jsx)(_,{text:e.content||"",components:E.yY})})]})]},l)})}),(null===(h=b.chat_members)||void 0===h?void 0:h.value)&&b.chat_members.value.length>0&&(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Chat Members"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:b.chat_members.value.map((e,l)=>{var t,a;return(0,n.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full",children:[(0,n.jsx)("div",{className:"w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm",children:(null===(a=e.name)||void 0===a?void 0:null===(t=a.charAt(0))||void 0===t?void 0:t.toUpperCase())||"?"}),(0,n.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:e.name||"Unknown Member"})]},l)})})]})]}):(0,n.jsx)("div",{className:"space-y-4",children:(null===(f=b.transcript)||void 0===f?void 0:f.value)&&(0,n.jsx)("div",{className:"whitespace-pre-wrap break-words overflow-auto",children:(0,n.jsx)(_,{text:b.transcript.value,components:E.yY})})}),(0,n.jsx)("hr",{className:"border-t border-gray-300"}),j&&(0,n.jsx)("div",{children:(0,n.jsx)("a",{href:j,className:"text-blue-500 hover:text-blue-600 underline",target:"_blank",rel:"noreferrer",children:"View in Microsoft Teams"})})]}):null},G=e=>{var l,t,a,r,s,i;let{data:d}=e,c=(null==d?void 0:d.attributes)||{},u=null==d?void 0:d.source_link,m=null==d?void 0:null===(t=d.attributes)||void 0===t?void 0:null===(l=t.docstore_id)||void 0===l?void 0:l.value,p=null==d?void 0:d.title,x=(0,E.nw)(p),[v,h]=(0,o.useState)(!1);return(0,n.jsxs)("div",{className:"space-y-4",children:[(null==d?void 0:d.answer)&&(0,n.jsx)(T,{answer:d.answer}),(0,n.jsx)(D,{fileType:x,size:null===(a=c.size)||void 0===a?void 0:a.value,createdDateTime:null===(r=c.created_date_time)||void 0===r?void 0:r.value,createdBy:null===(s=c.created_by)||void 0===s?void 0:s.value,sitePath:null===(i=c.site_relative_path)||void 0===i?void 0:i.value,onCopyPath:()=>{var e;(null===(e=c.site_relative_path)||void 0===e?void 0:e.value)&&(navigator.clipboard.writeText(c.site_relative_path.value),h(!0),setTimeout(()=>h(!1),1500))},isCopied:v}),(0,n.jsx)(M,{sourceLink:u,docstoreId:m})]})};var R=e=>{var l,a,r,i,d,c,u,m,p,x,v,h,g,b,j,w,y,N,A,z,T,D,M,R,O,U,B,H,V,W,q,Q;let{item:K,index:Y}=e,$=(0,o.useRef)(null),[X,J]=(0,P.PB)("realtimeSource"),ee=(null===(r=K.attributes)||void 0===r?void 0:null===(a=r.assignee)||void 0===a?void 0:null===(l=a.value)||void 0===l?void 0:l.displayName)||(null===(c=K.attributes)||void 0===c?void 0:null===(d=c.reporter)||void 0===d?void 0:null===(i=d.value)||void 0===i?void 0:i.displayName)||(null===(m=K.attributes)||void 0===m?void 0:null===(u=m.user)||void 0===u?void 0:u.value),el=(null==K?void 0:K.source_link)||(null===(x=K.attributes)||void 0===x?void 0:null===(p=x.page_url)||void 0===p?void 0:p.value),et=(null==K?void 0:K.title)||(null==K?void 0:null===(v=K.metadata)||void 0===v?void 0:v.Filename),en=(null==K?void 0:K.document_content)||(null==K?void 0:K.answer),ea=(0,o.useCallback)(e=>{if(e&&+X===Y){var l;null===(l=$.current)||void 0===l||l.scrollIntoView({behavior:"smooth",block:"center"})}J(e?""+Y:"")},[Y,J,X]),er=(0,o.useCallback)((e,l)=>{if(!e)return"";if("sharepoint"===l){let l=(0,E.rf)(e,!1),t=l.split("\n");return t.length>10?t.slice(0,10).join("\n")+"...":l.length>300?l.substring(0,297)+"...":l}let t=e.replace(/<\/?[^>]+(>|$)/g,"");return t.length>300?t.substring(0,297)+"...":t},[]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{ref:$,className:"flex items-start gap-2 ",children:[(0,n.jsx)("div",{className:"flex-shrink-0 ",children:(null==K?void 0:K.source_connector_type)&&E.Pw.includes(null==K?void 0:K.source_connector_type)?(0,n.jsx)("img",{alt:null==K?void 0:K.source_connector_type,src:"/chatllm/sourcesConnectorLogo/".concat(null==K?void 0:K.source_connector_type,".png"),className:"w-[24px] h-[24px]"}):(0,n.jsx)(s.G,{icon:t(20878).gM,transform:{size:24},className:"w-6"})}),(0,n.jsxs)("div",{className:"flex-grow flex flex-col gap-[6px]",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1 ",children:[el?(0,n.jsx)(I.default,{className:"text-[13px] font-semibold text-[#0000EE] dark:text-white",href:el,target:"_blank",children:(0,n.jsx)("span",{children:et})}):(0,n.jsx)("p",{className:"text-[13px] font-semibold text-[#0000EE] dark:text-white",children:(0,n.jsx)("span",{children:et})}),(0,n.jsx)(C.Z,{title:"",side:"bottom",enabled:!0,content:(0,n.jsx)("div",{className:"w-[150px]",children:(0,n.jsxs)("span",{className:"font-[10px] leading-4",children:[(0,n.jsx)("span",{className:"font-semibold",children:"Private:"})," You have access to this as you are part of Engineering Group"]})}),children:(null==K?void 0:K.tooltip)&&(0,n.jsx)("span",{className:"cursor-pointer",children:(0,n.jsx)(s.G,{icon:t(56388).by,transform:{size:16}})})})]}),(0,n.jsxs)("div",{className:"flex mt-[-6px] space-x-1 text-[8px]",children:[(0,n.jsx)("p",{children:ee}),ee&&(0,n.jsx)("p",{children:"•"}),(0,n.jsx)("p",{children:(e=>{if(!e)return;let l=new Date(e);return"Updated ".concat((0,S.Q)(l,{addSuffix:!0}))})((null===(g=K.attributes)||void 0===g?void 0:null===(h=g.updated)||void 0===h?void 0:h.value)||(null===(j=K.attributes)||void 0===j?void 0:null===(b=j.last_modified_date_time)||void 0===b?void 0:b.value))})]}),!!((null===(y=K.attributes)||void 0===y?void 0:null===(w=y.labels)||void 0===w?void 0:w.value.length)||(null===(z=K.attributes)||void 0===z?void 0:null===(A=z.status)||void 0===A?void 0:null===(N=A.value)||void 0===N?void 0:N.name))&&(0,n.jsxs)("div",{className:"flex space-x-1 leading-3",children:[null===(M=K.attributes)||void 0===M?void 0:null===(D=M.labels)||void 0===D?void 0:null===(T=D.value)||void 0===T?void 0:T.map(e=>(0,n.jsx)("span",{className:"text-[10px] font-normal border-[1px] px-1 rounded-md border-black/[0.15] dark:border-white/70",children:e},e)),(null===(U=K.attributes)||void 0===U?void 0:null===(O=U.status)||void 0===O?void 0:null===(R=O.value)||void 0===R?void 0:R.name)&&(0,n.jsx)("span",{className:"text-[10px] font-normal border-[1px] px-1 rounded-md text-white",style:{backgroundColor:(null===(B=K.attributes.status.value.statusCategory)||void 0===B?void 0:B.colorName)==="yellow"?"blue":(null===(H=K.attributes.status.value.statusCategory)||void 0===H?void 0:H.colorName)==="blue-gray"?"gray":null===(V=K.attributes.status.value.statusCategory)||void 0===V?void 0:V.colorName},children:K.attributes.status.value.name})]}),(0,n.jsx)("div",{className:"font-normal leading-5 flex flex-col",children:(0,n.jsxs)(n.Fragment,{children:[en&&(0,n.jsx)(_,{components:{},text:er(en,null==K?void 0:null===(W=K.source_connector_type)||void 0===W?void 0:W.toLowerCase())}),(0,n.jsx)(f.Z,{title:"".concat(et),openOverride:+X===Y,hideOkButton:!0,cancelText:"Ok",onChangeOpen:ea,className:(null==K?void 0:null===(q=K.source_connector_type)||void 0===q?void 0:q.toLowerCase())==="sharepoint"?"w-[800px]":"",content:(0,n.jsx)("div",{className:(0,k.m6)("text-darkcolor my-[10px] max-h-[400px] overflow-scroll relative",(null==K?void 0:null===(Q=K.source_connector_type)||void 0===Q?void 0:Q.toLowerCase())==="sharepoint"?"max-h-[600px]":""),children:(e=>{var l;switch(null==e?void 0:null===(l=e.source_connector_type)||void 0===l?void 0:l.toLowerCase()){case"jira":return(0,n.jsx)(F,{data:e});case"confluence":return(0,n.jsx)(L,{data:e});case"teamsscraper":return(0,n.jsx)(Z,{data:e});case"sharepoint":return(0,n.jsx)(G,{data:e});default:return(0,n.jsx)("div",{className:"whitespace-pre-wrap break-words overflow-auto",children:(0,n.jsx)(_,{components:E.yY,text:(null==e?void 0:e.preview_text)||(null==e?void 0:e.answer)})})}})(K)}),children:(0,n.jsx)("span",{className:"cursor-pointer text-blue-600 hover:underline",children:"View Source"})})]})})]})]})})},O=e=>{let{allSources:l}=e;return(0,n.jsx)("div",{className:"h-full max-w-4xl bg-darkcolor/[0.05] px-4 py-4 space-y-4 overflow-auto",children:Array.isArray(l)&&l.map((e,l)=>{var t;return(0,n.jsx)(R,{item:e,index:l},""+l+(null==e?void 0:null===(t=e.image_ids)||void 0===t?void 0:t[0]))})})};let U={init:e=>({opacity:0,scale:.8,x:e?1e3:-1e3}),anim:e=>({zIndex:1,x:0,opacity:1,scale:1}),exit:e=>({zIndex:0,x:e?-1e3:1e3,opacity:0,scale:.8})},B={init:e=>({opacity:0,y:e?14:-14}),anim:{zIndex:1,opacity:1,y:0},exit:e=>({zIndex:0,opacity:0,y:e?-14:14})};function H(e){var l,d,v,y,C,I,S,A,_,P,E,z,T,D;let{data:M,dataScoreOpen:F,isFull:L,color:Z,deploymentId:G,deploymentConversationId:R,isRealtimeSource:H,allSources:V,scoreIndex:W,setScoreIndex:q}=e,[Q,K]=(0,o.useState)(null),[Y,$]=(0,o.useState)(null),[X,J]=(0,o.useState)(null),[ee,el]=(0,o.useState)(!1),[et,en]=(0,o.useState)(!0),[ea,er]=(0,o.useState)(!0),[es,ei]=(0,o.useState)(!1),[eo,ed]=(0,o.useState)(!1),[ec,eu]=(0,o.useState)(null!=L&&L),[em,ep]=(0,o.useState)(0),[ex,ev]=(0,o.useState)(0),[eh,ef]=(0,o.useState)(!1),[eg,eb]=(0,o.useState)(!1),[ej,ew]=(0,o.useState)(!0),[ey,eN]=(0,o.useState)([]),[ek,eC]=(0,o.useState)(null),[eI,eS]=(0,o.useState)(!1),[eA,e_]=(0,o.useState)(!1),[eP,{height:eE,width:ez}]=(0,p.Z)(),[eT,{height:eD}]=(0,p.Z)(),eM=(0,x.Z)(eE,300),eF=Math.trunc(L?ez-30:130),eL=(0,x.Z)(eF,600),eZ=Math.trunc(L?Math.max(ez-10,eM-80-90):130),eG=(0,x.Z)(eZ,600),eR=(0,o.useRef)(null),{themeApp:eO}=(0,b.J)(),eU=(0,o.useRef)(!0);(0,o.useEffect)(()=>{if(eU.current){eU.current=!1;return}F!==M&&setTimeout(()=>{L||(en(!1),eu(!1))},0)},[F,M]);let eB=(0,o.useMemo)(()=>{var e,l,t,n;let a=(null==M?void 0:null===(l=M.highlights)||void 0===l?void 0:null===(e=l.results)||void 0===e?void 0:e.length)>0?null==M?void 0:null===(t=M.highlights)||void 0===t?void 0:t.results:null==M?void 0:null===(n=M.searchResults)||void 0===n?void 0:n.results;return null==a?void 0:a[W]},[M,W]),eH=(0,o.useMemo)(()=>null==eB?void 0:eB.image_ids,[eB]),{documentProcessingConfig:eV,documentProcessingVersion:eW}=(0,o.useMemo)(()=>({documentProcessingConfig:null==eB?void 0:eB.document_processing_config,documentProcessingVersion:null==eB?void 0:eB.document_processing_version}),[eB]),eq=(0,o.useMemo)(()=>{let e=null==eH?void 0:eH[0];return i.Z.getDocImageUrl(e,eL,eG,G,R,null==M?void 0:M.timestamp,0,Z,eV,eW)},[eB,W,eH,G,eL,eG,R,M,Z,eV,eW]);(0,o.useEffect)(()=>{if(!ee||!L){$(null),K(null);return}let e=(null==eH?void 0:eH[W])||(null==eH?void 0:eH[0]);e&&(async()=>{var l,t,n,a;let r=null==e?void 0:null===(t=e.split("-"))||void 0===t?void 0:null===(l=t.slice(0,-1))||void 0===l?void 0:l.join("-");parseInt(null==e?void 0:null===(n=e.split("-"))||void 0===n?void 0:n.pop(),10);let s=await (0,j.S1h)({docId:r,page:1});K(r);let i=null==s?void 0:null===(a=s.result)||void 0===a?void 0:a.pageCount;$(null!=i?i:null)})()},[eH,W,ee,L]),(0,o.useEffect)(()=>{if(Q&&Y>0&&ee&&L){let e=[];if(null!=Y&&Y>=1)for(let l=1;l<=Y;l++)e.push({url:(e,t)=>i.Z.getDocImageUrl(Q+"-"+(l-1),e,t,G,R,null==M?void 0:M.timestamp,W,Z),page:l,docId:Q});J(e)}else J(null)},[ee,Y,L,Q,G,R,null==M?void 0:M.timestamp,Z,W]),(0,o.useEffect)(()=>{var e,l,t;let n=null==eH?void 0:eH[0],a=null==n?void 0:null===(l=n.split("-"))||void 0===l?void 0:null===(e=l.slice(0,-1))||void 0===e?void 0:e.join("-");eC(null!==(t=null==eB?void 0:eB.source)&&void 0!==t?t:(0,j._WC)({docId:a}))},[eH]);let eQ=(0,o.useMemo)(()=>W<=0,[W]),eK=(0,o.useMemo)(()=>{var e,l,t,n;let a=(null==M?void 0:null===(l=M.highlights)||void 0===l?void 0:null===(e=l.results)||void 0===e?void 0:e.length)>0?null==M?void 0:null===(t=M.highlights)||void 0===t?void 0:t.results:null==M?void 0:null===(n=M.searchResults)||void 0===n?void 0:n.results;return(null==a?void 0:a.length)==null||(null==a?void 0:a.length)-1<=W},[W,M]),eY=(0,o.useMemo)(()=>L?999:4,[L]),e$=(0,o.useMemo)(()=>null==eH?void 0:eH.slice(em,em+eY),[em,eY,eB,eH]),eX=(0,o.useMemo)(()=>0===em,[em]),eJ=(0,o.useMemo)(()=>em+eY>(null==eH?void 0:eH.length)-1,[eB,em,eY,eH]),e0=(0,o.useMemo)(()=>{var e,l,t,n,a,r,s;if(!eg&&!L)return null;let o=null!==(e=null==eH?void 0:eH[ex])&&void 0!==e?e:null,d=i.Z.getDocImageUrl(o,eL,eG,G,R,null==M?void 0:M.timestamp,0,Z,eV,eW),c=null!==(l=null==eH?void 0:eH[ex-1])&&void 0!==l?l:null,u=c?i.Z.getDocImageUrl(c,eL,eG,G,R,null==M?void 0:M.timestamp,0,Z,eV,eW):null,m=null!==(t=null==eH?void 0:eH[ex+1])&&void 0!==t?t:null,p=m?i.Z.getDocImageUrl(m,eL,eG,G,R,null==M?void 0:M.timestamp,0,Z,eV,eW):null,x=null!==(n=null==eH?void 0:eH[ex+2])&&void 0!==n?n:null,v=x?i.Z.getDocImageUrl(x,eL,eG,G,R,null==M?void 0:M.timestamp,0,Z,eV,eW):null;return(eN(e=>(null!=e||(e=[]),!d||(null==e?void 0:e.includes(d))||(e=[...null!=e?e:[]]).push(d),!p||(null==e?void 0:e.includes(p))||(e=[...null!=e?e:[]]).push(p),!v||(null==e?void 0:e.includes(v))||(e=[...null!=e?e:[]]).push(v),!u||(null==e?void 0:e.includes(u))||(e=[...null!=e?e:[]]).push(u),e)),null!=X)?null!==(s=null==X?void 0:null===(r=X[ex])||void 0===r?void 0:null===(a=r.url)||void 0===a?void 0:a.call(r,eL,eG))&&void 0!==s?s:null:o},[ex,X,eB,Z,eL,eG,eH,M,eg,G,R,eV,eW]);null==e$||e$[0];let e1=(0,o.useCallback)(e=>i.Z.getDocImageUrl(e,eL,eG,G,R,null==M?void 0:M.timestamp,W,Z,eV,eW),[L,Z,eL,eG,W,M,ez,eM,130,G,R,eV,eW]);(0,o.useEffect)(()=>{e_(!1)},[W]);let e2=(0,o.useMemo)(()=>eh?(0,n.jsx)(a.M,{children:(0,n.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:" z-[100] bg-black/[0.6] absolute top-0 left-0 right-0 bottom-0 ",children:(0,n.jsxs)("div",{className:" absolute top-0 left-0 right-0 bottom-0 flex items-center justify-center p-[34px] ",children:[(0,n.jsx)(r.E.div,{initial:{opacity:0,scale:.9},whileHover:{scale:1.05},whileTap:{scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},onTap:e=>{ef(!1)},className:" !outline-none absolute right-[20px] top-[20px] text-white px-[10px] pt-[7px] pb-[5px] bg-white/[0.4] rounded-full ",children:(0,n.jsx)(s.G,{icon:t(52210).$9,transform:{size:18}})}),(0,n.jsx)(r.E.div,{initial:{opacity:0,scale:.9},whileHover:{scale:1.05},whileTap:{scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},onTap:e=>{ew(!1),ev(e=>{let l=e-1;return l<0&&(l=(null==X?null==eH?void 0:eH.length:null==X?void 0:X.length)-1),l})},className:" !outline-none absolute left-[20px] top-1/2 -translate-y-1/2 text-white px-[10px] pt-[8px] pb-[4px] bg-white/[0.4] rounded-full ",children:(0,n.jsx)(s.G,{icon:t(42272).OP,transform:{size:18}})}),(0,n.jsx)(r.E.div,{initial:{opacity:0,scale:.9},whileHover:{scale:1.05},whileTap:{scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},onTap:e=>{ew(!0),ev(e=>{let l=e+1;return l>(null==X?null==eH?void 0:eH.length:null==X?void 0:X.length)-1&&(l=0),l})},className:" !outline-none absolute right-[20px] top-1/2 -translate-y-1/2 text-white px-[10px] pt-[8px] pb-[4px] bg-white/[0.4] rounded-full ",children:(0,n.jsx)(s.G,{icon:t(73513).YZ,transform:{size:18}})}),(0,n.jsx)(a.M,{custom:ej,mode:"popLayout",children:(0,n.jsx)(r.E.img,{alt:"",custom:ej,initial:"init",animate:"anim",exit:"exit",variants:U,transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},className:" object-contain h-full shadow-[0_0_10px_rgba(0,0,0,0.6)] ",src:null!=X?e0:i.Z.getDocImageUrl(e0,null,null,G,R,null==M?void 0:M.timestamp,W,Z,eV,eW)},"imgModal+"+ex)})]})})}):null,[eh,e0,ex,Z,eV,eW]),e5=(0,o.useMemo)(()=>{let e=null==eB?void 0:eB.metadata;if(null!=e&&!c()(e)&&!h()(e)){let l=Object.keys(null!=e?e:{}),t=[];return l.some((l,a)=>{t.push((0,n.jsxs)("div",{className:" ml-[20px] ",children:[(0,n.jsx)("span",{className:" mr-[5px] opacity-60 ",children:i.Z.upperFirst(l)}),i.Z.isNestedJsonFormat(null==e?void 0:e[l])?(0,n.jsx)("pre",{children:(0,n.jsx)(u,{max:70,children:JSON.stringify(i.Z.parseNestedJson(JSON.parse(null==e?void 0:e[l])),null,2)})}):(0,n.jsx)("span",{children:(0,n.jsx)(u,{max:70,children:(null==e?void 0:e[l])||"-"})})]},"k"+a))}),t}return null},[eB]),e4=null!==(T=null==eB?void 0:eB.source)&&void 0!==T?T:null==eB?void 0:eB.source_description,e6=(null==e4?void 0:null===(l=(d=e4.toString()).startsWith)||void 0===l?void 0:l.call(d,"http://"))||(null==e4?void 0:null===(v=(y=e4.toString()).startsWith)||void 0===v?void 0:v.call(y,"https://"));return(0,n.jsxs)("div",{className:N().scoreDetailsContent,children:[(0,n.jsx)("div",{className:" hidden ",children:null==ey?void 0:ey.map((e,l)=>(0,n.jsx)("img",{alt:"",src:e},"cacheImgDoc"+e))}),e2&&(0,m.createPortal)(e2,document.body),(!H||null!==W)&&L&&(0,n.jsxs)("div",{className:" absolute left-0 right-0 top-0 h-[34px] -mt-[34px] "+(eM<=0?" invisible ":""),children:[(0,n.jsx)("div",{className:" absolute top-0 left-0 right-0 bottom-0 flex items-center justify-center text-darkcolor text-[14px] font-[500] overflow-hidden gap-[10px] ",children:(0,n.jsxs)("div",{className:"flex items-center gap-[10px]",children:[(0,n.jsx)(r.E.div,{onClick:e=>{ec&&!L?eX||(er(!1),ep(e=>{var l;return e-(null!==(l=null==e$?void 0:e$.length)&&void 0!==l?l:0)})):eQ||(er(!1),q(W-1),ep(0))},className:" select-none duration-300 transition-all rounded bg-darkcolor/[0.12] p-[4px] hover:bg-darkcolor/[0.22] cursor-pointer flex items-center justify-center "+(eQ?" !cursor-not-allowed opacity-50 ":""),children:(0,n.jsx)(s.G,{icon:t(13448).Ey,transform:{size:18}})}),(0,n.jsxs)("span",{className:"text-[13px] opacity-70 min-w-[40px] mt-[2px] text-center",children:["Source ",(null!=W?W:0)+1,"/",((null==M?void 0:null===(I=M.highlights)||void 0===I?void 0:null===(C=I.results)||void 0===C?void 0:C.length)>0?null==M?void 0:null===(S=M.highlights)||void 0===S?void 0:S.results:(null==M?void 0:null===(A=M.searchResults)||void 0===A?void 0:A.results)||[]).length]}),(0,n.jsx)(r.E.div,{onClick:e=>{ec&&!L?eJ||(er(!0),ep(e=>{var l;return e+(null!==(l=null==e$?void 0:e$.length)&&void 0!==l?l:0)})):eK||(er(!0),q(W+1),ep(0))},className:" select-none duration-300 transition-all p-[4px] rounded bg-darkcolor/[0.12] hover:bg-darkcolor/[0.22] cursor-pointer flex items-center justify-center "+(eK?" !cursor-not-allowed opacity-50 ":""),children:(0,n.jsx)(s.G,{icon:t(14677).yO,transform:{size:18}})})]})}),H&&(0,n.jsxs)("div",{className:"w-[130px] cursor-pointer absolute top-0 left-0 pl-[15px] right-0 bottom-0 flex items-center justify-start font-[400] overflow-hidden gap-2  ",onClick:()=>q(null),children:[(0,n.jsx)(s.G,{icon:t(96777).ac,transform:{size:20}}),(0,n.jsx)("p",{className:"text-[10px]",children:"Back to All Sources"})]})]}),(0,n.jsx)(r.E.div,{className:L?" absolute top-0 left-0 right-0 bottom-0 ":" relative ",children:(0,n.jsx)(a.M,{children:et&&(0,n.jsx)(r.E.div,{initial:{opacity:0,height:0,overflowY:"hidden"},animate:{opacity:1,height:L?"100%":"auto",overflowY:"visible"},exit:{opacity:0,height:0,overflowY:"hidden"},className:(0,k.m6)("border-t-[1px] border-t-darkcolor/[0.05]",null!==W&&"bg-darkcolor/[0.05]"),children:(0,n.jsx)("div",{className:" text-[12px] text-darkcolor py-[20px] ",children:(0,n.jsxs)("div",{ref:eP,className:" mx-auto overflow-auto text-left "+(null!==W?"px-[15px]":"")+(L?" absolute top-0 left-0 right-0 bottom-0 ":" max-w-[700px]  "),children:[!L&&(0,n.jsx)(r.E.div,{onClick:e=>{ec&&!L?eX||(er(!1),ep(e=>{var l;return e-(null!==(l=null==e$?void 0:e$.length)&&void 0!==l?l:0)})):eQ||(er(!1),q(W-1),ep(0))},className:" select-none duration-300 transition-all py-[1px] rounded bg-darkcolor/[0.04] hover:bg-darkcolor/[0.12] cursor-pointer flex items-center justify-center mb-[8px] "+((!ec||L)&&eQ?" !cursor-not-allowed opacity-50 ":"")+(ec&&!L&&eX?" !cursor-not-allowed !opacity-10 ":"")+(L?" ":""),children:(0,n.jsx)(s.G,{icon:t(85678).on,transform:{size:18}})}),(0,n.jsx)(a.M,{custom:ea,mode:"popLayout",children:(0,n.jsx)(r.E.div,{variants:B,initial:"init",animate:"anim",exit:"exit",transition:{y:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},custom:ea,className:L?" h-full ":" ",children:H&&null===W?(0,n.jsx)(O,{allSources:V}):(0,n.jsxs)("div",{className:(0,k.m6)("flex gap-[8px] items-stretch",ec&&!L&&"justify-around",L&&"flex-col h-full"),children:[(0,n.jsxs)("div",{ref:eT,className:" relative border-2 border-transparent w-full ",children:[(!ec||L)&&(0,n.jsxs)(r.E.div,{animate:{opacity:es?.35:1},className:L?" ":" flex-1 ",children:[!(null==eO?void 0:eO[j.a63])&&(0,n.jsx)("div",{className:"  ",children:(null==eB?void 0:eB.score)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:" opacity-70 ",children:"Score:"}),(0,n.jsx)("span",{className:" font-semibold ml-[5px] ",children:i.Z.decimals(eB.score,5)})]})}),(0,n.jsxs)("div",{className:"  ",children:[(0,n.jsx)("span",{className:" opacity-70 ",children:"Answer:"}),(0,n.jsxs)("span",{className:" font-semibold ml-[5px] ",children:[(null==eB?void 0:null===(_=eB.answer)||void 0===_?void 0:_.length)<150&&(0,n.jsx)("span",{children:null==eB?void 0:eB.answer}),(null==eB?void 0:null===(P=eB.answer)||void 0===P?void 0:P.length)>=150&&(0,n.jsxs)("span",{children:[null==eB?void 0:null===(E=eB.answer)||void 0===E?void 0:E.substring(0,150),(0,n.jsx)(f.Z,{title:"Answer",hideOkButton:!0,cancelText:"Ok",content:(0,n.jsx)("div",{className:" text-darkcolor border-2 border-neutral-500/[0.3] my-[10px] h-[400px] relative w-[700px] ",children:(0,n.jsx)(g.Z,{onlyVertical:!0,children:(0,n.jsx)("div",{className:" my-[10px] mx-[15px] ",children:null==eB?void 0:null===(z=eB.answer)||void 0===z?void 0:z.split("\n").map((e,l)=>(0,n.jsx)("div",{children:e},"li"+l))})})}),children:(0,n.jsx)("span",{className:" ml-[5px] cursor-pointer text-blue-600 hover:underline ",children:"more..."})})]})]})]}),e5&&(0,n.jsxs)("div",{className:"  ",children:[(0,n.jsx)("span",{className:" opacity-70 ",children:"Meta Data:"}),(0,n.jsx)("span",{className:" font-semibold ml-[5px] ",children:e5})]}),e4&&!(null==eO?void 0:eO[j.D7$])&&(0,n.jsxs)("div",{className:"  ",children:[(0,n.jsx)("span",{className:" opacity-70 ",children:"Source:"}),(0,n.jsx)("span",{className:" font-semibold ml-[5px] ",children:e6?(0,n.jsx)("a",{referrerPolicy:"no-referrer",target:"_blank",className:" font-normal text-blue-500 ",href:ek,children:e4}):e4})]})]}),!ec&&(null==eH?void 0:eH.length)>0&&(0,n.jsxs)("div",{className:" relative flex-shrink-0 mr-[10px] ",children:[(0,n.jsxs)(r.E.div,{onHoverStart:e=>{ei(!0)},onHoverEnd:e=>{ei(!1)},onTap:e=>{eu(!0),ei(!1),ed(!1)},initial:{opacity:0,scale:.9,x:0},whileHover:{scale:1.05,x:-10},whileTap:{scale:.95,x:-10},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.9,x:0},className:" relative ",children:[(0,n.jsx)("div",{className:" flex items-center justify-center absolute top-0 left-0 right-0 bottom-0 bg-black/[0.3] rounded text-darkcoloro/[0.7] hover:text-darkcoloro hover:bg-black/[0.1] cursor-pointer ",children:(0,n.jsx)(s.G,{icon:t(46533)._W,transform:{size:44}})}),(0,n.jsx)("img",{alt:"",src:null!=eq?eq:i.Z.transparentPixelBase64,style:{width:"100px",height:"100px"},referrerPolicy:"no-referrer",className:" bg-darkcoloro/[0.2] rounded object-contain "})]}),(0,n.jsx)("div",{className:" text-center text-[11px] text-darkcolor opacity-70 mt-[8px] ",children:(0,n.jsxs)("span",{children:[null!==(D=null==eH?void 0:eH.length)&&void 0!==D?D:0,(0,n.jsxs)("span",{className:" ml-[5px] opacity-70 ",children:["page",(null==eH?void 0:eH.length)===1?"":"s"]})]})})]})]}),!H&&ec&&(0,n.jsxs)(r.E.div,{className:L?" flex items-center justify-center gap-[15px] ":" flex gap-[10px] ",children:[!L&&(0,n.jsx)(r.E.div,{onHoverStart:e=>{ed(!0)},onHoverEnd:e=>{ed(!1)},onTap:e=>{eu(!1),ei(!1),ed(!1)},initial:{opacity:0,scale:.9,x:0},whileHover:{scale:1.05,x:10},whileTap:{scale:.95,x:10},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.9,x:0},style:{height:eG+"px"},className:" w-[40px] mr-[10px] pd-[10px] border-[1px] border-darkcolor/[0.15]  text-[11px] text-darkcolor/[0.4] rounded-[6px] bg-darkcolor/[0.05] flex items-center justify-center  p-[6px] overflow-hidden leading-[1] cursor-pointer hover:bg-darkcolor/[0.15] hover:text-darkcolor ",children:(0,n.jsxs)("div",{className:" -rotate-90 ",children:[(0,n.jsx)("div",{children:"Context"}),(0,n.jsx)("div",{children:"Answer"})]})}),(0,n.jsx)("div",{ref:eR,style:L?{top:(null!=eD?eD:0)+15+"px"}:{},className:L?" flex flex-col gap-[40px] absolute left-0 right-0 bottom-0 overflow-y-auto items-center ":" flex ",children:(0,n.jsx)(w.b,{viewportRef:eR,withCache:!0,overscan:4,initialPrerender:4,items:null!=X?X:e$,children:(e,l)=>{let a=l+em,i=null;if(null==X)i=e1(e);else{var o;null==e||e.docId,a=null==e?void 0:e.page,i=null==e?void 0:null===(o=e.url)||void 0===o?void 0:o.call(e,eL,eG)}return(0,n.jsxs)(r.E.div,{children:[eI&&(0,n.jsx)("div",{className:" pointer-events-none flex items-center justify-center relative px-[15px] py-[20px] ",children:(0,n.jsx)(s.G,{icon:t(39847).QD,transform:{size:18},spin:!0})}),eA?(0,n.jsxs)(r.E.div,{className:"flex flex-col gap-[4px] text-[14px] font-normal items-center justify-center text-red-500 bg-darkcoloro/[0.2] object-contain",style:{width:eL+"px",height:eG+"px"},children:[(0,n.jsx)(s.G,{icon:t(89653).faTriangleExclamation,transform:{size:16}}),(0,n.jsx)("div",{children:"Image Preview not available for non pdf files"})]}):(0,n.jsx)(r.E.img,{onLoadStart:e=>{eS(!0),e_(!1)},onLoad:e=>{eS(!1),e_(!1)},onError:e=>{eS(!1),e_(!0)},alt:"",initial:{opacity:0,scale:.9},whileHover:{scale:L?1:1.05},whileTap:{scale:L?1:.95},animate:{opacity:eo?.35:1,scale:1},exit:{opacity:0,scale:.9},onTap:e=>{L&&null!=eO&&eO[j.D4t]||(ev(l+em),ef(!0),eb(!0))},style:{width:eL+"px",height:eG+"px"},className:" bg-darkcoloro/[0.2] object-contain ",src:i}),(0,n.jsx)("div",{className:" text-center text-[11px] text-darkcolor opacity-70 mt-[8px] ",children:!L&&(0,n.jsxs)("span",{children:[a+1,(0,n.jsx)("span",{className:" ml-[5px] opacity-70 ",children:"page"})]})})]},"img"+l)}})})]})]})},"score1_"+typeof W=="number"?W:"all-"+em)}),!L&&(0,n.jsx)(r.E.div,{onClick:e=>{ec&&!L?eJ||(er(!0),ep(e=>{var l;return e+(null!==(l=null==e$?void 0:e$.length)&&void 0!==l?l:0)})):eK||(er(!0),q(W+1),ep(0))},className:" select-none duration-300 transition-all py-[1px] rounded bg-darkcolor/[0.04] hover:bg-darkcolor/[0.12] cursor-pointer flex items-center justify-center mt-[8px] "+((!ec||L)&&eK?" !cursor-not-allowed opacity-50 ":"")+(ec&&!L&&eJ?" !cursor-not-allowed !opacity-10 ":""),children:(0,n.jsx)(s.G,{icon:t(30563).gc,transform:{size:18}})})]})})},"score_"+(null==M?void 0:M.timestamp))})})]})}},75372:function(e,l,t){"use strict";t.d(l,{HZ:function(){return j},S9:function(){return g},Uj:function(){return w},Wh:function(){return b},ZP:function(){return y}});var n=t(57437),a=t(2265),r=t(48547),s=t(86159),i=t(80647),o=t.n(i),d=t(14301),c=t(3916),u=t(32397),m=t(14438),p=t(53335),x=t(21576),v=t(71096),h=t.n(v),f=t(46137);let g="text-[14px] [&>p]:!leading-[22px] opacity-80 font-normal",b={},j=[],w=e=>{let l=h()(),t=[];j.forEach(n=>{l.diff(n.time,"minutes")>e&&(delete b[n.cacheKey],t.push(n.cacheKey))}),t.forEach(e=>{let l=j.findIndex(l=>l.cacheKey===e);l>=0&&j.splice(l,1)})};function y(e){let{text:l,noAnim:i,topRightCopyIcon:v,isDark:h,isComplexAgent:b,showExecuteButton:j,onExecuteClick:w,isExecuting:y,onStopExecuteClick:N,isStopExecuting:k,bold:C,measure:I,onClickAnchorTagHandler:S,indentLevel:A,data:_,segmentData:P,deploymentId:E,deploymentConversationId:z,highlightColor:T,containerWidth:D}=e,M=b?g:" aatext-[16px] ",[F,L]=(0,a.useState)(i?l:""),Z=(0,a.useMemo)(()=>i?l:F,[i,l,F]);(0,a.useEffect)(()=>{if(Z==l)return;if(i){L(l);return}if(!l)return;let e=setInterval(()=>{L(t=>{var n;let a=null!==(n=null==t?void 0:t.length)&&void 0!==n?n:0;return a+=1,t=null==l?void 0:l.substring(0,a),a>=(null==l?void 0:l.length)&&(clearInterval(e),e=null),t})},5);return()=>{null!=e&&(clearInterval(e),e=null)}},[l,i]),(0,a.useEffect)(()=>{null==I||I()},[l,I]);let G=(0,a.useRef)(_);(0,a.useEffect)(()=>{G.current=_},[_]);let R=(0,a.useCallback)(()=>G.current,[G]),O=(0,a.useRef)(P);(0,a.useEffect)(()=>{O.current=P},[P]);let U=(0,a.useCallback)(()=>O.current,[O]),B=(0,a.useMemo)(()=>{var e;let l=(0,n.jsx)("span",{className:" inline-block text-[16px] leading-[1] animate-blink ",children:"|"});i&&(l=null);let a=Z;if(null==a?void 0:a.startsWith(x.O)){a=a.substring(x.O.length);let e=[],l=null==a?void 0:a.split("\n");return null==l||l.some((l,t)=>{e.push((0,n.jsx)("div",{className:"",children:l},"li"+t))}),(0,n.jsx)("div",{className:" mt-[20px] mb-[8px] border-[1px] rounded-lg px-[15px] py-[8px] bg-red-300 w-full relative ",children:(0,n.jsxs)("span",{className:" font-[400] text-[15px] ",children:[(0,n.jsx)("span",{className:" mr-[6px] text-red-500 ",children:(0,n.jsx)(r.G,{icon:t(74270).eH,transform:{size:16}})}),(0,n.jsxs)("span",{className:" whitespace-pre-wrap break-all ",children:["Error: ",e]})]})})}let o=null==a?void 0:null===(e=a.toLowerCase())||void 0===e?void 0:e.endsWith("<interrupted>");o&&(a=null==a?void 0:a.substring(0,a.length-13)),a=null==a?void 0:a.replace(/\n/g,"  \n");let d=(0,n.jsx)(f.v,{onClickAnchorTagHandler:S,onNeedData:R,onNeedSegmentData:U,deploymentId:E,deploymentConversationId:z,isDark:h,text:a||"",highlightColor:T,containerWidth:D});return(0,n.jsxs)("span",{className:(0,p.m6)("".concat(M),C&&"font-bold"),children:[d,o&&(0,n.jsxs)("span",{className:" ml-[6px] ",children:[(0,n.jsx)("span",{className:" mr-[6px] ",children:"..."}),(0,n.jsx)(s.Z,{title:"Interrupted",children:(0,n.jsx)(r.G,{icon:t(74961).i5,transform:{size:16}})})]}),l]})},[Z,E,z,i,h,y,R,U,j,k,S,T,D]),[H,V]=(0,u.Z)(),W=(0,a.useMemo)(()=>v?(0,n.jsx)("div",{className:" absolute top-0 right-0 group-hover:block hidden ",children:(0,n.jsx)(s.Z,{title:"Copy To Clipboard",children:(0,n.jsx)("span",{children:(0,n.jsx)(d.Z,{useAccentColor:!0,className:" !px-[7px] !py-[0] border-[1px] border-bwleftblue/[0.1] !bg-darkcoloro ",onClick:e=>{let l=Z;(null==l?void 0:l.endsWith("```"))&&(l=l.substring(0,l.length-3)),(null==l?void 0:l.startsWith("```sql"))&&(l=null==l?void 0:l.substring(6)),V(l=c.Z.removeEnters(l)),m.Am.success("Copied!")},children:(0,n.jsx)(r.G,{icon:t(66522).Yj,transform:{size:13}})})})})}):null,[v,Z]),[q,Q]=(0,a.useState)(!1);(0,a.useEffect)(()=>{Q(!0)},[]);let K=(0,a.useMemo)(()=>A?"left-[".concat(8*A,"px] block"):null,[A]);return(0,n.jsxs)("span",{className:o().textBody+" "+(q?o().textBody2:" ")+" group relative "+" ".concat(A?K:""),style:{width:A?"calc(100% - ".concat(8*A,"px)"):""},children:[W,B]})}},97187:function(e,l,t){"use strict";t.d(l,{Sz:function(){return q},vp:function(){return Y},ZP:function(){return ee},Cp:function(){return J}});var n=t(57437),a=t(14301),r=t(56210),s=t(48958),i=t(31486),o=t(69997),d=t(23749),c=t(47230),u=t.n(c),m=t(13590),p=t(29501),x=t(31229),v=t(2265),h=t(72740),f=t(99142),g=t(81447);t(19590);var b=t(70977),j=t(30166);let w=(0,j.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuChevronLeft),{loadableGenerated:{webpack:()=>[null]}}),y=(0,j.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuChevronRight),{loadableGenerated:{webpack:()=>[null]}});function N(e){let{className:l,classNames:t,showOutsideDays:a=!0,...s}=e;return(0,n.jsx)(b._W,{showOutsideDays:a,className:(0,r.cn)("py-2",l),classNames:{months:"relative flex flex-col gap-y-4 sm:flex-row sm:gap-y-0",month_caption:"relative mx-10 flex h-7 items-center justify-center",weekdays:"flex flex-row",weekday:"w-8 text-[0.8rem] font-normal text-muted-foreground",month:"w-full gap-y-4 overflow-x-hidden",caption:"relative flex items-center justify-center pt-1",caption_label:"truncate text-sm font-medium",button_next:(0,r.cn)((0,g.d)({variant:"outline",className:"absolute right-0 h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"})),button_previous:(0,r.cn)((0,g.d)({variant:"outline",className:"absolute left-0 h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"})),nav:"flex items-start",month_grid:"my-2 mx-2",week:"mt-2 flex w-full",day:"flex h-8 w-8 flex-1 items-center justify-center rounded-md p-0 text-sm [&:has(button)]:hover:!bg-accent [&:has(button)]:hover:text-accent-foreground [&:has(button)]:hover:aria-selected:!bg-primary [&:has(button)]:hover:aria-selected:text-primary-foreground",day_button:(0,r.cn)((0,g.d)({variant:"ghost"}),"h-8 w-8 p-0 font-normal transition-none hover:bg-transparent hover:text-inherit aria-selected:opacity-100"),range_start:"day-range-start rounded-s-md rounded-e-none",range_end:"day-range-end rounded-e-md rounded-s-none",selected:"bg-primary text-primary-foreground hover:!bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",today:"bg-accent text-accent-foreground",outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",disabled:"text-muted-foreground opacity-50",range_middle:"rounded-none aria-selected:bg-accent aria-selected:text-accent-foreground hover:aria-selected:!bg-accent hover:aria-selected:text-accent-foreground",hidden:"invisible hidden",chevron:"inline-block fill-muted-foreground",...t},components:{Dropdown:e=>{var l;let{...t}=e,{options:a,className:r,disabled:s}=t,{months:i,goToMonth:o}=(0,b.kD)(),c=null===(l=i[0])||void 0===l?void 0:l.date,u="rdp-years_dropdown"===r?null==c?void 0:c.getFullYear().toString():null==c?void 0:c.getMonth().toString();return(0,n.jsxs)(d.Ph,{value:u,onValueChange:e=>{let l=new Date(c);"rdp-years_dropdown"===r?l.setFullYear(parseInt(e)):"rdp-months_dropdown"===r&&l.setMonth(parseInt(e)),o(l)},disabled:s,children:[(0,n.jsx)(d.i4,{className:"w-full border-0 px-2 py-1 ring-0 focus:ring-0",children:(0,n.jsx)(d.ki,{})}),(0,n.jsx)(d.Bw,{children:(0,n.jsx)(d.DI,{children:null==a?void 0:a.map(e=>(0,n.jsx)(d.Ql,{value:e.value.toString(),children:e.label},e.value))})})]})},YearsDropdown:e=>{var l;let{...t}=e,{components:a}=(0,b.kD)(),r=null===(l=t.options)||void 0===l?void 0:l.sort((e,l)=>l.value-e.value);return(0,n.jsx)(a.Dropdown,{...t,options:r})},PreviousMonthButton:e=>{let{className:l,...t}=e,{previousMonth:a}=(0,b.kD)();return(0,n.jsx)(g.z,{variant:"outline",className:(0,r.cn)((0,g.d)({variant:"outline"}),"absolute left-0 ml-2 h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",l),type:"button",tabIndex:a?-1:void 0,disabled:!a,"aria-label":(0,b.bh)(a),onClick:e=>{var l;null===(l=t.onClick)||void 0===l||l.call(t,e)},children:(0,n.jsx)(w,{className:"h-4 w-4"})})},NextMonthButton:e=>{let{className:l,...t}=e,{nextMonth:a}=(0,b.kD)();return(0,n.jsx)(g.z,{variant:"outline",className:(0,r.cn)((0,g.d)({variant:"outline"}),"absolute right-0 mr-2 h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",l),type:"button",tabIndex:a?-1:void 0,disabled:!a,"aria-label":(0,b.TY)(a),onClick:e=>{var l;null===(l=t.onClick)||void 0===l||l.call(t,e)},children:(0,n.jsx)(y,{className:"h-4 w-4"})})}},...s})}N.displayName="Calendar";var k=t(27312),C=t(63785),I=t(94546),S=t(77712);let A=k.fC,_=k.xz,P=k.x8;k.ee;let E=(0,S.j)("w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 print:hidden"),z=(0,C.Oe)((e,l)=>{let{align:t="center",className:a,sideOffset:r=4,style:s,...i}=e;return(0,n.jsx)(k.h_,{children:(0,n.jsx)(k.VY,{ref:l,className:(0,I.cn)(E(),a),style:{zIndex:1e3,...s},align:t,sideOffset:r,...i})})}),T=t(95098).f,D=(0,j.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuCalendar),{loadableGenerated:{webpack:()=>[null]}});function M(e){let{value:l,onChange:t,placeholder:a="Pick a date",className:s="",disabledDays:i,...o}=e,d=v.useRef(null),c=(0,n.jsxs)(g.z,{size:"sm",variant:"outline",className:(0,r.cn)("group w-full justify-between bg-transparent px-3 py-1.5 font-normal hover:bg-transparent","focus-visible:border-ring focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-0 focus-visible:hover:border-ring","aria-invalid:border-destructive aria-invalid:text-destructive aria-invalid:shadow-destructive/30 aria-invalid:focus:ring-destructive","active:scale-100",s),...o,children:[(0,n.jsx)("div",{className:(0,r.cn)("truncate",{"text-muted-foreground/75 group-aria-invalid:text-destructive/75":!l}),children:l?(0,h.J)(l)?(0,f.WU)(l,"PPP"):"Invalid Date":a}),(0,n.jsx)(D,{className:"size-4 shrink-0 text-foreground/50 group-aria-invalid:text-destructive/75"})]}),u=(0,n.jsx)(N,{mode:"single",selected:l,onSelect:e=>{var l;t(e),null===(l=d.current)||void 0===l||l.click()},autoFocus:!0,disabled:i});return(0,n.jsxs)(A,{children:[(0,n.jsx)(_,{asChild:!0,children:c}),(0,n.jsxs)(z,{className:"w-auto p-0",align:"start",children:[(0,n.jsx)(T,{children:(0,n.jsx)(P,{ref:d})}),u]})]})}var F=t(71096),L=t.n(F),Z=t(9270);let G=(0,j.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuCheck),{loadableGenerated:{webpack:()=>[null]}}),R=(0,C.Oe)((e,l)=>{let{className:t,...a}=e;return(0,n.jsx)(Z.fC,{ref:l,className:(0,I.cn)("peer size-4 shrink-0 rounded-sm border border-primary bg-background ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:(0,n.jsx)(Z.z$,{className:(0,I.cn)("flex items-center justify-center text-current"),children:(0,n.jsx)(G,{className:"size-4"})})})}),O=(0,j.default)(()=>Promise.all([t.e(7240),t.e(9866)]).then(t.bind(t,61273)).then(e=>e.FaRegCirclePlay),{loadableGenerated:{webpack:()=>[null]}}),U=(0,j.default)(()=>Promise.all([t.e(7240),t.e(9866)]).then(t.bind(t,61273)).then(e=>e.FaRegCirclePause),{loadableGenerated:{webpack:()=>[null]}}),B=(0,j.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuTrash),{loadableGenerated:{webpack:()=>[null]}}),H=[{label:"Does not repeat",value:"one_time",raw:{scheduleType:"one_time",recurringType:void 0,recurringDetails:void 0,interval:void 0,until:void 0,cron:void 0,nextRunTime:L()().endOf("day").add(1,"day").unix()}},{label:"Daily",value:"recurring-daily",raw:{scheduleType:"recurring",recurringType:"daily",recurringDetails:{hour:14,minute:0},interval:void 0,until:L()().startOf("day").add(7,"day").unix(),cron:void 0,nextRunTime:void 0}},{label:"Weekly",value:"recurring-weekly",raw:{scheduleType:"recurring",recurringType:"weekly",recurringDetails:{dayOfWeek:1,hour:14,minute:0},interval:void 0,until:L()().startOf("day").add(1,"month").unix(),cron:void 0,nextRunTime:void 0}},{label:"Monthly",value:"recurring-monthly",raw:{scheduleType:"recurring",recurringType:"monthly",recurringDetails:{day:1,hour:14,minute:0},interval:void 0,until:L()().startOf("day").add(1,"year").unix(),cron:void 0,nextRunTime:void 0}},{label:"Yearly",value:"recurring-yearly",raw:{scheduleType:"recurring",recurringType:"yearly",recurringDetails:{month:1,day:1,hour:14,minute:0},interval:void 0,until:L()().startOf("day").add(5,"year").unix(),cron:void 0,nextRunTime:void 0}},{label:"Interval",value:"interval",raw:{scheduleType:"interval",recurringType:void 0,recurringDetails:void 0,interval:172800,until:L()().startOf("day").add(1,"month").unix(),cron:void 0,nextRunTime:void 0}},{label:"Custom",value:"custom",raw:{scheduleType:"custom",recurringType:void 0,recurringDetails:void 0,cron:"0 14 * * *",until:void 0,nextRunTime:void 0}}],V=(e,l)=>"".concat(0===e?12:e>12?e-12:e,":").concat(l.toString().padStart(2,"0")).concat(e<12?"am":"pm"),W=e=>{let l=new Date(e),t=15*Math.ceil(l.getMinutes()/15);return V(l.getHours(),t)},q=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],Q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date().getMonth()+1;return Array.from({length:new Date(new Date().getFullYear(),e,0).getDate()},(e,l)=>({label:l+1,value:l+1}))},K=Array.from({length:96},(e,l)=>{let t=Math.floor(l/4),n=l%4*15,a=V(t,n);return{label:a,value:a,raw:{hour:t,minute:n}}}),Y=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}],$=x.z.object({name:x.z.string().min(1).max(200),instructions:x.z.string().min(1).max(2500),email:x.z.string().nullish(),enableEmailAlerts:x.z.boolean().nullish(),scheduleInfo:x.z.object({compositeScheduleType:x.z.enum(["one_time","interval","custom","recurring-daily","recurring-weekly","recurring-monthly","recurring-yearly"]),scheduleType:x.z.enum(["interval","one_time","recurring","custom"]),recurringType:x.z.enum(["daily","weekly","monthly","yearly"]).optional(),recurringDetails:x.z.object({month:x.z.number().optional(),day:x.z.number().optional(),dayOfWeek:x.z.number().optional(),hour:x.z.number().optional(),minute:x.z.number().optional()}).optional(),interval:x.z.number().optional(),until:x.z.any(),nextRunTime:x.z.any(),cron:x.z.string().optional(),timezone:x.z.any()})}),X=[{value:86400,label:"1 day"},{value:172800,label:"2 days"},{value:259200,label:"3 days"},{value:345600,label:"4 days"},{value:432e3,label:"5 days"},{value:518400,label:"6 days"}],J=e=>e<60?1===e?"second":"".concat(e," seconds"):e<3600?1===Math.floor(e/60)?"minute":"".concat(e/60," minutes"):e<86400?1===Math.floor(e/3600)?"hour":"".concat(e/3600," hours"):1===Math.floor(e/86400)?"day":"".concat(e/86400," days");function ee(e){var l,t,c,x,h,f,g,b,j,w,y,N,k,C,I,S,A,_,P,E,z,T,D,F,Z,G,ee,el,et,en,ea,er;let{task:es,onClose:ei,onEdit:eo,onLifecycle:ed,disabled:ec}=e,eu=$.parse({name:es.name,instructions:es.instructions,email:es.email||"",enableEmailAlerts:es.enableEmailAlerts||!1,scheduleInfo:{...es.scheduleInfo,compositeScheduleType:es.scheduleInfo.scheduleType+(es.scheduleInfo.recurringType?"-".concat(es.scheduleInfo.recurringType):"")}}),em=(0,p.cI)({resolver:(0,m.F)($),defaultValues:eu}),ep=em.watch(),ex=(0,v.useMemo)(()=>{var e,l,t,n,a,r,s,i,o,d,c,m;if((null==ep?void 0:null===(l=ep.scheduleInfo)||void 0===l?void 0:null===(e=l.recurringDetails)||void 0===e?void 0:e.hour)||(null==ep?void 0:null===(n=ep.scheduleInfo)||void 0===n?void 0:null===(t=n.recurringDetails)||void 0===t?void 0:t.hour)===0){let e=V(null==ep?void 0:null===(r=ep.scheduleInfo)||void 0===r?void 0:null===(a=r.recurringDetails)||void 0===a?void 0:a.hour,null==ep?void 0:null===(i=ep.scheduleInfo)||void 0===i?void 0:null===(s=i.recurringDetails)||void 0===s?void 0:s.minute);return u()([{label:e,value:e,raw:{hour:null==ep?void 0:null===(d=ep.scheduleInfo)||void 0===d?void 0:null===(o=d.recurringDetails)||void 0===o?void 0:o.hour,minute:null==ep?void 0:null===(m=ep.scheduleInfo)||void 0===m?void 0:null===(c=m.recurringDetails)||void 0===c?void 0:c.minute}},...K],e=>e.value)}return K},[null==ep?void 0:null===(t=ep.scheduleInfo)||void 0===t?void 0:null===(l=t.recurringDetails)||void 0===l?void 0:l.hour,null==ep?void 0:null===(x=ep.scheduleInfo)||void 0===x?void 0:null===(c=x.recurringDetails)||void 0===c?void 0:c.minute]),ev=(0,v.useMemo)(()=>{var e,l,t;return(null==ep?void 0:null===(e=ep.scheduleInfo)||void 0===e?void 0:e.interval)?u()([{value:null==ep?void 0:null===(l=ep.scheduleInfo)||void 0===l?void 0:l.interval,label:J(null==ep?void 0:null===(t=ep.scheduleInfo)||void 0===t?void 0:t.interval)},...X],e=>e.value):X},[null==ep?void 0:null===(h=ep.scheduleInfo)||void 0===h?void 0:h.interval]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"grid gap-6",children:[(0,n.jsx)(p.Qr,{name:"name",control:em.control,render:e=>{let{field:l}=e;return(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsx)(o.Z,{className:"flex items-center gap-2",children:"Name"}),(0,n.jsx)(i.Z,{id:"name",...l,className:"resize-none min-h-9",rows:1,placeholder:"",dir:"auto"}),em.formState.errors.name?(0,n.jsx)("p",{className:"text-sm text-red-600",children:em.formState.errors.name.message}):null]})}}),(0,n.jsx)(p.Qr,{name:"instructions",control:em.control,render:e=>{let{field:l}=e;return(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)(o.Z,{className:"flex items-center gap-2",children:"Instructions"}),(0,n.jsx)("p",{className:"text-[11px] opacity-50",children:"Describe the action of your task. Cannot exceed 2500 characters."})]}),(0,n.jsx)(i.Z,{id:"instructions",...l,className:"resize-none",rows:1,placeholder:"",dir:"auto"}),em.formState.errors.instructions?(0,n.jsxs)("p",{className:"text-sm text-red-600",children:[em.watch("instructions").length,"/2500 characters"]}):null]})}}),(0,n.jsx)(p.Qr,{name:"enableEmailAlerts",control:em.control,render:e=>{let{field:l}=e;return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(R,{id:"enableEmailAlerts",checked:l.value,onCheckedChange:e=>l.onChange(e)}),(0,n.jsx)(o.Z,{className:"flex items-center gap-2",children:"Enable Email Alerts"})]})}}),ep.enableEmailAlerts?(0,n.jsx)(p.Qr,{name:"email",control:em.control,render:e=>{let{field:l}=e;return(0,n.jsxs)("div",{className:"space-y-1.5 w-1/2 pr-1",children:[(0,n.jsx)(o.Z,{className:"flex items-center gap-2",children:"Email"}),(0,n.jsx)(i.Z,{id:"email",...l,className:"resize-none min-h-9",rows:1,placeholder:"",dir:"auto"}),em.formState.errors.email?(0,n.jsx)("p",{className:"text-sm text-red-600",children:em.formState.errors.email.message}):null]})}}):null,(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsx)(o.Z,{className:"flex items-center gap-2",children:"Schedule"}),(0,n.jsxs)("div",{className:(0,r.cn)("gap-2.5 grid",{"grid-cols-4":["recurring-yearly"].includes(null==ep?void 0:null===(f=ep.scheduleInfo)||void 0===f?void 0:f.compositeScheduleType),"grid-cols-3":["one_time","recurring-weekly","recurring-monthly"].includes(null==ep?void 0:null===(g=ep.scheduleInfo)||void 0===g?void 0:g.compositeScheduleType),"grid-cols-2":["recurring-daily","interval","custom"].includes(null==ep?void 0:null===(b=ep.scheduleInfo)||void 0===b?void 0:b.compositeScheduleType)}),children:[(0,n.jsx)(p.Qr,{name:"scheduleInfo.compositeScheduleType",control:em.control,render:e=>{var l;let{field:t}=e;return(0,n.jsxs)("div",{className:"space-y-1.5 col-span-1",children:[(0,n.jsxs)(d.Ph,{value:t.value,onValueChange:e=>{var l;t.onChange(e);let n=null===(l=H.find(l=>l.value===e))||void 0===l?void 0:l.raw;em.setValue("scheduleInfo.scheduleType",null==n?void 0:n.scheduleType),em.setValue("scheduleInfo.recurringType",null==n?void 0:n.recurringType),em.setValue("scheduleInfo.recurringDetails",null==n?void 0:n.recurringDetails),em.setValue("scheduleInfo.interval",null==n?void 0:n.interval),em.setValue("scheduleInfo.until",null==n?void 0:n.until),em.setValue("scheduleInfo.cron",null==n?void 0:n.cron),em.setValue("scheduleInfo.nextRunTime",null==n?void 0:n.nextRunTime)},children:[(0,n.jsx)(d.i4,{className:"w-full",children:(0,n.jsx)(d.ki,{placeholder:"Select a Schedule"})}),(0,n.jsx)(d.Bw,{children:(0,n.jsx)(d.DI,{children:H.map(e=>(0,n.jsx)(d.Ql,{value:e.value,children:e.label},e.value))})})]}),(null===(l=em.formState.errors.scheduleInfo)||void 0===l?void 0:l.compositeScheduleType)?(0,n.jsx)("p",{className:"text-sm text-red-600",children:em.formState.errors.scheduleInfo.compositeScheduleType.message}):null]})}}),(null==ep?void 0:null===(j=ep.scheduleInfo)||void 0===j?void 0:j.compositeScheduleType)==="one_time"&&(0,n.jsx)(p.Qr,{name:"scheduleInfo.nextRunTime",control:em.control,render:e=>{var l;let{field:t}=e;return(0,n.jsxs)("div",{className:"space-y-1.5 col-span-2",children:[(0,n.jsxs)("div",{className:"flex gap-2.5 grow",children:[(0,n.jsx)(M,{className:"w-1/2",value:t.value?new Date(1e3*t.value):void 0,onChange:e=>t.onChange(e?Math.floor(e.getTime()/1e3):void 0),placeholder:"Select a date",disabledDays:{before:new Date}}),(0,n.jsxs)(d.Ph,{value:W(1e3*t.value),onValueChange:e=>{var l;let n=null===(l=ex.find(l=>l.label===e))||void 0===l?void 0:l.raw,a=new Date(1e3*t.value).setHours(n.hour,n.minute,0,0);t.onChange(Math.floor(a/1e3))},children:[(0,n.jsx)(d.i4,{className:"w-1/2",children:(0,n.jsx)(d.ki,{placeholder:"Select a time"})}),(0,n.jsx)(d.Bw,{children:(0,n.jsx)(d.DI,{children:ex.map(e=>(0,n.jsx)(d.Ql,{value:e.value,children:e.label},e.value))})})]})]}),(null===(l=em.formState.errors.scheduleInfo)||void 0===l?void 0:l.nextRunTime)?(0,n.jsx)("p",{className:"text-sm text-red-600",children:em.formState.errors.scheduleInfo.nextRunTime.message}):null]})}}),(null==ep?void 0:null===(w=ep.scheduleInfo)||void 0===w?void 0:w.compositeScheduleType)==="recurring-daily"&&(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsxs)(d.Ph,{value:V(null==ep?void 0:null===(N=ep.scheduleInfo)||void 0===N?void 0:null===(y=N.recurringDetails)||void 0===y?void 0:y.hour,null==ep?void 0:null===(C=ep.scheduleInfo)||void 0===C?void 0:null===(k=C.recurringDetails)||void 0===k?void 0:k.minute),onValueChange:e=>{var l;let t=null===(l=ex.find(l=>l.label===e))||void 0===l?void 0:l.raw;em.setValue("scheduleInfo.recurringDetails.hour",t.hour),em.setValue("scheduleInfo.recurringDetails.minute",t.minute)},children:[(0,n.jsx)(d.i4,{className:"w-full",children:(0,n.jsx)(d.ki,{placeholder:"Select a time"})}),(0,n.jsx)(d.Bw,{children:(0,n.jsx)(d.DI,{children:ex.map(e=>(0,n.jsx)(d.Ql,{value:e.value,children:e.label},e.value))})})]})}),(null==ep?void 0:null===(I=ep.scheduleInfo)||void 0===I?void 0:I.compositeScheduleType)==="recurring-weekly"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Qr,{name:"scheduleInfo.recurringDetails.dayOfWeek",control:em.control,render:e=>{let{field:l}=e;return(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsxs)(d.Ph,{value:l.value.toString(),onValueChange:e=>l.onChange(parseInt(e)),children:[(0,n.jsx)(d.i4,{className:"w-full",children:(0,n.jsx)(d.ki,{placeholder:"Select a time"})}),(0,n.jsx)(d.Bw,{children:(0,n.jsx)(d.DI,{children:Y.map(e=>(0,n.jsx)(d.Ql,{value:e.value.toString(),children:e.label},e.value))})})]})})}}),(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsxs)(d.Ph,{value:V(null==ep?void 0:null===(A=ep.scheduleInfo)||void 0===A?void 0:null===(S=A.recurringDetails)||void 0===S?void 0:S.hour,null==ep?void 0:null===(P=ep.scheduleInfo)||void 0===P?void 0:null===(_=P.recurringDetails)||void 0===_?void 0:_.minute),onValueChange:e=>{var l;let t=null===(l=ex.find(l=>l.label===e))||void 0===l?void 0:l.raw;em.setValue("scheduleInfo.recurringDetails.hour",t.hour),em.setValue("scheduleInfo.recurringDetails.minute",t.minute)},children:[(0,n.jsx)(d.i4,{className:"w-full",children:(0,n.jsx)(d.ki,{placeholder:"Select a time"})}),(0,n.jsx)(d.Bw,{children:(0,n.jsx)(d.DI,{children:ex.map(e=>(0,n.jsx)(d.Ql,{value:e.value,children:e.label},e.value))})})]})})]}),(null==ep?void 0:null===(E=ep.scheduleInfo)||void 0===E?void 0:E.compositeScheduleType)==="recurring-monthly"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Qr,{name:"scheduleInfo.recurringDetails.day",control:em.control,render:e=>{let{field:l}=e;return(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsxs)(d.Ph,{value:l.value.toString(),onValueChange:e=>l.onChange(parseInt(e)),children:[(0,n.jsx)(d.i4,{className:"w-full",children:(0,n.jsx)(d.ki,{placeholder:"Select a time"})}),(0,n.jsx)(d.Bw,{children:(0,n.jsx)(d.DI,{children:Q().map(e=>(0,n.jsx)(d.Ql,{value:e.value.toString(),children:e.label},e.value))})})]})})}}),(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsxs)(d.Ph,{value:V(null==ep?void 0:null===(T=ep.scheduleInfo)||void 0===T?void 0:null===(z=T.recurringDetails)||void 0===z?void 0:z.hour,null==ep?void 0:null===(F=ep.scheduleInfo)||void 0===F?void 0:null===(D=F.recurringDetails)||void 0===D?void 0:D.minute),onValueChange:e=>{var l;let t=null===(l=ex.find(l=>l.label===e))||void 0===l?void 0:l.raw;em.setValue("scheduleInfo.recurringDetails.hour",t.hour),em.setValue("scheduleInfo.recurringDetails.minute",t.minute)},children:[(0,n.jsx)(d.i4,{className:"w-full",children:(0,n.jsx)(d.ki,{placeholder:"Select a time"})}),(0,n.jsx)(d.Bw,{children:(0,n.jsx)(d.DI,{children:ex.map(e=>(0,n.jsx)(d.Ql,{value:e.value,children:e.label},e.value))})})]})})]}),(null==ep?void 0:null===(Z=ep.scheduleInfo)||void 0===Z?void 0:Z.compositeScheduleType)==="recurring-yearly"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Qr,{name:"scheduleInfo.recurringDetails.month",control:em.control,render:e=>{let{field:l}=e;return(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsxs)(d.Ph,{value:l.value.toString(),onValueChange:e=>l.onChange(parseInt(e)),children:[(0,n.jsx)(d.i4,{className:"w-full",children:(0,n.jsx)(d.ki,{placeholder:"Select a time"})}),(0,n.jsx)(d.Bw,{children:(0,n.jsx)(d.DI,{children:q.map(e=>(0,n.jsx)(d.Ql,{value:e.value.toString(),children:e.label},e.value))})})]})})}}),(0,n.jsx)(p.Qr,{name:"scheduleInfo.recurringDetails.day",control:em.control,render:e=>{let{field:l}=e;return(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsxs)(d.Ph,{value:l.value.toString(),onValueChange:e=>l.onChange(parseInt(e)),children:[(0,n.jsx)(d.i4,{className:"w-full",children:(0,n.jsx)(d.ki,{placeholder:"Select a time"})}),(0,n.jsx)(d.Bw,{children:(0,n.jsx)(d.DI,{children:Q().map(e=>(0,n.jsx)(d.Ql,{value:e.value.toString(),children:e.label},e.value))})})]})})}}),(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsxs)(d.Ph,{value:V(null==ep?void 0:null===(ee=ep.scheduleInfo)||void 0===ee?void 0:null===(G=ee.recurringDetails)||void 0===G?void 0:G.hour,null==ep?void 0:null===(et=ep.scheduleInfo)||void 0===et?void 0:null===(el=et.recurringDetails)||void 0===el?void 0:el.minute),onValueChange:e=>{var l;let t=null===(l=ex.find(l=>l.label===e))||void 0===l?void 0:l.raw;em.setValue("scheduleInfo.recurringDetails.hour",t.hour),em.setValue("scheduleInfo.recurringDetails.minute",t.minute)},children:[(0,n.jsx)(d.i4,{className:"w-full",children:(0,n.jsx)(d.ki,{placeholder:"Select a time"})}),(0,n.jsx)(d.Bw,{children:(0,n.jsx)(d.DI,{children:ex.map(e=>(0,n.jsx)(d.Ql,{value:e.value,children:e.label},e.value))})})]})})]}),(null==ep?void 0:null===(en=ep.scheduleInfo)||void 0===en?void 0:en.compositeScheduleType)==="interval"&&(0,n.jsx)(p.Qr,{name:"scheduleInfo.interval",control:em.control,render:e=>{let{field:l}=e;return(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsxs)(d.Ph,{value:l.value.toString(),onValueChange:e=>l.onChange(parseInt(e)),children:[(0,n.jsx)(d.i4,{className:"w-full",children:(0,n.jsx)(d.ki,{placeholder:"Select a time"})}),(0,n.jsx)(d.Bw,{children:(0,n.jsx)(d.DI,{children:ev.map(e=>(0,n.jsx)(d.Ql,{value:e.value.toString(),children:e.label},e.value))})})]})})}}),(null==ep?void 0:null===(ea=ep.scheduleInfo)||void 0===ea?void 0:ea.compositeScheduleType)==="custom"&&(0,n.jsx)(p.Qr,{name:"scheduleInfo.cron",control:em.control,render:e=>{let{field:l}=e;return(0,n.jsx)(i.Z,{id:"cron",...l,className:"resize-none min-h-9 col-span-1",rows:1,placeholder:"Enter a cron expression",dir:"auto"})}})]}),(0,n.jsx)("div",{className:"grid grid-cols-2",children:(null==ep?void 0:null===(er=ep.scheduleInfo)||void 0===er?void 0:er.scheduleType)!=="one_time"&&(0,n.jsx)(p.Qr,{name:"scheduleInfo.until",control:em.control,render:e=>{var l;let{field:t}=e;return(0,n.jsxs)("div",{className:"space-y-1.5 col-span-2",children:[(0,n.jsx)(o.Z,{children:"Until"}),(0,n.jsx)("div",{className:"flex gap-2.5 grow",children:(0,n.jsx)(M,{className:"w-1/2",value:t.value?new Date(1e3*t.value):void 0,onChange:e=>t.onChange(e?Math.floor(L()(e).endOf("day").unix()):void 0),placeholder:"Select a date",disabledDays:{before:new Date}})}),(null===(l=em.formState.errors.scheduleInfo)||void 0===l?void 0:l.until)?(0,n.jsx)("p",{className:"text-sm text-red-600",children:em.formState.errors.scheduleInfo.until.message}):null]})}})})]})]}),(0,n.jsxs)(s.cN,{className:"mt-4 flex-row justify-between sm:justify-between w-full",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsxs)("div",{className:(0,r.cn)("cursor-pointer transition-colors duration-200 h-9 px-2.5 flex gap-1 items-center hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-bwleftblue",{"pointer-events-none opacity-50":!!ec}),onClick:()=>{"ACTIVE"===es.lifecycle?ed({pause:!0}):ed({resume:!0})},children:["ACTIVE"===es.lifecycle?(0,n.jsx)(U,{className:"text-base"}):(0,n.jsx)(O,{className:"text-base"}),(0,n.jsx)("div",{className:"text-sm",children:"ACTIVE"===es.lifecycle?"Pause":"Resume"})]}),(0,n.jsxs)("div",{className:(0,r.cn)("cursor-pointer transition-colors duration-200 h-9 px-2.5 flex gap-1 items-center hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-destructive",{"pointer-events-none opacity-50":!!ec}),onClick:()=>{ed({delete:!0})},children:[(0,n.jsx)(B,{className:"text-base"}),(0,n.jsx)("div",{className:"text-sm",children:"Delete"})]})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(a.Z,{noBack:!0,className:"text-darkcolor/[0.7] rounded-full",moreSpace:!0,disabled:!1,onClick:ei,children:"Cancel"}),(0,n.jsx)(a.Z,{onClick:em.handleSubmit(e=>eo({name:e.name,instructions:e.instructions,email:e.email,enableEmailAlerts:e.enableEmailAlerts,scheduleInfo:{scheduleType:e.scheduleInfo.scheduleType,recurringType:e.scheduleInfo.recurringType,interval:e.scheduleInfo.interval,recurringDetails:e.scheduleInfo.recurringDetails,until:e.scheduleInfo.until,timezone:e.scheduleInfo.timezone,nextRunTime:e.scheduleInfo.nextRunTime,cron:e.scheduleInfo.cron},externalApplicationId:es.externalApplicationId})),disabled:ec,className:(0,r.cn)("rounded-full !bg-bwleftblue !text-darkcoloro dark:text-darkwhite/[0.7]",{"grayscale !opacity-50":ec}),children:"Update"})]})]})]})}},83113:function(e,l,t){"use strict";t.d(l,{Z:function(){return D},c:function(){return T}});var n=t(57437),a=t(2265),r=t(71096),s=t.n(r),i=t(79057),o=t(16593),d=t(29827),c=t(21770),u=t(53436),m=t(14438),p=t(56210),x=t(97187),v=t(50148),h=t.n(v),f=t(99376),g=t(591),b=t(81447),j=t(86159),w=t(30166);let y=(0,w.default)(()=>Promise.all([t.e(7240),t.e(9866)]).then(t.bind(t,61273)).then(e=>e.FaRegCirclePlay)),N=(0,w.default)(()=>Promise.all([t.e(7240),t.e(9866)]).then(t.bind(t,61273)).then(e=>e.FaRegCirclePause)),k=(0,w.default)(()=>Promise.all([t.e(7699),t.e(6231)]).then(t.bind(t,49089)).then(e=>e.FaPauseCircle),{loadableGenerated:{webpack:()=>[null]}}),C=(0,w.default)(()=>Promise.all([t.e(7699),t.e(6231)]).then(t.bind(t,49089)).then(e=>e.FaSync),{loadableGenerated:{webpack:()=>[null]}}),I=(0,w.default)(()=>Promise.all([t.e(7699),t.e(6231)]).then(t.bind(t,49089)).then(e=>e.FaCheckCircle),{loadableGenerated:{webpack:()=>[null]}}),S=(0,w.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuTrash),{loadableGenerated:{webpack:()=>[null]}}),A=(0,w.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuMoreVertical),{loadableGenerated:{webpack:()=>[null]}}),_=(0,w.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuExternalLink),{loadableGenerated:{webpack:()=>[null]}}),P=(0,w.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuPencil),{loadableGenerated:{webpack:()=>[null]}}),E=(0,w.default)(()=>Promise.all([t.e(6051),t.e(9075)]).then(t.bind(t,22744)).then(e=>e.MdOutlineDataUsage),{loadableGenerated:{webpack:()=>[null]}}),z=e=>"ACTIVE"===e?C:"PAUSED"===e?k:I;s().extend(h());let T=(e,l)=>{if(!e)return"";let t=e.nextRunTime?s()(1e3*e.nextRunTime).format("h:mma, D MMM YYYY"):null;if("one_time"===e.scheduleType)return"At ".concat(t);if("interval"===e.scheduleType)return"".concat(!l&&t?"Next run at ".concat(t):"").concat(e.interval?"".concat(!l&&t?" | ":"","Every ").concat((0,x.Cp)(e.interval)):"");if("recurring"===e.scheduleType){var n,a,r,i,o,d,c,u,m,p,v,h,f,g,b,j;if("daily"===e.recurringType)return"".concat(!l&&t?"Next run at ".concat(t):"").concat((null===(n=e.recurringDetails)||void 0===n?void 0:n.hour)||(null===(a=e.recurringDetails)||void 0===a?void 0:a.minute)?"".concat(!l&&t?" | ":"","Daily at ").concat(s()(new Date().setHours(null===(r=e.recurringDetails)||void 0===r?void 0:r.hour,null===(i=e.recurringDetails)||void 0===i?void 0:i.minute,0,0)).format("h:mm A")):"");if("weekly"===e.recurringType){let n=null===(o=x.vp.find(l=>{var t;return l.value===(null===(t=e.recurringDetails)||void 0===t?void 0:t.dayOfWeek)}))||void 0===o?void 0:o.label;return"".concat(!l&&t?"Next run at ".concat(t):"").concat(n?"".concat(!l&&t?" | ":"","Every ").concat(n," at ").concat(s()(new Date().setHours(null===(d=e.recurringDetails)||void 0===d?void 0:d.hour,null===(c=e.recurringDetails)||void 0===c?void 0:c.minute,0,0)).format("h:mm A")):"")}if("monthly"===e.recurringType)return"".concat(!l&&t?"Next run at ".concat(t):"").concat((null===(u=e.recurringDetails)||void 0===u?void 0:u.day)?"".concat(!l&&t?" | ":"","Monthly on ").concat(s()(new Date().setDate(null===(m=e.recurringDetails)||void 0===m?void 0:m.day)).format("Do")," at ").concat(s()(new Date().setHours(null===(p=e.recurringDetails)||void 0===p?void 0:p.hour,null===(v=e.recurringDetails)||void 0===v?void 0:v.minute,0,0)).format("h:mm A")):"");if("yearly"===e.recurringType){let n=null===(h=x.Sz.find(l=>{var t;return l.value===(null===(t=e.recurringDetails)||void 0===t?void 0:t.month)}))||void 0===h?void 0:h.label;return"".concat(!l&&t?"Next run at ".concat(t):"").concat((null===(f=e.recurringDetails)||void 0===f?void 0:f.day)?"".concat(!l&&t?" | ":"","Yearly on ").concat(s()(new Date().setDate(null===(g=e.recurringDetails)||void 0===g?void 0:g.day)).format("Do"),", ").concat(n," at ").concat(s()(new Date().setHours(null===(b=e.recurringDetails)||void 0===b?void 0:b.hour,null===(j=e.recurringDetails)||void 0===j?void 0:j.minute,0,0)).format("h:mm A")):"")}}return"custom"===e.scheduleType?"".concat(!l&&t?"Next run at ".concat(t," | "):"","Custom schedule"):e.scheduleType};function D(e){let{task:l,onTaskUpdated:t,lazyLoad:r=!1,showViewResults:s=!1}=e,[x,v]=(0,a.useState)(!1),{data:h,isError:w}=(0,o.a)({placeholderData:{result:l},queryKey:["task",null==l?void 0:l.chatllmTaskId],queryFn:async e=>{let{queryKey:[l,t]}=e,n=await (0,u.LIi)({chatllmTaskId:t});if(!(null==n?void 0:n.success))throw Error((null==n?void 0:n.error)||"Failed to fetch task");return n},select:e=>e.result,retry:!1,enabled:!!r&&!!(null==l?void 0:l.chatllmTaskId),refetchOnMount:!0}),k=r?h:l,C=(0,f.useRouter)(),I=(0,a.useMemo)(()=>{if(!(null==k?void 0:k.deploymentConversationId))return null;let e=new URL(window.location.href.replace("/admin/tasks","").replace("/admin/tasks/","").replace("/tasks","").replace("/tasks/",""));return e.searchParams.set("appId",null==k?void 0:k.externalApplicationId),e.searchParams.set("convoId",null==k?void 0:k.deploymentConversationId),e},[k]),D=(0,d.NL)(),M=(0,c.D)({mutationFn:async e=>{let l=await (0,u.GC5)({payload:{...e,chatllmTaskId:null==k?void 0:k.chatllmTaskId}});if(!(null==l?void 0:l.success))throw Error((null==l?void 0:l.error)||"Failed to update task.");return l},onSuccess:()=>{D.invalidateQueries({queryKey:["tasks"]}),D.invalidateQueries({queryKey:["task",null==k?void 0:k.chatllmTaskId]}),D.invalidateQueries({queryKey:["task-form-data",null==k?void 0:k.chatllmTaskId]}),v(!1),m.Am.success("Task updated successfully"),null==t||t()},onError:e=>{m.Am.error((null==e?void 0:e.message)||"Failed to update task")}}),F=(0,c.D)({mutationFn:async e=>{let l=await (0,u.UMi)({payload:{...e,chatllmTaskId:null==k?void 0:k.chatllmTaskId}});if(!(null==l?void 0:l.success))throw Error((null==l?void 0:l.error)||"Failed to update task.");return e},onSuccess:e=>{e.delete&&v(!1),D.invalidateQueries({queryKey:["tasks"]}),D.invalidateQueries({queryKey:["task",null==k?void 0:k.chatllmTaskId]}),D.invalidateQueries({queryKey:["task-form-data",null==k?void 0:k.chatllmTaskId]}),m.Am.success({pause:"Task paused successfully",resume:"Task resumed successfully",delete:"Task deleted successfully"}[e.pause?"pause":e.resume?"resume":"delete"]),null==t||t()},onError:e=>{m.Am.error((null==e?void 0:e.message)||"Failed to update task.")}}),L=z(null==k?void 0:k.lifecycle),Z=null==k?void 0:k.computePointsUsed;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:(0,p.cn)("flex items-center rounded-md border border-gray-200 dark:border-gray-600 divide-x divide-gray-200 dark:divide-gray-600 overflow-hidden",{"pointer-events-none opacity-60":F.isPending}),children:[(0,n.jsxs)("div",{className:"h-10 flex items-center justify-between grow px-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(L,{className:"text-xs"}),(0,n.jsx)("div",{className:"text-xs line-clamp-1",children:(null==l?void 0:l.name)||(w?"Deleted Task":"Task")})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 line-clamp-1 pl-2",children:[Z?(0,n.jsx)(j.Z,{delayDuration:0,title:"".concat(Z," compute points used for all task runs"),children:(0,n.jsxs)("span",{className:"cursor-default group flex items-center gap-0.5 text-xs",children:[(0,n.jsxs)("div",{className:"flex items-center gap-px opacity-60",children:[(0,n.jsx)(E,{className:"text-xs"}),(0,n.jsx)("span",{className:"mt-px",children:Z})]}),w||(null==k?void 0:k.lifecycle)!=="ACTIVE"?"":(0,n.jsx)("span",{className:"opacity-60",children:" | "})]})}):null,!w&&(null==k?void 0:k.lifecycle)==="ACTIVE"&&(0,n.jsx)("div",{className:"text-xs opacity-60 line-clamp-1",children:T(null==k?void 0:k.scheduleInfo)})]})]}),w?null:(0,n.jsxs)("div",{className:"flex divide-x divide-gray-200 dark:divide-gray-600",children:[s&&I?(0,n.jsxs)("div",{className:"transition-colors duration-200 h-10 px-2 flex gap-1 items-center bg-gray-100 dark:bg-gray-800 cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 whitespace-nowrap",onClick:()=>{C.push(I.toString())},children:[(0,n.jsx)(_,{className:"text-xs shrink-0"}),(0,n.jsxs)("div",{className:"text-xs relative",children:["View Results",(null==k?void 0:k.numUnreadTaskInstances)>0?"(".concat(null==k?void 0:k.numUnreadTaskInstances,")"):null,(null==k?void 0:k.wasSeen)===!1||(null==k?void 0:k.numUnreadTaskInstances)>0?(0,n.jsx)("div",{className:"absolute top-0 -right-[5px] bg-red-500 rounded-full size-[5px]"}):null]})]}):null,(null==k?void 0:k.lifecycle)==="COMPLETED"?(0,n.jsxs)("div",{className:"transition-colors duration-200 h-10 px-2 flex gap-1 items-center bg-gray-100 dark:bg-gray-800 cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700",onClick:()=>F.mutateAsync({delete:!0}),children:[(0,n.jsx)(S,{className:"text-xs"}),(0,n.jsx)("div",{className:"text-xs",children:"Delete"})]}):(0,n.jsxs)(g.h_,{children:[(0,n.jsx)(g.$F,{asChild:!0,children:(0,n.jsx)(b.z,{asChild:!0,variant:"ghost",size:"icon-xs",className:"rounded-none h-10",children:(0,n.jsx)("div",{className:(0,p.cn)("transition-colors duration-200 h-10 px-2 flex gap-1 items-center bg-gray-100 dark:bg-gray-800 cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700"),children:(0,n.jsx)(A,{})})})}),(0,n.jsxs)(g.AW,{align:"end",className:"w-24 min-w-24",children:[(0,n.jsxs)(g.Xi,{className:"gap-1.5 cursor-pointer",onClick:()=>v(!0),children:[(0,n.jsx)(P,{}),(0,n.jsx)("span",{children:"Edit"})]}),(0,n.jsxs)(g.Xi,{className:(0,p.cn)("gap-1.5 cursor-pointer",{"pointer-events-none":M.isPending}),onClick:()=>{(null==k?void 0:k.lifecycle)==="ACTIVE"?F.mutateAsync({pause:!0}):F.mutateAsync({resume:!0})},children:[(null==k?void 0:k.lifecycle)==="ACTIVE"?(0,n.jsx)(N,{}):(0,n.jsx)(y,{}),(0,n.jsx)("span",{children:(null==k?void 0:k.lifecycle)==="ACTIVE"?"Pause":"Resume"})]}),(0,n.jsxs)(g.Xi,{className:"gap-1.5 cursor-pointer text-destructive",onClick:()=>F.mutateAsync({delete:!0}),children:[(0,n.jsx)(S,{}),(0,n.jsx)("span",{children:"Delete"})]})]})]})]})]}),(0,n.jsx)(i.Z,{taskId:null==k?void 0:k.chatllmTaskId,open:x,onClose:()=>v(!1),onEdit:M.mutateAsync,onLifecycle:F.mutateAsync,disabled:M.isPending||F.isPending})]})}},79057:function(e,l,t){"use strict";t.d(l,{Z:function(){return d}});var n=t(57437),a=t(48958),r=t(16593),s=t(53436),i=t(97187);let o=(0,t(30166).default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuRefreshCw),{loadableGenerated:{webpack:()=>[null]}});function d(e){let{taskId:l,open:t,onClose:d,onEdit:c,onLifecycle:u,disabled:m}=e,{data:p,isLoading:x}=(0,r.a)({queryKey:["task-form-data",l],queryFn:e=>{let{queryKey:[l,t]}=e;return(0,s.LIi)({chatllmTaskId:t})},select:e=>e.result,enabled:!!l&&t});return(0,n.jsx)(a.Vq,{open:t,onOpenChange:e=>e?null:d(),children:(0,n.jsxs)(a.cZ,{className:"max-w-2xl",children:[(0,n.jsx)(a.fK,{children:(0,n.jsx)(a.$N,{className:"flex justify-between items-center grow w-full",children:"Edit Task"})}),x||!p?(0,n.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,n.jsxs)("div",{className:"col-span-1 md:col-span-2 flex flex-col gap-3 items-center justify-center",children:[(0,n.jsx)(o,{className:"text-bwleftblue size-[18px] animate-spin"}),(0,n.jsx)("div",{className:"animate-pulse text-[13px]",children:"Getting task details"})]})}):(0,n.jsx)(i.ZP,{task:p,onClose:d,onEdit:c,onLifecycle:u,disabled:m})]})})}},5612:function(e,l,t){"use strict";t.d(l,{Z:function(){return i}});var n=t(90216),a=t(2265),r=t(49070),s=t(3916);function i(e){let{initThemeData:l,appId:t,isClient:i}=e,{setRetentionDays:o,isDark:d,themeApp:c,setThemeApp:u,setThemeAppId:m,ignoreRefreshThemeApp:p,forceRefreshThemeApp:x}=(0,n.J)();(0,a.useEffect)(()=>{l&&null==c&&(u(l),m(t))},[l]);let{data:v}=(0,r.wE)({externalApplicationId:t,enabled:!!t});return(0,a.useEffect)(()=>{var e,l,n;if(t&&t!==s.Z.appLlmEndAppId&&(null==v?void 0:null===(e=v.result)||void 0===e?void 0:e.theme)!=null){m(t),u((null==v?void 0:null===(l=v.result)||void 0===l?void 0:l.theme)||null);let e=null==v?void 0:null===(n=v.result)||void 0===n?void 0:n.deploymentConversationRetentionHours;o((e=null==e||e<0?null:Math.ceil((null!=e?e:0)/24))||null)}},[t]),null}},96377:function(e,l,t){"use strict";var n=t(57437),a=t(48547),r=t(2265);l.Z=e=>{let{src:l,alt:s,size:i=40}=e,[o,d]=(0,r.useState)(!0),[c,u]=(0,r.useState)(!1),m=()=>{d(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{style:o||c?{display:"none"}:{width:i,height:i,borderRadius:"8px"},src:l,alt:s,onLoad:m,onError:e=>{m(),u(!0)}}),o&&!c&&(0,n.jsx)(a.G,{spin:!0,icon:t(39847).QD,transform:{size:17}}),c&&(0,n.jsx)(a.G,{icon:t(3840).Oi,transform:{size:24}})]})}},1346:function(e,l,t){"use strict";t.d(l,{F:function(){return n}});let n=(0,t(59625).Ue)()(e=>({sharedDocInfos:[],setSharedDocInfos:l=>{e({sharedDocInfos:l})}}))},63020:function(e,l,t){"use strict";t.d(l,{P:function(){return n}});let n=(0,t(59625).Ue)()(e=>({selectedArtifactMsgId:null,setSelectedArtifactMsgId:l=>{e(e=>e.selectedArtifactMsgId!=l?{selectedArtifactMsgId:l}:e)},streamingArtifactInfo:null,setStreamingArtifactInfo:l=>{e({streamingArtifactInfo:l})},listOfArtifacts:null,setListOfArtifacts:l=>{e({listOfArtifacts:l})}}))},23888:function(e,l,t){"use strict";t.d(l,{g:function(){return n}});let n=(0,t(59625).Ue)()(e=>({isProcessing:!1,setIsProcessing:l=>{e(e=>e.isProcessing!=l?{isProcessing:l}:e)},isProcessingExecuteCode:!1,setIsProcessingExecuteCode:l=>{e(e=>e.isProcessingExecuteCode!=l?{isProcessingExecuteCode:l}:e)}}))},3426:function(e,l,t){"use strict";t.d(l,{H:function(){return n}});let n=(0,t(59625).Ue)(e=>({selectedImage:null,setSelectedImage:l=>e({selectedImage:l}),isLinesSelected:!1,setIsLinesSelected:l=>e({isLinesSelected:l}),editedImageMode:null,setEditedImageMode:l=>e({editedImageMode:l}),isPaintingMode:!1,setIsPaintingMode:l=>e({isPaintingMode:l}),mask64:null,setMask64:l=>e({mask64:l}),image64:null,setImage64:l=>e({image64:l}),currentImage:null,setCurrentImage:l=>e({currentImage:l}),tempText:null,setTempText:l=>e({tempText:l}),lastBotMessageImageId:null,setLastBotMessageImageId:l=>e({lastBotMessageImageId:l})}))},10854:function(e,l,t){"use strict";t.d(l,{G:function(){return n}});let n=(0,t(59625).Ue)()(e=>({selectedFilesFromPersistence:null,setSelectedFilesFromPersistence:l=>{e({selectedFilesFromPersistence:l})},isDeletedFilesFromPersistence:!1,setDeletedFilesFromPersistence:l=>{e({isDeletedFilesFromPersistence:l})},selectedGithubPersistenceFiles:null,setSelectedGithubPersistenceFiles:l=>{e({selectedGithubPersistenceFiles:l})},selectedGithubMetadataFiles:null,setSelectedGithubMetadataFiles:l=>{e({selectedGithubMetadataFiles:l})}}))},89307:function(e,l,t){"use strict";t.d(l,{OL:function(){return v},_T:function(){return u},aR:function(){return o},f$:function(){return x},fY:function(){return m},le:function(){return h},xo:function(){return p}});var n=t(57437),a=t(2265),r=t(90277),s=t(56210),i=t(81447);let o=r.fC;r.xz;let d=r.h_,c=a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,n.jsx)(r.aV,{className:(0,s.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:l})});c.displayName=r.aV.displayName;let u=a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,n.jsxs)(d,{children:[(0,n.jsx)(c,{}),(0,n.jsx)(r.VY,{ref:l,className:(0,s.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a})]})});u.displayName=r.VY.displayName;let m=e=>{let{className:l,...t}=e;return(0,n.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-2 text-center sm:text-left",l),...t})};m.displayName="AlertDialogHeader";let p=e=>{let{className:l,...t}=e;return(0,n.jsx)("div",{className:(0,s.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",l),...t})};p.displayName="AlertDialogFooter";let x=a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,n.jsx)(r.Dx,{ref:l,className:(0,s.cn)("text-darkcolor text-lg font-semibold",t),...a})});x.displayName=r.Dx.displayName,a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,n.jsx)(r.dk,{ref:l,className:(0,s.cn)("text-sm text-muted-foreground",t),...a})}).displayName=r.dk.displayName;let v=a.forwardRef((e,l)=>{let{className:t,size:a,variant:o,...d}=e;return(0,n.jsx)(r.aU,{ref:l,className:(0,s.cn)((0,i.d)({size:a,variant:o}),t),...d})});v.displayName=r.aU.displayName;let h=a.forwardRef((e,l)=>{let{className:t,size:a,variant:o,...d}=e;return(0,n.jsx)(r.$j,{ref:l,className:(0,s.cn)((0,i.d)({size:a,variant:o||"outline"}),t),...d})});h.displayName=r.$j.displayName},591:function(e,l,t){"use strict";t.d(l,{$F:function(){return m},AW:function(){return f},Ph:function(){return x},TG:function(){return h},VD:function(){return b},Xi:function(){return g},cq:function(){return p},h_:function(){return u},kt:function(){return v}});var n=t(57437),a=t(2265),r=t(70085),s=t(56210),i=t(30166);let o=(0,i.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuCheck),{loadableGenerated:{webpack:()=>[null]}}),d=(0,i.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuChevronRight),{loadableGenerated:{webpack:()=>[null]}}),c=(0,i.default)(()=>Promise.all([t.e(9212),t.e(4620)]).then(t.bind(t,45202)).then(e=>e.LuCircle),{loadableGenerated:{webpack:()=>[null]}}),u=r.fC,m=r.xz;r.ZA;let p=r.Uv,x=r.Tr;r.Ee;let v=a.forwardRef((e,l)=>{let{className:t,inset:a,children:i,...o}=e;return(0,n.jsxs)(r.fF,{ref:l,className:(0,s.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-bwleftblue/15 focus:text-bwleftblue data-[state=open]:bg-bwleftblue/15 data-[state=open]:text-bwleftblue",a&&"pl-8",t),...o,children:[i,(0,n.jsx)(d,{className:"ml-auto h-4 w-4"})]})});v.displayName=r.fF.displayName;let h=a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,n.jsx)(r.tu,{ref:l,className:(0,s.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-darkcoloro p-1 text-darkcolor shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})});h.displayName=r.tu.displayName;let f=a.forwardRef((e,l)=>{let{className:t,sideOffset:a=4,...i}=e;return(0,n.jsx)(r.Uv,{children:(0,n.jsx)(r.VY,{ref:l,sideOffset:a,className:(0,s.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border border-darkcolor/15 bg-darkcoloro p-1 text-darkcolor shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})})});f.displayName=r.VY.displayName;let g=a.forwardRef((e,l)=>{let{className:t,inset:a,...i}=e;return(0,n.jsx)(r.ck,{ref:l,className:(0,s.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-bwleftblue/15 focus:text-bwleftblue data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",t),...i})});g.displayName=r.ck.displayName,a.forwardRef((e,l)=>{let{className:t,children:a,checked:i,...d}=e;return(0,n.jsxs)(r.oC,{ref:l,className:(0,s.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-bwleftblue/15 focus:text-bwleftblue data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:i,...d,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(r.wU,{children:(0,n.jsx)(o,{className:"h-4 w-4"})})}),a]})}).displayName=r.oC.displayName,a.forwardRef((e,l)=>{let{className:t,children:a,...i}=e;return(0,n.jsxs)(r.Rk,{ref:l,className:(0,s.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-bwleftblue/15 focus:text-bwleftblue data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:(0,n.jsx)(r.wU,{children:(0,n.jsx)(c,{className:"size-2 fill-current"})})}),a]})}).displayName=r.Rk.displayName,a.forwardRef((e,l)=>{let{className:t,inset:a,...i}=e;return(0,n.jsx)(r.__,{ref:l,className:(0,s.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",t),...i})}).displayName=r.__.displayName;let b=a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,n.jsx)(r.Z0,{ref:l,className:(0,s.cn)("-mx-1 my-1 h-px bg-darkcolor/15",t),...a})});b.displayName=r.Z0.displayName},81447:function(e,l,t){"use strict";t.d(l,{d:function(){return i},z:function(){return o}});var n=t(57437);t(2265);var a=t(37053),r=t(63785),s=t(94546);let i=(0,t(77712).j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{defaultVariants:{size:"default",variant:"default"},variants:{isMenu:{true:"h-auto w-full cursor-pointer justify-start"},size:{default:"h-10 px-4 py-2",icon:"size-10","icon-sm":"size-9 text-base","icon-xs":"size-8 text-base","icon-xxs":"size-6 text-base",lg:"h-11 rounded-md px-8",none:"",sm:"h-9 rounded-md px-3",sms:"size-9 rounded-md px-0",xs:"h-8 rounded-md px-3 text-xs"},variant:{default:"bg-bwleftblue text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",ghost:"hover:bg-accent hover:text-accent-foreground",inlineLink:"text-base text-primary underline underline-offset-4",link:"text-primary underline-offset-4 hover:underline",outline:"text-darkcolor border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80"}}}),o=(0,r.Oe)((e,l)=>{let{asChild:t=!1,className:r,isMenu:o,size:d,variant:c,...u}=e,m=t?a.g7:"button";return(0,n.jsx)(m,{ref:l,className:(0,s.cn)(i({className:r,isMenu:o,size:d,variant:c})),...u})})},52299:function(e,l,t){"use strict";t.d(l,{O:function(){return r}});var n=t(57437),a=t(56210);function r(e){let{className:l,...t}=e;return(0,n.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-gray-200 dark:bg-gray-400",l),...t})}},76630:function(e,l,t){"use strict";function n(e){return e?e.split(/(```[\s\S]*?```)/g).map(e=>/^```[\s\S]*```$/.test(e)?e:e.replace(/\\\[([\s\S]*?)\\\]/g,(e,l)=>"$$".concat(l,"$$")).replace(/\\\(([\s\S]*?)\\\)/g,(e,l)=>"$$".concat(l,"$$")).replace(/([^\$])\$(\d)/g,(e,l,t)=>"".concat(l||"","\\$").concat(t))).join(""):e}t.d(l,{i:function(){return n}})},30803:function(){},46651:function(){},67307:function(){},3531:function(e){e.exports={fileRectContent:"FileRect_fileRectContent__lp9X3",closeIcon:"FileRect_closeIcon__izR_x",fileRectTextWrapper:"FileRect_fileRectTextWrapper__djdZQ"}},29998:function(e){e.exports={scoreDetailsContent:"ScoresDetail_scoreDetailsContent__M4Ixy"}},80647:function(e){e.exports={textBody:"SimTextWrite_textBody__HFVFn",footnotes:"SimTextWrite_footnotes__X4mhZ",codeHeader:"SimTextWrite_codeHeader___xVjD","sr-only":"SimTextWrite_sr-only__eTYPJ",textBody2:"SimTextWrite_textBody2__YEfPk"}}}]);